"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[319],{79431:(e,t,i)=>{i.d(t,{O:()=>s,j:()=>a});var n=i(30758);let a=function(e){return e[e.Errored=0]="Errored",e}({});const s=(0,n.createContext)({state:null,capturePlaybackError:()=>{}})},88147:(e,t,i)=>{i.d(t,{k:()=>u});var n=i(30758),a=i(93492),s=i(81899),r=i(56116),o=i(60102),l=i(27769),c=i(86070);const u=({id:e,children:t,targetURI:i,fadeOut:u=!1})=>{const d=(0,n.useCallback)((()=>{window.open((0,o.rw)(i).href)}),[i]),p={getTitle:()=>a.Ru.get("action-trigger.available-in-app-only"),getDescription:()=>a.Ru.get("action-trigger.listen-mixed-media-episode"),primaryButtonText:()=>a.Ru.get("action-trigger.button.get-app"),secondaryButtonText:()=>a.Ru.get("action-trigger.button.not-now"),isCTA:!0,intentPrimaryButton:"download-app",onLogInteraction:(0,r.W)(),shouldHideOnScroll:!0,fadeOut:u};return(0,c.jsx)(s.U,{className:l.A.container,id:e,onPrimaryButtonClick:d,options:p,children:t})}},2755:(e,t,i)=>{i.d(t,{A:()=>d});var n=i(30758),a=i(97500),s=i.n(a),r=i(72574),o=i(91984),l=i(86070);const c="div";class u extends n.Component{constructor(e){super(e),this.state={isDropTargetActive:!1},this.enterEventCount=0,this.leaveEventCount=0}componentDidMount(){document.body.addEventListener("dragend",this.handleDragEnd)}shouldComponentUpdate(e,t){return t.isDropTargetActive!==this.state.isDropTargetActive||e.children!==this.props.children||e.onDragEnter!==this.props.onDragEnter||e.onDragLeave!==this.props.onDragLeave||e.onDrop!==this.props.onDrop||e.types.length!==this.props.types.length||e.types.some(((e,t)=>e!==this.props.types[t]))}componentWillUnmount(){document.body.removeEventListener("dragend",this.handleDragEnd)}handleDragOver=e=>{this.getMatchingMimeTypes(e).length>0&&(e.preventDefault(),e.dataTransfer.dropEffect="copy")};handleDragEnter=e=>{this.enterEventCount&&!e.relatedTarget||(this.enterEventCount++,1===this.enterEventCount&&this.getMatchingMimeTypes(e).length>0&&(this.props.onDragEnter?.(e),this.setState({isDropTargetActive:!0})))};handleDragLeave=e=>{this.leaveEventCount++,this.leaveEventCount===this.enterEventCount&&this.getMatchingMimeTypes(e).length>0&&(this.enterEventCount=0,this.leaveEventCount=0,this.props.onDragLeave?.(e),this.setState({isDropTargetActive:!1}))};handleDragEnd=()=>{this.enterEventCount=0,this.leaveEventCount=0};handleDrop=e=>{if(0===this.getMatchingMimeTypes(e).length)return;const{onDragLeave:t,onDrop:i}=this.props,n=this.getMatchingDropData(e);this.enterEventCount=0,this.leaveEventCount=0;const a=e.defaultPrevented;e.preventDefault(),t?.(e),a||i(e,n),this.setState({isDropTargetActive:!1})};getMatchingMimeTypes(e){const t=this.props.types;return Array.from(e.dataTransfer.types).filter((e=>t.includes(e)))}getMatchingDropData(e){const t=this.getMatchingMimeTypes(e),i={};t.forEach((t=>{const n=e.dataTransfer.getData(t),a=0===t.indexOf("text/x-spotify"),s=a?n.split("\n"):[n];i[t]=s.map((e=>{if(a){const t=(0,r.o_h)(e);if(t)return t.toURI()}return e})).filter((e=>!!e))}));const n=e.dataTransfer.getData("text/plain");return i.all=n?n.split("\n").map((e=>{const t=(0,r.o_h)(e);return t?t.toURI():e})):[],i}render(){const{types:e=[],as:t=c,testId:i,className:n=""}=this.props,a=t,r=e.filter(Boolean).map((e=>`GlueDropTarget--${e.replace("text/x-spotify-","")}`));return(0,l.jsx)(a,{className:s()("GlueDropTarget",r,{"GlueDropTarget--active":this.state.isDropTargetActive},n),onDragOver:this.handleDragOver,onDragEnter:this.handleDragEnter,onDragLeave:this.handleDragLeave,onDrop:this.handleDrop,onContextMenu:this.props.onContextMenu,"data-testid":i,children:this.props.children})}}const d=e=>{const{supportsDragAndDrop:t}=(0,o._)();if(!t){const t=e.as??c;return(0,l.jsx)(t,{children:e.children})}return(0,l.jsx)(u,{...e})}},58566:(e,t,i)=>{i.d(t,{Y:()=>u});var n=i(97500),a=i.n(n),s=i(13505),r=i(77287);const o="dxnMpEuxRQ5Ml60ftDcz",l="jFPYamKaGvZv7JA45KCu";var c=i(86070);const u=({as:e,variant:t,className:i,charCount:n,isLoading:u})=>{const d=(0,r.h)("shimmer");return(0,c.jsx)(s.E,{ref:d,as:e,variant:t,className:a()(o,i,{[l]:u}),style:{width:n?`${n}ch`:void 0},tabIndex:-1,"aria-hidden":!0})}},89264:(e,t,i)=>{i.d(t,{l:()=>d});var n=i(97500),a=i.n(n);const s="JWYoNAyrIIdW30u4PSGE",r="es9mguuOfkp6pBe1Bjlw",o="JCFCfOY_6UEZZSOO2xrl",l="Js64TOfWtHksI6TQ6knT",c="n8tsDTs8wDH73kejYfXs";var u=i(86070);const d=({value:e,disabled:t,onSelected:i,id:n,className:d,condensed:p=!1,inputRef:m})=>(0,u.jsxs)("label",{className:a()(s,d),children:[(0,u.jsx)("input",{id:n,className:c,type:"checkbox",disabled:t,checked:e,onChange:e=>{const t=e.target.checked;i(t)},ref:m}),(0,u.jsx)("span",{className:a()(l,{[o]:p}),children:(0,u.jsx)("span",{className:a()(r,{[o]:p})})})]})},94423:(e,t,i)=>{i.d(t,{N:()=>g});var n=i(97500),a=i.n(n),s=i(30758),r=i(45143),o=i(5119);const l="nLNTsyonBwoRIzAv1AME",c="E4I5I7G2CfW32hLWZaqE",u="w4ZoklZWkrsyrVA34vI8";var d=i(86070);const p=({title:e,uri:t,className:i,onClick:n,position:l})=>{const p=(0,s.useCallback)((e=>{n?.(e,{uri:t,position:l})}),[n,l,t]);return(0,d.jsx)(o.N,{"aria-label":e,className:a()(c,u,i),to:t,onClick:p,children:(0,d.jsx)(r.v,{as:"span",children:e})})};function m(e){return!!e.uri&&!!e.title}const g=({topics:e,className:t,onClick:i})=>(0,d.jsx)("div",{className:a()(l,t),children:e.filter(m).map(((e,t)=>{const n=`${e.uri}-${t}`;return(0,d.jsx)(p,{title:e.title,uri:e.uri,position:t,onClick:i},n)}))})},69156:(e,t,i)=>{i.d(t,{$:()=>d});var n=i(30758),a=i(2164),s=i(70824);function r(e,t,i=!0,n=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,s.fk)(e))return;const r=e.querySelector('[tabindex="0"]');t===a.O.UP&&(0,s.MS)(r,o(e,r,a.O.UP,i,n)),t===a.O.DOWN&&(0,s.MS)(r,o(e,r,a.O.DOWN,i,n))}function o(e,t,i,n,r){const o=t.closest('li[role="listitem"]');if(!o)return t;let l=o,c=t;const u=Array.from(e.querySelectorAll('li[role="listitem"]')),d=u.indexOf(o);if(d<0)return t;if(i===a.O.UP){if(document.activeElement===e){if(l=u[u.length-1],r){const e=l?.querySelectorAll(s.nu);c=e[e.length-1]}else c=l?.querySelector(s.nu);return c??t}if(r){const e=Array.from(o.querySelectorAll(s.nu)),i=e.indexOf(t)-1;if(i>=0)return e[i]}let i=d-1;const a=()=>!c&&(!n&&i>=0||n&&d!==i);do{l=u[i];if(n&&!l&&(i=u.length-1,l=u[i]),r){const e=l?.querySelectorAll(s.nu);c=e?e[e.length-1]:null}else c=l?.querySelector(s.nu);i-=1}while(a())}else if(i===a.O.DOWN){if(document.activeElement===e)return l=u[0],c=l?.querySelector(s.nu),c??t;if(r){const e=Array.from(o.querySelectorAll(s.nu)),i=e.indexOf(t)+1;if(i<e.length)return e[i]}let i=d+1;const a=()=>{const e=!n&&i<=u.length;return!c&&(e||n&&d!==i)};do{l=u[i];n&&!l&&(i=0,l=u[i]),c=l?.querySelector(s.nu),i+=1}while(a())}return c||t}var l=i(89977),c=i(43365),u=i(86070);const d=(0,n.forwardRef)((({onKeyDown:e,children:t,circular:i=!0,allowsMultipleInteractiveChildrenInItem:o=!1,...d},p)=>{const m=(0,c.N)(p);(0,l.R)(m);const g=(0,n.useCallback)((t=>{m.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),document.documentElement.classList.remove("no-focus-outline")),"ArrowUp"===t.key&&r(m.current,a.O.UP,i,o),"ArrowDown"===t.key&&r(m.current,a.O.DOWN,i,o),e?.(t))}),[i,o,m,e]),v=(0,n.useCallback)((e=>{if(!m.current)return;const t=e.target,i=m.current.querySelector('[tabindex="0"]');t.closest('li[role="listitem"]')&&t!==i&&(0,s.MS)(i,t,{preventScroll:!0})}),[m]);return(0,u.jsx)("ul",{role:"list",ref:m,onKeyDown:g,onFocus:v,tabIndex:0,...d,children:t})}))},3408:(e,t,i)=>{i.d(t,{R:()=>m});var n=i(30758),a=i(2164),s=i(70824);function r(e,t,i=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,s.fk)(e))return;const n=e.querySelector('[tabindex="0"]');t===a.O.UP&&(0,s.MS)(n,o(e,n,a.O.UP,i)),t===a.O.DOWN&&(0,s.MS)(n,o(e,n,a.O.DOWN,i)),t===a.O.RIGHT&&(0,s.MS)(n,l(n,a.O.RIGHT,i)),t===a.O.LEFT&&(0,s.MS)(n,l(n,a.O.LEFT,i)),t===a.O.HOME&&(0,s.MS)(n,c(a.O.HOME,i)??n),t===a.O.END&&(0,s.MS)(n,c(a.O.END,i)??n)}function o(e,t,i,n=!1){const r=t.closest('li[role="row"]');if(!r)return t;let o=r;const c=Array.from(e.querySelectorAll('li[role="row"]')),u=Array.from(r.querySelectorAll(s.nu)),d=c.indexOf(r);if(d<0)return t;const p=(n&&t!==u[0]||!n&&t!==r)&&!(t instanceof HTMLLIElement);if(i===a.O.UP){if(document.activeElement===e){o=c[c.length-1];return(n?o.querySelector(s.nu):o)??t}if(p)return l(t,a.O.LEFT,n);let i=d-1;if(-1===i)return t;o=c[i],i-=1}else if(i===a.O.DOWN){if(document.activeElement===e){o=c[0];return(n?o.querySelector(s.nu):o)??t}if(p)return l(t,a.O.RIGHT,n);let i=d+1;if(i===c.length)return t;o=c[i],i+=1}return(n?o.querySelector(s.nu):o)??t}function l(e,t,i=!1){const n=e.closest('li[role="row"]');if(!n)return e;let r=e;const o=Array.from(n.querySelectorAll(s.nu)),l=o.indexOf(e);let c=0;if(t===a.O.RIGHT&&l-1!==o.length)c=l+1;else{if(t===a.O.LEFT&&-1===l)return n;if(t===a.O.LEFT&&0!==l)c=l-1;else if(t===a.O.LEFT&&0===l){return(i?n.querySelector(s.nu):n)??n}}return r=o.at(c),r??e}function c(e,t=!1){const{currentFocus:i,listEl:n}=function(){const e=document.activeElement,t=e?.closest("ul");return((0,a.I)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===i||null===n)return null;const r=i.closest('li[role="row"]');if(!r)return i;const o=Array.from(n.querySelectorAll('li[role="row"]')),l=Array.from(r.querySelectorAll(s.nu));if(o.indexOf(r)<0)return i;const c=t&&i===l[0]||!t&&i===r;if(e===a.O.HOME){if(c){return(t?o[0].querySelector(s.nu):o[0])??i}return(t?l[1]:l[0])??i}if(e===a.O.END){if(c){return(t?o[o.length-1].querySelector(s.nu):o[o.length-1])??i}return l[l.length-1]??i}return i}var u=i(89977),d=i(43365),p=i(86070);const m=(0,n.forwardRef)((({onKeyDown:e,children:t,firstInteractiveIsWrapper:i=!1,...o},l)=>{const c=(0,d.N)(l);(0,u.R)(c);const m=(0,n.useCallback)((t=>{c.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"Home"!==t.key&&"End"!==t.key||t.preventDefault(),"ArrowUp"!==t.key&&"ArrowDown"!==t.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===t.key&&r(c.current,a.O.UP,i),"ArrowDown"===t.key&&r(c.current,a.O.DOWN,i),"ArrowRight"===t.key&&r(c.current,a.O.RIGHT,i),"ArrowLeft"===t.key&&r(c.current,a.O.LEFT,i),"Home"===t.key&&r(c.current,a.O.HOME,i),"End"===t.key&&r(c.current,a.O.END,i),e?.(t))}),[i,c,e]),g=(0,n.useCallback)((e=>{if(!c.current)return;const t=e.target,i=c.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==i&&(0,s.MS)(i,t,{preventScroll:!0})}),[c]);return(0,p.jsx)("ul",{role:"treegrid",ref:c,onKeyDown:m,onFocus:g,tabIndex:0,...o,children:t})}))},64493:(e,t,i)=>{i.d(t,{W:()=>r});var n=i(30758),a=i(52956),s=i(86070);const r=({children:e,innerRef:t,reRunOnDOMUpdate:i=!1,...r})=>{const o=(0,n.useRef)(null),l=t??o;return(0,a.g)(l,i),(0,s.jsx)("li",{ref:l,"aria-expanded":"true","aria-level":1,role:"row",...r,children:e})}},56106:(e,t,i)=>{i.d(t,{R:()=>u});var n=i(30758),a=i(62411),s=i(72574),r=i(36002),o=i(2755),l=i(53575),c=i(86070);const u=({uri:e,owner:t,children:i})=>{const u=(0,a.wA)(),d=(0,a.d4)((e=>e.session.user?.id)),p=(0,s.tbX)(e),m=(0,n.useCallback)(((t,i)=>{const n=[...i[l.O[s.NQG.ALBUM]]||[],...i[l.O[s.NQG.TRACK]]||[],...i[l.O[s.NQG.LOCAL_TRACK]]||[],...i[l.O[s.NQG.EPISODE]]||[]];n.length>0&&u((0,r.io)(e,n))}),[u,e]);return p&&t===d?(0,c.jsx)(o.A,{types:[l.O[s.NQG.ALBUM],l.O[s.NQG.TRACK],l.O[s.NQG.EPISODE],l.O[s.NQG.LOCAL]],onDrop:m,testId:"cover-drop-target",children:i}):(0,c.jsx)(c.Fragment,{children:i})}},70196:(e,t,i)=>{i.d(t,{a:()=>y});var n=i(30758),a=i(97500),s=i.n(a),r=i(3118),o=i(93492),l=i(11930),c=i(6742),u=i(73581),d=i(4948),p=i(71338),m=i(3828),g=i(37117),v=i(39182),h=i(64640),x=i(86070);const y=({context:e,item:t,className:i,onClick:a=()=>{}})=>{const{dislikeEndpoint:y,shouldShowFeedbackControls:b}=(0,d.d)(e),f=(0,r.NC)(h.en),j=b&&!f,S=(0,u.$)(t,e),C=(0,m.i)(t.uri),{ban:N}=(0,c.N)(C,e.uri,e.metadata?.[v.W.CONTEXT_DESCRIPTION]),{enqueueSnackbar:w}=(0,p.d)(),k=e.metadata?.[v.W.CONTEXT_DESCRIPTION]??"",{setDislikeFeedback:E}=(0,g.I)({uri:t.uri,setFeedbackPath:y,contextUri:e.uri}),R=(0,n.useCallback)((async()=>{E(),w(o.Ru.get("feedback.hide-song",k)),a?.()}),[w,k,a,E]),I=(0,n.useCallback)((async()=>{C&&(N(),a?.())}),[C,N,a]);return j||S?(0,x.jsx)(l.O,{className:s()(i,{"control-button":!i,"control-button-feedback":!i}),isDisliked:!1,onClick:f?I:R}):null}},8014:(e,t,i)=>{i.d(t,{h:()=>S});var n=i(97500),a=i.n(n),s=i(75773),r=i(75341),o=i(10325),l=i(12367),c=i(4222),u=i(99202),d=i(85271),p=i(56106),m=i(33998),g=i(53575),v=i(23046),h=i(75784),x=i(82362),y=i(78172);const b="j9I5h3Z4o0fKNgI1fIjb",f="SwS3WdCPfdr1uOOksVEB";var j=i(86070);const S=({context:e,item:t,index:i,canSwitchVisuals:n=!1})=>{const{spec:S,logger:C}=(0,x.r)(r.J,{}),{draggable:N,onDragStart:w}=(0,g.P)(),{ref:k,inView:E}=(0,s.Wx)({threshold:.5,initialInView:!0});return(0,j.jsx)(j.Fragment,{children:(0,j.jsx)(l.h,{menu:(0,j.jsx)(u.W,{context:e,item:t,canSwitchVisuals:n}),children:(0,j.jsx)("div",{draggable:N&&((0,h.v)(t)||(0,v.p)(t)),onDragStart:e=>{w(e,{itemUris:[t.uri],dragLabelText:(0,m.r)(t)})},ref:k,children:(0,j.jsx)(p.R,{uri:e.uri,owner:e.metadata?.context_owner,children:(0,j.jsx)(d.e,{context:t.type===y.c.TRACK?t.album:e,item:t,index:i,isVisible:!0,onClick:()=>{C.logInteraction(S.coverArtFactory({uri:t.uri}).hitUiNavigate({destination:t.type===y.c.TRACK?t.album.uri:t.uri}))},adEventReason:o.c.COVER_ART,children:(0,j.jsx)(c.b,{className:a()(b,{[f]:E}),images:t.images??[],type:t.type,maxSize:384,desiredLabel:"xlarge"})})})})})})}},48926:(e,t,i)=>{i.d(t,{w:()=>m,X:()=>p});var n=i(30758),a=i(97500),s=i.n(a),r=i(13505),o=i(89913);const l="Ai_McRq9wJEYK21w8nX_",c="EVqc6HChiM9pEqBYAiUE",u="zZdI03asKaUCNlbhjDAv";var d=i(86070);const p=({action:e,children:t,className:i,icon:n,tooltipLabel:a})=>(0,d.jsxs)(r.E,{as:"div",variant:"bodyMediumBold",semanticColor:"textBase",className:s()(c,i),children:[n,a?(0,d.jsx)(o.Zp,{label:a,children:(0,d.jsx)("div",{className:u,children:t})}):(0,d.jsx)("div",{className:u,children:t}),e]}),m=(0,n.forwardRef)((({children:e,className:t,style:i,testId:n},a)=>{const r={};return n&&(r["data-testid"]=n),(0,d.jsx)("div",{ref:a,className:s()(l,t),style:i,...r,children:e})}))},54382:(e,t,i)=>{i.d(t,{F:()=>d});var n=i(30758),a=i(53177),s=i(21832),r=i(75097),o=i(39150),l=i(4298);const c="KrBYgWLGb5aRHjoD_prX";var u=i(86070);const d=(0,a.mc)((()=>{const{setVideoPlayerUIFlag:e}=(0,o.d)(),t=(0,s.XB)();return(0,n.useEffect)((()=>(t===r.Z.NowPlayingView&&e(l.n.npv,!0),()=>{e(l.n.npv,!1)})),[t,e]),(0,u.jsx)("div",{id:"VideoPlayerNpv_ReactPortal",className:c})}),{name:"NPVVideoContainer"})},90198:(e,t,i)=>{i.d(t,{PanelSection:()=>zv});var n=i(30758),a=i(94079),s=i(3118),r=i(38167),o=i(97500),l=i.n(o),c=i(13505),u=(i(45143),i(41223)),d=i(555),p=i(54106),m=i(75097);const g="Xq5xnpTOsoPxFR95BkTU",v="N7OMJte9T4Lv7DDX16ky",h="NJATxQbY2o4sl0BHxU3T";var x=i(86070);const y=({children:e,className:t,...i})=>(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(p.a,{panel:m.Z.Puffin,className:l()(v,t),...i}),e]});let b=function(e){return e.Overview="overview",e.ActivationIntro="activationIntro",e.ActivationDetection="activationDetection",e.ActivationSignifiers="activationSignifiers",e.Error="error",e.ManualSelection="manualSelection",e.AirpodsSelection="airpodsSelection",e.AudioQualitySettings="audioQualitySettings",e.AudioQualityDetails="audioQualityDetails",e.DiscoverLossless="discoverLossless",e.IncompatibleHeadphones="incompatibleHeadphones",e}({}),f=function(e){return e.GetStarted="getStarted",e.OnError="onError",e.SelectManually="selectManually",e.Continue="continue",e.Close="close",e.Activate="activate",e.SetupNewDevice="setupNewDevice",e.NotFound="notFound",e.Settings="settings",e.OnboardLossless="onboardLossless",e.Details="details",e.Airpods="airpods",e}({});var j=i(21832),S=i(64273);const C=[b.ActivationIntro,b.ActivationDetection,b.ActivationSignifiers,b.ManualSelection,b.AirpodsSelection],N=e=>{const t=(0,n.useRef)(!1),i=(0,S.z)(),a=(0,j.XB)();(0,n.useEffect)((()=>{const n=i.getState()?.isPaused,s=(r=e,o=a,C.includes(r)&&(o===m.Z.PuffinActivation||o===m.Z.PuffinActivationOverlay));var r,o;!s||n||t.current?!s&&n&&t.current&&(i.resume(),t.current=!1):(i.pause(),t.current=!0)}),[a,e,i])},w={[b.Overview]:{[f.GetStarted]:b.ActivationIntro,[f.OnError]:b.Error,[f.SelectManually]:b.ManualSelection,[f.Settings]:b.AudioQualitySettings,[f.OnboardLossless]:b.DiscoverLossless,[f.Details]:b.AudioQualityDetails},[b.ActivationIntro]:{[f.Close]:b.Overview,[f.OnError]:b.Error,[f.Continue]:b.ActivationDetection,[f.SelectManually]:b.ManualSelection,[f.Activate]:b.Overview},[b.ActivationDetection]:{[f.SelectManually]:b.ManualSelection,[f.Airpods]:b.AirpodsSelection,[f.Close]:b.Overview,[f.OnError]:b.Error,[f.Continue]:b.ActivationSignifiers},[b.ActivationSignifiers]:{[f.Close]:b.Overview,[f.OnError]:b.Error,[f.Activate]:b.Overview},[b.ManualSelection]:{[f.Continue]:b.ActivationSignifiers,[f.Close]:b.Overview,[f.OnError]:b.Error,[f.NotFound]:b.IncompatibleHeadphones},[b.AirpodsSelection]:{[f.Continue]:b.ActivationSignifiers,[f.Close]:b.Overview,[f.OnError]:b.Error,[f.NotFound]:b.Error},[b.DiscoverLossless]:{[f.Continue]:b.Overview},[b.AudioQualitySettings]:{},[b.AudioQualityDetails]:{},[b.Error]:{},[b.IncompatibleHeadphones]:{[f.Close]:b.Overview,[f.OnError]:b.Error,[f.Continue]:b.Overview}},k=(0,n.createContext)({currentView:b.Overview,viewTransitions:w,setCurrentView:()=>{},toPreviousView:()=>{},viewOptions:null}),E=({children:e})=>{const t=(0,j.XB)(),[i,a]=(0,n.useState)((()=>(e=>[{view:e===m.Z.PuffinActivation||e===m.Z.PuffinActivationOverlay?b.ActivationDetection:b.Overview,options:{}}])(t))),s=(0,n.useCallback)(((e,t)=>{e===b.Overview?a([{view:e,options:t??{}}]):a((i=>[...i,{view:e,options:t??{}}]))}),[]),r=(0,n.useCallback)((()=>{a((e=>e.slice(0,-1)))}),[]);if(0===i.length)throw new Error("Puffin view state stack should never be empty");const{view:o,options:l}=i.at(-1);N(o);const c=(0,n.useMemo)((()=>({currentView:o,viewOptions:l,setCurrentView:s,toPreviousView:r,viewTransitions:w})),[o,s,r,l]);return(0,x.jsx)(k.Provider,{value:c,children:e})},R="EqLKhgGIINyN_LINFjl1",I="OyIY0v1_h3UWgLlxyPHL",T=({resetError:e})=>{const{toPreviousView:t,setCurrentView:i}=(0,n.useContext)(k);return(0,x.jsx)(y,{onBack:()=>{t()},children:(0,x.jsxs)("div",{className:R,children:[(0,x.jsx)(u.b,{size:"xlarge",semanticColor:"textBase"}),(0,x.jsxs)("div",{className:I,children:[(0,x.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:"Something went wrong"}),(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:"We couldn’t turn on your headphone tools."})]}),(0,x.jsx)(d.$,{colorSet:"invertedLight",size:"medium",onClick:()=>{e?.(),i(b.Overview)},children:"Retry"})]})})},A=({resetError:e})=>(0,x.jsx)(T,{resetError:e});var L=i(51316),O=i(62411),D=i(93492),P=i(13982),U=i(55848),_=i(98538),F=i(57724),B=i(73097),M=i(58225);const H=()=>{const e=(0,O.d4)((e=>e.platform.isDesktop)),t=(0,U.b)(),i=(0,P.lS)(t),{isPlayingRemotely:a,remoteDeviceName:s,isConnected:r}=(0,F.v)((e=>{const t=(0,_.V)(e);return{isPlayingRemotely:t.isPlayingRemotely,remoteDeviceName:t.remoteDevice?.name,isConnected:t.connectionStatus===B.zP.CONNECTED}}),M.a),o=(0,n.useMemo)((()=>e?D.Ru.get("web-player.connect.device-picker.this-computer"):D.Ru.get("web-player.connect.device-picker.this-web-browser")),[e]),l=(0,n.useMemo)((()=>{if(t)return e?D.Ru.get("web-player.connect.device-picker.from-this-computer",{device_name:t.name}):D.Ru.get("web-player.connect.device-picker.from-this-web-browser",{device_name:t.name})}),[e,t]);if(s&&a&&r)return{deviceName:s,playingFrom:s};if(t?.transportType===P.Yg.AIRPLAY||t?.transportType===P.Yg.BLUETOOTH&&t?.terminalType===P.FI.SPEAKERS)return{deviceName:t?.name,playingFrom:o,formattedDeviceName:l};if(i){if(t?.transportType===P.Yg.BUILT_IN||t?.transportType===P.Yg.USB)return{deviceName:D.Ru.get("web-player.puffin.wired-connection"),playingFrom:o};if(t?.name&&t?.terminalType===P.FI.HEADPHONES)return{deviceName:t?.name,playingFrom:o,formattedDeviceName:l}}return{deviceName:o,playingFrom:o}},V=()=>{const{deviceName:e}=H();return(0,x.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:e})};var q=i(12431),z=i(50496),Q=i(56424),Y=i(77313);const G=({onClick:e})=>{const{playingFrom:t}=H(),i=(0,Q.t)(),[{data:n}]=(0,Y.K)(i.quality.streamingQuality);return void 0===n?null:(0,x.jsx)(q.v,{id:"qualitySetting",variant:"naked",title:D.Ru.get("desktop.settings.streamingQuality"),leading:(0,x.jsx)(z.s,{size:"small"}),subtitle:t,onClick:e,padding:"0px 12px"})};var W=i(807),K=i(88599),Z=i(82220),X=i(14109);const J=({title:e,description:t,confirmButtonText:i="OK",cancelButtonText:a="Cancel",onConfirm:s,onClose:r})=>{const{setCurrentView:o}=(0,n.useContext)(k),l=(0,j._Y)(),[c,u]=(0,n.useState)(!1),d=(0,n.useRef)(!1);return{dialog:c?(0,x.jsx)(Z.T,{onClose:()=>{u(!1),r?.()},onConfirm:()=>{s(),d.current?l(X.$S.PUFFIN_BUTTON_CLICK):o(b.Overview)},titleText:e,"aria-label":e,descriptionText:t,cancelText:a,confirmText:i}):null,triggerDialog:(e=!1)=>{d.current=e,u(!0)}}};var $=i(39092),ee=i(50210);const te=()=>{const e=(0,ee.N)();return{setCurrentDevice:(0,n.useCallback)(((t,i)=>{e.setCurrentDevice(t,i)}),[e]),removeCurrentDevice:(0,n.useCallback)((t=>{e.removeCurrentDevice(t)}),[e])}};var ie=i(99802);const ne=({spec:e})=>{const t=(0,ie.s)(),i=(0,n.useRef)(null),{removeCurrentDevice:a}=te(),{deviceFilterState:s}=(0,$.j)();(0,K.X)("RESET_HEADPHONES_BUTTON",i);const{triggerDialog:r,dialog:o}=J({title:D.Ru.get("web-player.puffin.reset-headphones.dialog.title"),description:D.Ru.get("web-player.puffin.reset-headphones.dialog.subtitle"),confirmButtonText:D.Ru.get("web-player.puffin.reset-headphones.dialog.confirm"),onConfirm:()=>{a(!0),(0,K.I)("SETUP_HEADPHONES_BUTTON")},onClose:()=>{(0,K.I)("RESET_HEADPHONES_BUTTON")}});return s.isOnboarded?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(q.v,{id:"resetHeadphonesButton",ref:i,variant:"naked",title:D.Ru.get("web-player.puffin.reset-headphones.menu-item"),leading:(0,x.jsx)(W.x,{size:"small"}),onClick:i=>{t.logInteraction(e.resetHeadphonesButtonFactory().hitUiReveal()),i.preventDefault(),r(!1)},padding:"0px 12px"}),o]}):null};var ae=i(56289);const se=({isPlayingRemotely:e,spec:t})=>{const i=(0,ie.s)(),{setCurrentView:a,viewTransitions:s}=(0,n.useContext)(k),r=s[b.Overview],o=(0,ae.j)();return(0,x.jsxs)("div",{children:[o&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(G,{onClick:()=>{i.logInteraction(t.qualitySettingsButtonFactory().hitUiReveal()),a(r.settings)}})}),!e&&(0,x.jsx)(ne,{spec:t})]})};var re=i(21974),oe=i(61e3);const le="k4f1o0jOMnxv6OS8dC7p",ce="PYLIWbzDyJA6Mbh2EQQg",ue="r3oTh3jKov0cW3m5qF1N",de=({title:e,subtitle:t,buttonLabel:i,onClick:a,dismissButtonLabel:s,onDismissClick:r,focusTransferKey:o=null})=>{const l=(0,n.useRef)(null);return(0,K.X)(o,l),(0,x.jsx)(q.v,{variant:"naked",size:"lg",id:"getStarted",className:le,title:e,subtitle:t,paddingBlockStart:"16px",paddingBlockEnd:"16px",footer:(0,x.jsxs)("div",{className:ce,children:[(0,x.jsx)(re.n,{size:"small",onClick:a,ref:l,children:(0,x.jsx)(c.E,{variant:"bodySmallBold",children:i})}),s&&r&&(0,x.jsx)(oe.H,{className:ue,size:"small",onClick:r,children:(0,x.jsx)(c.E,{variant:"bodySmallBold",children:s})})]})})};var pe=i(50154),me=i(75635),ge=i(39142);const ve=e=>{switch(e){case ge.Yn.LOSSLESS_24:return{title:D.Ru.get("web-player.pigeon.audio-quality.lossless"),titleFull:D.Ru.get("web-player.pigeon.audio-quality.lossless-24.label"),bitrateLabel:D.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate"),bitrateDetails:[D.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-1"),D.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-2")]};case ge.Yn.LOSSLESS:return{title:D.Ru.get("web-player.pigeon.audio-quality.lossless"),titleFull:D.Ru.get("web-player.pigeon.audio-quality.lossless-16.label"),bitrateLabel:D.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate"),bitrateDetails:[D.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate-details-1"),D.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate-details-2")]};case ge.Yn.VERY_HIGH:return{title:D.Ru.get("web-player.pigeon.audio-quality.very-high.label"),bitrateLabel:D.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate"),bitrateDetails:[D.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate-details")]};case ge.Yn.HIGH:return{title:D.Ru.get("web-player.pigeon.audio-quality.high.label"),bitrateLabel:D.Ru.get("web-player.pigeon.audio-quality.high.bitrate"),bitrateDetails:[D.Ru.get("web-player.pigeon.audio-quality.high.bitrate-details")]};case ge.Yn.NORMAL:return{title:D.Ru.get("web-player.pigeon.audio-quality.normal.label"),bitrateLabel:D.Ru.get("web-player.pigeon.audio-quality.normal.bitrate"),bitrateDetails:[D.Ru.get("web-player.pigeon.audio-quality.normal.bitrate-details")]};case ge.Yn.LOW:return{title:D.Ru.get("web-player.pigeon.audio-quality.low.label"),bitrateLabel:D.Ru.get("web-player.pigeon.audio-quality.low.bitrate"),bitrateDetails:[D.Ru.get("web-player.pigeon.audio-quality.low.bitrate-details")]};case ge.Yn.UNKNOWN:default:return{title:D.Ru.get("web-player.pigeon.audio-quality.unknown.label"),bitrateLabel:null}}},he="SsVVyvM7DIniTIOjJFuM",xe="dHDe0DUG4UkEeM8p5PEa",ye="T49oF8shvnsadykMrogA",be=({quality:e,onClick:t})=>{const i=ve(e),n=[ge.Yn.VERY_HIGH,ge.Yn.HIGH,ge.Yn.NORMAL,ge.Yn.LOW];e===ge.Yn.LOSSLESS_24?n.unshift(ge.Yn.LOSSLESS_24):n.unshift(ge.Yn.LOSSLESS);const a=e===ge.Yn.UNKNOWN?"textBase":"textBrightAccent";return(0,x.jsxs)(pe.a,{as:"button",variant:"tinted",className:he,onClick:t,children:[(0,x.jsx)(q.v,{id:"quality",size:"lg",pretitle:D.Ru.get("web-player.pigeon.overview-card.title"),titleGap:me.v4,title:(0,x.jsx)(c.E,{variant:"titleSmall",semanticColor:a,children:i.titleFull||i.title}),paddingInlineStart:"0px",paddingInlineEnd:"0px",variant:"naked"}),(0,x.jsx)("div",{children:n.map(((t,i)=>{const n=ve(t),a=t===e,s=a?"textBrightAccent":"textSubdued";return(0,x.jsx)(q.v,{id:n.title,size:"sm",paddingInlineStart:"0px",paddingInlineEnd:"0px",media:(0,x.jsx)("div",{className:l()(xe,{[ye]:a})}),title:(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:s,children:n.title}),trailing:(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:s,children:n.bitrateLabel}),variant:"naked"},i)}))})]})};var fe=i(72288);const je=()=>(0,fe.x)("onboarding-dismissed:lossless",!1);var Se=i(4272);const Ce=({spec:e})=>{const t=(0,ie.s)(),{setCurrentView:i,viewTransitions:a}=(0,n.useContext)(k),s=a[b.Overview],r=(0,ae.j)(),o=(0,Se.A)(),[l]=je();return r?(0,x.jsxs)(x.Fragment,{children:[!l&&(0,x.jsx)(de,{title:D.Ru.get("web-player.pigeon.get-started.title"),subtitle:D.Ru.get("web-player.pigeon.get-started.subtitle"),buttonLabel:D.Ru.get("web-player.pigeon.get-started.button"),onClick:()=>{t.logInteraction(e.losslessOnboardingButtonFactory().hitUiReveal()),i(s.onboardLossless)}}),(0,x.jsx)(be,{quality:o,onClick:()=>{t.logInteraction(e.audioQualityCardFactory().hitUiReveal()),i(s.details)}})]}):null},Ne=({isError:e})=>e?(0,x.jsx)(q.v,{id:"filterError",variant:"tinted",paddingBlockStart:"12px",paddingBlockEnd:"12px",paddingInlineStart:"16px",paddingInlineEnd:"16px",leading:(0,x.jsx)(u.b,{semanticColor:"textSubdued",size:"small"}),title:D.Ru.get("web-player.puffin.error-troubleshooting")}):null;var we=i(55158),ke=i(89264);const Ee="jvVll3Ia4Nrq9Fsd78Fo",Re="d_HhOkLKxYpYKpP2gQy7",Ie="fLp9X9keK84drMHcmOFW",Te=({currentDeviceState:e,spec:t})=>{const i=(0,ie.s)(),a=(0,n.useCallback)((()=>{i.logInteraction(t.optimizeToggleFactory().hitUiElementToggle()),e.toggleTuneHeadphones?.()}),[e,i,t]),s=null!==e.toggleTuneHeadphones,{specificRestricted:r,processingCapabilitiesRestricted:o}=e.contentRestrictions,l=(0,n.useMemo)((()=>r||o?D.Ru.get("web-player.puffin.enhancement-unavailable.content-restriction"):(s||D.Ru.get("web-player.puffin.listening-with.filters.specific-subtitle-unavailable"),D.Ru.get("web-player.puffin.listening-with.filters.specific-subtitle"))),[s,o,r]);return(0,x.jsx)("div",{className:Ee,children:(0,x.jsx)(q.v,{variant:"naked",size:"md",id:"headphones",className:Re,disabled:r||o||!s,title:(0,x.jsx)(we.d,{className:Ie,children:D.Ru.get("web-player.puffin.listening-with.filters.specific-title")}),subtitle:l,trailing:(0,x.jsx)(ke.l,{id:"headphoneTunes",onSelected:a,disabled:r||o,value:e.currentState.specificEnabled,condensed:!0})})})},Ae="bLEXMWOER6nmfeLfBRIN",Le=({spec:e})=>{const t=(0,ie.s)(),{setCurrentView:i,viewTransitions:a}=(0,n.useContext)(k),s=a[b.Overview],{deviceFilterState:r}=(0,$.j)(),o=r.isOnboarded;return(0,x.jsx)(q.v,{id:"listeningWith",variant:"tinted",pretitle:D.Ru.get("web-player.puffin.listening-with.model"),horizontalGap:"0px",paddingBlockStart:"12px",paddingBlockEnd:"12px",paddingInlineStart:"16px",paddingInlineEnd:"16px",className:Ae,trailing:(0,x.jsx)(re.n,{size:"small",onClick:()=>{t.logInteraction(e.changeModelButtonFactory().hitUiReveal()),i(s.selectManually)},children:(0,x.jsx)(c.E,{variant:"bodySmallBold",children:D.Ru.get("web-player.puffin.listening-with.change-model")})}),footer:o&&(0,x.jsx)(Te,{currentDeviceState:r,spec:e}),title:(0,x.jsx)(we.d,{lineClamp:2,children:r.headphoneDevice?.deviceName??D.Ru.get("web-player.puffin.listening-with.placeholder-model")})})},Oe=({spec:e})=>{const{setCurrentView:t,viewTransitions:i}=(0,n.useContext)(k),a=i[b.Overview],{deviceFilterState:s,isMaybeHeadphoneDevice:r,isError:o,isLoading:l}=(0,$.j)(),c=(0,ie.s)(),{triggerDialog:u,dialog:d,isHiddenByUser:p}=(()=>{const{deviceFilterState:e}=(0,$.j)(),t=e.audioDevice?.id,[i,a]=(0,fe.x)("puffin-hide-get-started",[]),s=(0,n.useMemo)((()=>!!t&&i.includes(t)),[t,i]),r=(0,n.useCallback)((()=>{if(t){const e=[...i,t].slice(-50);a(e)}}),[t,a,i]);return{...J({title:D.Ru.get("web-player.puffin.dismiss-get-started.title"),description:D.Ru.get("web-player.puffin.dismiss-get-started.body"),confirmButtonText:D.Ru.get("hifi.yes"),cancelButtonText:D.Ru.get("web-player.puffin.dismiss-get-started.cancel"),onConfirm:()=>{r()}}),isHiddenByUser:s}})(),m=s.isOnboarded,g=r&&!m&&!p,v=(0,n.useCallback)((()=>{c.logInteraction(e.setupHeadphonesButtonFactory().hitUiReveal()),s.audioDevice?t(a.getStarted):t(a.selectManually,{showDialogOnBack:!0})}),[c,e,s.audioDevice,t,a.getStarted,a.selectManually]);return r?o||l?(0,x.jsx)(Ne,{isError:o}):(0,x.jsxs)(x.Fragment,{children:[d,m&&(0,x.jsx)(Le,{spec:e}),g&&(0,x.jsx)(de,{title:D.Ru.get("web-player.puffin.get-started.title"),subtitle:D.Ru.get("web-player.puffin.get-started.subtitle"),buttonLabel:D.Ru.get("web-player.puffin.upsell.enhance-headphones.confirm"),onClick:v,dismissButtonLabel:D.Ru.get("web-player.puffin.upsell.enhance-headphones.not-headphones"),onDismissClick:u,focusTransferKey:"SETUP_HEADPHONES_BUTTON"})]}):null};var De=i(56721),Pe=i(82362);const Ue="TJAbLKl8aSWZqWk4EFkk",_e=X.$S.DEVICE_PICKER_BUTTON_CLICK,Fe=()=>{const e=(0,_.l)(),{panelSend:t}=(0,j.AI)(m.Z.DevicePicker,m.Z.DevicePickerOverlay),i=(0,ae.j)(),a=(0,De.v)(),{spec:s,logger:r}=(0,Pe.r)(L.R,{}),o=!e&&a,l=(0,n.useCallback)((()=>{r.logInteraction(s.backButtonFactory().hitUiReveal()),t(_e)}),[r,t,s]);return(0,x.jsx)(y,{onBack:l,onClose:()=>{r.logInteraction(s.closeButtonFactory().hitUiHide())},children:(0,x.jsxs)("div",{className:Ue,children:[(0,x.jsx)(V,{}),o&&(0,x.jsx)(Oe,{spec:s}),i&&(0,x.jsx)(Ce,{spec:s}),(0,x.jsx)(se,{isPlayingRemotely:e,spec:s})]})})};var Be=i(73560),Me=i(23857),He=i(8225),Ve=i(5119);let qe=function(e){return e.INFO="INFO",e.ERROR="ERROR",e}({});function ze(e){return e.type===qe.ERROR}function Qe(e){return e.type===qe.INFO}var Ye=i(28019);const Ge="UPAv6TbmqM79jDLYgiad",We=({card:{type:e,id:t,title:i,text:n}})=>(0,x.jsx)(q.v,{id:t,className:Ge,variant:"tinted",leading:e===qe.ERROR?(0,x.jsx)(He.Z,{size:"small",semanticColor:"textWarning"}):null,title:(0,x.jsx)(we.d,{variant:"bodyMedium",children:i}),body:"string"==typeof n?(0,x.jsx)(Ye.y,{LinkComponent:Ve.N,source:n,splitter:/\|/g,semanticColor:"textSubdued",variant:"mesto"}):n});var Ke=i(30320),Ze=i(22915);const Xe="GdqxZ88oz8MtwHaBnwgb",Je="Q4TWj1C8EEkH_beo9jI8",$e="slKZiyNh_zlnTSEo8VG7",et="ichtbB4QY2SKusRio97a",tt="xTMuOBwhiZlpUZtnm0M6";let it=function(e){return e[e.PASSING=0]="PASSING",e[e.NEEDS_ATTENTION=1]="NEEDS_ATTENTION",e[e.UNKNOWN=2]="UNKNOWN",e}({});const nt=({metric:e,label:t,severity:i})=>(0,x.jsxs)("div",{className:l()(Xe,{[et]:i===it.UNKNOWN}),children:[(()=>{switch(i){case it.PASSING:return(0,x.jsx)(Ke.k,{size:"large",className:Je,semanticColor:"textBase"});case it.NEEDS_ATTENTION:return(0,x.jsx)(He.Z,{size:"large",className:$e,semanticColor:"textWarning"});case it.UNKNOWN:return(0,x.jsx)(Ze.N,{size:"large",className:$e,semanticColor:"textBase"});default:return null}})(),(0,x.jsxs)("div",{className:tt,children:[(0,x.jsx)(c.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",children:e}),(0,x.jsx)(c.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:t})]})]});let at=function(e){return e.bitrateLevel="bitrateLevel",e.targetBitrateLevel="targetBitrateLevel",e.targetBitrateAvailable="targetBitrateAvailable",e.strategy="strategy",e.isLocal="isLocal",e.autoAdjust="autoAdjust",e.deviceSupported="deviceSupported",e}({}),st=function(e){return e.Bluetooth_Degrades_Lossless="Bluetooth_Degrades_Lossless",e.Connect_Explanation="Connect_Explanation",e.Default_To_Very_High="Default_To_Very_High",e.Need_To_Redownload="Need_To_Redownload",e.Opt_Out_Of_Downgrade="Opt_Out_Of_Downgrade",e.Poor_Bandwidth_Interferes="Poor_Bandwidth_Interferes",e.Lossless_Unavailable="Lossless_Unavailable",e.Listen_Offline="Listen_Offline",e.Update_Setting="Update_Setting",e}({}),rt=function(e){return e[e.Internet=0]="Internet",e[e.Spotify_Connect=1]="Spotify_Connect",e[e.Downloads=2]="Downloads",e}({}),ot=function(e){return e.Good="good",e.Poor="poor",e.Unknown="unknown",e.Unavailable="unavailable",e}({});const lt=[{criteria:{online:!0,autoAdjust:!1,trackLosslessAvailable:!0},result:st.Opt_Out_Of_Downgrade},{criteria:{online:!0,streamingLossless:!1,targetingLossless:!0,deviceCompatible:!0,internetBandwidth:ot.Poor,trackLosslessAvailable:!0},result:st.Poor_Bandwidth_Interferes},{criteria:{online:!0,autoAdjust:!0,streamingLossless:!1,targetingLossless:!1,deviceCompatible:!0,internetBandwidth:ot.Poor,trackLosslessAvailable:!0},result:st.Default_To_Very_High},{criteria:{online:!0,streamingLossless:!1,bitrateStrategy:[ge.ZT.OFFLINED_FILE],trackLosslessAvailable:!0},result:st.Need_To_Redownload},{criteria:{online:!0,targetingLossless:!0,trackLosslessAvailable:!1},result:st.Lossless_Unavailable},{criteria:{online:!0,isSetStreamingQualityLessThanLossless:!0},result:st.Update_Setting}];const ct=[{criteria:{bitrateLevel:[ge.Yn.LOSSLESS],strategy:[ge.ZT.BEST_MATCHING,ge.ZT.BACKEND_ADVISED,ge.ZT.CACHED_FILE],deviceSupported:!0,autoAdjust:!0},result:ot.Good},{criteria:{bitrateLevel:[ge.Yn.LOW,ge.Yn.NORMAL,ge.Yn.HIGH,ge.Yn.VERY_HIGH],targetBitrateLevel:[ge.Yn.LOW,ge.Yn.NORMAL,ge.Yn.HIGH,ge.Yn.VERY_HIGH],strategy:[ge.ZT.BEST_MATCHING,ge.ZT.CACHED_FILE],deviceSupported:!0,autoAdjust:!0},result:ot.Good},{criteria:{bitrateLevel:[ge.Yn.LOW,ge.Yn.NORMAL,ge.Yn.HIGH,ge.Yn.VERY_HIGH],targetBitrateLevel:[ge.Yn.LOSSLESS],strategy:[ge.ZT.BEST_MATCHING,ge.ZT.BACKEND_ADVISED,ge.ZT.CACHED_FILE],targetBitrateAvailable:!0,deviceSupported:!0,autoAdjust:!0},result:ot.Poor},{criteria:{bitrateLevel:[ge.Yn.LOW,ge.Yn.NORMAL,ge.Yn.HIGH,ge.Yn.VERY_HIGH],targetBitrateLevel:[ge.Yn.LOW,ge.Yn.NORMAL,ge.Yn.HIGH,ge.Yn.VERY_HIGH],strategy:[ge.ZT.BACKEND_ADVISED],deviceSupported:!0,autoAdjust:!0},result:ot.Poor},{criteria:{bitrateLevel:[ge.Yn.LOW,ge.Yn.NORMAL,ge.Yn.HIGH,ge.Yn.VERY_HIGH],targetBitrateLevel:[ge.Yn.LOSSLESS],targetBitrateAvailable:!1,deviceSupported:!0,autoAdjust:!0},result:ot.Unavailable},{criteria:{autoAdjust:!1},result:ot.Unknown},{criteria:{deviceSupported:!1},result:ot.Unknown}],ut=[{criteria:{bitrateLevel:[ge.Yn.LOSSLESS,ge.Yn.LOSSLESS_24],deviceSupported:!0},result:!0},{criteria:{bitrateLevel:[ge.Yn.UNKNOWN,ge.Yn.LOW,ge.Yn.NORMAL,ge.Yn.HIGH,ge.Yn.VERY_HIGH],strategy:[ge.ZT.BEST_MATCHING,ge.ZT.BACKEND_ADVISED,ge.ZT.CACHED_FILE],targetBitrateLevel:[ge.Yn.LOSSLESS,ge.Yn.LOSSLESS_24],targetBitrateAvailable:!0,deviceSupported:!0},result:!0},{criteria:{bitrateLevel:[ge.Yn.UNKNOWN,ge.Yn.LOW,ge.Yn.NORMAL,ge.Yn.HIGH,ge.Yn.VERY_HIGH],strategy:[ge.ZT.OFFLINED_FILE],targetBitrateLevel:[ge.Yn.LOSSLESS,ge.Yn.LOSSLESS_24],targetBitrateAvailable:!0,deviceSupported:!0},result:!1},{criteria:{strategy:[ge.ZT.BEST_MATCHING,ge.ZT.BACKEND_ADVISED,ge.ZT.CACHED_FILE],targetBitrateAvailable:!0,deviceSupported:!0},result:!1},{criteria:{deviceSupported:!1},result:!0},{criteria:{bitrateLevel:[ge.Yn.UNKNOWN,ge.Yn.LOW,ge.Yn.NORMAL,ge.Yn.HIGH,ge.Yn.VERY_HIGH],targetBitrateLevel:[ge.Yn.LOSSLESS,ge.Yn.LOSSLESS_24],targetBitrateAvailable:!1,deviceSupported:!0},result:!0},{criteria:{targetBitrateLevel:[ge.Yn.LOSSLESS,ge.Yn.LOSSLESS_24]},result:!0}],dt=(e,t)=>{for(const[i,n]of Object.entries(t.criteria))if(i===at.bitrateLevel){if(!n.includes(e[at.bitrateLevel]))return!1}else if(i===at.targetBitrateLevel){if(!n.includes(e[at.targetBitrateLevel]))return!1}else if(i===at.strategy){if(!n.includes(e[at.strategy]))return!1}else{if(!n===e[i])return!1}return!0},pt=e=>[ge.Yn.LOSSLESS,ge.Yn.LOSSLESS_24].includes(e);var mt=i(81335),gt=i(73197),vt=i(48975),ht=i(34668);const xt={losslessStatus:ge.p4.NONE,bitrateLevel:ge.Yn.UNKNOWN,targetBitrateLevel:ge.Yn.UNKNOWN,targetBitrateAvailable:!1,strategy:ge.ZT.UNKNOWN};function yt(){const{losslessStatus:e,bitrateLevel:t,targetBitrateLevel:i,targetBitrateAvailable:a,strategy:s}=(0,ht.o)((e=>({...xt,...e?.playbackQuality??null})),M.a),r=(0,_.l)(),o=(0,Q.t)(),[{data:l}]=(0,Y.K)(o.quality.streamingQuality),[{data:c}]=(0,Y.K)(o.quality.remoteQuality),u=(0,F.v)((e=>e.activeDevice)),d=(0,n.useMemo)((()=>null!==u&&u.losslessSupport?u.losslessSupport:{fullySupported:!1,deviceSupported:!1,userEligible:!1}),[u]).deviceSupported,{settings:{values:p}}=(0,gt.t0)(),m=p["audio.allow_downgrade"],g=u?.isLocal||!1;let v;v=g?s===ge.ZT.CACHED_FILE||s===ge.ZT.OFFLINED_FILE?rt.Downloads:rt.Internet:rt.Spotify_Connect;const h={bitrateLevel:t,targetBitrateLevel:i,targetBitrateAvailable:a,strategy:s,isLocal:g,deviceSupported:d,autoAdjust:m},x=(e=>{for(const t of ut)if(dt(e,t))return t.result;return!(!pt(e[at.bitrateLevel])&&!pt(e[at.targetBitrateLevel]))})(h),y=(e=>{for(const t of ct)if(dt(e,t))return t.result;return e[at.strategy]===ge.ZT.BACKEND_ADVISED?ot.Poor:ot.Good})(h),b=(0,vt.n)(),f=pt(i)&&a,j=pt(t),S=pt(i),C=r?c?.streamingQuality:l,N=function({online:e,streamingLossless:t,targetingLossless:i,strategy:n,trackLosslessAvailable:a,autoAdjust:s,internetBandwidth:r,losslessCompatibleDevice:o,isLocal:l,isSetStreamingQualityLessThanLossless:c}){const u=[st.Listen_Offline,st.Connect_Explanation,st.Bluetooth_Degrades_Lossless];for(const d of lt){const{criteria:p,result:m}=d;p.online===e&&(void 0!==p.autoAdjust&&p.autoAdjust!==s||void 0!==p.streamingLossless&&p.streamingLossless!==t||void 0!==p.targetingLossless&&p.targetingLossless!==i||void 0!==p.deviceCompatible&&p.deviceCompatible!==o||void 0!==p.bitrateStrategy&&!1===l||(void 0===p.bitrateStrategy||void 0!==n&&p.bitrateStrategy.includes(n))&&(void 0!==p.internetBandwidth&&p.internetBandwidth!==r||void 0!==p.trackLosslessAvailable&&p.trackLosslessAvailable!==a||void 0!==p.isSetStreamingQualityLessThanLossless&&p.isSetStreamingQualityLessThanLossless!==c||u.push(m)))}return u}({online:b,streamingLossless:j,targetingLossless:S,strategy:s,trackLosslessAvailable:f,autoAdjust:m,internetBandwidth:y,losslessCompatibleDevice:d,isLocal:g,isSetStreamingQualityLessThanLossless:!!C&&C<mt.a1.LOSSLESS&&C>mt.a1.AUTOMATIC});return{losslessStatus:e,bitrateLevel:t,flags:N,internetBandwidth:y,playingVia:{channelIsLossless:x,channel:v},losslessCompatibleDevice:d}}const bt=()=>{const{losslessCompatibleDevice:e,playingVia:t,internetBandwidth:i}=yt();return(0,x.jsxs)("div",{children:[(0,x.jsx)(nt,{metric:D.Ru.get("web-player.pigeon.audio-quality.lossless-compatible-device"),label:e?D.Ru.get("hifi.yes"):D.Ru.get("hifi.no"),severity:e?it.PASSING:it.NEEDS_ATTENTION}),(0,x.jsx)(nt,{metric:D.Ru.get("hifi.playingVia"),label:(()=>{const{channel:e}=t;switch(e){case rt.Downloads:return D.Ru.get("local-files.source.downloads");case rt.Internet:return D.Ru.get("hifi.networkConnection");case rt.Spotify_Connect:return D.Ru.get("spotify-connect");default:return""}})(),severity:t.channelIsLossless?it.PASSING:it.NEEDS_ATTENTION}),(0,x.jsx)(nt,{metric:D.Ru.get("hifi.internetBandwidth"),label:(()=>{switch(i){case ot.Good:return D.Ru.get("hifi.good");case ot.Poor:return D.Ru.get("hifi.poor");case ot.Unknown:default:return D.Ru.get("hifi.unknown")}})(),severity:(()=>{switch(i){case ot.Good:return it.PASSING;case ot.Poor:return it.NEEDS_ATTENTION;case ot.Unknown:default:return it.UNKNOWN}})()})]})};var ft=i(79264);const jt={[st.Listen_Offline]:()=>({type:"info",title:D.Ru.get("web-player.pigeon.help-cards.listen-offline.title"),message:D.Ru.get("web-player.pigeon.help-cards.listen-offline.body")}),[st.Connect_Explanation]:()=>({type:"info",title:D.Ru.get("web-player.pigeon.help-cards.connect-explanation.title"),message:(0,x.jsx)(c.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:D.Ru.get("web-player.pigeon.help-cards.connect-explanation.body",(0,x.jsx)(ft.g,{size:"xsmall",alignmentBaseline:"baseline"}))})}),[st.Bluetooth_Degrades_Lossless]:()=>({type:"info",title:D.Ru.get("web-player.pigeon.help-cards.bluetooth-degrades-lossless.title"),message:D.Ru.get("web-player.pigeon.help-cards.bluetooth-degrades-lossless.body")}),[st.Opt_Out_Of_Downgrade]:()=>({type:"error",title:D.Ru.get("web-player.pigeon.help-cards.opt-out-of-downgrade.title"),message:D.Ru.get("web-player.pigeon.help-cards.opt-out-of-downgrade.body")}),[st.Poor_Bandwidth_Interferes]:()=>({type:"error",title:D.Ru.get("web-player.pigeon.help-cards.poor-bandwidth-interferes.title"),message:D.Ru.get("web-player.pigeon.help-cards.poor-bandwidth-interferes.body")}),[st.Default_To_Very_High]:()=>({type:"error",title:D.Ru.get("web-player.pigeon.help-cards.default-to-very-high.title"),message:D.Ru.get("web-player.pigeon.help-cards.default-to-very-high.body")}),[st.Need_To_Redownload]:()=>({type:"error",title:D.Ru.get("web-player.pigeon.help-cards.need-to-redownload.title"),message:D.Ru.get("web-player.pigeon.help-cards.need-to-redownload.body")}),[st.Lossless_Unavailable]:()=>({type:"error",title:D.Ru.get("web-player.pigeon.help-cards.lossless-unavailable.title"),message:D.Ru.get("web-player.pigeon.help-cards.lossless-unavailable.body")}),[st.Update_Setting]:()=>({type:"error",title:D.Ru.get("web-player.pigeon.help-cards.update-settings.title"),message:D.Ru.get("web-player.pigeon.help-cards.update-settings.body")})},St="BFsg6KnXzCo_ZKKekrFC",Ct="OIOUgecXCtVCX_DzOsR4",Nt="qcU9Wt2Ly1y44H_lC327",wt=()=>{const{toPreviousView:e}=(0,n.useContext)(k),t=(0,Se.A)(),i=ve(t),a=(()=>{const{flags:e}=yt(),t=[];return e.forEach((e=>{if(jt[e]){const{type:i,message:n,title:a}=jt[e]();"info"===i?t.push({id:e,text:n,title:a,type:qe.INFO}):t.push({id:e,text:n,title:a??"",type:qe.ERROR})}})),t})(),s=a.some(ze),r=a.filter(s?ze:Qe);return(0,x.jsx)(y,{onBack:e,children:(0,x.jsxs)("div",{className:St,children:[(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:D.Ru.get("web-player.pigeon.overview-card.title")}),(0,x.jsx)(c.E,{variant:"titleMedium",semanticColor:"textBrightAccent",children:i.titleFull||i.title}),(0,x.jsx)("div",{className:Ct,children:i.bitrateDetails?.map(((e,t)=>(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBrightAccent",children:e},`bitrate-details-${t}`)))}),(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBrightAccent"}),(0,x.jsx)("div",{className:Nt,children:(0,x.jsx)(bt,{})}),r.map((e=>(0,x.jsx)(We,{card:e},e.id)))]})})};var kt=i(51824);const Et=({subtitles:e})=>(0,x.jsx)(x.Fragment,{children:e.map(((e,t)=>(0,x.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:e},`subtitle-${t}`)))}),Rt="ZExuZhVAKsqOBfFdR6Js",It="G5KBejq8q3GSZxhHs9be",Tt="WG0sT27gl2zSvisQcgHS",At="iUbPCgoUSkOoOVEo5wnr",Lt="NCUCNjFgGqpox8ttJKch",Ot=({title:e,isLossless:t})=>(0,x.jsxs)("div",{className:It,children:[(0,x.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:e}),t&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:"•"}),(0,x.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBrightAccent",children:D.Ru.get("web-player.pigeon.audio-quality.lossless.highest")})]})]});var Dt=i(1326);const Pt=({onClick:e,quality:t,playQuality:i,maxQuality:n})=>{const{title:a,subtitles:s}=(e=>{switch(e){case mt.a1.LOSSLESS:return{title:D.Ru.get("web-player.pigeon.audio-quality.lossless"),subtitles:[D.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-1"),D.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-2")]};case mt.a1.VERY_HIGH:return{title:D.Ru.get("web-player.pigeon.audio-quality.very-high.label"),subtitles:[D.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate-details.subtitle")]};case mt.a1.HIGH:return{title:D.Ru.get("web-player.pigeon.audio-quality.high.label"),subtitles:[D.Ru.get("web-player.pigeon.audio-quality.high.bitrate-details.subtitle")]};case mt.a1.MEDIUM:return{title:D.Ru.get("web-player.pigeon.audio-quality.normal.label"),subtitles:[D.Ru.get("web-player.pigeon.audio-quality.normal.bitrate-details.subtitle")]};case mt.a1.LOW:return{title:D.Ru.get("web-player.pigeon.audio-quality.low.label"),subtitles:[D.Ru.get("web-player.pigeon.audio-quality.low.bitrate-details.subtitle")]};default:return{title:D.Ru.get("web-player.pigeon.audio-quality.unknown.label"),subtitles:null}}})(t);if(null===a||null===s)return null;const r=i===t,o=t===mt.a1.LOSSLESS,l=null===n||t<=n;return(0,x.jsx)(q.v,{id:"title",variant:"naked",verticalGap:"2px","aria-disabled":!l,onClick:e,onClickHint:D.Ru.get("web-player.pigeon.quality-settings.option-hint",a),title:(0,x.jsx)(Ot,{title:a,isLossless:o}),subtitle:(0,x.jsx)(Et,{subtitles:s}),trailing:r?(0,x.jsx)(kt.i,{semanticColor:"textBrightAccent"}):void 0})},Ut=()=>{const{toPreviousView:e}=(0,n.useContext)(k),t=(0,_.l)(),{playingFrom:i}=H(),a=(0,Q.t)(),[{data:s},{mutate:r}]=(0,Y.K)(a.quality.streamingQuality),[{data:o},{mutate:l}]=(0,Y.K)(a.quality.autoAdjustQuality),[{data:u},{mutate:d}]=(0,Y.K)(a.quality.remoteQuality),p=(0,Dt.x)();if(void 0===p||void 0===o||void 0===s)return null;let m=s,g=r,v=null;return t&&u&&(m=u.streamingQuality,v=u.maxSupportedQuality,g=e=>d({...u,streamingQuality:e})),(0,x.jsxs)(y,{onBack:e,children:[(0,x.jsxs)("div",{className:Lt,children:[(0,x.jsx)(c.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:D.Ru.get("web-player.pigeon.quality-settings.title")}),(0,x.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:i})]}),(0,x.jsx)("div",{className:Rt,children:p.sort(((e,t)=>e.quality-t.quality)).map(((e,t)=>(0,x.jsx)(Pt,{quality:e.quality,playQuality:m,maxQuality:v,onClick:()=>g(e.quality)},t)))}),(0,x.jsx)(c.E,{children:D.Ru.get("web-player.pigeon.quality-settings.disclaimer")}),(0,x.jsxs)("div",{className:Tt,children:[(0,x.jsx)(c.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:D.Ru.get("web-player.pigeon.quality-settings.listening-preferences")}),(0,x.jsx)(q.v,{className:At,variant:"naked",size:"sm",id:"auto-adjust-quality",horizontalGap:"0px",title:(0,x.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:D.Ru.get("web-player.pigeon.quality-settings.auto-adjust-quality")}),trailing:(0,x.jsx)(ke.l,{id:"desktop.settings.automatic-downgrade",value:o,onSelected:l,condensed:!0})}),(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:D.Ru.get("web-player.pigeon.quality-settings.auto-adjust-quality.subtitle-1")}),(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:D.Ru.get("web-player.pigeon.quality-settings.auto-adjust-quality.subtitle-2")})]})]})};var _t=i(46318),Ft=i(1627);const Bt="GYa976HrK40QHF7ZZvwM",Mt="MHROZzo24FoePahYMEFJ",Ht="qQ5CfbxUDYyLgy_O6Gah",Vt=({nrSteps:e,currentStep:t,onClick:i})=>(0,x.jsx)("div",{className:Bt,children:Array.from({length:e}).map(((e,n)=>(0,x.jsx)("button",{"aria-label":`Go to Step ${n+1}`,className:l()(Mt,{[Ht]:t===n}),onClick:()=>i(n)},n)))});var qt=i(24818),zt=i(53175),Qt=i(48450),Yt=i(94258);const Gt="Vpnd2l8y0SgEYWxGIRzB",Wt="cUTxS9VrHd466oEAGs7_",Kt="JvZLieWRZZQjIU2ElJ2Y",Zt="ub90kjJH_P8M2r1QL_jL",Xt="U3xgLhEWHrv2mb_ZSesP",Jt="ZiS7XuaKSNH6O814jzTW",$t="W8RJgFmuCgvRsxpnXMWG",ei="pAYPkrJQFNaLczxADAGc",ti="nBOyGCpnbwg691MCewBj",ii="hr6LueujvRuzxi6lBlVZ",ni="zwfOn0Sx4qfhn2imHyQ9",ai="UcHPiDY6dLRbaeY65j16",si="KsS00iz9PKUXYN0PHhno",ri="h66wSXbM4f8lkj4EppJQ",oi=({imageUrl:e,max:t,alt:i=""})=>{const n=(0,Yt.dZ)();return(0,x.jsx)(Qt._,{className:Xt,src:n(e,t),loading:"eager",alt:i})};var li=i(80761);const ci=({path:e,loop:t=!0})=>(0,x.jsx)(n.Suspense,{fallback:null,children:(0,x.jsx)(li.o,{loop:t,autoplay:!0,path:e,className:Zt,style:{width:"auto",height:"100%"}})});var ui=i(33016);function di({children:e,variant:t}){const i=(0,n.useRef)(null);return(0,ui.i)({ref:i}),(0,x.jsx)(c.E,{variant:t,semanticColor:"textBase",className:ti,tabIndex:-1,ref:i,children:e})}var pi=i(20951);const mi={[pi.E.SMALL]:{titleVariant:"bodyMediumBold",subtitleVariant:"marginalBold",bodyVariant:"bodySmall",containerGap:0,headerGap:0,assetGap:8,subtitleGap:4,titleGap:4,buttonGap:12,assetMaxHeight:165},[pi.E.MEDIUM]:{titleVariant:"titleSmall",subtitleVariant:"marginalBold",bodyVariant:"bodySmall",containerGap:16,headerGap:24,assetGap:24,subtitleGap:12,titleGap:8,buttonGap:24,assetMaxHeight:240},[pi.E.LARGE]:{titleVariant:"titleMedium",subtitleVariant:"bodySmall",bodyVariant:"bodyMedium",containerGap:32,headerGap:32,assetGap:48,subtitleGap:16,titleGap:8,buttonGap:32,assetMaxHeight:320}},gi="AOGvMtDLQNbo94n8r8mu",vi="gf6sr0Z5UAyf7ULRfSFA",hi=({icon:e,text:t,highlighted:i,condensed:n=!1,className:a})=>(0,x.jsxs)("div",{className:l()(gi,a),children:[(0,x.jsx)(e,{size:n?"xsmall":"small",semanticColor:"textBase",className:l()({[vi]:i})}),(0,x.jsx)(c.E,{variant:n?"marginalBold":"bodySmallBold",semanticColor:"textBase",className:l()({[vi]:i}),children:t})]});var xi=i(33059),yi=i(95573);const bi=({onboardingContent:e,onNext:t,onTertiaryClick:i,layout:s="vertical",showLoader:r=!1})=>{const{bodyTitle:o,bodySubtitle:u,bodyText:p,imageUrl:m,lottiePath:g,loopAnimation:v=!0,subtitleIcon:h,buttonText:y,tertiaryButtonText:b}=e,f=(0,xi.y)(),{titleVariant:j,subtitleVariant:S,bodyVariant:C,containerGap:N,headerGap:w,assetGap:k,subtitleGap:E,titleGap:R,buttonGap:I,assetMaxHeight:T}=(0,n.useMemo)((()=>{let e=pi.E.MEDIUM;switch(f){case pi.E.SMALL:e=pi.E.SMALL;break;case pi.E.MEDIUM:e=pi.E.MEDIUM;break;case pi.E.LARGE:e=pi.E.LARGE}return mi[e]}),[f]),A=(0,n.useRef)(null),L=(0,yi.j)();return(0,x.jsx)(qt.A,{mode:"out-in",children:(0,x.jsx)(a.A,{timeout:L?0:800,classNames:{enter:ni,enterActive:ai,exit:si,exitActive:ri},nodeRef:A,children:(0,x.jsx)("div",{className:Gt,style:{"--onboarding-container-gap":`${N}px`,"--onboarding-asset-gap":`${k}px`,"--onboarding-subtitle-gap":`${E}px`,"--onboarding-title-gap":`${R}px`,"--onboarding-button-gap":`${I}px`,"--onboarding-asset-max-height":`${T}px`,"--onboarding-header-gap":`${w}px`},ref:A,children:(0,x.jsxs)("div",{className:l()(Wt,{[Jt]:"horizontal"===s}),children:[(0,x.jsxs)("div",{className:Kt,children:[m?(0,x.jsx)(oi,{imageUrl:m,max:T}):null,g?(0,x.jsx)(ci,{path:g,loop:v}):null]}),(0,x.jsxs)("div",{className:$t,children:[(0,x.jsx)(hi,{icon:h,text:u,condensed:f!==pi.E.LARGE,highlighted:!0,className:ei,variant:S}),(0,x.jsx)(di,{variant:j,children:o}),(0,x.jsx)(c.E,{variant:C,children:p}),(0,x.jsx)("div",{className:ii,children:r?(0,x.jsx)(zt.m,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.$,{colorSet:"invertedLight",size:f===pi.E.LARGE?"medium":"small",onClick:t,children:y}),i&&b?(0,x.jsx)(oe.H,{size:f===pi.E.LARGE?"medium":"small",onClick:i,condensed:!0,children:e.tertiaryButtonText}):null]})})]})]})})},o)})};const fi=({variant:e})=>(0,x.jsx)(c.E,{variant:e,semanticColor:"textBase",children:"Spotify"}),ji=()=>[{bodyTitle:D.Ru.get("web-player.pigeon.introduction.step-1.title"),bodySubtitle:"Lossless",bodyText:D.Ru.get("web-player.pigeon.introduction.step-1.subtitle"),subtitleIcon:_t.Q,buttonText:D.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc00009256c4d947fba90f6244343446ee"},{bodyTitle:D.Ru.get("web-player.pigeon.introduction.step-2.title"),bodySubtitle:"Lossless",bodyText:D.Ru.get("web-player.pigeon.introduction.step-2.subtitle"),subtitleIcon:_t.Q,buttonText:D.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc00005e4e6fd833f6f5c2cf4f81c1da66"},{bodyTitle:D.Ru.get("web-player.pigeon.introduction.step-3.title"),bodySubtitle:"Lossless",bodyText:D.Ru.get("web-player.pigeon.introduction.step-3.subtitle"),subtitleIcon:_t.Q,buttonText:D.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc000092564a451c0c1fba3acf8fed995f"},{bodyTitle:D.Ru.get("web-player.pigeon.introduction.step-4.title"),bodySubtitle:"Lossless",bodyText:D.Ru.get("web-player.pigeon.introduction.step-4.subtitle"),subtitleIcon:_t.Q,buttonText:D.Ru.get("web-player.pigeon.introduction.button.done"),imageUrl:"spotify:image:ab671fcc000092562f3465b95599cdb50e47604e"}],Si=()=>{const[e,t]=je(),{setCurrentView:i,toPreviousView:a,viewTransitions:s}=(0,n.useContext)(k),{spec:r,logger:o}=(0,Pe.r)(Ft.m,{}),l=s[b.DiscoverLossless],{onNext:c,onBack:u,currentStep:d,goTo:p}=function(e){const[t,i]=(0,n.useState)(0),[a,s]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>{t!==e-1?i(t+1):s(!0)}),[t,e]),o=(0,n.useCallback)((()=>{0!==t&&i(t-1),a&&s(!1)}),[t,a]),l=(0,n.useCallback)((t=>{t>=0&&t<e&&i(t),t===e?s(!0):a&&s(!1)}),[e,a]);return{currentStep:t,onNext:r,onBack:o,reachedEnd:a,goTo:l}}(ji().length),m=(0,n.useCallback)((()=>{o.logInteraction(r.closeButtonFactory().hitUiHide()),i(l.continue)}),[o,i,r,l.continue]);return(0,x.jsxs)(y,{titleSlot:(0,x.jsx)(fi,{variant:"bodySmallBold"}),onBack:()=>{o.logInteraction(r.backButtonFactory().hitUiHide()),d>0?u():a()},onClose:m,preventDefaultClose:!0,children:[(0,x.jsx)(bi,{onboardingContent:ji()[d],onNext:()=>{3===d?(o.logInteraction(r.doneButtonFactory().hitUiHide()),t(!0),i(l.continue)):c()}}),(0,x.jsx)(Vt,{nrSteps:ji().length,currentStep:d,onClick:p})]})};var Ci=i(8123),Ni=i(15472),wi=i(56266);const ki=e=>({bodyTitle:D.Ru.get("web-player.puffin.activation-2.title",e.headphoneDevice?.deviceName),bodySubtitle:D.Ru.get("web-player.puffin.signifier-text"),lottiePath:(0,wi.b)("animations/puffin-onboarding-tour-2.json"),subtitleIcon:Ni.C,buttonText:D.Ru.get("web-player.puffin.activation-2.button-confirm"),tertiaryButtonText:D.Ru.get("web-player.puffin.activation-2.button-cancel"),loopAnimation:!1}),Ei=()=>{const{setCurrentView:e,viewTransitions:t}=(0,n.useContext)(k),{deviceFilterState:i,isMaybeHeadphoneDevice:a,isLoading:s}=(0,$.j)(),r=t[b.ActivationDetection];(0,n.useLayoutEffect)((()=>{i.headphoneDevice||s||!a||e(b.ManualSelection,{showDialogOnBack:!0})}),[i.headphoneDevice,s,a,e]);const o=(0,n.useMemo)((()=>i?.wasAmbiguous),[i]);return(0,x.jsx)(bi,{onboardingContent:ki(i),onNext:()=>{e(o?r.airpods:r.continue)},onTertiaryClick:()=>{e(r.selectManually)},showLoader:s||!i.headphoneDevice})},Ri=()=>{const{deviceFilterState:e,isLoading:t}=(0,$.j)(),{setCurrentView:i,viewTransitions:a}=(0,n.useContext)(k),s=a[b.ActivationIntro],r=(0,n.useCallback)((()=>{e.toggleTuneHeadphones?i(s.continue):i(s.selectManually,{showDialogOnBack:!0})}),[e,i,s.continue,s.selectManually]),o={bodyTitle:D.Ru.get("web-player.puffin.activation-1.title"),bodySubtitle:D.Ru.get("web-player.puffin.signifier-text"),lottiePath:(0,wi.b)("animations/puffin-onboarding-tour-1.json"),subtitleIcon:Ni.C,buttonText:D.Ru.get("web-player.puffin.activation-1.button")};return(0,x.jsx)(bi,{onboardingContent:o,onNext:r,showLoader:t||!e.audioDevice})};var Ii=i(26906),Ti=i(14031);const Ai=e=>{const{deviceFilterState:t}=(0,$.j)(),{setCurrentDevice:i}=te(),a=(0,Ii.vh)(),{setCurrentView:s}=(0,n.useContext)(k),r=(0,n.useCallback)((async()=>{i(t.headphoneDevice,!0);try{await t.setFilterState({specificEnabled:!!t.toggleTuneHeadphones,externalizationEnabled:!!t.toggleTuneStudio})}catch{return void s(b.Error)}((e,t)=>{e.send((0,Ti.d)({has_tuner:!!t.toggleTuneHeadphones,filter_brand:t.headphoneDevice?.brand??null,filter_model:t.headphoneDevice?.model??null,was_predicted:!!t.predictedState,headphone_name_over_bluetooth:t.audioDevice?.transportType===P.Yg.BLUETOOTH?t.audioDevice.name:null,external_accessory_mapping_predicted_brand:t.predictedState?.predictedBrand??null,external_accessory_mapping_predicted_model:t.predictedState?.predictedModel??null,was_matched:(t.predictedState?.wasMatched&&!t.headphoneDevice?.isAmbiguous)??!1,was_ambiguous:t.headphoneDevice?.isAmbiguous??!1,was_manually_selected:(t.headphoneDevice?.isAmbiguous||t.headphoneDevice?.wasSelectedManually)??!1}))})(a,t),e()}),[t,a,e,i,s]);return{handleClick:r}},Li=()=>{const{setCurrentView:e,viewTransitions:t}=(0,n.useContext)(k),{spec:i,logger:a}=(0,Pe.r)(Ci.i,{}),s=t[b.ActivationSignifiers],{handleClick:r}=Ai((()=>{a.logInteraction(i.doneButtonFactory().hitUiHide()),e(s.activate)}));return(0,x.jsx)(bi,{onboardingContent:{bodyTitle:D.Ru.get("web-player.puffin.activation-3.title"),bodySubtitle:D.Ru.get("web-player.puffin.signifier-text"),bodyText:D.Ru.get("web-player.puffin.activation-3.subtitle"),imageUrl:"spotify:image:ab671fcc00005e4ed89275c5e4eef1d432ac3fe2",subtitleIcon:Ni.C,buttonText:D.Ru.get("web-player.puffin.button.done"),loopAnimation:!0},onNext:r})},Oi="FcycLYpZEbmuEClARSPP",Di="NSoA0u_DehEmTu_M20Qn",Pi="fGnSEIwIPGid9ALC9ANP",Ui="ZknipG1So_RdKeJ911k3",_i=({number:e,message:t})=>(0,x.jsxs)("div",{className:Pi,children:[(0,x.jsx)("div",{className:Ui,children:(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBase",children:e})}),(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:t})]}),Fi=()=>{const{setCurrentView:e}=(0,n.useContext)(k);return(0,x.jsxs)("div",{className:Oi,children:[(0,x.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:D.Ru.get("web-player.puffin.device-connection-lost.title")}),(0,x.jsxs)("div",{className:Di,children:[(0,x.jsx)(_i,{number:1,message:D.Ru.get("web-player.puffin.device-connection-lost.tip-1")}),(0,x.jsx)(_i,{number:2,message:D.Ru.get("web-player.puffin.device-connection-lost.tip-2")}),(0,x.jsx)(_i,{number:3,message:D.Ru.get("web-player.puffin.device-connection-lost.tip-3")}),(0,x.jsx)(_i,{number:4,message:D.Ru.get("web-player.puffin.device-connection-lost.tip-4")})]}),(0,x.jsx)(oe.H,{semanticColor:"textSubdued",onClick:()=>{e(b.Overview)},children:"Still not working"})]})},Bi=()=>{const{removeCurrentDevice:e}=te();return J({title:D.Ru.get("web-player.puffin.activation-dialog.title"),description:D.Ru.get("web-player.puffin.activation-dialog.subtitle"),confirmButtonText:D.Ru.get("web-player.puffin.activation-dialog.button-cancel"),cancelButtonText:D.Ru.get("web-player.puffin.activation-dialog.button-confirm"),onConfirm:()=>{e(!0),(0,K.I)("SETUP_HEADPHONES_BUTTON")}})},Mi=({type:e})=>{const{isMaybeHeadphoneDevice:t}=(0,$.j)(),{spec:i,logger:a}=(0,Pe.r)(Ci.i,{}),{triggerDialog:s,dialog:r}=Bi(),o=(0,n.useCallback)((()=>{a.logInteraction(i.closeButtonFactory().hitUiHide()),s(!0)}),[a,i,s]),l=(0,n.useCallback)((()=>{a.logInteraction(i.backButtonFactory().hitUiReveal()),s(!1)}),[a,i,s]);return(0,x.jsx)(y,{titleSlot:(0,x.jsx)(fi,{variant:"bodySmallBold"}),onClose:o,onBack:l,preventDefaultClose:!0,children:t?(0,x.jsxs)(x.Fragment,{children:[r,"intro"===e&&(0,x.jsx)(Ri,{}),"detection"===e&&(0,x.jsx)(Ei,{}),"signifiers"===e&&(0,x.jsx)(Li,{})]}):(0,x.jsx)(Fi,{})})};var Hi=i(13706),Vi=i(464),qi=i(69156),zi=i(14259),Qi=i(48405);const Yi=({device:e,onClick:t,isAirpodDevice:i})=>{const n=i?`${e.model} (${e.releaseYear})`:e.model,a=i?D.Ru.get("web-player.puffin.manual-selection.models-list",e.modelNumbers.join(D.Ru.getSeparator())):e.brand;return(0,x.jsx)(Qi.c,{children:(0,x.jsx)(q.v,{variant:"naked",size:"md",isInteractive:!0,id:e.id,title:(0,x.jsx)(we.d,{onClick:()=>{t(e)},children:n}),subtitle:a,trailing:(0,x.jsx)(zi.V,{size:"small",semanticColor:"textSubdued"}),onClick:()=>{t(e)},hoverAnimationDuration:"0s"},e.id)})},Gi="fjltNoIqUMIY7LfgtvCH",Wi="WNi2uq00PuqJnOvv6b6a",Ki="W3HfPxIGTvmPJNItOM5A",Zi="T3zyYZ33nGeJfw6NgwwV",Xi="fr_QT3qQxce_KdFUhktQ",Ji="wMsnDxvKohBJOUguxi8p",$i="O842FkxrdjAlid2byB9c",en="E6yKOmbA9ekxMnRhJDnA",tn="sm96uN6u5WGLjNfbT6kF",nn="bWJ8TFqqyCV4TqeScz7D",an="SRl_K6g2YOd8qrpIFij7",sn=({search:e})=>(0,x.jsxs)("div",{className:en,children:[(0,x.jsx)(c.E,{semanticColor:"textBase",variant:"titleSmall",className:tn,children:D.Ru.get("web-player.puffin.manual-selection.empty.title",(0,x.jsx)("span",{className:nn,children:(0,x.jsx)("span",{className:an,children:e})}))}),(0,x.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:D.Ru.get("web-player.puffin.manual-selection.empty.subtitle")})]}),rn={id:"unknown_device",brand:"",model:"",deviceName:"Generic",modelNumbers:[],releaseYear:""},on=({devices:e,isAirpodsList:t=!1})=>{const{setCurrentView:i,viewTransitions:a}=(0,n.useContext)(k),s=t?a[b.AirpodsSelection]:a[b.ManualSelection],{filter:r,setFilter:o}=(0,n.useContext)(Vi.g),{setCurrentDevice:l}=te(),c=(0,n.useCallback)((e=>{const n=e?{...e,wasSelectedManually:!0,isAmbiguous:t}:null;l(n,!0),i(e?.id===rn.id?s.notFound:s.continue),o("")}),[t,l,i,s.notFound,s.continue,o]),u=e.filter((({deviceName:e,brand:t,model:i,modelNumbers:n})=>[e,t,i,...n].some((e=>e.toLowerCase().includes(r.toLowerCase())))));return(0,x.jsxs)("div",{className:Ji,children:[(0,x.jsx)(qi.$,{children:u.map((e=>(0,x.jsx)(Yi,{device:e,onClick:c,isAirpodDevice:t},e.id)))}),0===u.length&&(0,x.jsx)(sn,{search:r}),(0,x.jsx)("div",{className:Xi,children:(0,x.jsx)(re.n,{size:"small",onClick:()=>{c(rn)},children:D.Ru.get("web-player.puffin.manual-selection.not-found-button")})})]})};var ln=i(46710);const cn=()=>{const e=(0,ee.N)(),{data:t,isLoading:i,isError:n}=(0,ln.I)({queryKey:["puffin-devices"],queryFn:async()=>await e.getDevices(),gcTime:18e5,staleTime:6e5});return{data:t??null,loading:i,error:n}},un=()=>{const{toPreviousView:e}=(0,n.useContext)(k),{data:t}=cn(),i=(0,n.useMemo)((()=>t?.filter((e=>"apple"===e.brand.toLowerCase()&&e.model.toLowerCase().includes("airpods")))),[t]);return(0,x.jsx)(y,{onBack:()=>{e()},children:(0,x.jsxs)(Vi.s,{uri:"spotify:internal:bettersound",children:[(0,x.jsxs)("div",{className:Wi,children:[(0,x.jsx)("div",{className:Ki}),(0,x.jsxs)("div",{className:Zi,children:[(0,x.jsx)(c.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:D.Ru.get("web-player.puffin.manual-selection.airpods.title")}),(0,x.jsx)(c.E,{variant:"bodySmall",children:D.Ru.get("web-player.puffin.manual-selection.airpods.subtitle")})]}),(0,x.jsx)(Hi.S,{placeholder:D.Ru.get("web-player.puffin.manual-selection.airpods.search-placeholder"),alwaysExpanded:!0,fullWidth:!0,debounceFilterChangeTimeout:0})]}),i?(0,x.jsx)("div",{className:Gi,children:(0,x.jsx)(on,{devices:i,isAirpodsList:!0})}):(0,x.jsx)("div",{className:$i,children:(0,x.jsx)(zt.m,{})})]})})},dn=()=>{const{setCurrentView:e,viewTransitions:t}=(0,n.useContext)(k),i=t[b.IncompatibleHeadphones],{handleClick:a}=Ai((()=>e(i.continue))),{toPreviousView:s}=(0,n.useContext)(k);return(0,x.jsx)(y,{onBack:()=>{s()},titleSlot:(0,x.jsx)(fi,{variant:"bodySmallBold"}),children:(0,x.jsx)(bi,{onboardingContent:{bodyTitle:"These headphones are not compatible with Optimize yet.",bodySubtitle:"Optimize",bodyText:"Only some devices work with Optimize. We're expanding our compatible devices to support a wider range of headphones.",imageUrl:"spotify:image:ab671fcc000092562c122d1cc442ac4f3c8dbab4",subtitleIcon:Ni.C,buttonText:"Close"},onNext:a})})},pn=()=>{const{toPreviousView:e,viewOptions:t}=(0,n.useContext)(k),{data:i}=cn(),{triggerDialog:a,dialog:s}=Bi();return(0,x.jsxs)(y,{onBack:()=>{t?.showDialogOnBack?a():e()},titleSlot:(0,x.jsx)(fi,{variant:"bodySmallBold"}),children:[s,(0,x.jsxs)(Vi.s,{uri:"spotify:internal:bettersound",children:[(0,x.jsxs)("div",{className:Wi,children:[(0,x.jsx)("div",{className:Ki}),(0,x.jsxs)("div",{className:Zi,children:[(0,x.jsx)(c.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:D.Ru.get("web-player.puffin.manual-selection.title")}),(0,x.jsx)(c.E,{variant:"bodySmall",children:D.Ru.get("web-player.puffin.manual-selection.subtitle")})]}),(0,x.jsx)(Hi.S,{placeholder:D.Ru.get("web-player.puffin.manual-selection.search-placeholder"),alwaysExpanded:!0,fullWidth:!0,debounceFilterChangeTimeout:0})]}),i?(0,x.jsx)("div",{className:Gi,children:(0,x.jsx)(on,{devices:i})}):(0,x.jsx)("div",{className:$i,children:(0,x.jsx)(zt.m,{})})]})]})};var mn=i(98370),gn=i(52596);const vn=()=>{const{currentView:e}=(0,n.useContext)(k);switch(e){case b.ActivationIntro:return(0,x.jsx)(Mi,{type:"intro"});case b.ActivationDetection:return(0,x.jsx)(Mi,{type:"detection"});case b.ActivationSignifiers:return(0,x.jsx)(Mi,{type:"signifiers"});case b.Error:return(0,x.jsx)(T,{});case b.ManualSelection:return(0,x.jsx)(pn,{});case b.AirpodsSelection:return(0,x.jsx)(un,{});case b.Overview:return(0,x.jsx)(Fe,{});case b.AudioQualitySettings:return(0,x.jsx)(Ut,{});case b.AudioQualityDetails:return(0,x.jsx)(wt,{});case b.DiscoverLossless:return(0,x.jsx)(Si,{});case b.IncompatibleHeadphones:return(0,x.jsx)(dn,{});default:return(0,gn.k)(e),null}},hn=()=>{const{currentView:e}=(0,n.useContext)(k),t=(0,j._Y)(),i=(0,j.XB)(),a=[m.Z.Puffin,m.Z.PuffinActivation,m.Z.PuffinOverlay,m.Z.PuffinActivationOverlay].some((e=>e===i)),s=[b.ActivationIntro,b.ActivationDetection,b.ActivationSignifiers,b.DiscoverLossless,b.ManualSelection,b.AirpodsSelection,b.IncompatibleHeadphones].includes(e),r=[b.ActivationIntro,b.ActivationDetection,b.ActivationSignifiers,b.ManualSelection,b.IncompatibleHeadphones].includes(e);(0,n.useEffect)((()=>{a&&t(r?X.$S.PUFFIN_START_ACTIVATION:X.$S.PUFFIN_FINISH_ACTIVATION)}),[t,r,a]);const o=(0,n.useRef)(null),{breakpoint:c}=(0,mn.c)({[pi.E.SMALL]:0,[pi.E.MEDIUM]:448,[pi.E.LARGE]:780},o);return(0,x.jsx)(Me.w,{className:l()({[h]:s}),ref:o,children:(0,x.jsx)(xi.o.Provider,{value:c,children:(0,x.jsxs)("div",{className:g,children:[(0,x.jsx)(vn,{}),false]})})})},xn=()=>(0,x.jsx)(Be._,{label:"Puffin",focusTransferId:"PUFFIN",children:(0,x.jsx)(r.s,{Fallback:A,children:(0,x.jsx)(E,{children:(0,x.jsx)(hn,{})})})});var yn=i(98929),bn=i(24815);function fn(e){return e.sort(((e,t)=>t.timestamp-e.timestamp))}function jn(e,t){return t.some((t=>t.user.uri===e.user.uri))?t:fn([...t,e])}function Sn(e,t){return t.filter((t=>t.user.uri!==e))}var Cn=i(72574);var Nn=i(12469),wn=i(9043);function kn(){const e=(0,bn.C)(),t=(0,yn.jE)(),i=["friend-activity"],a=e=>{t.setQueryData(i,((t=[])=>{const i=Array.isArray(e)?e.at(0):e;return i?function(e,t){return fn(t.map((t=>t.user.uri===e.user.uri?e:t)))}(i,t):t}))},{subscribeToFriend:s,unSubscribeFromFriend:r,subscribeAndFetchFeed:o}=function(e){const t=(0,bn.C)(),i=(0,n.useRef)({}),a=(0,n.useRef)(e);a.current=e;const s=(0,n.useCallback)((e=>{const n=(0,Cn.o_h)(e)?.username,s=t.subscribeToBuddyActivity(n,(e=>{e&&a.current(e)}));return i.current[e]=s,s}),[t]),r=(0,n.useCallback)((e=>{i.current[e]?.cancel(),delete i.current[e]}),[]),o=(0,n.useCallback)(((e,i,n)=>t.fetchFriendActivityWithSubscriptions(e,i,n)),[t]);return(0,n.useEffect)((()=>{const e=i.current;return()=>{Object.values(e).forEach((e=>{e.cancel()}))}}),[t]),{subscribeToFriend:s,unSubscribeFromFriend:r,subscribeAndFetchFeed:o}}(a),l=(0,n.useRef)();(0,n.useEffect)((()=>()=>l.current?.cancel()),[]);const c=(0,ln.I)({queryKey:i,queryFn:()=>new Promise(((e,t)=>{l.current=o(a,e,t)})).then((e=>fn(e))),staleTime:6e5,gcTime:36e5,refetchInterval:864e5,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!0});return(0,wn.N)(Nn.mc.OPERATION_COMPLETE,(async n=>{const a=n.data.uris;if(n.data.operation!==Nn.JK.FOLLOW_USER){if(n.data.operation===Nn.JK.UNFOLLOW_USER)for(const e of a)r(e),t.setQueryData(i,((t=[])=>Sn(e,t)))}else for(const n of a){const a=(await e.fetchFriendActivity([n])).at(0);a&&(t.setQueryData(i,((e=[])=>jn(a,e))),s(n))}})),c}const En=(0,n.lazy)((()=>i.e(7564).then(i.bind(i,98104))));function Rn(){const{data:e,error:t,isLoading:i}=kn();return!(0,vt.n)()||i||t?null:(0,x.jsx)(En,{friends:e??[]})}var In=i(74065);function Tn(e){return e.sort(((e,t)=>t.timestamp-e.timestamp))}function An(e,t){return t.some((t=>t.user.uri===e.user.uri))?t:Tn([...t,e])}function Ln(e,t){return t.filter((t=>t.user.uri!==e))}var On=i(49593),Dn=i(71784),Pn=i(74774);function Un(){const e=(0,In.C)(),t=(0,yn.jE)(),i=["friend-activity"],{subscribeToFriend:a,unSubscribeFromFriend:s}=function(e){const t=(0,In.C)(),i=(0,n.useRef)({}),a=(0,n.useRef)(e);a.current=e;const s=(0,n.useCallback)((e=>{const n=(0,Cn.o_h)(e)?.username,s=t.subscribeToBuddyActivity(n,(e=>{e&&a.current(e)}));return i.current[e]=s,s}),[t]),r=(0,n.useCallback)((e=>{i.current[e]?.cancel(),delete i.current[e]}),[]);return(0,n.useEffect)((()=>{const e=i.current;return()=>{Object.values(e).forEach((e=>{e.cancel()}))}}),[]),{subscribeToFriend:s,unSubscribeFromFriend:r}}((e=>{t.setQueryData(i,((t=[])=>function(e,t){return Tn(t.map((t=>t.user.uri===e.user.uri?e:t)))}(e,t)))})),r=(0,ln.I)({queryKey:i,queryFn:()=>Dn.xA(On.n.getInstance()).then((e=>{const t=e.body.friends.filter(Pn.Q);return t.forEach((e=>a(e.user.uri))),Tn(t)})),staleTime:6e5,gcTime:36e5,refetchInterval:864e5,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!0});return(0,wn.N)(Nn.mc.OPERATION_COMPLETE,(async n=>{const r=n.data.uris;if(n.data.operation!==Nn.JK.FOLLOW_USER){if(n.data.operation===Nn.JK.UNFOLLOW_USER)for(const e of r)s(e),t.setQueryData(i,((t=[])=>Ln(e,t)))}else for(const n of r){const s=(await e.fetchFriendActivity([n])).at(0);s&&(t.setQueryData(i,((e=[])=>An(s,e))),a(n))}})),r}const _n=(0,n.lazy)((()=>i.e(6548).then(i.bind(i,43378))));function Fn(){const{data:e,error:t,isLoading:i}=Un();return!(0,vt.n)()||i||t?null:(0,x.jsx)(_n,{friends:e??[]})}var Bn=i(32636),Mn=i(18492);const Hn="device-picker-section-heading",Vn="device-picker-troubleshooting-list",qn="uqXaqvqZq1oSLhXLYRo9",zn="YuPZ1nUe5BAH7HJworb6",Qn="wWalUsrOkGgHa0u8o86Q",Yn="yNttGX9uUxTih93MKEWB",Gn="kD25df_SN_uDB8lhZgQB",Wn="szp7gPJjKd4T69SzCEpF",Kn="E912cqRfb05FrRPFKDZ_",Zn="D7sZlTAybIM02cRvh4sV",Xn="xdAVCtEIoo_8z_Ubj7tU",Jn=({foundDevices:e})=>{const t=e?D.Ru.get("web-player.connect.device-picker.select-another-device"):D.Ru.get("web-player.connect.device-picker.no-devices-found");return(0,x.jsx)("span",{className:Yn,id:Hn,"data-testid":Hn,children:(0,x.jsx)(c.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textBase",children:t})})};var $n=i(32501),ea=i(12032),ta=i(40638),ia=i(26862),na=i(53506),aa=i(94154),sa=i(12367),ra=i(89913),oa=i(80352),la=i(585),ca=i(12860),ua=i(96494),da=i(61272),pa=i(55669),ma=i(4317),ga=i(56695),va=i(56979),ha=i(18308);var xa=i(39876);const ya="mFr6W9mwg0p_c7eJlhc_",ba="lpPBKkIGJcyWu59iOpsS",fa=({deviceId:e,connectStateDeviceId:t,allowForgetDevice:i,incarnation:n})=>{const a=(0,ha.N)(va.r),s=(0,ie.s)(),{spec:r}=(0,Pe.r)(da.d,{}),o=(0,xa.t)(r),l=r.forgetDeviceButtonFactory(),c=(0,xa.t)(l),u=r.deviceIncarnationContainerFactory(),d=(0,xa.t)(u);return i||n?(0,x.jsx)("span",{ref:o,className:ba,children:(0,x.jsxs)(pa.W,{children:[i&&(0,x.jsx)(ga.D,{role:"menuitem",leadingIcon:(0,x.jsx)(ua.V,{size:"small"}),onClick:()=>{s.logInteraction(l.hitLogoutFromRemoteDevice({remoteDeviceId:t})),a.logout(e)},elementRef:c,children:D.Ru.get("web-player.connect.context-menu.log-out-of-device")}),n&&(0,x.jsxs)("div",{ref:d,children:[(0,x.jsx)(ma.y,{children:D.Ru.get("web-player.connect.context-menu.incarnation-title")}),n.available.map((i=>{const{icon:r,text:o}=(e=>{switch(e){case"connect":return{icon:(0,x.jsx)(na.E,{size:"small"}),text:D.Ru.get("web-player.connect.context-menu.incarnation-connect")};case"cast":return{icon:(0,x.jsx)(ca.m,{size:"small"}),text:D.Ru.get("web-player.connect.context-menu.incarnation-cast")};default:return{}}})(i);return(0,x.jsx)(ga.D,{role:"menuitemradio",leadingIcon:r,onClick:()=>{let r;switch(i){case"cast":r=u.googleCastButtonFactory();break;case"connect":r=u.spotifyConnectButtonFactory()}n.preferred!==i?(r&&s.logInteraction(r.hitChangeRemoteDeviceIncarnation({remoteDeviceId:t})),a.setPreferredIncarnation(e,i)):r&&s.logInteraction(r.hitNoAction())},"aria-checked":n.preferred===i,CheckedIcon:kt.i,children:o},i)}))]})]})}):null};var ja=i(42262);const Sa=({title:e,deviceId:t,connectStateDeviceId:i,allowForgetDevice:a,incarnation:s,className:r,onHide:o,onShow:c,spec:u})=>{const[d,p]=(0,n.useState)(!1),m=u.contextMenuButtonFactory({identifier:i}),g=(0,ie.s)(),v=(0,xa.t)(m);return(0,x.jsx)(la.b,{renderInline:!0,menu:(0,x.jsx)(ja.r,{spec:m,children:(0,x.jsx)(fa,{deviceId:t,connectStateDeviceId:i,allowForgetDevice:a,incarnation:s})}),onShow:()=>{p(!0),c?.()},onHide:()=>{p(!1),o?.()},offset:[0,-8],children:(0,x.jsx)(oa.e,{ref:v,size:oa.M.xs,label:D.Ru.get("more.label.context",e),className:l()(ya,r),onClick:e=>{e.stopPropagation(),g.logInteraction(d?m.hitUiHide():m.hitUiReveal())}})})},Ca=(0,n.createContext)({rowWithMenuOpenIdentifier:null,setRowWithMenuOpenIdentifier:()=>{}}),Na=({children:e})=>{const[t,i]=(0,n.useState)(null),a=(0,n.useMemo)((()=>({rowWithMenuOpenIdentifier:t,setRowWithMenuOpenIdentifier:i})),[t]);return(0,x.jsx)(Ca.Provider,{value:a,children:e})},wa=e=>e instanceof $n.B.ContainerViewEventFactory.DeviceListEventFactory.RemoteDeviceEventFactory||e instanceof $n.B.ContainerViewEventFactory.DeviceListEventFactory.DisabledDeviceEventFactory||e instanceof $n.B.ContainerViewEventFactory.OffNetworkDeviceListEventFactory.RemoteDeviceEventFactory||e instanceof $n.B.ContainerViewEventFactory.OffNetworkDeviceListEventFactory.DisabledDeviceEventFactory||e instanceof $n.B.ContainerViewEventFactory.OnNetworkDeviceListEventFactory.RemoteDeviceEventFactory,ka=e=>e instanceof $n.B.ContainerViewEventFactory.DeviceListEventFactory.RemoteDeviceEventFactory;var Ea=i(28518),Ra=i(51498);const Ia="AWblt0YATqa_XQaPUDMc",Ta="sX7AwqoSzMeT9qhlEViU",Aa="jIlVu16bmijzUKG6u5VW",La="ZkuPLR9bss2N7f7thixx",Oa="QSZFk1XCj76mVplNmiV1",Da="O0wmxPM0kfA59paiHqR9",Pa=(0,n.forwardRef)((function({deviceId:e,connectStateDeviceId:t,Icon:i,TechIcon:a,title:s,subtitle:r,canLogout:o,isDisabled:c,incarnation:u,jamSession:d,onClick:p,spec:m},g){const v=(0,j._Y)(),h=(0,Ea.HJ)(u),y=o||h,{rowWithMenuOpenIdentifier:b,setRowWithMenuOpenIdentifier:f}=(0,n.useContext)(Ca),S=(0,xa.t)(ka(m)&&d?.token?m.inPersonListeningSessionFactory({identifier:d.sessionId??d.token}):void 0,!!d?.token),C=(0,ta.YQ)((()=>{p(),v(X.$S.PANEL_CLOSE_CLICK)}),1e3,{leading:!0,trailing:!1}),N=(0,n.useCallback)((e=>{"Enter"===e.key&&C()}),[C]),w=(0,x.jsx)(fa,{deviceId:e,connectStateDeviceId:t,allowForgetDevice:o,incarnation:h?u:void 0}),k=d?.participants.find((e=>e.id===d.sessionOwnerId))?.displayName,E=d?.jamType===Ra.H.NEARBY_JAM?(0,x.jsx)(ia.C,{"data-testid":"sub-nearby-jam-icon",semanticColor:"textBrightAccent",size:"small"}):(0,x.jsx)(na.E,{"data-testid":"sub-jam-icon",semanticColor:"textBrightAccent",size:"small"}),R=k&&!d.isSessionOwner?(0,x.jsxs)("div",{className:Ta,ref:S,children:[E,(0,x.jsx)(aa.j,{semanticColor:"textBrightAccent",lineClamp:1,children:D.Ru.get("web-player.social-connect.broadcasting.bradcasting-device-subtitle",{host:k})})]}):(0,x.jsxs)("div",{className:Ta,children:[a&&(0,x.jsx)(a,{className:Aa,semanticColor:"textSubdued","data-testid":"sub-icon",role:"presentation",size:"small"}),r&&(0,x.jsx)(aa.j,{semanticColor:"textSubdued",lineClamp:1,children:r})]});return(0,x.jsx)(sa.h,{menu:w,children:(0,x.jsx)(Qi.c,{onKeyDown:N,onClick:C,className:l()(La,{[Da]:b===e}),children:(0,x.jsx)(q.v,{id:e,ref:g,"data-testid":"device-picker-row-sidepanel",media:(0,x.jsx)(i,{semanticColor:c?"textSubdued":"textBase","data-testid":"main-icon",role:"presentation"}),onClick:()=>{},onClickHint:D.Ru.get("web-player.connect.device-picker.connect-to-device"),title:(0,x.jsx)("span",{className:Ia,children:(0,x.jsx)(ra.Zp,{label:s,renderInline:!0,children:(0,x.jsx)(we.d,{"data-testid":"list-row-title",lineClamp:1,semanticColor:c?"textSubdued":"textBase",dir:"auto",children:s})})}),subtitle:R,trailing:y&&wa(m)&&(0,x.jsx)(Sa,{title:s,deviceId:e,connectStateDeviceId:t,allowForgetDevice:o,incarnation:h?u:void 0,spec:m,className:l()(Oa),onShow:()=>{f(e)},onHide:()=>{f(null)}})})})})})),Ua=({position:e,deviceId:t,connectStateDeviceId:i,deviceName:n,deviceType:a,deviceModelName:s,isGroup:r,disabledReason:o,canLogout:l,spec:c})=>{const u=(0,Ea.tf)(a,r),{helpText:d}=(0,Ea.uY)(o,(0,Ea.p2)(a,s)),p=c.disabledDeviceFactory({identifier:i,position:e,reason:o??"null"}),m=(0,xa.t)(p),g=(0,O.wA)();return(0,x.jsx)(Pa,{deviceId:t,connectStateDeviceId:i,ref:m,isDisabled:!0,disabledReason:o,Icon:u,title:n,subtitle:d,canLogout:l,onClick:()=>{o===B.bU.RESTRICTED&&g((0,ea.yx)(t))},spec:p})};var _a=i(36116);const Fa=({isDisabled:e=!1,spec:t})=>{const i=(0,O.wA)(),n=t.containerViewFactory().deviceListFactory().castPlaceholderFactory(),a=(0,xa.t)(n),s=(0,Ea.$A)(B.bq.CAST_AUDIO,"disconnected"),r=(0,ie.s)();return(0,x.jsx)(Pa,{deviceId:"cast-placeholder",connectStateDeviceId:"cast-placeholder",ref:a,Icon:s,title:D.Ru.get("web-player.connect.device-picker.google-cast-devices"),supportsHiFi:!1,onClick:()=>{r.logInteraction(n.hitUiReveal()),i((0,_a.Ym)())},isDisabled:e,spec:n})};var Ba=i(78856);const Ma=({deviceId:e,connectStateDeviceId:t,deviceName:i,supportsHiFi:n,spec:a})=>{const s=(0,ie.s)(),r=a.localDeviceFactory(),o=(0,Ea.tf)(B.bq.COMPUTER,!1),l=(0,Ba.D)();return(0,x.jsx)(Pa,{deviceId:e,connectStateDeviceId:t,Icon:o,title:i,supportsHiFi:n,onClick:()=>{const{interactionId:t,pageInstanceId:i}=s.logInteraction(r.hitPullPlaybackToLocalDevice());l.transferPlayback(e,{interactionId:t,pageInstanceId:i})},spec:r})},Ha=()=>{const[e,t]=(0,fe.x)("connect-picker-recent-transfers",{});return{registerTransferAttempt:(0,n.useCallback)((i=>{t({...e,[i]:(new Date).getTime()})}),[e,t]),recentTransfersMap:e}};var Va=i(90843),qa=i(48656),za=i(68813),Qa=i(91327),Ya=i(75788),Ga=i(61943),Wa=i(64640);const Ka=({position:e,deviceId:t,connectStateDeviceId:i,deviceName:n,deviceType:a,isGroup:r,supportsHiFi:o,canLogout:l,incarnation:c,jamSession:u,spec:d})=>{const p=(0,ie.s)(),m=d.remoteDeviceFactory({identifier:i,position:e}),g=(0,Ea.tf)(a,r);let v,h;(0,Ea.Mp)(a)&&(v=(0,Ea.$A)(a,"disconnected"),h=D.Ru.get("web-player.connect.device-picker.google-cast"));const y=(0,O.wA)(),{registerTransferAttempt:b}=Ha(),f=(0,Ba.D)(),j=(0,xa.t)(m),S=(0,s.NC)(Wa.Yr),C=(0,qa.Ad)((e=>{const t=(0,Ya.d)(),i=(0,yn.jE)(),n=(0,s.NC)(Wa.PE,{loadingValue:!1}),{data:a}=(0,ln.I)({queryKey:["useResolveJamFromConnectDevice",e],queryFn:()=>t.getJoinTokenFromConnectDeviceId(e),enabled:n}),{data:r}=(0,ln.I)({queryKey:["useResolveJamFromConnectDevice",a],queryFn:a?()=>t.getSessionInfo(a):za.hT,enabled:!!a});return(0,Ga.c)(Qa.P.SCAN_UPDATE,(()=>{i.invalidateQueries({queryKey:["useResolveJamFromConnectDevice",e]})})),r??null})(i));let N;N=S?u??null:C;return(0,x.jsx)(Pa,{deviceId:t,connectStateDeviceId:i,ref:j,Icon:g,TechIcon:v,title:n,subtitle:h,supportsHiFi:o,canLogout:l,incarnation:c,jamSession:N,onClick:()=>{if(N?.token&&!N.isSessionOwner){ka(m)&&p.logInteraction(m.inPersonListeningSessionFactory({identifier:N.sessionId??N.token}).hitUiReveal());let e=Va.EL.JOIN_LISTENING_SESSION;N.jamType===Ra.H.NEARBY_JAM&&(e=Va.EL.JOIN_NEARBY_JAM),y((0,ea.A9)(e,N.token,void 0,{id:t,name:n,type:a,isGroup:r}))}else{const{interactionId:e,pageInstanceId:n}=p.logInteraction(m.hitConnectToRemoteDevice({remoteDeviceId:i}));f.transferPlayback(t,{interactionId:e,pageInstanceId:n}),b(i)}},spec:m})},Za=()=>(0,ht.o)((e=>(e?.restrictions?.disallowTransferringPlaybackReasons?.length??0)>0));var Xa=i(15425);const Ja=({devices:e,areWebPlayerCastDevicesAvailable:t=!1,networkHeadingID:i="",spec:n})=>{const a=(0,s.NC)(Wa.Yr),r=(0,Xa.Ek)(),o=Za(),l=n.containerViewFactory().deviceListFactory(),c=(0,xa.t)(l),u=(e,t)=>{const i=r?D.Ru.get("web-player.connect.device-picker.this-computer"):D.Ru.get("web-player.connect.device-picker.this-web-browser");if(e.isDisabled)return(0,x.jsx)(Ua,{position:e.isLocal?0:t+1,deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:e.isLocal?i:e.name,deviceType:e.isLocal?B.bq.COMPUTER:e.type,deviceModelName:e.modelDisplayName,isGroup:e.isGroup,disabledReason:e.disabledReason,canLogout:!e.isLocalNetwork&&e.supportsLogout,spec:l},e.id);if(e.isLocal&&(e=>e instanceof $n.B.ContainerViewEventFactory.DeviceListEventFactory||e instanceof $n.B.ContainerViewEventFactory.OnNetworkDeviceListEventFactory)(l))return(0,x.jsx)(Ma,{deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:i,supportsHiFi:e.supportsHiFi,spec:l},e.id);let n=null;return a&&(0,qa.HV)(e)?n=e.nearbyJamSession:(0,qa.C7)(e)&&(n=e.jamSession),(0,x.jsx)(Ka,{position:t+1,deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:e.name,deviceType:e.type,isGroup:e.isGroup,supportsHiFi:e.supportsHiFi,canLogout:!e.isLocalNetwork&&e.supportsLogout,incarnation:e.incarnation,jamSession:n,spec:l},e.id)};return(0,x.jsxs)(qi.$,{circular:!1,ref:c,"aria-labelledby":`${Hn} ${i}`,"data-testid":`devices-list-${i}`,allowsMultipleInteractiveChildrenInItem:!0,children:[e.map(((e,t)=>u(e,t))),t&&(0,x.jsx)(Fa,{isDisabled:o,spec:n})]})},$a="local-network-heading",es="other-networks-heading",ts=({localNetworkDevices:e,otherNetworksDevices:t,spec:i})=>{const n=(0,s.NC)(Wa.Q5),a=n?"Speakers & nearby Jams":D.Ru.get("web-player.connect.device-picker.on-this-network");return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.E,{as:"h3",variant:"bodySmall",semanticColor:"textSubdued",className:Gn,id:$a,children:e.length>0?a:D.Ru.get("web-player.connect.device-picker.no-devices-local-network")}),e.length>0&&(0,x.jsx)(Ja,{devices:e,networkHeadingID:$a,spec:i}),t.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(c.E,{as:"h3",variant:"bodySmall",semanticColor:"textSubdued",className:l()(Gn,Wn),id:es,children:n?"Devices on other networks":D.Ru.get("web-player.connect.device-picker.on-other-networks")}),(0,x.jsx)(Ja,{devices:t,networkHeadingID:es,spec:i})]})]})};var is=i(81751);const ns=({url:e,linkText:t,handleClick:i,elementRef:n})=>(0,x.jsx)("a",{className:l()(La),href:e,target:"_blank",ref:n,onClick:i,children:(0,x.jsx)(q.v,{title:t,id:t,isRedundantOnClick:!0,onClick:()=>{},"data-testid":"list-row-external-link",trailing:(0,x.jsx)(is.H,{size:"small","data-testid":"icon-external-link",semanticColor:"textSubdued",role:"presentation",autoMirror:!0,"aria-hidden":"true"})})}),as=({spec:e})=>{const t=`https://www.spotify.com/connect${`?utm_campaign=connect&utm_medium=${(0,Xa.Ek)()?"app":"web"}&utm_source=desktop`}`,i=e.containerViewFactory().externalConnectHubLinkFactory(),n=(0,xa.t)(i),a=(0,ie.s)();return(0,x.jsx)(ns,{url:t,linkText:D.Ru.get("web-player.connect.device-picker.connect-hub-external-link"),elementRef:n,handleClick:()=>{a.logInteraction(i.hitNavigateToExternalUri({destination:t}))}})},ss="https://support.spotify.com/article/spotify-connect/",rs=({spec:e})=>{const t=e.containerViewFactory().externalHelpLinkFactory(),i=(0,xa.t)(t),n=(0,ie.s)();return(0,x.jsx)(ns,{url:ss,linkText:D.Ru.get("web-player.connect.device-picker.help-external-link"),elementRef:i,handleClick:()=>{n.logInteraction(t.hitNavigateToExternalUri({destination:ss}))}})};var os=i(43165);const ls=[os.h.en,os.h.enGB],cs=()=>{const e=D.Ru.getLocaleForTranslation();return ls.includes(e)};const us=({devices:e,areWebPlayerCastDevicesAvailable:t})=>{const i=(0,Xa.Ek)(),n=Za(),a=cs(),s=!i&&n?e.map((e=>({...e,isDisabled:!0}))):e,{recentTransfersMap:r}=Ha(),o=function(e,t){const i=[],n=e.find((e=>e.isLocal));n&&i.push(n);const a=e.filter((e=>!e.isLocal)),{usedDevices:s,unusedDevices:r}=function(e,t){const i=[],n=[];for(const a of e)t[a.sortingId]?i.push({device:a,timestamp:t[a.sortingId]}):n.push(a);return{usedDevices:i,unusedDevices:n}}(a,t);s.sort(((e,t)=>t.timestamp-e.timestamp));for(const e of s)i.push(e.device);const o=i.concat(function(e){return e.sort(((e,t)=>e.isLocal?-1:t.isLocal?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase())))}(r));return o}(s,r),{spec:c}=(0,Pe.r)($n.p,{}),u=o.filter((e=>e.isLocalNetwork)),d=o.filter((e=>!e.isLocalNetwork));return(0,x.jsxs)("div",{className:l()(qn,zn),children:[(0,x.jsx)("div",{children:i&&d.length>0?(0,x.jsx)(ts,{localNetworkDevices:u,otherNetworksDevices:d,spec:c}):(0,x.jsx)(Ja,{devices:o,areWebPlayerCastDevicesAvailable:t,spec:c})}),(0,x.jsxs)("div",{className:l()(Kn),children:[(0,x.jsx)(rs,{spec:c}),a&&(0,x.jsx)(as,{spec:c})]})]})};var ds=i(90677),ps=i(37171),ms=i(106);const gs=(0,n.forwardRef)((function({Icon:e,title:t,subtitle:i},n){return(0,x.jsx)(Qi.c,{className:La,children:(0,x.jsx)(q.v,{id:t,ref:n,"data-testid":"device-picker-row-sidepanel",media:(0,x.jsx)(e,{semanticColor:"textSubdued"}),title:(0,x.jsx)("span",{className:Ia,children:(0,x.jsx)(ra.Zp,{label:t,renderInline:!0,children:(0,x.jsx)(we.d,{"data-testid":"list-row-title",lineClamp:1,semanticColor:"textBase",dir:"auto",children:t})})}),subtitle:(0,x.jsx)("div",{className:Ta,children:(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:i})})})})}));var vs=i(10559);const hs="Bjx5Gw7p3JoiF4qI6eMQ",xs=()=>{const{deviceFilterState:e,isMaybeHeadphoneDevice:t}=(0,$.j)(),i=(0,ae.j)(),n=(0,De.v)(),a=(0,Se.A)(),s=e.currentState.externalizationEnabled||e.currentState.specificEnabled,r=a===ge.Yn.LOSSLESS||a===ge.Yn.LOSSLESS_24;return(0,x.jsxs)("div",{className:hs,children:[n&&s&&t&&(0,x.jsx)(Ni.C,{size:"small",semanticColor:"textBrightAccent"}),(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBrightAccent",children:i&&r&&"Lossless"})]})},ys="A3PPnVKE5LH9mT5URPB2",bs="cU0IpwDfJzDgQaY4MSXA",fs="dlS4nc0WL68C7_8zwfiS",js="pdLJBD_CNQ_r5Ad4mZZk",Ss="FpmhhFL8lCsiyh3X0fjK",Cs="scv87ulfUcibJW8QhCeH",Ns="oCa5Np4laJc3s5P2uUqw",ws=({onClick:e})=>{const{deviceName:t,formattedDeviceName:i}=H();return(0,x.jsx)("div",{className:Ns,children:(0,x.jsx)(ra.Zp,{label:i??t,children:(0,x.jsx)(aa.j,{lineClamp:1,onClick:e,children:(0,x.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:i??t})})})})};var ks=i(74584),Es=i(83665);const Rs=({size:e="medium",className:t})=>{const i=(0,yi.j)(),n=(0,Es.k)(e);return(0,x.jsx)(x.Fragment,{children:i?(0,x.jsx)(ks.A,{size:e,semanticColor:"textBrightAccent",className:t,"data-testid":"now-playing-active"}):(0,x.jsx)("img",{className:t,width:n,height:n,alt:"","aria-hidden":"true",src:(0,wi.b)("images/device-picker-equaliser-animation.webp"),"data-testid":"animated-now-playing"})})};var Is=i(51278);const Ts=({deviceType:e,isGroup:t,isLocalDevice:i,isPlaying:n})=>{const a=(0,Is.g)();let s;if(n)s=(0,x.jsx)(Rs,{});else{const n=(0,Ea.tf)(e,t,i?a:null);s=(0,x.jsx)(n,{semanticColor:"textBrightAccent","data-testid":"device-icon",role:"presentation"})}return(0,x.jsxs)("div",{className:js,children:[(0,x.jsx)("div",{className:Ss,children:s}),(0,x.jsx)(we.d,{variant:"titleSmall",semanticColor:"textBase",lineClamp:1,children:D.Ru.get("web-player.connect.device-picker.current-device")})]})};var As=i(81878),Ls=i(48613),Os=i(13867),Ds=i(65282);const Ps=()=>{const{currentDevice:e}=(0,Ds.l)(),{id:t,connectStateId:i,isLocalNetwork:n,supportsLogout:a}=e,r=(0,Os.W)(),o=!n&&a,l=o,{spec:c}=(0,Pe.r)($n.p,{}),u=(0,s.NC)(Wa.Q5),d=(0,De.v)(),p=(0,ae.j)(),{deviceName:m,formattedDeviceName:g}=H(),v=r?As.g:zi.V,h=u?Ls.x:v;return(0,x.jsx)("div",{className:Cs,children:d||p?(0,x.jsx)(h,{"aria-label":D.Ru.get("more.label.context",g??m),size:"small",autoMirror:!1}):l&&(0,x.jsx)(Sa,{title:g??m,deviceId:t,connectStateDeviceId:i,allowForgetDevice:o,spec:c.containerViewFactory().headerFactory().activeDeviceFactory()})})};var Us=i(48151),_s=i(46581),Fs=i(71338),Bs=i(86350);const Ms=()=>{const e=(0,Ya.d)(),{enqueueSnackbar:t}=(0,Fs.d)(),{spec:i,logger:a}=(0,Pe.r)(vs.g,{}),[s,r]=(0,n.useState)(Bs.ez.BROADCAST_STATUS_UNKNOWN),o=s===Bs.ez.BROADCAST_STATUS_UNKNOWN||s===Bs.ez.BROADCAST_UNAVAILABLE,l=s===Bs.ez.BROADCAST_ON;(0,Ga.c)(Qa.P.BROADCAST_STATUS_UPDATE,(({data:e})=>{r(e??Bs.ez.BROADCAST_STATUS_UNKNOWN)}));const c=(0,n.useCallback)((t=>e.setBroadcastStatus(t?Bs.ez.BROADCAST_ON:Bs.ez.BROADCAST_OFF)),[e]),u=(0,_s.n)({mutationFn:c,onMutate:async e=>{const t=s;return r(e?Bs.ez.BROADCAST_ON:Bs.ez.BROADCAST_OFF),{prevBroadcastingState:t,allowBroadcasting:e}},onError:(e,i,n)=>{r(n?.prevBroadcastingState??Bs.ez.BROADCAST_STATUS_UNKNOWN),t(D.Ru.get("error.generic"))}});return{isHidden:o,toggleIsSwitchedOn:l,setToggleState:(0,n.useCallback)((e=>{const t=e?"device_discoverable_off":"device_discoverable_on",n=e?"device_discoverable_on":"device_discoverable_off";a.logInteraction(i.deviceDiscoverableToggleFactory().hitToggleState({stateBeforeToggle:t,stateAfterToggle:n})),u.mutate(e)}),[a,u,i])}},Hs="k5CAXCZwazRLdTWi5mpN",Vs="f2Wgf5OqTaBlTRRKZe9X",qs=()=>{const{isHidden:e,toggleIsSwitchedOn:t,setToggleState:i}=Ms();return e?null:(0,x.jsxs)("div",{className:Hs,children:[(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",as:"label",htmlFor:"jam.broadcasting",className:Vs,children:D.Ru.get("web-player.social-connect.broadcasting.toggle-label")}),(0,x.jsx)(ke.l,{id:"jam.broadcasting",value:t,onSelected:i,condensed:!0})]})};var zs=i(71627),Qs=i(47495),Ys=i(27276),Gs=i(28445),Ws=i(94822);const Ks="device-picker-header",Zs=({isPlaying:e})=>{const{currentDevice:t}=(0,Ds.l)(),{id:i,connectStateId:a,type:r,isLocal:o,isLocalNetwork:c,isGroup:u,incarnation:d,supportsLogout:p}=t,m=(0,De.v)(),g=(0,ae.j)(),{togglePuffin:v}=(0,Us.c)(),{currentSession:h}=(0,Ws.D)(),y=(0,Ys.y)(),b=(0,s.NC)(Wa.PE),f=Boolean(h?.active),j=!f&&y,S=(0,Ea.HJ)(d),C=!c&&p,N=C||S,{spec:w,logger:k}=(0,Pe.r)(vs.g,{}),{uri:E}=(0,Gs.f)(),R=(0,n.useCallback)((()=>{k.logInteraction(w.createJamButtonFactory().hitUiNavigate({destination:E??""}))}),[k,w,E]),I=(0,x.jsx)(fa,{deviceId:i,connectStateDeviceId:a,allowForgetDevice:C,incarnation:S?d:void 0}),T=m||g,A=(0,x.jsx)(q.v,{className:l()(bs,{[fs]:T}),id:Ks,variant:"naked",title:(0,x.jsx)(Ts,{deviceType:r,isGroup:u,isLocalDevice:o,isPlaying:e}),subtitle:(0,x.jsxs)("div",{className:Ns,children:[(0,x.jsx)(ws,{onClick:T?v:void 0}),T&&(0,x.jsx)(xs,{})]}),trailing:(0,x.jsx)(Ps,{}),"aria-labelledby":Ks,onClick:T?v:void 0,onClickHint:D.Ru.get("web-player.connect.device-picker.current-device"),body:y&&(0,x.jsxs)(x.Fragment,{children:[b&&(0,x.jsx)(qs,{}),(0,x.jsx)("hr",{className:ys})]}),footer:(0,x.jsxs)(x.Fragment,{children:[j&&(0,x.jsx)(Qs.$,{onClick:R}),f&&b&&(0,x.jsx)(zs.K,{})]})});return N?(0,x.jsx)(sa.h,{menu:I,children:A}):A},Xs=({isDesktop:e})=>{const t=cs(),{spec:i}=(0,Pe.r)($n.p,{}),n=i.containerViewFactory().noDevicesViewFactory(),a=(0,xa.t)(n);return(0,x.jsxs)("div",{ref:a,className:l()(Zn,zn,qn),"data-testid":Vn,children:[(0,x.jsxs)("ul",{"aria-labelledby":`${Ks} ${Hn}`,className:Xn,children:[(0,x.jsx)(gs,{Icon:ds.T,title:D.Ru.get("web-player.connect.device-picker.check-wifi"),subtitle:D.Ru.get("web-player.connect.device-picker.check-wifi-subtitle")}),(0,x.jsx)(gs,{Icon:ft.g,title:D.Ru.get("web-player.connect.device-picker.play-from-another"),subtitle:D.Ru.get("web-player.connect.device-picker.play-from-another-subtitle")}),e?(0,x.jsx)(gs,{Icon:ps.H,title:D.Ru.get("web-player.connect.device-picker.restart-speaker"),subtitle:D.Ru.get("web-player.connect.device-picker.restart-speaker-subtitle")}):(0,x.jsx)(gs,{Icon:ms.i,title:D.Ru.get("web-player.connect.device-picker.switch-to-app"),subtitle:D.Ru.get("web-player.connect.device-picker.switch-to-app-subtitle")})]}),(0,x.jsxs)("div",{"aria-describedby":Vn,children:[(0,x.jsx)(rs,{spec:i}),t&&(0,x.jsx)(as,{spec:i})]})]})},Js=({devices:e,areWebPlayerCastDevicesAvailable:t})=>{const i=Boolean(e.find((e=>!e.isLocal))),n=e.filter((e=>!e.isActive&&e.name.length>0)),a=i||t,s=(0,Xa.Ek)();return(0,x.jsxs)("div",{className:l()(Qn,zn),children:[(0,x.jsx)(Jn,{foundDevices:a}),a?(0,x.jsx)(Na,{children:(0,x.jsx)(us,{devices:n,areWebPlayerCastDevicesAvailable:t})}):(0,x.jsx)(Xs,{isDesktop:s})]})},$s="G6For7gcz2GTgCkOeJKc",er=()=>{const{isHidden:e,toggleIsSwitchedOn:t,setToggleState:i}=Ms();return e?null:(0,x.jsxs)("div",{className:$s,children:[(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBase",as:"label",htmlFor:"jam.broadcasting",children:"Auto-invite people nearby"}),(0,x.jsx)(ke.l,{id:"jam.broadcasting",value:t,onSelected:i,condensed:!0})]})};var tr=i(48817),ir=i(22408);const nr="rk32VTG0b6NU0RicbiOH",ar="XVPxTrQs8W0kmsmVnUww",sr=()=>{const{currentDevice:e}=(0,Ds.l)(),{type:t,isLocal:i,isGroup:n}=e,{isPlaying:a}=(0,ir.GK)(),s=(0,Is.g)(),r=(0,De.v)(),o=(0,ae.j)(),{togglePuffin:l}=(0,Us.c)(),{deviceName:c,formattedDeviceName:u}=H(),d=r||o;let p;if(a)p=(0,x.jsx)(Rs,{});else{const e=(0,tr.tf)(t,n,i?s:null);p=(0,x.jsx)(e,{semanticColor:"textBrightAccent","data-testid":"device-icon",role:"presentation"})}return(0,x.jsx)(q.v,{id:"device-picker-header",variant:"naked",size:"md",className:ar,title:u??c,"data-testid":"device-picker-row-sidepanel",media:p,onClick:d?l:void 0,trailing:(0,x.jsx)(Ps,{})})};var rr=i(46157),or=i(69299);const lr="fkBkl4cpmR6fFGNpsPZx",cr=()=>{const e=(0,Ws.D)(),{openQueue:t}=(0,or.R)();return(0,x.jsxs)("div",{className:lr,children:[(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",as:"label",htmlFor:"jam.broadcasting",children:"Listen with friends anywhere"}),(0,x.jsx)(re.n,{onClick:()=>{e.createSession(),t()},iconLeading:rr.V,size:"small",children:"Start Jam"})]})},ur=()=>{const e=(0,Ws.D)(),t=e.currentSession?.active?(0,x.jsx)(zs.K,{}):(0,x.jsx)(cr,{});return(0,x.jsxs)("div",{className:l()(nr),children:[(0,x.jsx)(sr,{}),(0,x.jsx)(er,{}),t]})};var dr=i(36754),pr=i(27508);const mr="hmVfxvHNFzG0vUNl80tU",gr="TuVVAkUzyLv_yCLzKTqW",vr=()=>{const[e,t]=(0,n.useState)(!0),{deviceFilterState:i,isMaybeHeadphoneDevice:a}=(0,$.j)(),s=i.isOnboarded,{incrementDismissCountForDevice:r,isDeviceDismissed:o}=(()=>{const{deviceFilterState:e}=(0,$.j)(),t=(0,n.useMemo)((()=>e.audioDevice?.id),[e.audioDevice?.id]),[i,a]=(0,fe.x)("onboarding-dismissed:puffin",{}),s=(0,n.useCallback)((()=>{t&&a({...i,[t]:(i[t]??0)+1})}),[t,i,a]);return{isDeviceDismissed:(0,n.useMemo)((()=>!!t&&i[t]>=3),[t,i]),incrementDismissCountForDevice:s}})(),l=(0,n.useMemo)((()=>a&&!s&&!o),[o,a,s]),c=(0,j._Y)(),u=(0,n.useCallback)((()=>c(X.$S.PUFFIN_START_ACTIVATION)),[c]),d=(0,n.useCallback)((()=>{r(),t(!1)}),[r]);return l&&e?(0,x.jsx)(q.v,{id:"puffinDevicePickerUpsell",variant:"tinted",size:"lg",className:mr,title:D.Ru.get("web-player.puffin.get-started.title"),subtitle:D.Ru.get("web-player.puffin.get-started.subtitle"),paddingBlockStart:"16px",paddingBlockEnd:"16px",footer:(0,x.jsx)(re.n,{size:"small",onClick:u,children:D.Ru.get("web-player.puffin.upsell.enhance-headphones.confirm")}),trailing:(0,x.jsx)(oe.H,{className:gr,semanticColor:"textSubdued",iconOnly:pr.M,size:"small",onClick:d,condensedAll:!0,"aria-label":D.Ru.get("close")})}):null};var hr=i(17504),xr=i(45007),yr=i(85396);function br(){return(0,ha.N)(yr.v)}const fr=()=>{const e=br(),{devices:t,currentDevice:i}=(0,Ds.l)(),a=(()=>{const e=br(),[t,i]=(0,n.useState)([]),a=(0,n.useCallback)((()=>{e.getJamDevices().then((e=>i(e)))}),[e]);return(0,Ga.c)(Qa.P.SCAN_UPDATE,(()=>a())),(0,n.useEffect)((()=>a()),[a]),t})(),[s,r]=(0,n.useState)(t.map((e=>(0,qa.gS)(e)))),o=(0,ta.dh)((()=>{const n=e.combineJamsWithEntities(t,a,i.id);r(n)}),100,{leading:!1,trailing:!0});return(0,n.useEffect)((()=>o()),[t,a,i,o]),s},jr="h0XG5HZ9x0lYV7JNwhoA",Sr="JHlPg4iOkqbXmXjXwVdo",Cr=()=>{const e=(0,xr.O)(),t=(0,De.v)(),i=(0,_.l)(),a=(0,dr.C)(),r=(0,s.NC)(Wa.Yr),o=(0,s.NC)(Wa.Q5),{devices:c}=(0,Ds.l)(),u=fr(),{isPlaying:d}=(0,ir.GK)(),[g]=(0,j.sV)(),v=(0,n.useRef)(a),h=(0,n.useRef)(g.context.devicePicker?.interactionId);v.current=a,h.current=g.context.devicePicker?.interactionId;const y=(0,O.d4)((e=>e.playback?.castState??window.cast?.framework.CastState.NO_DEVICES_AVAILABLE)),b=(0,hr.Or)(y);return(0,n.useEffect)((()=>()=>{v.current(h.current)}),[h]),(0,n.useEffect)((()=>{e.startActiveDiscovery()}),[e]),(0,x.jsx)(Be._,{label:D.Ru.get("playback-control.connect-picker"),focusTransferId:"DEVICE-PICKER",children:(0,x.jsxs)(Me.w,{className:l()(jr,{[Sr]:o}),fixedHeader:(0,x.jsx)(p.a,{title:o?"Connect":D.Ru.get("playback-control.connect-picker"),panel:m.Z.DevicePicker}),children:[o?(0,x.jsx)(ur,{}):(0,x.jsx)(Zs,{isPlaying:d}),t&&!i&&(0,x.jsx)(vr,{}),(0,x.jsx)(Js,{devices:r?u:c.map((e=>(0,qa.gS)(e))),areWebPlayerCastDevicesAvailable:b})]})})};var Nr=i(53177),wr=i(19742),kr=i(75341),Er=i(55170),Rr=i(38557),Ir=i(75784);var Tr=i(90630);const Ar=()=>{const e=(0,O.wA)(),{isActive:t}=(0,j.AI)(m.Z.NowPlayingView),i=(0,s.NC)(Tr.Ym5,{loadingValue:!1}),a=(0,ht.o)((e=>e?.item),((e,t)=>e?.uid===t?.uid)),r=(e=>{const t=(0,Rr.Z)(e);return!(!t||e&&!(0,Ir.v)(e))&&t?.uid!==e?.uid})(a);return(0,n.useEffect)((()=>{t&&r&&i&&a&&e&&e((0,Er.PY)())}),[r,a,t,i,e]),null};var Lr=i(79431);const Or=({children:e})=>{const[t,i]=(0,n.useState)(null),a=(0,n.useCallback)((()=>{i(Lr.j.Errored)}),[]),s=(0,n.useMemo)((()=>({state:t,capturePlaybackError:a})),[t,a]);return(0,x.jsx)(Lr.O.Provider,{value:s,children:e})},Dr=(0,n.lazy)((()=>Promise.all([i.e(3359),i.e(9340)]).then(i.bind(i,69340)))),Pr=e=>(0,x.jsx)(Or,{children:(0,x.jsx)(Dr,{...e})});var Ur=i(79202),_r=i(99202),Fr=i(64612);const Br=()=>(0,x.jsx)(x.Fragment,{}),Mr=()=>(0,x.jsx)(x.Fragment,{});var Hr=i(81899),Vr=i(2945),qr=i(32037);const zr="Xh1TBgSrJAYVdjRM8zFV",Qr="XtrKVBpPjO52Dsuh7Sl3",Yr="Ebrqn7sM1CfWaEig2gQW",Gr="cA09n1bnWHC5ii99Gjpq",Wr=()=>(0,x.jsx)("div",{className:(0,qr.Ju)("invertedDark",Gr),children:(0,x.jsx)(c.E,{variant:"bodySmall",children:D.Ru.get("web-player.now-playing-view.chapters.disclaimer")})});var Kr=i(1091),Zr=i(51496);const Xr=({title:e,isActive:t,isPlaying:i,timestamp:a,onClick:s})=>{const r=(0,n.useCallback)((()=>{s(a)}),[s,a]);return(0,x.jsx)(q.v,{variant:"naked",id:e,hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",title:(0,x.jsxs)(c.E,{variant:"bodyMedium",semanticColor:t?"textBrightAccent":"textBase",className:"standalone-ellipsis-one-line",children:[i&&t&&(0,x.jsx)(Kr.J,{animated:t})," ",e]}),subtitle:(0,Zr.f)(a),onClick:r})};var Jr=i(48455),$r=i(16203);function eo(e,t){if(!e)return null;const i=(0,$r.s)(e);return null===i?null:t.findIndex((e=>(e.seekStart?.milliseconds??0)<=i&&(e.seekStop?.milliseconds??1/0)>=i))}var to=i(12265),io=i(44947),no=i(49810);const ao=new io.l("queryNpvEpisodeChapters","query","367f0e93a0d219ae6f5874bcc460201db0a43467ae94f16298931a704ac62ea6",null),so=12e5,ro=6e5;var oo=i(11663),lo=i(81652);var co=i(48926),uo=i(82226);const po=(0,n.memo)((({chapters:e,episodeUri:t,nextOffset:i,limit:a,isPlaying:s,isMLGeneratedChapters:r})=>{const o=(0,S.z)(),{logger:l,spec:c}=(0,Pe.r)(Vr.U,{}),{chapters:u,fetchNextPage:d}=(({uri:e,startOffset:t=0,pageSize:i,autoFetchOnMount:a=!0})=>{const{request:s}=(0,n.useContext)(oo.j),{data:r,isLoading:o,error:l,fetchNextPage:c}=(0,to.q)({queryKey:["npv","episode-chapters",e,{startOffset:t,limit:i}],queryFn:({pageParam:t})=>(0,lo.c)(s,ao,function(e,t,i){return{offset:t,limit:i,uri:e}}(e,t,i)),staleTime:ro,gcTime:so,enabled:a,initialPageParam:t,getNextPageParam:e=>{if("Episode"!==e?.data?.episodeUnionV2.__typename)return;const t=e.data.episodeUnionV2.displaySegments;return t?.displaySegments.pagingInfo.nextOffset&&t.displaySegments.pagingInfo.nextOffset>0?t.displaySegments.pagingInfo.nextOffset:void 0}}),u=(0,n.useCallback)((async()=>{await c()}),[c]);return{chapters:(0,n.useMemo)((()=>r?.pages.flatMap((e=>"Episode"===e?.data?.episodeUnionV2.__typename&&e.data.episodeUnionV2.displaySegments?.displaySegments.items?e.data.episodeUnionV2.displaySegments.displaySegments.items:[]))??[]),[r?.pages]),error:l,loading:o,fetchNextPage:u}})({uri:t,pageSize:a??10,startOffset:i??e.length,autoFetchOnMount:!1}),p=(0,n.useMemo)((()=>(u.length>0?[...e,...u]:e).filter(mo)),[e,u]),m=(e=>{const t=(0,S.z)(),[i,a]=(0,n.useState)((()=>eo(t.getState(),e)));return(0,Jr.$)((()=>{const n=eo(t.getState(),e);n!==i&&a(n)}),500),i})(p),g=(0,n.useCallback)((e=>{o.seekTo(e),l.logInteraction(c.chapterRowFactory().hitSeekToTime({msToSeekTo:e})),o.getState()?.isPaused&&(o.resume(),l.logInteraction(c.chapterRowFactory().hitResume({itemToBeResumed:t})))}),[t,l,o,c]);return p.length?(0,x.jsxs)(co.w,{className:zr,children:[(0,x.jsx)(co.X,{children:D.Ru.get("web-player.now-playing-view.chapters")}),r&&(0,x.jsx)(Wr,{}),(0,x.jsx)(uo._,{onReachBottom:d,triggerOnInitialLoad:!1,className:Qr,children:(0,x.jsx)(qi.$,{"aria-label":D.Ru.get("web-player.now-playing-view.chapters"),className:Yr,children:p.map(((e,t)=>{if(!e.title||"number"!=typeof e.seekStart?.milliseconds)return null;const i=t===m;return(0,x.jsx)(Qi.c,{children:(0,x.jsx)(Xr,{onClick:g,timestamp:e.seekStart.milliseconds,title:e.title,isActive:i,isPlaying:s})},e.seekStart.milliseconds)}))})})]}):null}));function mo(e){return"TalkDisplaySegment"===e.__typename}const go=e=>"Episode"===e?.__typename,vo=e=>"__typename"in e&&"Podcast"===e.__typename,ho=e=>!!e&&"__typename"in e&&"Episode"===e.__typename;var xo=i(11023),yo=i(44889),bo=i(92734),fo=i(85387),jo=i(76949),So=i(78245),Co=i(53575),No=i(3568),wo=i(13317),ko=i(75189),Eo=i(39595),Ro=i(78172),Io=i(89979);const To="YdLiRQVNwEQzUNR44QuY",Ao="VVxt7MTKoKdOCVIWYfHn",Lo="c21KEAgelRvfiGswmHy9",Oo=({images:e,contentRating:t,contextTitle:i,contextUri:a,menu:s,position:r=0,title:o,type:l,uri:u,usePlayContextItem:d})=>{const p=(0,fo.Zp)(),{draggable:m,onDragStart:g}=(0,Co.P)(),v=(0,Cn.o_h)(u)?.toURLPath(!0),h=a&&(0,Cn.o_h)(a)?.toURLPath(!0),y=(0,xi.y)(),{badges:b}=(0,Io.b)({contentRating:t}),{isPlaying:f,togglePlay:j}=d({uri:u}),{spec:S,logger:C}=(0,Pe.r)(jo.G,{data:{uri:u,position:r}}),N=(0,n.useCallback)((e=>{if(e.stopPropagation(),e.preventDefault(),v){const e=S.hitUiNavigate({destination:v});C.logInteraction(e),p(v)}}),[C,p,S,v]),w=(0,n.useCallback)((e=>{if(e.stopPropagation(),e.preventDefault(),v){const e=S.trackContainerFactory().trackInformationFactory().nameLinkFactory().hitUiNavigate({destination:v});C.logInteraction(e),p(v)}}),[C,p,S,v]),k=(0,n.useCallback)((e=>{if(e.stopPropagation(),e.preventDefault(),h){const e=S.trackContainerFactory().trackInformationFactory().contextLinkFactory({uri:a}).hitUiNavigate({destination:h});C.logInteraction(e),p(h)}}),[a,h,C,p,S]),E=(0,n.useCallback)((e=>{e.stopPropagation();const t=S.trackContainerFactory().coverArtFactory().hitPlay({itemToBePlayed:u});C.logInteraction(t),j()}),[C,S,j,u]),R=(0,n.useMemo)((()=>(0,x.jsx)(ra.Zp,{label:o,children:(0,x.jsx)(we.d,{lineClamp:y===pi.E.MEDIUM?1:2,children:v?(0,x.jsx)(Ve.N,{to:v,onClick:w,children:o}):o})})),[y,w,o,v]),I=(0,n.useMemo)((()=>(0,x.jsxs)(aa.j,{lineClamp:1,children:[b.explicit&&(0,x.jsx)(No.U,{}),b.nineteen&&(0,x.jsx)(Eo.q,{}),l,h&&i&&(0,x.jsxs)(x.Fragment,{children:[" • ",(0,x.jsx)(ra.Zp,{label:i,children:(0,x.jsx)(Ve.N,{to:h,onClick:k,children:(0,x.jsx)(c.E,{semanticColor:"textSubdued",children:i})})})]})]})),[b.explicit,b.nineteen,i,h,k,l]);return(0,x.jsx)(sa.h,{menu:s,children:(0,x.jsx)(q.v,{activeBackgroundColor:"backgroundTintedPress",className:Lo,draggable:m,hoverBackgroundColor:"backgroundTintedHighlight",id:u,layout:"regular",onClick:N,onDragStart:e=>{if(e.target!==e.currentTarget)return;g(e,{itemUris:[u],dragLabelText:`${o}${i?` • ${i}`:""}`,contextUri:a})},variant:"naked",title:R,subtitle:y===pi.E.MEDIUM&&I,body:y!==pi.E.MEDIUM&&I,paddingInlineStart:me.v4,paddingInlineEnd:me.v4,media:(0,x.jsxs)("div",{className:To,children:[(0,x.jsx)(So.x,{className:Ao,isPlaying:f,isLocked:!1,onClick:E,playAriaLabel:D.Ru.get("tracklist.a11y.play",o,i)}),(0,x.jsx)(wo.b,{type:Ro.c.EPISODE,title:o,shape:wo.u.ROUNDED_CORNERS,size:ko.Qe.SIZE_48,images:e})]})})})};var Do=i(46307);const Po=({episode:e,position:t})=>{const i=e.podcastV2.data,n=vo(i)?i.uri:void 0,a=vo(i)?i.name:void 0,{usePlayContextItem:s}=(0,Do.P)({uri:n??e.uri},{featureIdentifier:"episode_ai_dubbing"});return(0,x.jsx)(Oo,{contentRating:e.contentRating?.label,contextTitle:a,contextUri:n,images:e.coverArt?.sources,menu:(0,x.jsx)(bo.b,{uri:e.uri}),position:t,title:e.name,type:D.Ru.get("card.tag.episode"),uri:e.uri,usePlayContextItem:s},e.uri)},Uo=e=>(0,x.jsx)(c.E,{...e,as:"div",variant:"bodySmall"});var _o=i(59831);const Fo="KJEbbXyTy0gbIalPPwjP",Bo=e=>(0,x.jsx)(_o.B,{className:Fo,...e}),Mo="dmEFRgvLS6M2o8rmoX6v",Ho=({description:e,episodes:t,title:i,...n})=>(0,x.jsxs)(co.w,{...n,className:Mo,children:[(0,x.jsx)(co.X,{icon:(0,x.jsx)(yo.H,{size:"small"}),tooltipLabel:i,children:i}),(0,x.jsx)(Uo,{children:e}),(0,x.jsx)(Bo,{children:t.map(((e,t)=>(0,x.jsx)(Po,{episode:e,position:t},e.uri)))})]});var Vo=i(1038);function qo({episode:e}){const t=(e=>e.aiDubbedEpisodes?.items?e.aiDubbedEpisodes.items.map((e=>e.data)).filter((t=>ho(t)&&t.uri!==e.uri)):[])(e),{spec:i}=(0,Pe.r)(xo.y,{});if(t.length<=0)return null;const n=(0,D.wB)(t[0]?.language?.code),a=t.length>1&&D.Ru.get("web-player.now-playing-view.dubbed-episodes.title-multiple")||n&&D.Ru.get("web-player.now-playing-view.dubbed-episodes.title-single-with-language",{language:(0,Vo.kX)(n)})||D.Ru.get("web-player.now-playing-view.dubbed-episodes.title-single"),s=t.length>1?D.Ru.get("web-player.now-playing-view.dubbed-episodes.description-multiple"):D.Ru.get("web-player.now-playing-view.dubbed-episodes.description-single");return(0,x.jsx)(ja.r,{spec:i.episodeListFactory(),children:(0,x.jsx)(Ho,{description:s,episodes:t,title:a})})}var zo=i(37093);function Qo({episode:e}){const t=(e=>go(e)&&e.originalEpisode&&ho(e.originalEpisode?.data)?e.originalEpisode.data:void 0)(e),{spec:i}=(0,Pe.r)(zo.I,{});if(!t)return null;const n=(0,D.wB)(t.language?.code),a=n?D.Ru.get("web-player.now-playing-view.original-episode.title-with-language",{language:(0,Vo.kX)(n)}):D.Ru.get("web-player.now-playing-view.original-episode.title"),s=n?D.Ru.get("web-player.now-playing-view.original-episode.description-with-language",{language:(0,Vo.kX)(n)}):D.Ru.get("web-player.now-playing-view.original-episode.description");return(0,x.jsx)(ja.r,{spec:i,children:(0,x.jsx)(Ho,{description:s,episodes:[t],title:a})})}var Yo=i(83602),Go=i(88147);const Wo="YC6K2bFUeJkdE4cCvbD3",Ko="vHQbygDcvOQ4Ls0W6vb1",Zo="Ku9l84_lLCFE3crS1Y8B",Xo="TortsxZeDfI28luc5Dac",Jo="XHpZHlxCiVHe8qTVVskT",$o="lu9_R5Kw07YEWlq8eKs9",el="RypbYIkqqlUkhxg_RwYm",tl=(0,n.memo)((function({transcriptSections:e,onTimeStampClick:t,episodeUri:i}){const{spec:n,logger:a}=(0,Pe.r)(Yo.c,{data:{uri:i}}),{isPlaying:s}=(0,Do.P)({uri:i},{featureIdentifier:"episode"}),r=n.timestampLinkFactory();return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:Ko,children:[(0,x.jsx)("div",{className:Xo,children:(0,x.jsx)(c.E,{as:"p",variant:"marginal",semanticColor:"textSubdued",children:D.Ru.get("web-player.episode.transcript.disclaimer")})}),e.map(((e,n)=>{const o=`transcript-section-${n}`;return(0,x.jsxs)("div",{className:Zo,children:[(0,x.jsx)("button",{className:Jo,onClick:()=>{t(e.startMs,o),a.logInteraction(s?r.hitSeekToTime({msToSeekTo:e.startMs}):r.hitPlay({itemToBePlayed:i}))},children:(0,x.jsx)(Go.k,{id:o,targetURI:(0,Cn.o_h)(i),fadeOut:!0,children:(0,x.jsx)(c.E,{variant:"marginalBold",semanticColor:"textSubdued",className:$o,children:(0,Zr.f)(e.startMs)})})}),e.content.map(((e,t)=>(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBase",className:el,dir:"auto",children:e},`transcript-text-${t}`)))]},o)}))]})})}));var il=i(39550);var nl=i(25249);const al="Ki3a1Wxv0XrjWwuoFy1w",sl="Zk6EWCEL86hT3S6Xy6mA",rl="cReiUDEvwfvjdiCCF8g9",ol=({episode:e})=>{const t=(e=>"Podcast"===e.podcastV2.data.__typename&&e.podcastV2.data)(e),i="gatedEntityRelations"in e?e.gatedEntityRelations:null,n=i?.at(0),a=(0,nl.p)(i)?.accessInfo;if(!n||!t||!a||a.isUserMemberOfAtLeastOneGroup||"UpsellAccessExplanation"!==a.accessExplanation?.__typename)return null;const s=a.accessExplanation,r=(e=>{const t=e?.at(0)?.relatedEntity;return t&&("EpisodeResponseWrapper"===t?.__typename&&"Episode"===t.data.__typename||"PodcastResponseWrapper"===t?.__typename&&"Podcast"===t.data.__typename)?t.data.coverArt:null})(i);return(0,x.jsxs)(co.w,{className:al,children:[(0,x.jsx)(sa.h,{menu:(0,x.jsx)(il.H,{uri:t.uri}),children:(0,x.jsx)(Ve.N,{to:t.uri,children:(0,x.jsx)(wo.b,{type:Ro.c.SHOW,title:t.name,images:r?.sources,size:ko.Qe.SIZE_48})})}),(0,x.jsx)(c.E,{variant:"bodySmall",className:sl,children:n.summary?.forUserWithoutAccess||s.body}),s.url&&(0,x.jsx)(oe.H,{size:"small",className:rl,condensed:!0,target:"_blank",semanticColor:"textBrightAccent",iconTrailing:is.H,href:s.url,children:s.actionText})]})};var ll=i(17461),cl=i(32825),ul=i(77389),dl=i(84328),pl=i(15834);var ml=i(85258),gl=i(22232);const vl="_QEMUk5U16U3CQn0wvbD",hl="mbkl2P60JUhDqc9qGvp9",xl="Xh6dG3pzi2SS7v4cvZzG",yl="sOdoW26RUwggLToa7xDt",bl="B_TcBcc1BM2yLgvXbh66",fl="tRnhyUQiKOxA3z8mUD_U",jl="_shxqlkLuB52H1iCh_OQ",Sl="hAwePVlxumRNpdOSpwyV";const Cl=n.forwardRef((function({className:e="",segment:t,onClickPlay:i,isPlaying:a},s){const{label:r,Icon:o}=(0,n.useMemo)((()=>function(e){if("TALK"===e.type)return{Icon:ll.L,label:D.Ru.get("playlist.a11y.play",e.title)};const t=e.track.artists?.map((e=>e.name)).join(D.Ru.getSeparator())||"";return{Icon:cl.v,label:D.Ru.get("tracklist.a11y.play",e.track.name,t)}}(t)),[t]),c=(0,n.useCallback)((()=>{i()}),[i]);return(0,x.jsxs)("div",{className:l()(jl,e),children:[a?(0,x.jsx)(Kr.J,{className:fl,animated:!0}):(0,x.jsx)("span",{className:fl,children:(0,x.jsx)(o,{iconSize:16,"aria-hidden":"true"})}),(0,x.jsx)(So.x,{className:bl,iconClassName:Sl,onClick:c,isPlaying:a,isLocked:!1,playAriaLabel:r,ref:s})]})})),Nl=({children:e,onTriggerPlay:t,episodeUri:i,index:n})=>{const{spec:a,logger:s}=(0,Pe.r)(ul.f,{}),r=(0,ta.YQ)((()=>{const e=s.logInteraction(a.segmentItemFactory({uri:i,position:n||0}).doubleHitPlay({itemToBePlayed:i}));t(e)}),gl.d,{leading:!0,trailing:!1});return(0,x.jsx)("div",{className:yl,onDoubleClick:r,children:e})},wl=({segment:e,episodeUri:t,index:i})=>{const{spec:a,logger:s}=(0,Pe.r)(ul.f,{}),{isActive:r,isPlaying:o,onClick:l}=(0,ml.L)({episodeUri:t,start:e.start,stop:e.stop}),c={uri:t},u=function(e){const t=[{url:e.track.album.image}];return{type:Ro.c.TRACK,uri:e.uri,uid:null,provider:null,images:t,name:e.track.name,mediaType:"audio",duration:{milliseconds:0},album:{type:Ro.c.ALBUM,uri:e.track.album.uri,name:e.track.album.name,images:t},artists:e.track.artists.map((e=>({type:Ro.c.ARTIST,name:e.name,uri:e.uri})))}}(e),d=a.segmentItemFactory({uri:t,position:i||0}).playbackButtonFactory(),p=(0,n.useCallback)((()=>{l({}),r&&o?s.logInteraction(d.hitPause({itemToBePaused:t})):r&&!o?s.logInteraction(d.hitResume({itemToBeResumed:t})):s.logInteraction(d.hitPlay({itemToBePlayed:t}))}),[t,r,o,s,l,d]);return(0,x.jsxs)(Nl,{onTriggerPlay:l,episodeUri:t,children:[(0,x.jsx)(Cl,{segment:e,isActive:r,isPlaying:o,onClickPlay:()=>{p()}}),(0,x.jsx)(pl.d,{context:c,item:u,titleTypeVariant:"bodyMedium",subtitleTypeVariant:"bodySmall",onTitleClick:e=>{s.logInteraction(a.segmentItemFactory({uri:t,position:i||0}).albumLinkFactory({uri:c.uri}).hitUiNavigate({destination:e||""}))},onSubtitleClick:e=>{s.logInteraction(a.segmentItemFactory({uri:t,position:i||0}).artistLinkFactory({uri:e||"",position:0}).hitUiNavigate({destination:e||""}))}})]})},kl=({segment:e,episodeUri:t,index:i})=>{const{spec:a,logger:s}=(0,Pe.r)(ul.f,{}),{isActive:r,isPlaying:o,onClick:l}=(0,ml.L)({episodeUri:t,start:e.start,stop:e.stop}),u=function(e){const t=[];return{type:Ro.c.UNKNOWN,uri:e.uri,uid:null,provider:null,images:t,name:e.title,mediaType:"audio",duration:{milliseconds:0},album:{type:Ro.c.ALBUM,uri:e.show.uri,name:e.show.name,images:t},artists:[]}}(e),d=a.segmentItemFactory({uri:t,position:i||0}).playbackButtonFactory(),p=(0,n.useCallback)((()=>{l({}),r&&o?s.logInteraction(d.hitPause({itemToBePaused:t})):r&&!o?s.logInteraction(d.hitResume({itemToBeResumed:t})):s.logInteraction(d.hitPlay({itemToBePlayed:t}))}),[t,r,o,s,l,d]);return(0,x.jsxs)(Nl,{onTriggerPlay:l,episodeUri:t,children:[(0,x.jsx)(Cl,{segment:e,isActive:r,isPlaying:o,onClickPlay:()=>{p()}}),(0,x.jsx)(dl.r,{children:(0,x.jsx)(c.E,{variant:"bodyMedium",semanticColor:"textBase",children:u.name})},u.name)]})};var El=i(6269);function Rl(e){return!!(0,El.o)().getCapabilities().isSupported&&function(e){const t=e.metadata?.["parent_episode.uri"];return!!t&&(0,Cn.gHQ)(t)}(e)}const Il=(0,Nr.mc)((({item:e})=>{const t=e.metadata?.["parent_episode.uri"],i=function(e){const t=(0,El.o)();return(0,n.useCallback)((async(i,n)=>{if(!e)return[];try{return await t.getSegments(e,i,n)}catch(e){return[]}}),[e,t])}(t),[a,s]=(0,n.useState)([]),r=(0,n.useRef)(!1),o=(0,n.useRef)(0),l=(0,n.useCallback)((()=>{const e=o.current;null!==e&&(r.current||(r.current=!0,i(e,10).then((e=>{s((t=>{const i=t.concat(e);return o.current=i.length+1,i})),r.current=!1}))))}),[i]);return(0,n.useEffect)((()=>{s([])}),[e.uri]),t?(0,x.jsxs)(co.w,{className:vl,children:[(0,x.jsx)(co.X,{className:hl,children:D.Ru.get("music_and_talk.in_this_episode")}),(0,x.jsx)("div",{className:xl,children:(0,x.jsx)(uo._,{onReachBottom:l,triggerOnInitialLoad:!0,children:a.map(((e,i)=>"MUSIC"===e.type?(0,x.jsx)(wl,{segment:e,episodeUri:t},`${e.uri}-${i}`):(0,x.jsx)(kl,{segment:e,episodeUri:t},`${e.uri}-${i}`)))})})]}):null}),{name:"NPVInThisEpisode"});var Tl=i(22700),Al=i(87150),Ll=i(668);const Ol=({children:e,...t})=>(0,x.jsx)(Dl,{size:"small",...t,$_css:Ll.ZSH,children:e});var Dl=(0,Al.Ay)(re.n).withConfig({displayName:"ButtonSecondary___StyledEncoreButtonSecondary",componentId:"sc-13xoveo-0"})((e=>({borderColor:e.$_css})));function Pl(e,t){return e.uid??`${e.uri}:${t}`}var Ul=i(46136),_l=i(64493),Fl=i(19988),Bl=i(80404),Ml=i(85117),Hl=i(74858),Vl=i(37926);const ql="VXFYm2GnsH4zc3EPikNi",zl="yvjS3DPkDIHgMUZxL972",Ql="Os6nTuXambdCB8H81QRT",Yl="RDIVOZoeGMohQ8MeJjUH",Gl="Cj0QJuDauCo39643t0Q8",Wl="evQ_5Znk6OXYHBzLCSoN",Kl="nCwi6jOC9FEKO5tKAQKW",Zl="DP0qcvnv6ToERKYhb9Xk",Xl="m1ZL7TCf7Ge2VxQjgGgv",Jl="yIYdkVZJzDlj1lqOmV1M",$l="kh6wYYPvgRPBhA2wj3AS",ec="qp7Sys7hJSZHLzw4K_yF",tc="fIabFr0bD1PUqwipmTjQ",ic=({title:e,type:t,images:i,onTogglePlay:n,isPlaying:a,ariaPauseLabel:s,ariaPlayLabel:r,isPlayable:o})=>{const c=(0,Yt._)(),u=t===Ro.c.ARTIST||t===Ro.c.USER?wo.u.CIRCLE:wo.u.ROUNDED_CORNERS;return(0,x.jsxs)("div",{className:$l,children:[(0,x.jsx)(wo.b,{fadeIn:!0,images:c(i??[],48),shape:u,size:ko.Qe.SIZE_48,iconSize:"medium",type:t,title:e,loadingMode:"eager"}),!o&&(0,x.jsx)("span",{className:l()(ec,Gl),children:(0,x.jsx)(Vl.R,{onClick:n,version:Vl.H.transparent,isPlaying:a,ariaPauseLabel:s,ariaPlayLabel:r,condensedAll:!0})})]})},nc=({title:e,isActive:t})=>(0,x.jsx)(ra.Zp,{showDelay:ra.uF,label:e,children:(0,x.jsx)(we.d,{lineClamp:1,semanticColor:t?"textBrightAccent":"textBase",dir:"auto",children:e})}),ac=({menu:e,labelName:t})=>(0,x.jsx)(la.b,{menu:e,children:(0,x.jsx)(oa.e,{className:Gl,label:D.Ru.get("more.label.context",t),size:"small"})});var sc=i(32284),rc=i(34855),oc=i(95717);const lc=({queuedBy:e})=>{if(!e)return null;const t=(0,oc.g)(e.images,{desiredSize:24});return(0,x.jsx)(ra.Zp,{label:D.Ru.get("queue.queued-by",e.name),children:(0,x.jsx)("div",{children:(0,x.jsx)(sa.h,{menu:(0,x.jsx)(rc.B,{uri:e.uri}),children:(0,x.jsx)(Ve.N,{to:e.uri,children:(0,x.jsx)(sc.e,{images:t?[t]:[],userIconSize:"small",width:24,displayName:e.name,username:e.username,label:""})})})})})},cc=({queuedBy:e,menu:t,moreButtonLabelName:i})=>(0,x.jsxs)("div",{className:Yl,children:[t&&i&&(0,x.jsx)(ac,{menu:t,labelName:i}),(0,x.jsx)(lc,{queuedBy:e})]});var uc=i(34437),dc=i(13808);const pc="spotify:app:queue";var mc=i(46106);const gc=()=>(0,x.jsx)("div",{className:ql}),vc=({id:e,uid:t,uri:i,contextUri:a,index:s,dragLabel:r,type:o,title:c,subtitle:u,images:d,onDrop:p,allowedDropMimeTypes:m,menu:g,moreButtonLabelName:v,usePlayContextItem:h,section:y,queuedBy:b,ariaPauseLabel:f,ariaPlayLabel:j,onContextMenu:S,isPlayable:C,isAnyArtistBanned:N,handleArtistBanUndoClick:w,isNpv:k})=>{const{className:E,dropPosition:R,draggable:I,...T}=function({uid:e,uri:t,index:i,dragLabel:a,allowedMimeTypes:s=[],onDrop:r,sectionId:o}){const{draggable:l,onDragStart:c}=(0,dc.R)({index:i,contextUri:pc,sectionId:o,label:a??"",isEnabled:!!a}),u=(0,uc.A)({id:e??void 0,uri:t,allowedMimeTypesByDropPosition:{[Fl.Nz.BEFORE]:s,[Fl.Nz.AFTER]:s},onDrop:r});return(0,n.useMemo)((()=>({...u,draggable:l,onDragStart:c})),[l,u,c])}({uid:t,uri:i,index:s,dragLabel:r,onDrop:p,allowedMimeTypes:m,sectionId:y}),{isSelected:A}=(0,n.useContext)(Ml.m),{onClick:L,onContextMenu:O,onKeyDown:D}=(0,Bl.q)({index:s,contextUri:a,onContextMenu:S,canRemovePlaylistItems:!1,removePlaylistItems:void 0,isTreeGrid:!0}),P=(0,ie.s)(),{spec:U}=(0,Pe.r)(Ul.i,{data:{position:s,reason:"",uri:i}}),{isActive:_,isPlaying:F,togglePlay:B,triggerPlay:M}=h({uri:i,uid:t??void 0}),H=(0,n.useCallback)((()=>{const e=(0,mc.$I)({spec:U.playbackButtonFactory(),logger:P,uri:i,isActive:_,isPlaying:F});B({loggingParams:e})}),[_,F,P,U,B,i]),V=(0,Hl.W)(w),z=(0,n.useCallback)((()=>{if(N)return void V();const e=P.logInteraction(U.doubleHitPlay({itemToBePlayed:i}));M({loggingParams:e})}),[V,N,P,U,M,i]),Q=(0,n.useCallback)((e=>{if("Enter"===e.key&&e.target instanceof Element&&e.currentTarget.querySelector(':scope > [role="button"]')===e.target){const e=P.logInteraction(U.playbackButtonFactory().hitPlay({itemToBePlayed:i}));M({loggingParams:e})}D(e)}),[P,D,U,M,i]),Y=(0,n.useCallback)((e=>{L(e)}),[L]),G=(0,x.jsx)(ic,{type:o,onTogglePlay:H,isPlaying:F,title:c,images:d,ariaPauseLabel:f,ariaPlayLabel:j,isPlayable:C}),W=(0,x.jsx)(cc,{queuedBy:b,menu:g,moreButtonLabelName:v}),K=A(s),Z=K&&A(s-1),X=K&&A(s+1),J=(0,x.jsx)(q.v,{id:e,media:G,title:(0,x.jsx)(nc,{isActive:_,title:c}),subtitle:u,className:l()(Ql,E,{[Wl]:Z,[Kl]:X,[Xl]:k}),variant:A(s)?"tinted":void 0,hoverBackgroundColor:k?"backgroundTintedHighlight":"backgroundHighlight",trailing:W,onDoubleClick:z,hoverAnimationDuration:"0ms",padding:me.v4,onClick:()=>{},onContextMenu:O,"aria-disabled":C,tabIndex:0}),$=(0,x.jsx)(_l.W,{className:l()(E),draggable:I&&!!r,"aria-posinset":s,onKeyDown:Q,...T,onClick:Y,children:J});return(0,x.jsxs)(x.Fragment,{children:[R===Fl.Nz.BEFORE&&(0,x.jsx)(gc,{}),$,R===Fl.Nz.AFTER&&(0,x.jsx)(gc,{})]})},hc=e=>{const t=(0,x.jsx)(vc,{...e});return e.menu?(0,x.jsx)(sa.h,{menu:e.menu,children:t}):t},xc=({ad:e,index:t,...i})=>{const{uid:n,uri:a,type:s,title:r,advertiser:o,images:l}=e,c=Pl(e,t),u=o??r??D.Ru.get("ad-formats.advertisement");return(0,x.jsx)(hc,{uid:n,uri:a,id:c,index:t,type:s,title:u,images:l,subtitle:null,...i})},yc=({type:e})=>{const t=function(e){switch(e){case Ro.c.TRACK:return D.Ru.get("web-player.queue-history.item-type.track");case Ro.c.EPISODE:return D.Ru.get("web-player.queue-history.item-type.episode");case Ro.c.CHAPTER:return D.Ru.get("web-player.queue-history.item-type.chapter");case Ro.c.AD:case Ro.c.UNKNOWN:return null;default:return(0,gn.k)(e),null}}(e);return t&&(0,x.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:t})};var bc=i(45325),fc=i(38377),jc=i(86324),Sc=i(57836),Cc=i(21081),Nc=i(45176),wc=i(56226),kc=i(23046);const Ec="iFEXaIHbvw1bGP0fFu9g",Rc=({item:e,subtitle:t,tooltipText:i,showTypeLabel:a})=>{const s=(e=>{const t=(0,Cc.T)(e.uri),i=(0,Ir.v)(e)||(0,kc.p)(e)||(0,wc.d)(e),a=n.Children.toArray([(0,jc.N)(e)&&(0,x.jsx)(bc.R,{title:D.Ru.get("web-player.smart-shuffle.icon-hover-label"),"aria-label":D.Ru.get("web-player.smart-shuffle.icon-hover-label"),semanticColor:"textBrightAccent",size:"small"}),t===Nc.kw.YES&&(0,x.jsx)(Sc._,{}),i&&e.isExplicit&&!e.is19PlusOnly&&(0,x.jsx)(No.U,{}),i&&e.is19PlusOnly&&(0,x.jsx)(Eo.q,{size:16}),(0,Ir.v)(e)&&(e.hasAssociatedVideo||"video"===e.mediaType)&&(0,x.jsx)(fc.l,{})]);return a.length?(0,x.jsx)("span",{className:Ec,children:a}):null})(e);return(0,x.jsx)(aa.j,{dir:"auto",children:(0,x.jsxs)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",className:Zl,children:[s?(0,x.jsx)("span",{className:tc,children:s}):null,(0,x.jsx)(ra.Zp,{label:i,showDelay:ra.uF,children:(0,x.jsxs)("span",{className:Jl,children:[a&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(yc,{type:e.type})," •"," "]}),t]})})]})})};var Ic=i(88342);function Tc(e){let{uri:t}=(0,Gs.f)();return e===Ic.$.NextInQueue?t="spotify:app:queue:NextInQueue":e===Ic.$.NextUp&&(t="spotify:app:queue:NextUp"),t??""}const Ac=({episode:e,index:t,showTypeLabel:i,...n})=>{const{uid:a,uri:s,type:r,name:o,images:l,show:c}=e,u=Pl(e,t),d=Tc(n.section),p=(0,x.jsx)(bo.b,{uri:s,uid:a??void 0,showUri:e.show.uri,contextUri:d,provider:e.provider}),m=(0,x.jsx)(Rc,{item:e,tooltipText:c.name,showTypeLabel:i,subtitle:(0,x.jsx)(sa.h,{menu:(0,x.jsx)(il.H,{uri:c.uri}),children:(0,x.jsx)(Ve.N,{to:c.uri,stopPropagation:!0,children:c.name})})});return(0,x.jsx)(hc,{uid:a,uri:s,contextUri:d,id:u,index:t,type:r,title:o,subtitle:m,images:l,dragLabel:o,menu:p,moreButtonLabelName:o,ariaPauseLabel:D.Ru.get("tracklist.a11y.pause",o,c.name),ariaPlayLabel:D.Ru.get("tracklist.a11y.play",o,c.name),...n})};var Lc=i(96691),Oc=i(98955),Dc=i(82502),Pc=i(49157),Uc=i(8766);const _c=({track:e,index:t,showTypeLabel:i,...a})=>{const{uid:s,uri:r,type:o,name:l,album:c}=e,u=Pl(e,t),d=Tc(a.section),{uri:p}=(0,Gs.f)(),m=e.isLocal?(0,x.jsx)(Oc.A,{uri:r,uid:s??void 0,contextUri:d}):(0,x.jsx)(Dc.P,{uri:r,uid:s??void 0,albumUri:c.uri,artists:e.artists,contextUri:d,entityContextUri:p??void 0,isSmartRecommendation:(0,jc.N)(e),provider:e.provider,canBan:!1}),g=e.artists.map((({name:e})=>e)).join(D.Ru.getSeparator()),v=e.artists?(0,x.jsx)(Rc,{item:e,tooltipText:g,showTypeLabel:i,subtitle:(0,x.jsx)(x.Fragment,{children:e.artists.map(((e,t)=>(0,x.jsxs)(n.Fragment,{children:[t>0&&D.Ru.getSeparator(),(0,x.jsx)(sa.h,{menu:(0,x.jsx)(Lc.t,{uri:e.uri}),children:(0,x.jsx)(Ve.N,{to:e.uri,stopPropagation:!0,children:e.name})})]},t)))})}):null,{isPlayable:h,isAnyArtistBanned:y}=(0,Uc.g)(r,{isPlayable:!0,isLocal:(0,Cn.PkR)(r),isOutOfMarket:!1,artistUris:e.artists.map((e=>e.uri))}),{unBanArtists:b}=(0,Pc.M)(e.artists.map((e=>e.uri)));return(0,x.jsx)(hc,{uid:s,uri:r,contextUri:d,id:u,index:t,type:o,title:l,images:c.images,dragLabel:l,menu:m,moreButtonLabelName:l,subtitle:v,ariaPauseLabel:D.Ru.get("tracklist.a11y.pause",l,g),ariaPlayLabel:D.Ru.get("tracklist.a11y.play",l,g),isPlayable:!h,isAnyArtistBanned:y,handleArtistBanUndoClick:b,...a})};var Fc=i(4270),Bc=i(34756);const Mc=(e,t)=>{const i=(0,Do.P)({uri:e??""},{featureIdentifier:"queue"}),a=(0,n.useMemo)((()=>function(e,t){return i=>{const a=(0,S.z)(),s=t===Ic.$.NowPlaying,{playbackStatus:r,isActive:o,isPlaying:l}=(0,ir.gC)((e=>s&&i.uri?(0,Bc.Ok)(e,i.uri):Fc.i.NOT_ACTIVE)),c=e(i),u=(0,n.useCallback)((e=>{const{uri:t,uid:n}=i;c.triggerPlay(e,t?async()=>a.skipToNext({uri:t,uid:n??null}):void 0)}),[c,a,i]),d=(0,n.useCallback)((e=>{c.togglePlay(e,(()=>{if(o)return l?a.pause():a.resume();const{uri:e,uid:t}=i;return a.skipToNext(e?{uri:e,uid:t??null}:void 0)}))}),[c,o,i,a,l]);return{playbackStatus:r,isActive:o,isPlaying:l,triggerPlay:u,togglePlay:d}}}(i.usePlayContextItem,t)),[i.usePlayContextItem,t]);return{...i,usePlayContextItem:a}};var Hc=i(59829),Vc=i(60841),qc=i(77782);const zc="qbOrWcMUhSri1nPkZLQA",Qc="SQF5NXZsecXwP7qjjQ70",Yc="PqL625rkFi7CBiMggYTP",Gc="/search",Wc=n.memo((({spec:e})=>{const t=(0,xa.t)(e);return(0,x.jsxs)(co.w,{className:zc,ref:t,children:[(0,x.jsx)(co.X,{children:D.Ru.get("web-player.your-dj.npv.queue.title")}),(0,x.jsx)(c.E,{as:"div",semanticColor:"textSubdued",children:D.Ru.get("web-player.your-dj.npv.queue.description")})]})})),Kc=n.memo((({spec:e,logger:t})=>{const i=(0,xa.t)(e);return(0,x.jsxs)(co.w,{className:zc,ref:i,children:[(0,x.jsx)(co.X,{children:D.Ru.get("web-player.now-playing-view.empty-queue")}),(0,x.jsx)(Ve.N,{to:Gc,children:(0,x.jsx)(Ol,{onClick:()=>{const i=e.searchButtonFactory().hitUiNavigate({destination:Gc});t.logInteraction(i)},children:D.Ru.get("web-player.now-playing-view.empty-queue-cta")})})]})})),Zc=(0,Nr.mc)((({isContextAd:e})=>{const{nextUp:t,queued:i}=(0,qc.w)(),a=(0,Fr.L)(),{toggleQueue:s}=(0,or.R)(),{spec:r,logger:o}=(0,Pe.r)(Tl._,{}),l=i[0]||t[0],{usePlayContextItem:c}=Mc(l?.uri||null,Ic.$.NextUp),u=(0,xa.t)(r),d=(0,n.useCallback)((()=>{const e=r.openQueueButtonFactory().hitUiNavigate({destination:"/queue"});o.logInteraction(e),s()}),[r,o,s]);return a?.context?.uri&&(0,Hc.HS)(a.context)?(0,x.jsx)(Wc,{spec:r}):a&&l?(0,x.jsxs)(co.w,{className:zc,ref:u,children:[(0,x.jsx)(co.X,{action:(0,x.jsx)(oe.H,{size:"small",condensed:!0,onClick:d,className:Yc,semanticColor:"textSubdued",children:D.Ru.get("web-player.now-playing-view.open-queue")}),children:D.Ru.get("queue.next-in-queue")}),(0,x.jsxs)("ul",{className:Qc,children:[l.type===Ro.c.TRACK&&(0,x.jsx)(_c,{track:l,index:0,usePlayContextItem:c,isNpv:!0}),l.type===Ro.c.EPISODE&&(0,x.jsx)(Ac,{episode:l,index:0,usePlayContextItem:c,isNpv:!0}),e&&l.type===Ro.c.AD&&(0,x.jsx)(xc,{ad:l,index:0,usePlayContextItem:c,isNpv:!0})]})]}):(0,x.jsx)(Kc,{spec:r,logger:o})}),{name:"NPVNextInQueue"}),Xc=e=>(0,Vc.V)()?null:(0,x.jsx)(Zc,{...e});var Jc=i(46949),$c=i(21017),eu=i(67759);const tu="_mPIDSVjofNyCLhlaXuL",iu="WbtcAaLN1SQCr16tuZXv",nu="mqlmYaGITrdEQC40rEOI",au="KEb8GSQPHsSmLCes_O07",su="Lkuf447h9WU9AaYHTsu7",ru="VU8VpmUxiLG5anxsH03k",ou="JO8KMTdQoJAPhSpBlaqE",lu="oKZq5I1c9_xWl3NWP1SU",cu=(0,Nr.mc)((({coverArt:e,description:t,name:i,publisher:a,uri:s})=>{const r=(0,xi.y)(),{draggable:o,onDragStart:u}=(0,Co.P)({itemUris:[s],dragLabelText:i}),[d,p]=(0,eu.A)(s),m=!(0,vt.n)(),g=(0,fo.Zp)(),{spec:v,logger:h,UBIFragment:y}=(0,Pe.r)(Jc.M,{}),b=(0,n.useRef)(null),f=(0,n.useCallback)((()=>{const e=v.artworkFactory().hitUiNavigate({destination:s});h.logInteraction(e)}),[h,v,s]),j=(0,n.useCallback)((()=>{const e=v.titleFactory().hitUiNavigate({destination:s});h.logInteraction(e)}),[h,v,s]),S=(0,n.useCallback)((()=>{const e=v.podcastDescriptionFactory().hitUiNavigate({destination:s});h.logInteraction(e),g((0,Cn.o_h)(s).toURLPath(!0))}),[h,g,v,s]),C=(0,n.useCallback)((()=>{const e=v.followButtonFactory().hitFollow({itemToBeFollowed:s}),t=v.followButtonFactory().hitUnfollow({itemToBeUnfollowed:s});h.logInteraction(d?t:e),p(!d)}),[d,h,p,v,s]);return(0,x.jsxs)(co.w,{className:tu,children:[(0,x.jsx)(co.X,{children:D.Ru.get("web-player.now-playing-view.podcast-about.title")}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{type:"button","data-testid":"description-button",className:iu,onClick:S,children:(0,x.jsx)(c.E,{as:"div",ref:b,variant:"bodySmall",className:nu,children:(0,x.jsx)(Ye.N,{source:t})})})}),(0,x.jsxs)("div",{className:l()(au,{[su]:r!==pi.E.MEDIUM}),children:[(0,x.jsx)(y,{spec:v,children:(0,x.jsx)(q.v,{contentAlign:!0,id:"aboutPodcastNPV",className:ou,media:(0,x.jsx)(sa.h,{menu:(0,x.jsx)(il.H,{uri:s}),children:(0,x.jsx)(Ve.N,{draggable:o,onDragStart:u,to:s,onClick:f,children:(0,x.jsx)(wo.b,{className:lu,type:Ro.c.SHOW,title:i,images:e?.sources,size:ko.Qe.SIZE_48})})}),title:(0,x.jsx)(we.d,{lineClamp:1,children:(0,x.jsx)(sa.h,{menu:(0,x.jsx)(il.H,{uri:s}),children:(0,x.jsx)(Ve.N,{draggable:o,onDragStart:u,to:s,onClick:j,children:i})})}),subtitle:(0,x.jsx)(aa.j,{lineClamp:1,variant:"bodySmall",children:a})})}),(0,x.jsx)($c.W,{isFollowing:d,onClick:C,disabled:m,className:ru})]})]})}),{name:"NPVPodcastAbout"});var uu=i(58566);const du="f6_Fu_ei4TIJWR0wzvTk",pu="TLmzadNIdvV8sYzTuXRg",mu="MT9De6UrCVQ8Qo6o3ikA",gu=n.memo((()=>(0,x.jsx)("div",{className:du,"aria-hidden":!0,children:(0,x.jsxs)("div",{className:pu,children:[(0,x.jsx)(uu.Y,{as:"div",variant:"bodyMediumBold",className:mu,charCount:8,isLoading:!0}),[20,50,25].map(((e,t)=>(0,x.jsx)(uu.Y,{as:"div",variant:"bodySmall",className:mu,charCount:e,isLoading:!0},t)))]})})));var vu=i(94423);const hu="m3pzWNRu8xGY36YIaCY1",xu=(0,Nr.mc)((({topics:e,logTopicNavigation:t})=>!e||e.length<1?null:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(co.X,{children:D.Ru.get("web-player.now-playing-view.discover-more")}),(0,x.jsx)(vu.N,{topics:e,onClick:t,className:hu})]})),{name:"NPVTopicsListWrapper"}),yu=new io.l("queryNpvEpisode","query","b57b3a8e368955775d7dbfb23d16aa5bfc1555253ee20a915d3404f13c84eac8",null),bu=new io.l("queryNpvEpisodeWithGatedEntityRelations","query","b57b3a8e368955775d7dbfb23d16aa5bfc1555253ee20a915d3404f13c84eac8",null);var fu=i(2374),ju=i(814);const Su="wYBEXo9heVZe_zkteOJ6",Cu="EjaYcQIBa_uJkc86qrpQ",Nu="QER3MDmhErzCc5bKcklD",wu="fAKKlaCbuHm_cDfnO3UW",ku="AHOmz0JPJhoOloFpM8s2",Eu="d8y50Fa8LDK2Fuc92EaA",Ru="XBYrBviGypqaAfM1BWxM",Iu="G4fVEUX2caQTFPB7mA89",Tu="ATHbG3rw7VRat_Knu9EO",Au="LsAbtB5dQLMOgNkK6uNl",Lu="nng8b1skt_Yh69A8uReL",Ou=e=>{switch(e){case pi.E.SMALL:return"titleSmall";case pi.E.LARGE:return"titleMedium";case pi.E.XLARGE:return"titleLarge";default:return"titleSmall"}},Du=({readAlongSection:e,readAlongIndex:t,index:i,activeIndex:a,onActiveSectionChange:s,breakpoint:r})=>{const o=(0,n.useRef)(!0),u=(0,n.useRef)(null);return(0,n.useEffect)((()=>{i===a&&s?(o.current&&s({sectionRef:u}),o.current=!1):o.current=!0}),[a,i,s]),void 0===e.text?.sentence?.text?null:(0,x.jsx)("div",{ref:u,className:l()(wu,{[ku]:i<a},r?.toLowerCase()),children:(0,x.jsx)(c.E,{as:"p",className:Cu,variant:r?Ou(r):"titleSmall",children:t>0?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:Iu,children:e.text.sentence.text.substring(0,t)}),(0,x.jsx)("span",{children:e.text.sentence.text.substring(t)})]}):e.text.sentence.text})})};var Pu=i(71850);const Uu=(e,t)=>{let i=0;if(0===e.length)return 0;for(let n=0;n<e.length&&!(t<e[n].startMs);n++)i+=e[n].numChars;return i};var _u=i(44816);const Fu=e=>{const t=["transcript",{uri:e}],{data:i,isLoading:n,isError:a}=(0,ln.I)({queryKey:t,queryFn:async()=>{if(e&&(0,Cn.gHQ)(e))return(async e=>{const t=(0,Cn.o_h)(e).id,i=On.n.getInstance(),n=await i.build().withHost(_u.ao).withPath(`/episode/${encodeURIComponent(t)}`).withEndpointIdentifier("/episode/{episodeId}").withoutMarket().withoutGlobalHeaders().withQueryParameters({format:"json"}).send();if(200!==n.status)throw new Error("failed to get read-along transcript");return n.body})(e)},gcTime:18e5,staleTime:6e5});return{data:i,loading:n,error:a}};var Bu=i(13847);const Mu={[pi.E.SMALL]:0,[pi.E.LARGE]:792,[pi.E.XLARGE]:1448},Hu=({startMs:e,onTimestampClick:t})=>(0,x.jsx)("button",{className:Eu,onClick:()=>{t(e)},children:(0,x.jsx)(c.E,{className:Ru,variant:"bodyMedium",children:(0,Zr.f)(e)})}),Vu=({hidden:e,onClick:t})=>(0,x.jsx)("div",{className:l()(Tu,{[Au]:e}),children:(0,x.jsx)(d.$,{colorSet:"invertedLight",size:"small",onClick:t,iconLeading:_t.Q,"aria-label":D.Ru.get("web-player.read-along-transcript.sync.button"),children:D.Ru.get("web-player.read-along-transcript.sync.button")})}),qu=({episodeURI:e,mode:t})=>{const{data:i,loading:a,error:s}=Fu(e),{spec:r,logger:o}=(0,Pe.r)(fu.c,{data:{uri:e}}),c=i?.section??[],u=r.timestampLinkFactory(),[d,p]=(0,n.useState)(!0),[m,g]=(0,n.useState)(!1),v=(0,S.z)(),h=(0,ht.o)((e=>e?.isPaused??void 0)),y=(0,n.useRef)(null),b=(0,n.useRef)(!1),f=(0,n.useRef)(null),j=(0,n.useRef)(null),C=(0,n.useRef)(null);(0,Bu.p)(C);const{breakpoint:N}=(0,mn.x)(Mu,j),{highlightedSentenceIndex:w,shouldAnimateScroll:k,readAlongIndex:E}=((e,t)=>{const i=(0,n.useRef)(0),[a]=(0,Pu.f)(100,(t=>t?.item?.uri===e));let s=t.findIndex((e=>e.text?.sentence?.text)),r=0;for(let e=0;e<t.length;e++){const i=t[e];if(a>=i.startMs&&(e===t.length-1||a<t[e+1].startMs)){s=e,i.text?.sentence&&(r=Uu(i.text.sentence.highlight,a));break}}const o=Math.abs(i.current-(s??0))<=3;return i.current=s??0,{shouldAnimateScroll:o,highlightedSentenceIndex:s,readAlongIndex:r}})(e,c),R=(0,n.useCallback)((()=>{if(!j.current||!y.current)return;const e=y.current?.offsetTop-j.current?.offsetTop-24;void 0!==e&&(j.current?.scrollTo({top:e,behavior:k?"smooth":"auto"}),g(!1))}),[k]),I=(0,n.useCallback)((()=>{if(!j.current||!y.current)return;const e=y.current?.offsetTop-j.current?.offsetTop-24,t=y.current?.clientHeight;if(void 0===e)return;const i=e>=j.current.scrollTop&&e+t<=j.current.scrollTop+j.current.clientHeight;g(!i),p(i)}),[]),T=(0,n.useCallback)((t=>{v.seekTo(t).then((()=>setTimeout((()=>p(!0)),300))),h?(v.resume(),o.logInteraction(u.hitPlay({itemToBePlayed:e}))):o.logInteraction(u.hitSeekToTime({msToSeekTo:t}))}),[v,o,u,e,h]),A=(0,n.useCallback)((()=>{b.current=!0,f.current&&clearTimeout(f.current),f.current=setTimeout((()=>{b.current=!1}),500),I()}),[I]),L=(0,n.useCallback)((()=>{I(),b.current||d&&R()}),[d,I,R]);return a||s||0===c.length?null:(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(xi.o.Provider,{value:N,children:[(0,x.jsx)("div",{className:l()(Su,{[Nu]:t===Va.aY.npv}),ref:j,onWheel:A,children:(0,x.jsx)("div",{className:Lu,ref:C,children:(0,x.jsx)("div",{children:c.map(((e,t)=>e.title?(0,x.jsx)(Hu,{onTimestampClick:T,startMs:e.startMs},t):(0,x.jsx)(Du,{index:t,activeIndex:w,readAlongSection:e,readAlongIndex:w===t?E:0,onActiveSectionChange:({sectionRef:e})=>{y.current=e.current,L()},breakpoint:N},t)))})})}),(0,x.jsx)(Vu,{hidden:!!h||!m,onClick:()=>{o.logInteraction(r.syncButtonFactory().hitQuickScroll()),p(!0),R()}})]})})},zu=({mode:e})=>{const t=(0,ht.o)((e=>e?.item),((e,t)=>e?.uri===t?.uri));return t?.uri&&(0,Cn.gHQ)(t.uri)?(0,x.jsx)(qu,{mode:e,episodeURI:t.uri}):null};let Qu=function(e){return e.SET_TRANSCRIPT_UI_FLAG="SET_TRANSCRIPT_UI_FLAG",e}({});var Yu=i(72984);const Gu=e=>e.ui?.transcript?.mode??Va.aY.none,Wu=e=>e.ui?.transcript?.uiFlags??Yu.a;var Ku=i(77343),Zu=i(8260);const Xu="fwWNRT_cC_YxzC10ALsz",Ju="_nDkCIVgkWayq3tqiIuW",$u=({episode:e})=>{const{transcriptMode:t}=(()=>{const e=(0,O.wA)(),t=(0,O.d4)(Wu);return{transcriptMode:(0,O.d4)(Gu),setTranscriptUIFlag:(0,n.useCallback)(((t,i)=>{e({type:Qu.SET_TRANSCRIPT_UI_FLAG,key:t,value:i})}),[e]),transcriptUIFlags:t}})(),{data:i}=Fu(e.uri),a=i?.colourData,s={"--transcript-color-background":a?Ku.Q.fromInt(a.background).toCSS(Zu.a.HEX):Ll.PQ2,"--transcript-color-text":Ku.Q.fromInt(a?.text??0).toCSS(Zu.a.HEX),"--transcript-color-highlightText":Ku.Q.fromInt(a?.highlightText??-1).toCSS(Zu.a.HEX)},{spec:r}=(0,Pe.r)(fu.c,{data:{uri:e.uri}}),o=(0,xa.t)(r);return(0,x.jsxs)(ju.w,{className:l()(Xu,Ju),style:s,ref:o,children:[(0,x.jsx)(ju.X,{children:D.Ru.get("web-player.read-along-transcript.now-playing-view.read-along")}),t===Va.aY.npv&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(zu,{mode:Va.aY.npv})})]})},ed=(0,n.lazy)((async()=>{const{TopCommentsCard:e}=await Promise.all([i.e(4102),i.e(3783),i.e(6187)]).then(i.bind(i,96609));return{default:e}}));var td=i(36065),id=i(95059),nd=i(59541),ad=i(10791),sd=i(27506);const rd=({item:e,spec:t})=>{const i=(0,n.useCallback)((()=>{}),[]),a=(0,ht.o)((e=>e?.isPaused??void 0)),r=(0,S.z)(),{isPlaying:o,isActive:l}=(0,ir.te)(e.uri),c=(0,s.NC)(Tr.cgF),u=(0,s.NC)(Tr.xEc),d=(0,s.NC)(Tr.MCN,{loadingValue:!1}),p=(0,td.d)(),m=(0,id.c)(),g=(0,nd.d)(e.uri)?.episodeOrChapter,v=Rl(e),h=(0,n.useCallback)(((e,t,i,n)=>{g&&m?Hr.h.set((()=>({triggerId:i||"activation-trigger-mme",triggerAction:null}))):l&&!t?a?(n?.("resume"),r.resume()):(n?.("pause"),r.pause()):r.seekTo(e)}),[g,m,l,a,r]),y=(0,n.useCallback)(((e,t)=>{h(e,!0,t)}),[h]),b={uri:e.uri,numberOfChapters:10},{data:f,isLoading:j,error:C}=(({queryKey:e,staleTime:t,gcTime:i,withGatedEntityRelations:a,variables:s})=>{const{request:r}=(0,n.useContext)(oo.j);return(0,ln.I)({queryKey:e,staleTime:t,gcTime:i,queryFn:()=>a?(0,lo.c)(r,bu,s).then((e=>e?.data)):(0,lo.c)(r,yu,s).then((e=>e?.data))})})({queryKey:["queryNpvEpisode",d,b],staleTime:ro,gcTime:so,withGatedEntityRelations:d,variables:b}),[N,w]=(0,n.useState)(null),k=(0,n.useCallback)((async e=>{const t=await(0,ad.Q)(e);w(t)}),[]);if((0,n.useEffect)((()=>{g&&!(0,sd.Gr)(g)&&g.transcript&&g.transcript.length>0&&k(g.transcript[0].cdnUrl)}),[k,g]),j&&e.uri&&!C)return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(gu,{}),(0,x.jsx)(gu,{})]});const E=(R=f?.episodeUnionV2,go(R)?R:void 0);var R;const I=(e=>{return go(e)&&(t=e.podcastV2.data,"Podcast"===t?.__typename)?e.podcastV2.data:void 0;var t})(f?.episodeUnionV2);if(!e.uri||!E||j||C)return null;const{chapters:T,nextOffset:A,limit:L}=function(e){if("DisplaySegments"===e.displaySegments?.__typename)return{chapters:e.displaySegments.displaySegments.items,nextOffset:e.displaySegments.displaySegments.pagingInfo.nextOffset,limit:e.displaySegments.displaySegments.pagingInfo.limit};return{chapters:[],nextOffset:0,limit:0}}(E),O=T.length>0,P=E.displaySegments?.chapterTags?.includes("automatically-generated")||!1;return(0,x.jsxs)(ja.r,{spec:t,children:[d&&(0,x.jsx)(ol,{episode:E}),!E.originalEpisode&&(0,x.jsx)(qo,{episode:E}),(0,x.jsx)(Qo,{episode:E}),O&&!v&&(0,x.jsx)(po,{chapters:T,episodeUri:e.uri,nextOffset:A,limit:L,isPlaying:o,isMLGeneratedChapters:P}),p&&(0,x.jsx)(n.Suspense,{fallback:null,children:(0,x.jsx)(ed,{uri:E.uri})}),u&&I&&(0,x.jsx)(cu,{coverArt:I.coverArt||void 0,description:I.htmlDescription||"",name:I.name,publisher:I.publisher?.name,uri:I.uri}),g&&g.type===Ro.c.EPISODE&&g.transcript&&g.transcript.length>0&&(c?(0,x.jsx)($u,{episode:e}):(0,x.jsxs)(co.w,{className:Wo,children:[(0,x.jsx)(co.X,{children:D.Ru.get("web-player.now-playing-view.transcript")}),N&&(0,x.jsx)(tl,{transcriptSections:N||[],onTimeStampClick:y,episodeUri:e.uri})]})),v&&(0,x.jsx)(Il,{item:e}),(0,x.jsx)(xu,{topics:I?.topics.items??[],logTopicNavigation:i}),(0,x.jsx)(Xc,{})]})},od=({item:e,spec:t})=>(0,vt.n)()?(0,x.jsx)(rd,{item:e,spec:t}):(0,x.jsx)(x.Fragment,{});const ld=()=>(0,x.jsx)(x.Fragment,{}),cd=new io.l("queryNpvArtist","query","6b187afc5f192f1fa91d7e3c39aeaa6a66ba720221e94c59c9b75121a3e0363c",null);var ud=i(60749),dd=i(26411),pd=i(88744),md=i(16077),gd=i(20062),vd=i(18374);const hd="vbsB4OQJkFHLU8SbSGzS",xd="hd6a3g_3QyF8MFL0wWs1",yd="vkS_Ks0svKls4w2s2ppT",bd="z9CDQr2gnyXDtcc1uF05",fd="GTmlByXpJj7V6AwVq0Vk",jd="ouorHKa6NI5cm666H3tp",Sd="QkOkUShDYWFx5Cz40Bcn",Cd="COJ84QbXPrd4jkO1HU2N",Nd="iWpZp7Ab_9h7s_U1SsLN",wd="zhQX2DOI2muMo8EKsZ6h",kd="kVP43jHrJeS7afn8mOgX",Ed="r9m6lHy7RyIPDzW1Youe",Rd="yIPdY6L6pcwR4L5Xf0vY",Id="jLPxNlznfpZHUtITCFnb",Td=new Set(["spotify:artist:5UUG83KSlqPhrBssrducWV"]),Ad=(0,Nr.mc)((({artistUri:e,artist:t,visuals:i,stats:a,externalLinks:s=[]})=>{const r=(0,O.wA)(),{gallery:o,avatarImage:u}=i,{monthlyListeners:d}=a,p=(0,Cn.o_h)(e).toURLPath(!0),m=(0,md.W)({uri:e,type:"locale"})?(0,vd.hF)(p):p,[g,v]=(0,eu.A)(e),{spec:h,logger:y}=(0,Pe.r)(pd.p,{}),b=(0,xa.t)(h),f=(0,n.useCallback)((()=>{if(t&&e){const n=h.hitUiReveal();y.logInteraction(n),r((0,ea.p5)({artistUri:e,artist:t,stats:a,visuals:i,externalLinks:s}))}}),[h,y,r,e,t,a,i,s]),j=(0,n.useCallback)((t=>{t.stopPropagation();const i=h.artistNameFactory().hitUiNavigate({destination:e});y.logInteraction(i)}),[h,e,y]),S=(0,n.useCallback)((async t=>{t.preventDefault(),t.stopPropagation();const i=h.followButtonFactory().hitFollow({itemToBeFollowed:e}),n=h.followButtonFactory().hitUnfollow({itemToBeUnfollowed:e});y.logInteraction(g?n:i);try{await v(!g)}catch{}}),[e,g,y,v,h]),C=(0,n.useCallback)((e=>{if("Enter"===e.key)return S(e)}),[S]);if(Td.has(e)||!t.biography?.text)return null;const N=[];o.items.forEach((e=>{const t=e.sources.map(gd.m),i=(0,oc.g)(t,{desiredLabel:"large",desiredSize:600});i&&N.push(i)}));const w=N.find((e=>(e.width||0)>=(e.height||0))),k=[];u?.sources.forEach((e=>{const t=(0,gd.m)(e);t&&k.push(t)}));const E=w&&{backgroundImage:`linear-gradient(${Ll.i_N} 0%, ${Ll.Par} 50%), url(${w.url})`},R=!w&&k.length>0,I=!w&&0===k.length;return(0,x.jsx)(co.w,{className:hd,ref:b,children:(0,x.jsxs)("button",{type:"button","aria-label":t.name,className:l()(xd),onClick:f,tabIndex:0,"data-testid":"npv-artist-bio-button",children:[(0,x.jsxs)("div",{className:l()(fd,{[jd]:w}),style:E,children:[(0,x.jsx)("div",{className:l()(yd,{[bd]:w}),children:(0,x.jsx)(co.X,{children:D.Ru.get("web-player.now-playing-view.artist-about.title")})}),I&&(0,x.jsx)("div",{className:l()(Rd),"data-testid":"npv-artist-bio-placeholder-wrapper",children:(0,x.jsx)(dd.r,{size:"xxlarge"})}),R&&(0,x.jsx)(sc.e,{images:k,label:t.name,width:80,userIconSize:"large",testID:"npv-artist-bio-avatar",className:Id})]}),(0,x.jsxs)("div",{className:Sd,children:[(0,x.jsx)("div",{className:Cd,children:(0,x.jsx)(ud.N_,{to:m,onClick:j,"data-testid":"npv-artist-link",children:(0,x.jsx)(c.E,{as:"span",variant:"bodyMediumBold",dir:"auto",children:t.name})})}),(0,x.jsxs)("div",{className:Nd,children:[(0,x.jsx)(c.E,{as:"div",variant:"bodyMedium",className:wd,children:!!d&&D.Ru.get("artist.monthly-listeners-count",d)}),(0,x.jsx)(re.n,{as:"div",size:"small",className:kd,onClick:S,onKeyDown:C,tabIndex:0,children:g?D.Ru.get("unfollow"):D.Ru.get("follow")})]}),(0,x.jsx)(c.E,{as:"span",variant:"bodySmall",className:Ed,children:(0,x.jsx)(Ye.N,{LinkComponent:ud.N_,source:t.biography.text,onLinkClick:e=>{e.stopPropagation()}})})]})]})})}),{name:"NPVArtistAboutV2"});var Ld=i(68119);const Od=({artistUri:e,spec:t,logger:i})=>{const[a,s]=(0,eu.A)(e),r=(0,n.useCallback)((async()=>{if(!t||!i)return;const n=t.hitFollow({itemToBeFollowed:e}),r=t.hitUnfollow({itemToBeUnfollowed:e});i.logInteraction(a?r:n);try{await s(!a)}catch{}}),[e,a,i,s,t]),o=a?D.Ru.get("unfollow"):D.Ru.get("follow");return(0,x.jsx)($c.W,{isFollowing:a,onClick:r,buttonText:o})},Dd=({artistName:e,roles:t,spec:i,logger:a,linkable:s=!1})=>{const r=t[0].artistUri,o=t.map((e=>e.role)).join(D.Ru.getSeparator()),l=(0,Cn.o_h)(r).toURLPath(!0),u=(0,md.W)({uri:r,type:"locale"})?(0,vd.hF)(l):l,d=(0,n.useCallback)((e=>{if(e.stopPropagation(),!i||!a)return;const t=i.artistNameFactory().hitUiNavigate({destination:r});a.logInteraction(t)}),[i,r,a]);return(0,x.jsx)(q.v,{title:s?(0,x.jsx)(Ve.N,{to:u,onClick:d,"data-testid":"artist-row-credits-link",children:(0,x.jsx)(c.E,{variant:"bodyMedium",children:e})}):(0,x.jsx)(c.E,{variant:"bodyMedium",children:e}),size:"sm",paddingInlineStart:"0",paddingInlineEnd:"0",subtitle:(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",style:{textTransform:"capitalize"},"data-testid":"artist-row-role",children:o}),"data-testid":"credits-artist-row",variant:"naked",id:r,trailing:s&&(0,x.jsx)(Od,{artistUri:r,spec:i?.followToggleButtonFactory(),logger:a})},e)};let Pd=function(e){return e.MainArtist="main artist",e.FeaturedArtist="featured artist",e.Remixer="remixer",e.Actor="actor",e.Composer="composer",e.Orchestra="orchestra",e.Writer="writer",e.Producer="producer",e.Performer="performer",e.Lyricist="lyricist",e.Conductor="conductor",e.Author="author",e.Editor="editor",e.Arranger="arranger",e.EnsembleOrchestra="ensemble orchestra",e}({});const Ud=(0,n.memo)((({data:e,limit:t})=>{const{spec:i,logger:n}=(0,Pe.r)(Ld.D,{}),a=e.reduce(((e,t)=>{const{artistName:i}=t,n=e.get(i)??[];return n.push(t),e.set(i,n),e}),new Map),s=Array.from(a,(([e,t],a)=>(0,x.jsx)(Dd,{artistName:e,roles:t.sort(((e,t)=>e.role.toLowerCase()===Pd.MainArtist?-1:t.role.toLowerCase()===Pd.MainArtist?1:0)),spec:i.creditsRowFactory({position:a}),logger:n,linkable:t.filter((e=>e.isArtistUriLinkable)).length>0},e))).slice(0,t);return(0,x.jsx)(x.Fragment,{children:s})})),_d="l2PpoXJouAgqFCuNT3iB",Fd="bBldZtWu4QtzmrTfHOKm",Bd=(0,Nr.mc)((({data:e,trackUri:t})=>{const i=(0,O.wA)(),a=(0,s.NC)(Tr.QIZ),{spec:r,logger:o}=(0,Pe.r)(Ld.D,{}),l=(0,n.useCallback)((()=>{o.logInteraction(r.showAllButtonFactory().hitUiReveal()),i((0,ea.P0)(!0,t))}),[i,o,r,t]),c=(0,xa.t)(r,a);return 0===e.length?null:(0,x.jsxs)(co.w,{className:_d,ref:c,children:[(0,x.jsx)(co.X,{action:(0,x.jsx)(oe.H,{size:"small",condensed:!0,onClick:l,className:Fd,semanticColor:"textSubdued",children:D.Ru.get("web-player.now-playing-view.show-all")}),children:D.Ru.get("web-player.now-playing-view.credits")}),(0,x.jsx)(Ud,{data:e,limit:3})]})}),{name:"NPVCredits"});var Md=i(22576),Hd=i(47670),Vd=i(40292),qd=i(70303),zd=i(88726),Qd=i(37550),Yd=i(1444);const Gd="gpDSOimnzH4zTJmE7UR5",Wd="N9Xjnxz8vGgWwbEBE5g7",Kd="KzMnBC9eFK8cAfcFTg9b",Zd="I2WIloMMjsBeMaIS8H3v",Xd="hzUuLPdH48AzgQun5NYQ",Jd=()=>{const{spec:e,logger:t}=(0,Pe.r)(Md.X,{}),{setMode:i}=(0,zd.r)();return(0,x.jsxs)("div",{className:Kd,children:[(0,x.jsx)(Yd.D,{label:D.Ru.get("web-player.now-playing-view.lyrics.cinema-mode"),onClick:()=>{i(Va.YU.cinema),t.logInteraction(e.cinemaModeButtonFactory().hitUiReveal()),t.logImpression(e.cinemaModeButtonFactory().impression())},children:(0,x.jsx)(Qd.C,{size:"small"})}),(0,x.jsx)(Yd.D,{label:D.Ru.get("web-player.now-playing-view.close.lyrics"),onClick:()=>{i(Va.YU.none),t.logInteraction(e.closeLyricsButtonFactory().hitUiHide())},children:(0,x.jsx)(pr.M,{size:"small"})})]})};var $d=i(56882);const ep=(0,Nr.mc)((({item:e})=>{const{spec:t,logger:i}=(0,Pe.r)(Md.X,{}),a=(0,n.useRef)(null),{mode:s,setMode:r}=(0,zd.r)(),o=(0,n.useRef)(null),u=(0,n.useRef)(0),{data:d}=(0,qd.J)(),p=(0,ht.o)((e=>e?.nextItems?.[0]),((e,t)=>e?.uri===t?.uri));(0,Vd.I)(p?.uri,p?.images);const m=(0,n.useCallback)((()=>{u.current=Date.now()}),[]),g=(0,n.useCallback)((({lineRef:e,isActiveLine:t,shouldAnimateScroll:i,activeLineIndex:n,isFirstLine:s})=>{if(!a.current||!o.current)return;let r;if(e.current&&t?r=e.current?.offsetTop-o.current?.offsetTop-16:s&&n<0&&(r=0),void 0===r)return;const l=o.current?.scrollTop,c=Math.abs(l-r),d=a.current.clientHeight,p=Date.now()-u.current<2e3,m=u.current>0&&c>1*d;if(p||m)return;u.current=0;const g="visible"===document.visibilityState&&i?"smooth":"auto";o.current?.scrollTo({top:r,behavior:g})}),[]);(0,n.useLayoutEffect)((()=>{u.current=0,o.current?.scrollTo({top:0,behavior:"auto"})}),[e.uri]);const v=(0,$d.H)(),h=v?.higherContrast;if(!d?.hasLyrics)return null;if(s===Va.YU.npv){const t=d?.hasLyrics&&!d.isTimeSynced,i={"--lyrics-color-active":h?.textBase.toCSS(Zu.a.RGBA)??(t?Ll.ONy:d.colors.activeText),"--lyrics-color-inactive":h?.textSubdued.toCSS(Zu.a.RGBA)??d.colors.text,"--lyrics-color-passed":h?.textBase.toCSS(Zu.a.RGBA)??Ku.Q.fromCSS(d.colors.activeText,.7).toCSS(Zu.a.RGBA),"--lyrics-color-background":h?.backgroundBase.toCSS(Zu.a.RGBA)??d.colors.background};return(0,x.jsxs)(co.w,{className:l()(Gd,Zd),style:i,ref:a,children:[(0,x.jsx)(co.X,{action:(0,x.jsx)(Jd,{}),className:Wd,children:D.Ru.get("web-player.lyrics.title")}),(0,x.jsxs)("div",{className:Xd,ref:o,onWheel:m,onScroll:m,children:[t&&(0,x.jsx)(c.E,{as:"p",variant:"bodySmall",dir:"auto",style:{color:d.colors.text},children:D.Ru.get("web-player.lyrics.unsynced")}),(0,x.jsx)(Hd.x,{trackUri:e.uri,data:d,format:"card",onActiveLineChange:g})]})]})}return(0,x.jsx)(co.w,{className:Gd,children:(0,x.jsx)(co.X,{action:(0,x.jsx)(Ol,{onClick:()=>{r(Va.YU.npv),i.logInteraction(t.showLyricsButtonFactory().hitUiReveal()),i.logImpression(t.showLyricsButtonFactory().impression())},children:D.Ru.get("web-player.now-playing-view.show.lyrics")}),className:Wd,children:D.Ru.get("web-player.lyrics.title")})})}),{name:"NPVLyrics"});var tp=i(32331);const ip="wpJvLvrrnyP0_C7hLkqg",np=(0,Nr.mc)((({artistId:e,merch:t})=>!t||t.length<1?null:(0,x.jsxs)(co.w,{className:ip,children:[(0,x.jsx)(co.X,{children:D.Ru.get("web-player.now-playing-view.npv-merch")}),(0,x.jsx)(tp.ArtistOffers,{items:t,artistId:e,merchVariant:Wa.Ol.VARIANTA,variant:"bodyMedium"})]})),{name:"NPVMerchOffers"});var ap=i(73022),sp=i(62534),rp=i(66764);const op="IgTMXVbZtqtZwu3GZASd",lp="uvIvZ4XqfEFs88BAPaI8",cp="svHFeMC3Ef_TpSdRyvsM",up=(0,Nr.mc)((({artistId:e,data:t,variant:i="bodyMedium"})=>{const n=(0,rp.Dh)(e),a=(0,fo.Zp)(),{spec:s,logger:r}=(0,Pe.r)(ap.N,{data:{identifier:e,uri:n,position:0,reason:"NPV - On Tour"}}),o=(0,xa.t)(s),l={items:t.items.map((e=>({...e,artists:{items:e.artistsV2.items.flatMap((e=>"Artist"===e.data.__typename?e.data:[]))}}))),totalCount:t.totalCount};return l.items.length?(0,x.jsxs)(co.w,{className:op,ref:o,children:[(0,x.jsx)(co.X,{action:l.items.length!==l.totalCount&&(0,x.jsx)(oe.H,{size:"small",condensed:!0,className:cp,onClick:()=>{(()=>{const e=s.seeAllButtonFactory({uri:n}).hitUiNavigate({destination:`${n}:concerts`});r.logInteraction(e);const t=(0,Cn.o_h)(`${n}:concerts`).toURLPath(!0);a(t)})()},semanticColor:"textSubdued",children:D.Ru.get("web-player.now-playing-view.show-all")}),children:D.Ru.get("web-player.now-playing-view.on-tour")}),l.items.map(((e,t)=>(0,x.jsx)("div",{className:lp,children:(0,x.jsx)(sp.I,{concert:e,index:t,spec:s,condensed:!0,elevatedDate:!0,titleVariant:i})},e.uri)))]}):null}),{name:"NPVOnTour"});var dp=i(62187),pp=i(24971),mp=i(57071),gp=i(42746),vp=i(4298);const hp="fyPLfmQluSXaPHTI0LSQ",xp="kGACS4fWE9CSMPj1OkdK",yp="sa0TVR9kfqSfuwOqy9wE",bp="yCSREH02alKJMsdweW7F",fp="SXYljWHX9CoKqxgeypJI",jp="aobbvoGw4S_mwqn3C9SU",Sp="vDcF7dhJr4pEQqjy4GQO",Cp=(0,Nr.mc)((({data:e,item:t})=>{const{spec:i,logger:n}=(0,Pe.r)(pp.E,{data:{uri:t.uri,identifier:vp.K.npv}}),{spec:a}=(0,Pe.r)(dp.f,{data:{identifier:"related-videos",position:0,uri:t.uri}}),s=(0,xa.t)(a),r=D.Ru.get("npv.related-videos.title");if(!t.uri||"Artist"!==e?.artistUnion.__typename||"Track"!==e?.trackUnion.__typename||!e.trackUnion.relatedVideos||"RelatedVideoPage"!==e.trackUnion.relatedVideos.__typename||0===e.trackUnion.relatedVideos.items.length)return null;const o=e.trackUnion.relatedVideos.items;return(0,x.jsx)(co.w,{ref:s,className:yp,children:(0,x.jsxs)(ja.r,{spec:i,children:[(0,x.jsx)(co.X,{className:xp,children:r}),(0,x.jsx)(gp.FN,{chevronsClassName:hp,scrollContentClassName:l()(fp),scrollerClassName:l()(bp),scrollingMethod:gp.Hv.SNAP,scrollSnapAlign:"start",wheelScrollEnabled:!1,dragToScrollOptions:{isDisabled:!1},showButtons:gp.C_.ON_HOVER,scrollSnapByItems:1,onNavigationClick:()=>n.logInteraction(a.shelfHeaderFactory().shelfCarouselControlsFactory().shelfCarouselControlsPreviousFactory().hitUiReveal()),edgeGradients:gp.TB.NONE,children:o.map((({trackOfVideo:e},t)=>{if("Track"!==e.data.__typename)return null;const{uri:i,name:n,albumOfTrack:s,artists:r,contentRating:o}=e.data;return(0,x.jsx)(ja.r,{spec:a,children:(0,x.jsx)("div",{className:jp,children:(0,x.jsx)(mp.O,{title:n,trackUri:i,artists:r.items,album:s,contentRating:o,referrerIdentifier:"now_playing_panel",index:t,hoverBackgroundColor:"backgroundTintedHighlight",contentAlign:!0,size:"sm",className:Sp})})},t)}))})]})})}),{name:"RelatedVideos"}),Np=({item:e,spec:t})=>{const i=(0,s.NC)(Tr.LX5),{loading:n,error:a,data:r}=(o={artistUri:e.artists[0].uri,trackUri:e.uri,enableRelatedVideos:i},l={gcTime:so,staleTime:ro},(0,no.I)(cd,o,l));var o,l;const c=(0,s.NC)(Tr.yux),u=Rl(e);if(n&&e.uri&&!a)return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(gu,{}),(0,x.jsx)(gu,{}),(0,x.jsx)(gu,{})]});if(!e.uri||"Artist"!==r?.artistUnion.__typename||"Track"!==r?.trackUnion.__typename||n||a)return null;const{profile:d,stats:p,visuals:m,profile:{externalLinks:g}}=r.artistUnion,{credits:v}=r.trackUnion;return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(ja.r,{spec:t,children:[c&&(0,x.jsx)(ep,{item:e}),i&&(0,x.jsx)(Cp,{data:r,item:e}),(0,x.jsx)(Ad,{artistUri:r.artistUnion.uri,artist:d,stats:p,visuals:m,externalLinks:g.items}),v&&(0,x.jsx)(Bd,{data:v,trackUri:e.uri}),(0,x.jsx)(up,{artistId:r.artistUnion.id,data:r.artistUnion.goods.events.concerts}),(0,x.jsx)(np,{artistId:r.artistUnion.id,artistUri:r.artistUnion.uri,merch:r.trackUnion.merch.items}),u&&(0,x.jsx)(Il,{item:e})]})})},wp=({item:e,spec:t})=>(0,vt.n)()&&e.artists[0].uri?(0,x.jsx)(Np,{item:e,spec:t}):(0,x.jsx)(x.Fragment,{});var kp=i(82414);const Ep=({item:e,spec:t})=>(0,Ir.v)(e)&&!e.isLocal?(0,x.jsx)(wp,{item:e,spec:t}):(0,Ir.v)(e)&&e.isLocal?(0,x.jsx)(ld,{}):(0,kc.p)(e)?(0,x.jsx)(od,{item:e,spec:t}):(0,wc.d)(e)?(0,x.jsx)(Mr,{}):(0,kp.N)(e)?(0,x.jsx)(Br,{}):null,Rp="Yl2wNWzQgsRb49UB30No";function Ip(){return(0,x.jsxs)("div",{className:Rp,children:[(0,x.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:D.Ru.get("queue.fine-something")}),(0,x.jsx)(d.$,{colorSet:"inverted",onClick:()=>{document.querySelector("[data-top-bar-search]")?.focus()},children:D.Ru.get("web-player.now-playing-view.empty-queue-cta")})]})}var Tp=i(98112),Ap=i(33998),Lp=i(40099),Op=i(46444);const Dp=(0,Nr.mc)((()=>{const e=(0,n.useContext)(Be.s),t=(0,Tp.a)({tryAvoidGraphQLFetching:!1}),i=(0,s.NC)(Tr.yJ8)===Tr.NtL.CANVAS_PLAY_ON_HOVER;return t?.canvas&&e?(0,x.jsx)(Op.Gg,{fileId:t.canvas.fileId,canvasUrl:t.canvas.url,canvasType:t.canvas.type,canvasUri:t.canvas.uri,playerContainerClass:"canvasVideoContainerNPV",playbackType:i?Op.RT.LoopOnHover:Op.RT.LoopOnPlayback,allowAspectRatioFix:!0,mouseHoverRef:e,useContainerMouseOverEvents:!1}):null}),{name:"NPVCanvas"});var Pp=i(84700),Up=i(66917),_p=i(10161),Fp=i(81875),Bp=i(93114),Mp=i(31531),Hp=i(96205),Vp=i(72798),qp=i(46198),zp=i(12200);const Qp="fIpDXK7M3W0Bn3FgLSRe",Yp="T5_sYfKJ2efL3n3dFNuN",Gp="cIUedsmg_cTnTxvOYTKR",Wp="aaFQbW0j0N40v_siz0kX",Kp="hhFdIYRyHsqlCHy7T_8A",Zp="O5NOY8Xw4NH0IhBZu8tm",Xp="DFvRASpHOFAoziM4w7En",Jp="zL6hQR4mukVUUQaa_7K1",$p="ylBRlfNqGnzVa4kjUQGP",em="E08D6ucrHuPJYzzGO7HG",tm="hjyiWzPtKHn_5kCe9vyg",im="pUIBQ9cykHKYx2A2ZIPA",nm="_q9LkNJJIpxoOkOFI2Nd",am="S6W0kreMgaIXYWSEYHya",sm="hCImOEZCJwYaSy2r1Xgx",rm="hfdkySA4kiUldFsPj9lD",om="eEiwEPDfVRD0HKjYM_dq",lm=({item:e,spec:t})=>{const i=(0,ie.s)(),a=(0,n.useCallback)((n=>{const a=n?t.heartButtonFactory().hitLike({itemToBeLiked:e.uri}):t.heartButtonFactory().hitRemoveLike({itemNoLongerLiked:e.uri});i.logInteraction(a)}),[e.uri,i,t]),s=(0,Hp.v)(e),r=(0,xi.y)();return s?(0,x.jsx)(Mp.g,{uri:e.uri,size:r===pi.E.MEDIUM?"medium":"small",className:Kp}):(0,Ir.v)(e)&&!e.isLocal?(0,x.jsx)(Fp.b,{uri:e.uri,size:r===pi.E.MEDIUM?Up.t.sm:Up.t.xs,onClick:a,className:Kp}):(0,kc.p)(e)?(0,x.jsx)(_p.b,{uri:e.uri,size:r===pi.E.MEDIUM?Up.t.sm:Up.t.xs,onClick:a,className:Kp,condensed:!0}):null},cm=({context:e,item:t})=>{const{spec:i,logger:n}=(0,Pe.r)(kr.J,{}),{spec:a}=(0,Pe.r)(Pp.p6,{data:{identifier:Pp.gw.DESKTOP}}),s=(0,zp.X)(),r=(0,xi.y)();return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Bp.w,{className:Xp,uri:t.uri,sharingInfo:null,interactionData:{intent:"share",type:"click"},condensedAll:!0,onClick:()=>{n.logInteraction(i.shareButtonFactory({uri:t.uri}).hitCopyToClipboard())},ariaLabel:(0,Cn.gHQ)(t.uri)?D.Ru.get("context-menu.copy-episode-link"):D.Ru.get("context-menu.copy-track-link"),size:r===pi.E.MEDIUM?"medium":"small"}),(0,x.jsx)(Vp.a,{context:e,item:t,className:l()(Zp,Yp),onClick:()=>{n.logInteraction(a.hideButtonFactory().hitRemoveRecommendation({recommendedItemUri:t.uri,contextUri:e.uri}))}}),s&&(0,jc.N)(t)?(0,x.jsx)(ja.r,{spec:i,children:(0,x.jsx)("div",{className:Zp,children:(0,x.jsx)(qp.o,{contextUri:t.metadata?.context_uri??e.uri,id:t.uid??void 0,uri:t.uri,isActive:!0})})}):(0,x.jsx)("div",{className:Zp,children:(0,x.jsx)(lm,{item:t,spec:i})})]})};var um=i(8014),dm=i(54382),pm=i(95837),mm=i(95303),gm=i(12649),vm=i(68269),hm=i(39150);let xm=function(e){return e[e.NONE=0]="NONE",e[e.COVER_ART=1]="COVER_ART",e[e.VIDEO_OVER_PIP_PLACEHOLDER=2]="VIDEO_OVER_PIP_PLACEHOLDER",e[e.VIDEO_OVER_CONNECT_PLACEHOLDER=3]="VIDEO_OVER_CONNECT_PLACEHOLDER",e[e.CANVAS=4]="CANVAS",e}({});const ym=()=>{const e=(0,Fr.L)(),t=(0,_.l)(),{videoPlayerMode:i}=(0,hm.d)(),{isSongVideo:n,isSongVideoPlayingVideo:a}=(0,vm.k)(),s=(0,O.d4)((e=>e.ads?.vto)),{showCanvasInNPV:r}=(0,Tp.a)({tryAvoidGraphQLFetching:!0});if(!e)return xm.NONE;const{item:o}=e;return i===vp.K.documentPip||i===vp.K.pip?xm.VIDEO_OVER_PIP_PLACEHOLDER:o?.type===Ro.c.AD&&s?.isMinimized&&"audio"!==o?.mediaType?xm.NONE:o?.type!==Ro.c.EPISODE||"video"!==o?.mediaType&&"mixed"!==o?.mediaType?n&&a?t?xm.VIDEO_OVER_CONNECT_PLACEHOLDER:xm.NONE:r?xm.CANVAS:xm.COVER_ART:t?xm.VIDEO_OVER_CONNECT_PLACEHOLDER:xm.NONE},bm=(0,Nr.mc)((({hideContextItemInfo:e=!1})=>{const t=(0,Fr.L)(),i=ym(),{draggable:a,onDragStart:s}=(0,Co.P)(),[r,o]=(0,n.useState)(!0),{spec:c,logger:u}=(0,Pe.r)(kr.J,{}),{spec:d}=(0,Pe.r)(pp.E,{data:{uri:t?.item.uri??"",identifier:vp.K.npv}}),{isSongVideo:p}=(0,vm.k)(),m=i===xm.CANVAS,g=i===xm.COVER_ART,v=(0,n.useRef)(null),h=(0,n.useRef)(null),y=(0,n.useRef)(null),b=!(0,yi.j)(),[f,j]=(0,n.useState)(null);if(b&&m&&v.current&&y.current&&(j(y.current),setTimeout((()=>{j(null)}),600)),v.current=g,h.current=m,y.current=t,null===t)return null;const{context:S,item:C,index:N}=t;return(0,x.jsx)("div",{className:l()(Qp),children:(0,x.jsxs)("div",{className:Gp,children:[(0,x.jsxs)("div",{onClick:()=>m&&o(!r),className:l()(Jp,{[tm]:m,[sm]:g,[im]:r}),children:[(0,x.jsx)("div",{className:l()($p,{[nm]:m}),"aria-hidden":m,children:(0,x.jsx)(um.h,{context:f?.context||S,item:f?.item||C,index:N,canSwitchVisuals:!0})}),i===xm.VIDEO_OVER_PIP_PLACEHOLDER&&(0,x.jsx)(pm.k,{}),i===xm.VIDEO_OVER_CONNECT_PLACEHOLDER&&(0,x.jsx)(mm.V,{}),(0,x.jsx)("div",{className:l()(em,{[am]:!m}),"aria-hidden":"true",children:(0,x.jsx)(sa.h,{menu:(0,x.jsx)(_r.W,{context:S,item:C,canSwitchVisuals:!0}),children:(0,x.jsx)("div",{draggable:a,onDragStart:e=>{s(e,{itemUris:[C.uri],dragLabelText:(0,Ap.r)(C)})},children:m&&(0,x.jsx)(Dp,{uri:C.uri})})})}),(0,x.jsx)(dm.F,{})]}),p&&(0,x.jsx)(gm.L,{className:m?om:"",createImpressionSpec:e=>d.toggleAudioVideoButtonFactory({identifier:e?"switch_to_audio":"switch_to_video"}),onClick:e=>{u.logInteraction(d.toggleAudioVideoButtonFactory({identifier:e}).hitPlay({itemToBePlayed:C.uri}))}}),e?null:(0,x.jsxs)("div",{className:Wp,children:[(0,x.jsx)(pl.d,{className:l()(rm),context:S,item:C,titleTypeVariant:"titleSmall",subtitleTypeVariant:"bodyMedium",onTitleClick:e=>{u.logInteraction(c.titleFactory({uri:C.uri}).hitUiNavigate({destination:e||""}))},onSubtitleClick:e=>{u.logInteraction(c.artistFactory({uri:C.uri}).hitUiNavigate({destination:e||""}))},referrer:Lp.G.NPV}),!(0,kp.N)(C)&&(0,x.jsx)(cm,{context:S,item:C})]})]})})}),{name:"NPVHeader"});function fm(){return(0,x.jsx)(bm,{})}var jm=i(24409),Sm=i(16512);const Cm=({className:e})=>{const t=(0,n.useRef)(null);(0,K.X)("NPV_OPEN_CINEMA_MODE_BUTTON",t);const i=(0,Sm.l)(),a=(0,n.useCallback)((()=>{i(Bn.z.NOW_PLAYING_VIEW)}),[i]);return(0,x.jsx)(ra.Zp,{label:D.Ru.get("web-player.now-playing-view.cinema-mode.expand"),children:(0,x.jsx)(oe.H,{ref:t,iconOnly:jm.L,size:"small",onClick:a,"aria-label":D.Ru.get("web-player.now-playing-view.cinema-mode.expand"),className:e})})};var Nm=i(53013),wm=i(27192),km=i(13097),Em=i(63317);const Rm={context:null,item:null};var Im=i(46775),Tm=i(22627),Am=i(42372),Lm=i(77612),Om=i(13946),Dm=i(24320),Pm=i(2439);const Um="yvZooOj0rpfRS__cAUCo",_m="k_ndsg7yz9ZAgEmei1n3",Fm="vDev2BqBHloweL24GNHK",Bm="IkRGajTjItEFQkRMeH6v",Mm="f2UE9n5nZcbgZrGYTU3r",Hm="nw2W4ZMdICuBo08Tzxg9",Vm="wPHL366l99aluPsMU8Bl",qm="UAg2mNxhAm_jv0zFjG8z",zm="VjVlpyxDo941sgO2Vc8g";function Qm(e){return(0,Ir.v)(e)||(0,Dm.v)(e)||(0,kc.p)(e)||(0,wc.d)(e)?e.name:(0,kp.N)(e)?"":(0,gn.d)(e)}const Ym=n.memo((({item:e,spec:t})=>{const{ref:i,breakpoint:n}=(0,mn.x)({[pi.E.XSMALL]:0,[pi.E.SMALL]:280,[pi.E.MEDIUM]:320});return(0,x.jsx)("div",{className:Hm,"data-testid":"NPV_Panel_OpenDiv",ref:i,children:e&&(0,x.jsxs)(xi.o.Provider,{value:n,children:[(0,x.jsx)(bm,{}),(0,x.jsx)(Ep,{item:e,spec:t}),!(0,kc.p)(e)&&(0,x.jsx)(Xc,{})]})})})),Gm=({context:e,item:t,spec:i})=>{const a=(0,Am.SF)();return(0,n.useEffect)((()=>{a.current&&(a.current.scrollTop=0)}),[t?.uri,a]),(0,Hc.bJ)(e,t)?(0,x.jsx)(Im.IT,{spec:i}):(0,x.jsx)(Ym,{context:e,item:t,spec:i})},Wm=({context:e,item:t,spec:i})=>{const n=(0,Mn.S)();return Ar(),n===Bn.z.NOW_PLAYING_VIEW?null:(0,x.jsx)(Gm,{context:e,item:t,spec:i})},Km=()=>ym()===xm.CANVAS,Zm=({item:e})=>{const t=(0,n.useRef)(null),i=(0,Fr.L)(),{title:a,link:r}=(0,Tm.$)(),o=Km(),c=(0,s.NC)(Tr.mzn),{spec:u,logger:d}=(0,Pe.r)(kr.J,{}),g=(0,n.useCallback)((()=>{const e=u.closeButtonFactory().hitUiHide();d.logInteraction(e)}),[u,d]);return(0,n.useEffect)((()=>{null!==t.current&&t.current.focus({preventScroll:!0})}),[]),(0,x.jsx)(p.a,{title:a,titleSlot:(0,x.jsx)(p.k,{title:a,panelLinkRef:t,item:e,link:r,variant:"bodyMediumBold",semanticColor:"textBase",className:_m}),link:r,actions:i&&i.context&&(0,x.jsxs)("div",{className:c?qm:zm,children:[(0,x.jsx)(la.b,{menu:(0,x.jsx)(_r.W,{context:i.context,item:e,canSwitchVisuals:!0}),children:(0,x.jsx)(Ur.e,{size:"small",condensed:!1,label:D.Ru.get("more.label.context",e?Qm(e):""),onClick:()=>{d.logInteraction(u.contextMenuButtonFactory().hitUiReveal())},className:Vm})}),c&&(0,x.jsx)(Cm,{className:Vm})]}),panelLinkRef:t,panel:m.Z.NowPlayingView,onClose:g,item:e,className:l()({[Um]:o})})},Xm=({item:e})=>{const t=!!e&&(0,kp.N)(e);return(0,n.useMemo)((()=>t?null:(0,x.jsx)(Zm,{item:e})),[e,t])},Jm=(0,Nr.mc)((({nodeRef:e})=>{const t=!(0,vt.n)(),{context:i,item:n,index:a}=(0,ht.o)((e=>e),Fr.F)||{context:null,item:null,index:null},{spec:r,UBIFragment:o}=(0,Pe.r)(wr.t,{data:{uri:n?n.uri:""}}),c=Km(),u=!!n&&(0,kp.N)(n),d=(0,xa.t)(r),p=(()=>{const{item:e,context:t}=(0,Fr.L)()||Rm,{isYourDJNarrator:i,hasYourDJMetadata:n}=(0,wm.C)(),a=(0,s.NC)(Tr.yon),r=(0,Em.z)(e?.images?.[0]?.url,Ll.l0o,"colorDark");return i&&n?(0,km.p)(t?.metadata?.["narration.background.color"],Nm.lZ):a?r:void 0})(),m={"--background-base":p,"--section-background-base":p?"var(--background-tinted-base)":"var(--background-elevated-base)"};let g=null;return g=(0,Pm.O)(i)?t?(0,x.jsx)(fm,{}):u?(0,x.jsx)(Pr,{item:n,context:i,index:a}):(0,x.jsx)(Wm,{spec:r,context:i,item:n}):(0,x.jsx)(Ip,{}),(0,x.jsx)(Om.P,{surface:Lm.u.NOW_PLAYING,children:(0,x.jsx)(Am.ql.Provider,{value:"now_playing_panel",children:(0,x.jsx)(Be._,{nodeRef:e,label:D.Ru.get("web-player.now-playing-view.label"),style:m,itemUri:n?.uri?n.uri:"","data-testid":"now-playing-view-container",className:"NowPlayingView",children:(0,x.jsx)(o,{spec:r,children:(0,x.jsx)(Me.w,{className:l()(Bm,{[Mm]:void 0!==p}),fixedHeader:(0,x.jsx)(Xm,{item:n}),scrolledClassName:c?Fm:void 0,ref:d,children:g})})})})})}),{name:"NPV"});var $m=i(39044);const eg="vzeIlCPBQJUaqdMZHqHE",tg="hE0sAyca3_8uAKQjx3rU",ig="iZgGvu9g2gDlQ1ofJ7rH",ng="FSZKuoSTDgGwCPXO_qel",ag="cPpNQwPTiEn9Zegl5Dwz",sg="p2Yw6bT_O5PW8yGv1R0X",rg="pK7G3_mtRcuFjbhJzm1s",og="gVJxtuXo8lHAw8XLKHfQ",lg="BR3H6wavkReGa2xeSeaV",cg="vXYSi4u1nPutJ_ZkC6mq",ug=e=>{const t=(0,n.useRef)(null),{isAnimating:i}=(0,n.useContext)($m.C);return(0,x.jsx)(a.A,{in:e.isActive,nodeRef:t,timeout:{enter:e.shouldPlayAnimation?200:0,exit:e.shouldPlayAnimation?300:0},classNames:{enter:e.shouldPlayAnimation?ig:rg,enterActive:e.shouldPlayAnimation?ng:og,exit:e.shouldPlayAnimation?ag:lg,exitActive:e.shouldPlayAnimation?sg:og},unmountOnExit:!0,mountOnEnter:!0,children:(0,x.jsx)("div",{className:l()(eg,{[tg]:i}),children:(0,x.jsx)("div",{className:cg,ref:t,children:e.children})})})};var dg=i(1505),pg=i(73496),mg=i(88119),gg=i(63916),vg=i(72356),hg=i(68038),xg=i(36055),yg=i(3408),bg=i(14360),fg=i(80848);const jg="PddBvUOS0_6f9B21fVGF",Sg=({ariaLabel:e,onRemoveItems:t,nrItems:i,columnCount:a,children:s})=>{const r=(0,n.useRef)(null);(0,bg.g)(r);const o=(0,fg.d)(t);return(0,x.jsx)(yg.R,{firstInteractiveIsWrapper:!0,"aria-label":e,"aria-rowcount":i,"aria-colcount":a,className:jg,ref:r,onKeyDown:o,children:s})},Cg=({items:e,renderRow:t,...i})=>{const a=(0,n.useCallback)(((t,i)=>e.slice(t,i+1)),[e]);return(0,x.jsx)(Ml.k,{resolveItem:Ng,getItems:a,nrTracks:e.length,children:(0,x.jsx)(Sg,{nrItems:e.length,...i,children:e.map(t)})})};function Ng(e){return{uri:e.uri,uid:e.uid??void 0,type:e.type}}var wg=i(5928),kg=i(36019);const Eg=({chapter:e,index:t,showTypeLabel:i,...n})=>{const{uid:a,uri:s,type:r,name:o,images:l,book:c}=e,u=Pl(e,t),d=Tc(n.section),p=(0,x.jsx)(kg.r,{uri:s,removeFromQueueData:{uid:a??void 0,contextUri:d}}),m=(0,x.jsx)(Rc,{item:e,tooltipText:c.name,showTypeLabel:i,subtitle:(0,x.jsx)(sa.h,{menu:(0,x.jsx)(wg.p,{uri:c.uri}),children:(0,x.jsx)(Ve.N,{to:c.uri,stopPropagation:!0,children:c.name})})});return(0,x.jsx)(hc,{uid:a,uri:s,contextUri:d,id:u,index:t,type:r,title:o,subtitle:m,images:l,dragLabel:o,menu:p,moreButtonLabelName:o,ariaPauseLabel:D.Ru.get("playlist.a11y.pause",o),ariaPlayLabel:D.Ru.get("playlist.a11y.play",o),...n})};var Rg=i(20256),Ig=i(86323),Tg=i(27428),Ag=i(36408);const Lg=(0,n.createContext)(null),Og=({children:e})=>{const{uri:t}=(0,Ag.H)(),{spec:i,UBIFragment:a}=(0,Pe.r)(Ig.i,{data:{identifier:Tg.$h.NOWPLAYING_QUEUE,uri:t??""}}),s=(0,n.useMemo)((()=>i.nowPlayingSectionFactory()),[i]),r=(0,n.useMemo)((()=>i.nextInQueueSectionFactory()),[i]),o=(0,n.useMemo)((()=>i.nextFromSectionFactory()),[i]),l=(0,n.useMemo)((()=>({queueSpec:i,nowPlayingSectionSpec:s,nextInQueueSectionSpec:r,nextFromSectionSpec:o})),[i,s,r,o]);return(0,x.jsx)(Lg.Provider,{value:l,children:(0,x.jsx)(a,{spec:i,children:e})})};var Dg=i(69758);const Pg=()=>{const e=(0,n.useContext)(Lg);if(!e)throw Error("useQueueUBI must be used within a QueuePanelUBIProvider!");const{queued:t}=(0,Ag.H)(),i=(0,ie.s)(),{queueSpec:a,nowPlayingSectionSpec:s,nextInQueueSectionSpec:r,nextFromSectionSpec:o}=e;return{logClearQueue:(0,n.useCallback)((()=>{const e=r.clearQueueButtonFactory().hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:t.length});return i.logInteraction(e)}),[i,r,t.length]),logAddToQueue:(0,n.useCallback)(((e,t)=>{let n;switch(e){case Ic.$.NowPlaying:n=s;break;case Ic.$.NextInQueue:n=r;break;case Ic.$.NextUp:n=o;break;default:return}const a=1===t.length?n.dragAddItemToQueue({itemToAddToQueue:t[0]}):n.dragAddItemsToQueue({numberOfItemsToAddToQueue:t.length});return i.logInteraction(a)}),[i,o,r,s]),logSort:(0,n.useCallback)((e=>{let t;switch(e){case Ic.$.NextInQueue:t=r;break;case Ic.$.NextUp:t=o;break;case Ic.$.NowPlaying:default:return}const n=t.dragSort();return i.logInteraction(n)}),[i,o,r]),logQueuePanelTabChange:(0,n.useCallback)((e=>{if(e!==Dg.p.PARTICIPANT_LIST){const t=a.queueHistoryTabFactory({identifier:e===Dg.p.QUEUE?"queue":"recently_played"}).hitUiReveal();return i.logInteraction(t)}}),[i,a]),logQueueContextLinkNavigate:(0,n.useCallback)((e=>{const t=o.queueContextLinkFactory().hitUiNavigate({destination:e??""});return i.logInteraction(t)}),[i,o])}};var Ug=i(65024);const _g=(0,n.memo)((function({item:e,...t}){const i=function(e,t){const i=(0,S.z)(),{request:a}=(0,n.useContext)(oo.j),{logAddToQueue:s,logSort:r}=Pg();return(0,n.useCallback)((async(n,o,l)=>{const{contextUri:c,sectionId:u,itemIds:d}=l??{},p=t===Ic.$.NowPlaying,m=pc===c&&!p,g=n[Rg.fl.ALBUMS]?.at(0),v=Object.values(n).flat();let h=[];if(g){const{trackUris:e}=await(0,Ug.s)(g,0,a);h=e.map((e=>({uri:e,uid:null})))}else h=m&&d?.length?d.map((e=>({uri:"",uid:e}))):Object.values(n).flat().map((e=>({uri:e,uid:null})))??[];const x=m&&u===Ic.$.NowPlaying;let y;if(y=o===Fl.Nz.BEFORE?{before:{uri:e.uri,uid:e.uid??null}}:{after:{uri:e.uri,uid:e.uid??null}},m&&!x)t&&r(t),i.reorderQueue(h,y);else{let e;t&&(e=s(t,v)),p?i.addToQueue(h,{interactionId:e?.interactionId}):i.insertIntoQueue(h,y,{interactionId:e?.interactionId})}}),[e.uid,e.uri,s,r,i,a,t])}(e,t.section);switch(e.type){case Ro.c.TRACK:return(0,x.jsx)(_c,{track:e,onDrop:i,...t});case Ro.c.EPISODE:return(0,x.jsx)(Ac,{episode:e,onDrop:i,...t});case Ro.c.CHAPTER:return(0,x.jsx)(Eg,{chapter:e,onDrop:i,...t});case Ro.c.AD:return(0,x.jsx)(xc,{ad:e,onDrop:i,...t});case Ro.c.UNKNOWN:return null;default:return(0,gn.k)(e),null}})),Fg=(0,n.memo)((function({item:e,...t}){const{usePlayContextItem:i}=(0,Do.P)({uri:e.uri,pages:[{items:[e]}]},{featureIdentifier:"history"});return(0,x.jsx)(_g,{item:e,...t,usePlayContextItem:i})})),Bg=({items:e})=>{const t=(0,n.useCallback)(((e,t)=>(0,x.jsx)(Fg,{item:e,index:t},Pl(e,t))),[]);return(0,x.jsx)(Cg,{items:e,ariaLabel:D.Ru.get("view.recently-played"),renderRow:t,columnCount:3})};var Mg=i(44036),Hg=i(88853);const Vg=()=>{const{isLoading:e,data:t}=(0,Hg.a)();return e?null:t?.items.length?(0,x.jsx)(Bg,{items:t.items}):(0,x.jsx)(Mg.H,{})};var qg=i(68832);const zg=(e,t)=>!t?.didQueueChangeSignificantly,Qg=(e,t,i)=>{zg(0,i?.current)?(0,qg.oz)({onUpdate:t=>{e.style.opacity=t.toString()}}):e.style.opacity="1"},Yg=(e,t,i,n)=>{zg(0,n?.current)?(0,qg.oz)({onUpdate:t=>{e.style.opacity=(1-Number(t)).toString()},onComplete:i}):i()},Gg=({hideEnteringElements:e,animateEnteringElements:t,animateExitingElements:i,animateFlippedElements:n})=>{e(),i(),n(),t()};var Wg=i(8741);function Kg(e){const t=(0,n.useRef)(e);return(0,n.useMemo)((()=>{const i=new Map,n=Xg(t.current,i),a=Xg(e,i),s=(0,Wg.I)(n,a),r=s>16||s>=Math.max(Zg(e),Zg(t.current));return t.current=e,r}),[e])}function Zg(e){return Number(!!e?.current)+(e?.queued.length??0)+(e?.nextUp.length??0)}function Xg({current:e,nextUp:t=[],queued:i=[]},n){let a="";return[[e],t,i].forEach((e=>{e.forEach((e=>{e?.uid&&(n.has(e.uid)||n.set(e.uid,String.fromCharCode(65+n.size)),a+=n.get(e.uid))})),e.length&&(a+=" ")})),a}var Jg=i(98628);const $g=({current:e,queued:t,nextUp:i,children:a})=>{const s=(0,n.useMemo)((()=>[e,...t,...i].filter(Jg.P).map(Pl).join("")),[e,i,t]),r={didQueueChangeSignificantly:Kg({current:e,nextUp:i,queued:t})};return(0,x.jsx)(qg.ZI,{flipKey:s,handleEnterUpdateDelete:Gg,decisionData:r,children:a})},ev=({children:e,...t})=>(0,yi.j)()?(0,x.jsx)(x.Fragment,{children:e}):(0,x.jsx)($g,{...t,children:e}),tv=({children:e,...t})=>(0,yi.j)()?(0,x.jsx)(x.Fragment,{children:e}):(0,x.jsx)(qg.lf,{shouldFlip:zg,...t,children:e}),iv=[Rg.fl.TRACKS,Rg.fl.LOCAL_TRACKS,Rg.fl.EPISODES,Rg.fl.CHAPTERS,Rg.fl.ALBUMS],nv=({uri:e,items:t,ariaLabel:i,section:a,showTypeLabel:s,decoratedQueuedByUsersByUsername:r})=>{const o=(0,S.z)(),l=(0,n.useCallback)((e=>{o.removeFromQueue(e)}),[o]),{usePlayContextItem:c}=Mc(e,a),u=(0,n.useCallback)(((e,t)=>{const i=Pl(e,t);return(0,x.jsx)(tv,{flipId:e.metadata?.original_uid??i,onAppear:Qg,onExit:Yg,translate:!0,children:(0,x.jsx)("div",{className:zl,children:(0,x.jsx)(_g,{item:e,index:t,usePlayContextItem:c,section:a,allowedDropMimeTypes:iv,showTypeLabel:s,queuedBy:r?.[e.metadata?.queued_by??""]})})},i)}),[r,a,s,c]);return(0,x.jsx)(Cg,{items:t,renderRow:u,columnCount:3,ariaLabel:i,onRemoveItems:l})};var av=i(98253);const sv="u842BXnznGeq38O3DUTQ",rv="NWVZ_rxlezZ8xTHlMg4Y",ov="Oae51evvT5DrqTupCiZ2",lv="LFdMliaHVgrpBcqNKHU3",cv="IeeqYq0Ozrndd6STmrRk",uv="NljerwmGshDHsI7rIvWl",dv=({nrQueuedItems:e})=>{const t=(0,S.z)(),{logClearQueue:i}=Pg(),[a,s]=(0,n.useState)(!1),r=(0,n.useCallback)((()=>{s(!1)}),[]),o=(0,n.useCallback)((()=>{i(),t.clearQueue(),s(!1)}),[i,t]),l=(0,n.useCallback)((()=>{s(!0)}),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(oe.H,{size:"small",onClick:l,className:cv,condensed:!0,children:D.Ru.get("queue.clear-queue")}),(0,x.jsx)(av.p,{itemCount:e,isOpen:a,onClose:r,onConfirm:o})]})};var pv=i(86869);const mv=({queueSection:e,title:t,trailingButton:i})=>{const a=(0,n.useRef)(null),s=(0,pv.K)({ref:a});return(0,x.jsx)(tv,{flipId:`section-header-${e}`,onAppear:Qg,onExit:Yg,translate:!0,children:(0,x.jsxs)("div",{className:lv,children:[(0,x.jsx)(ra.Zp,{label:t,disabled:!s,children:(0,x.jsx)(c.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textBase",className:uv,ref:a,children:t})}),i]})})};var gv=i(71812);const vv=new io.l("decorateQueuedByUsers","query","1b71b9895bad207fdac0df7ebad17c790260519f853a069ee05f20e51c08636e",null);function hv(e){const{currentSession:t}=(0,Ws.D)(),i=Array.from(new Set(e.map((e=>e?.metadata?.queued_by||null)).filter(Jg.P))).sort().map((e=>(0,Cn.Qjr)(e).toURI())),{data:a}=(s={userUris:i},r={gcTime:36e5,staleTime:18e5,enabled:!!i.length,placeholderData:za.rX},(0,no.I)(vv,s,r));var s,r;const o=(0,n.useMemo)((()=>Object.fromEntries(a?.users?.map((e=>{return"User"===e.__typename?[e.username,(t=e,{type:Ro.c.USER,...t,images:t.avatar?.sources??[]})]:null;var t})).filter(Jg.P)??[])),[a]);return t?.active?o:{}}var xv=i(81109),yv=i(72630);const bv=()=>{const e=(0,Ag.H)(),{uri:t,description:i,current:a,nextUp:s,queued:r,isEmpty:o,hasQueuedTracks:l,hasNextTracks:c}=e,{logQueueContextLinkNavigate:u}=Pg(),d=hv([a,...s,...r]),p=(0,n.useMemo)((()=>new Set([a,...r,...s].filter(Jg.P).map((({type:e})=>e))).size>1),[a,s,r]),{currentSession:m}=(0,Ws.D)(),g=(0,Ys.y)();return o?(0,x.jsx)(gv.K,{}):(0,x.jsxs)(ev,{...e,children:[(0,x.jsx)(xv.Z,{className:ov}),(0,x.jsxs)("div",{className:sv,children:[a&&(0,x.jsxs)("div",{className:rv,children:[(0,x.jsx)(mv,{queueSection:Ic.$.NowPlaying,title:D.Ru.get("queue.now-playing")}),(0,x.jsx)(nv,{ariaLabel:D.Ru.get("queue.now-playing"),uri:t,items:a?[a]:[],section:Ic.$.NowPlaying,showTypeLabel:p,decoratedQueuedByUsersByUsername:d})]}),!m?.active&&g&&(0,x.jsx)(yv.p,{localStorageKey:"dismissStartJamButtonFromQueue"}),l&&(0,x.jsxs)("div",{className:rv,children:[(0,x.jsx)(mv,{queueSection:Ic.$.NextInQueue,title:D.Ru.get("queue.next-in-queue"),trailingButton:(0,x.jsx)(dv,{nrQueuedItems:r.length})}),(0,x.jsx)(nv,{ariaLabel:D.Ru.get("queue.next-in-queue"),uri:t,items:r,section:Ic.$.NextInQueue,showTypeLabel:p,decoratedQueuedByUsersByUsername:d})]}),c&&(0,x.jsxs)("div",{className:rv,children:[(0,x.jsx)(mv,{queueSection:Ic.$.NextUp,title:i&&!(0,Ag.K)(a)&&t?(0,x.jsxs)(x.Fragment,{children:[D.Ru.get("queue.next-from")," ",(0,x.jsx)(Ve.N,{to:t,onClick:()=>{u(t)},children:i})]}):D.Ru.get("queue.next-up")},i),(0,x.jsx)(nv,{ariaLabel:D.Ru.get("queue.next-up"),uri:t,items:s,section:Ic.$.NextUp,showTypeLabel:p})]})]})]})};var fv=i(7797),jv=i(98178);const Sv="AjjTyUrCO3pZ365KtTXW",Cv="pGtUoenc5OobLi8CscJ6",Nv="cArVcLcQ85q_9QSLGYGX",wv="lDtXv1VCrs0PHHSuH5uO",kv="ukjUoaLSzKyRcwoOQw9V",Ev="yQwBNeetmAr0a0OTR8t3",Rv="fzB4RXxTp0rlpNQlSuu9",Iv=({sessionMember:e,showRemoveButton:t,onClickMember:i,onClickRemove:n,index:a})=>{const{currentSession:s}=(0,Ws.D)(),{displayName:r,images:o,username:l,uri:c}=(0,jv.c)(e);return(0,x.jsx)(sa.h,{menu:(0,x.jsx)(rc.B,{uri:c}),children:(0,x.jsx)(q.v,{id:`${a}`,variant:"naked",className:kv,title:(0,x.jsx)(we.d,{lineClamp:1,children:r}),media:(0,x.jsx)("div",{role:"button",onClick:i,onKeyDown:i,tabIndex:-1,children:(0,x.jsx)(sc.e,{images:o,userIconSize:"medium",width:48,displayName:r,username:l,label:r})}),subtitle:s?.sessionOwnerId===e.id?D.Ru.get("web-player.social-connect.participant-list.host"):D.Ru.get("web-player.social-connect.participant-list.guest"),onClick:i,trailing:t&&(0,x.jsx)(re.n,{size:"small",className:Ev,onClick:n,"aria-label":D.Ru.get("web-player.social-connect.participant-list.remove-guest-accessible-label",{displayName:r}),children:D.Ru.get("web-player.social-connect.participant-list.remove-guest")})})})};var Tv=i(73916),Av=i(82272),Lv=i(33887);const Ov=()=>{const e=(0,Ya.d)(),t=(0,O.wA)(),i=(0,fo.Zp)(),a=(0,Tv.Z)(),{currentSession:s,kickAllParticipants:r}=(0,Ws.D)(),{setQueueView:o}=(0,fv.m)(),{logUserClick:l,logRemoveClick:u}=(0,Av.T)(),p=(0,n.useCallback)((()=>{s?.joinSessionShortLink&&a(s?.joinSessionShortLink)}),[a,s?.joinSessionShortLink]),m=(0,n.useCallback)(((e,i)=>{u(e),t((0,ea.A9)(Va.EL.REMOVE_PARTICIPANT,void 0,i))}),[t,u]),g=(0,n.useCallback)(((e,t)=>{const n=(0,Cn.Qjr)(t.username);l(e,n.toURI()),i(n.toURLPath(!0))}),[l,i]),v=(0,n.useCallback)((()=>{r(s?.sessionId)}),[s?.sessionId,r]),h=(0,Lv.T4)(e);return s&&h?(0,x.jsxs)("div",{className:Sv,children:[(0,x.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:D.Ru.get("web-player.social-connect.participant-list.title")}),(0,x.jsxs)("div",{className:Cv,children:[(0,x.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:D.Ru.get("web-player.social-connect.participant-list.subtitle")}),(0,x.jsx)(re.n,{size:"small",onClick:p,className:Nv,children:D.Ru.get("web-player.social-connect.invite-button")})]}),(0,x.jsx)("div",{className:wv,children:s.sessionMembers.map(((t,i)=>(0,x.jsx)(Iv,{index:i,sessionMember:t,showRemoveButton:(0,Lv.kt)(e,(0,Cn.Qjr)(t.username).toURI()),onClickRemove:()=>m(i,t),onClickMember:()=>g(i,t)},i)))}),s.isSessionOwner&&s.sessionMembers.length>1&&(0,x.jsx)(d.$,{colorSet:"invertedLight",size:"small",onClick:v,children:D.Ru.get("web-player.social-connect.participant-list.remove-all-guests")}),(0,x.jsx)(c.E,{variant:"marginal",semanticColor:"textSubdued",className:Rv,children:D.Ru.get("web-player.social-connect.participant-list.visibility-info")})]}):(o(fv.p.QUEUE),null)};var Dv=i(98336);const Pv="BZj_r1yzmmragvivUCrw",Uv="hpzTKCoO0rllEslIOMPo",_v="TeBVsFnI9PMHYL9ynJx9",Fv="ZDR7q1cqU2yaYjemuy9Z",Bv="OLB2ghxc09Kz8k_93eIu",Mv=()=>{const{currentQueueView:e,setQueueView:t}=(0,Dg.m)(),i=(0,Dv.y)(),{logQueuePanelTabChange:a}=Pg(),s=(0,n.useMemo)((()=>i?{titleSlot:e!==Dg.p.PARTICIPANT_LIST?(0,x.jsx)(gg.t,{currentTab:e,onTabChange:e=>{e===(0,hg.c)(Dg.p.HISTORY)?(a(Dg.p.HISTORY),t(Dg.p.HISTORY)):(a(Dg.p.QUEUE),t(Dg.p.QUEUE))},className:_v,children:(0,x.jsxs)(vg.w,{"aria-label":"",className:Fv,children:[(0,x.jsx)(hg.V,{"aria-selected":e===Dg.p.QUEUE,label:D.Ru.get("playback-control.queue"),value:Dg.p.QUEUE}),(0,x.jsx)(hg.V,{"aria-selected":e===Dg.p.HISTORY,label:D.Ru.get("view.recently-played"),value:Dg.p.HISTORY})]})}):(0,x.jsx)(oe.H,{iconLeading:As.g,onClick:()=>t(Dg.p.QUEUE),size:"small",condensed:!0,className:Bv,children:D.Ru.get("web-player.social-connect.participant-list.back-to-queue")})}:{title:D.Ru.get("playback-control.queue")}),[i,a,t,e]);return(0,x.jsx)(Be._,{label:D.Ru.get("playback-control.queue"),focusTransferId:"QUEUE-HISTORY-PANEL",children:(0,x.jsx)(Me.w,{fixedHeader:(0,x.jsx)(p.a,{className:Pv,panel:m.Z.Queue,...s}),children:(0,x.jsx)("div",{className:Uv,children:e!==Dg.p.PARTICIPANT_LIST?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(xg.K,{value:"queue",children:e===Dg.p.QUEUE&&(0,x.jsx)(bv,{})}),(0,x.jsx)(xg.K,{value:"history",children:e===Dg.p.HISTORY&&(0,x.jsx)(Vg,{})})]}):(0,x.jsx)(Ov,{})})})})},Hv=(0,n.memo)((function(){return(0,x.jsx)(Og,{children:(0,x.jsx)(Mv,{})})}));var Vv=i(32824),qv=i(96093);const zv=(0,n.memo)((()=>{const e=(0,s.NC)(Tr.ZDY),t=(0,pg.X)(),i=(0,dg._)(),o=function(){const e=(0,n.useRef)(m.Z.NowPlayingView),t=(0,j.XB)();return(0,n.useEffect)((()=>{e.current=t}),[t]),(0,n.useCallback)((i=>{const n=e.current===m.Z.NowPlayingView,a=t===m.Z.NowPlayingView;return i.some((i=>n&&t===i||a&&e.current===i))}),[t])}(),l=(0,Mn.S)()===Bn.z.NOW_PLAYING_VIEW,c=(0,n.useRef)(null),u=(0,s.NC)(Tr.t84)?Rn:Fn,d=e&&t===m.Z.Disabled;return(0,x.jsxs)(r.s,{onError:e=>{(0,Vv.Jy)(e,"PanelSection"),i((0,mg.MQ)(m.Z.Disabled))},children:[(0,x.jsx)(a.A,{nodeRef:c,in:t===m.Z.NowPlayingView||d,exit:m.v.includes(t),timeout:{enter:0,exit:300},unmountOnExit:!0,mountOnEnter:!0,children:(0,x.jsx)(qv.f,{enabled:!d,children:(0,x.jsx)(Jm,{nodeRef:c})})}),t===m.Z.BuddyFeed?(0,x.jsx)(u,{}):null,(0,x.jsx)(ug,{isActive:t===m.Z.BuddyFeedOverlay,shouldPlayAnimation:!l&&o([m.Z.BuddyFeedOverlay]),children:(0,x.jsx)(u,{})}),t===m.Z.Queue?(0,x.jsx)(Hv,{}):null,(0,x.jsx)(ug,{isActive:t===m.Z.QueueOverlay,shouldPlayAnimation:!l&&o([m.Z.QueueOverlay]),children:(0,x.jsx)(Hv,{})}),t===m.Z.Puffin||t===m.Z.PuffinActivation?(0,x.jsx)(xn,{}):null,(0,x.jsx)(ug,{isActive:t===m.Z.PuffinActivationOverlay||t===m.Z.PuffinOverlay,shouldPlayAnimation:!l&&o([m.Z.PuffinActivationOverlay,m.Z.PuffinOverlay]),children:(0,x.jsx)(xn,{})}),t===m.Z.DevicePicker?(0,x.jsx)(Cr,{}):null,(0,x.jsx)(ug,{isActive:t===m.Z.DevicePickerOverlay,shouldPlayAnimation:!l&&o([m.Z.DevicePickerOverlay]),children:(0,x.jsx)(Cr,{})})]})}))},73560:(e,t,i)=>{i.d(t,{_:()=>x,s:()=>h});var n=i(30758),a=i(97500),s=i.n(a),r=i(62411),o=i(88599),l=i(32636),c=i(6154),u=i(18492);const d="ffFwfKcPDbmAPLXzxzKq",p="nZaXB942idDuiFv4bKNk",m="Fwe5dGEAgs_VFp4SPrzv",g="gchSBzolAjaPDHD1q0rA";var v=i(86070);const h=(0,n.createContext)(null),x=({label:e,style:t,focusTransferId:i,children:a,className:x,nodeRef:y})=>{const b=(0,n.useRef)(null),f=y??b,j=(0,u.S)(),S=(0,c.h)(),C=(0,r.d4)((e=>e.ui?.fullscreenMode?.isOpen??!1)),N=j===l.z.NOW_PLAYING_VIEW;return(0,o.X)(i??null,f),(0,v.jsx)(h.Provider,{value:f,children:(0,v.jsx)("aside",{"aria-label":e,className:s()(d,x,{[p]:N,[g]:C,[m]:S}),style:t,id:"Desktop_PanelContainer_Id",ref:f,tabIndex:-1,children:a})})}},23857:(e,t,i)=>{i.d(t,{w:()=>x});var n=i(30758),a=i(97500),s=i.n(a),r=i(71429),o=i(10478),l=i(49011),c=i(42372);const u="AAdBM1nhG73supMfnYX7",d="W3E0IT3_STcazjTeyOJa",p="mdMUqcSHFw1lZIcYEblu",m="cZCuJDjrGA2QMXja_Sua",g="zduvaX0Ioxqd5ypeWoAf";var v=i(86070);const h=({fixedHeader:e,scrollNodeRef:t,children:i,scrolledClassName:n})=>{const a=(0,l.y)(t);return(0,v.jsxs)("div",{className:s()(u),children:[(0,v.jsx)("div",{className:s()(d,{[n??p]:a}),children:e}),i]})},x=n.forwardRef((({children:e,className:t,fixedHeader:i,scrolledClassName:a},l)=>{const d=(0,n.useRef)(null);(0,o.g)(d);const p=(0,n.useMemo)((()=>({scrollNodeRef:d})),[d]),x=(0,v.jsx)(c.bi.Provider,{value:p,children:(0,v.jsx)(r.a,{className:m,scrollNodeRef:d,children:(0,v.jsx)("div",{ref:l,className:s()(u,g,t),children:e})})});return i?(0,v.jsx)(h,{fixedHeader:i,scrollNodeRef:d,scrolledClassName:a,children:x}):x}))},54106:(e,t,i)=>{i.d(t,{a:()=>V,k:()=>M});var n=i(30758),a=i(97500),s=i.n(a),r=i(13505),o=i(81878),l=i(83925),c=i(27508),u=i(3118),d=i(75341),p=i(72574),m=i(93492),g=i(68692),v=i(12367),h=i(99321),x=i(89913),y=i(5119),b=i(84328),f=i(6154),j=i(21832),S=i(14109),C=i(75097),N=i(53575),w=i(90630),k=i(82414),E=i(82362);const R="eTT681T6oUKXsIMiP8pT",I="gwmgu53xszgwAXxqLT0h",T="fNXmHtlrj4UVWmhQrJ_5",A="XOSSUjLDKk9RRmiX_UWa",L="KILnOHUdx4pspVEoJ7kq",O="XNFZdOLgMlx491fEWdYJ",D="icNf66tgG3uxDMbCCIaN",P="NmIQ4hxBcXT8Bd7Abwdi",U="rkIl3GXeAGoK2gIX2zuj",_="j9Ey7DzF10wbxpBIVtcb";var F=i(86070);const B=({title:e,variant:t,semanticColor:i})=>(0,F.jsx)(b.r,{children:(0,F.jsx)(r.E,{as:"h1",variant:t,semanticColor:i,children:e||""})},e||""),M=({link:e,title:t,item:i,panelLinkRef:n,variant:a,semanticColor:r,className:o})=>{const{spec:l,logger:c}=(0,E.r)(d.J,{}),m=(0,p.o_h)(e),g=m?.toURI(),x=!(!g||!t),b=x?[g]:[],f=(0,h.H)(g),S=(0,j.XB)().split("_").join(" "),{draggable:C,onDragStart:k}=(0,N.P)({itemUris:b,dragLabelText:t??""}),T=(0,u.NC)(w.mzn);return(0,F.jsx)(v.h,{menu:f,children:(0,F.jsx)("div",{className:s()(R,o,{[_]:T}),children:e&&t?(0,F.jsx)(y.N,{ref:n,"aria-label":`${S} link`,draggable:C&&x,onDragStart:x?k:void 0,to:e,search:i?`?uid=${i.uid}&uri=${i.uri}`:void 0,className:I,onClick:()=>{c.logInteraction(l.contextLinkFactory().hitUiNavigate({destination:e||""}))},children:(0,F.jsx)(B,{title:t,variant:a,semanticColor:r})}):(0,F.jsx)(B,{title:t,variant:a,semanticColor:r})})})},H=S.$S.PANEL_CLOSE_CLICK,V=({link:e,title:t,titleSlot:i,actions:a,onClose:r,className:d,panelLinkRef:p,preventDefaultClose:v=!1,onBack:h,item:y,titleVariant:b="bodyMediumBold",titleSemanticColor:S="textBase"})=>{const N=(0,j._Y)(),E=(0,j.Ev)(H),R=(0,u.NC)(w.mzn),I=(0,j.XB)()===C.Z.NowPlayingView&&R,_=(0,f.h)(),B=(0,n.useCallback)((()=>{r?.(),v||N(H)}),[r,v,N]),V=null!==y&&(0,k.N)(y);return(0,F.jsx)(n.Suspense,{fallback:null,children:(0,F.jsxs)("div",{className:s()(T,d,{[L]:R}),children:[h&&(0,F.jsx)("span",{className:s()(D,P),children:(0,F.jsx)(x.Zp,{label:m.Ru.get("desktop.login.Back"),children:(0,F.jsx)(g.a,{ariaLabel:m.Ru.get("desktop.login.Back"),size:"sm",onClick:h,icon:o.g})})}),R&&(0,F.jsx)(g.a,{icon:l.t,size:"sm",onClick:B,ariaLabel:m.Ru.get("web-player.now-playing-view.hide"),className:U}),i||(0,F.jsx)(M,{title:t,panelLinkRef:p,item:y,link:e,variant:b,semanticColor:S}),(0,F.jsxs)("span",{className:s()(D,A),children:[a,!V&&!I&&!_&&(0,F.jsx)("div",{"data-testid":"PanelHeader_CloseButton",children:(0,F.jsx)(x.Zp,{label:m.Ru.get("close"),children:(0,F.jsx)(g.a,{ariaLabel:m.Ru.get("close"),className:O,size:"sm",onClick:B,icon:c.M,disabled:!E})})})]})]})})}},98253:(e,t,i)=>{i.d(t,{p:()=>x});var n=i(30758),a=i(97500),s=i.n(a),r=i(13505),o=i(75635),l=i(61e3),c=i(555),u=i(93492),d=i(71353);const p="jAjrv_00X1qyxaEHmJCb",m="YVnLJCNcdaEeIGBQYqJS",g="pxocyhWhrvAeBiSlfjbd",v="aOt09fJWpST6CG8xfHuo";var h=i(86070);const x=n.memo((function({onClose:e,onConfirm:t,isOpen:i,itemCount:a}){const x=(0,n.useCallback)((i=>{t(),e(i)}),[t,e]),y=u.Ru.get("queue.confirm-title",a);return(0,h.jsx)(d.A,{animated:!0,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,onRequestClose:e,contentLabel:y,isOpen:i,children:(0,h.jsxs)("div",{className:p,children:[(0,h.jsx)(r.E,{as:"h2",variant:"bodyMediumBold",className:m,children:y}),(0,h.jsx)(r.E,{as:"p",variant:"bodySmall",className:g,paddingBottom:o.lT,children:u.Ru.get("queue.confirm-message")}),(0,h.jsxs)("div",{className:s()("encore-light-theme",v),children:[(0,h.jsx)(l.H,{onClick:e,children:u.Ru.get("queue.cancel-button")}),(0,h.jsx)(c.$,{onClick:x,children:u.Ru.get("queue.confirm-button")})]})]})})}))},44036:(e,t,i)=>{i.d(t,{H:()=>l});var n=i(17339),a=i(13505),s=i(93492),r=i(57957),o=i(86070);const l=()=>(0,o.jsxs)("div",{className:r.A.emptyContainer,children:[(0,o.jsx)(n.q,{size:"xxlarge","aria-hidden":"true"}),(0,o.jsxs)("div",{className:r.A.titleContainer,children:[(0,o.jsx)(a.E,{as:"h1",variant:"titleMedium",semanticColor:"textBase",children:s.Ru.get("history.empty-title")}),(0,o.jsx)("p",{children:s.Ru.get("history.empty-description")})]})]})},71812:(e,t,i)=>{i.d(t,{K:()=>h});var n=i(30758),a=i(97500),s=i.n(a),r=i(345),o=i(13505),l=i(555),c=i(93492),u=i(5119),d=i(20951),p=i(98370),m=i(57957),g=i(86070);const v={[d.E.SMALL]:0,[d.E.MEDIUM]:480},h=()=>{const e=(0,n.useRef)(null),{breakpoint:t}=(0,p.c)(v,e);return(0,g.jsxs)("div",{className:s()(m.A.emptyContainer,t!==d.E.SMALL&&m.A.large),ref:e,children:[(0,g.jsx)(r.j,{size:t===d.E.SMALL?"large":"xlarge","aria-hidden":"true",className:m.A.icon}),(0,g.jsxs)("div",{className:m.A.titleContainer,children:[(0,g.jsx)(o.E,{as:"h1",variant:t===d.E.SMALL?"bodyMediumBold":"titleSmall",semanticColor:"textBase",children:c.Ru.get("queue.empty-title")}),(0,g.jsx)(o.E,{as:"p",variant:t===d.E.SMALL?"bodySmall":"bodyMedium",children:c.Ru.get("queue.empty-description")})]}),(0,g.jsx)(u.N,{to:"/search",children:(0,g.jsx)(l.$,{colorSet:"invertedLight",size:t===d.E.SMALL?"small":"medium",children:c.Ru.get("queue.fine-something")})})]})}},93794:(e,t,i)=>{i.d(t,{g:()=>g});var n=i(30758),a=i(97500),s=i.n(a),r=i(13505),o=i(93492),l=i(32284);const c="w0kwPDoelauN3C9dVoVe",u="xzLZD9uD3b4u9wecXAJY",d="DaFhhSm73r7rNpomErhI";var p=i(86070);const m=({children:e})=>(0,p.jsx)(p.Fragment,{children:e}),g=(0,n.forwardRef)((function({users:e,maxSlots:t=3,size:i,withoutOverflowBadge:n=!1,dropShadow:a=!1,AvatarWrapper:g=m},v){const h=Math.max(2,t),x=e.length>h?e.length-h+1:0,y=e.slice(0,h),{userIconSize:b,width:f,smallFontSize:j,largeFontSize:S}=(e=>{switch(e){case"xxlarge":return{userIconSize:"xlarge",width:64,smallFontSize:24,largeFontSize:32};case"xlarge":return{userIconSize:"large",width:48,smallFontSize:18,largeFontSize:24};case"large":return{userIconSize:"medium",width:32,smallFontSize:12,largeFontSize:16};case"medium":default:return{userIconSize:"small",width:24,smallFontSize:9,largeFontSize:12};case"small":return{userIconSize:"xsmall",width:18,smallFontSize:8,largeFontSize:10}}})(i),C=x>9?j:S,N=(0,p.jsx)("span",{className:s()(u,"encore-inverted-light-set"),style:{width:f,height:f},role:"presentation",children:(0,p.jsx)(r.E,{variant:"bodySmallBold",style:{fontSize:C},semanticColor:"textBase",children:`+${x}`})});return(0,p.jsx)("div",{className:s()(c),ref:v,children:y.map(((e,t)=>!n&&x>0&&t===h-1?(0,p.jsx)(g,{index:t,children:(0,p.jsx)(l.e,{images:[],userIconSize:b,label:o.Ru.get("web-player.social-connect.facepile.and-others",x),width:f,piled:!0,customPlaceholder:N})},"others"):(0,p.jsx)(g,{index:t,user:e,children:(0,p.jsx)(l.e,{images:e.images,userIconSize:b,label:e.displayName,displayName:e.displayName,username:e.username,width:f,piled:t>0,imageClassName:a?d:void 0})},e.displayName)))})}))},47495:(e,t,i)=>{i.d(t,{$:()=>p});var n=i(30758),a=i(62411),s=i(555),r=i(46157),o=i(93492),l=i(12032),c=i(40189),u=i(90843),d=i(86070);const p=({onClick:e})=>{const t=(0,a.wA)(),i=(0,c.Y)(),p=(0,n.useCallback)((async()=>{try{e(),await i()}catch(e){t((0,l.A9)(u.EL.ERROR))}}),[i,t,e]);return(0,d.jsx)(s.$,{iconLeading:r.V,size:"small",onClick:p,children:o.Ru.get("web-player.social-connect.menu-action.title")})}},82272:(e,t,i)=>{i.d(t,{T:()=>o});var n=i(30758),a=i(25366),s=i(82362),r=i(86070);const o=()=>{const{spec:e,logger:t,UBIFragment:i}=(0,s.r)(a.I,{});return{logUserClick:(0,n.useCallback)(((i,n)=>{t.logInteraction(e.participantListFactory().participantListRowFactory({position:i}).userLinkFactory().hitUiNavigate({destination:n}))}),[t,e]),logRemoveClick:(0,n.useCallback)((i=>{t.logInteraction(e.participantListFactory().participantListRowFactory({position:i}).removeButtonFactory().hitUiReveal())}),[t,e]),UBIFragmentWithSpec:(0,n.useCallback)((t=>(0,r.jsx)(i,{spec:e,...t})),[i,e])}}},81152:(e,t,i)=>{i.d(t,{O:()=>c});var n=i(30758),a=i(85813),s=i(82050),r=i(28445),o=i(82362),l=i(86070);const c=()=>{const{spec:e,logger:t,UBIFragment:i}=(0,o.r)(a.J,{}),{uri:c}=(0,r.f)(),u=(0,n.useCallback)(((i,n)=>{const a=e.inviteButtonFactory().hitShare({entityToBeShared:i,shareId:n});t.logInteraction(a)}),[t,e]),d=(0,n.useCallback)((()=>{const i=e.endButtonFactory().hitUiReveal();t.logInteraction(i)}),[t,e]),p=(0,n.useCallback)((()=>{const i=e.leaveButtonFactory().hitUiReveal();t.logInteraction(i)}),[t,e]),m=(0,n.useCallback)((()=>{const i=e.facepileButtonFactory().hitUiNavigate({destination:s.S.PARTICIPANTS_PAGE});t.logInteraction(i)}),[t,e]),g=(0,n.useCallback)((t=>(0,l.jsx)(i,{spec:e,...t})),[i,e]);return{logInviteClick:u,logEndClick:d,logLeaveClick:p,logFacePileClick:m,logStartJam:(0,n.useCallback)((()=>{const i=e.createJamButtonFactory().hitUiNavigate({destination:c??""});t.logInteraction(i)}),[t,e,c]),UBIFragmentWithSpec:g}}},81109:(e,t,i)=>{i.d(t,{Z:()=>$});var n=i(38167),a=i(30758),s=i(62411),r=i(13505),o=i(3118),l=i(93492),c=i(89264),u=i(97500),d=i.n(u),p=i(33242),m=i(50154),g=i(61e3),v=i(27508),h=i(555),x=i(3644);const y="_GA0LJ6qjoKBsWLq34XF",b="s_iKX8Su0w1W5b9yObSm",f="aQ5ntWUtU9bcqS9fS9aC",j="SxLR9RMcR2XyJCZuxYqv",S="vtk1i3JMLWObMppMQ0gH",C="x8qh9EgeC3AdLO0C54Og",N="Dm9gGjGoA7yNxClwSV24",w="MPtthrsnd9PdsCTssJqk";var k=i(86070);const E=({onClose:e,onCopyLink:t,inviteUrlQR:i})=>(0,k.jsxs)(m.a,{className:y,padding:"0",children:[(0,k.jsxs)("div",{className:b,children:[(0,k.jsxs)("div",{className:j,children:[(0,k.jsx)(r.E,{variant:"bodySmallBold",children:l.Ru.get("web-player.social-connect.invitation.qr-code.title")}),(0,k.jsx)(r.E,{variant:"bodySmall",semanticColor:"textSubdued",children:l.Ru.get("web-player.social-connect.invitation.qr-code.description")})]}),(0,k.jsx)(g.H,{semanticColor:"textSubdued",iconOnly:v.M,size:"small",onClick:e,condensedAll:!0,"aria-label":l.Ru.get("web-player.social-connect.invitation-modal.button-tertiary")})]}),(0,k.jsx)("div",{className:S}),(0,k.jsxs)("div",{className:d()(b,f,C),children:[(0,k.jsx)(h.$,{iconLeading:x._,colorSet:"invertedLight",size:"small",onClick:t,className:N,children:l.Ru.get("web-player.social-connect.invitation-modal.button-primary")}),(0,k.jsx)("div",{className:w,children:(0,k.jsx)(p.Ay,{value:i,size:100})})]})]});var R=i(21974),I=i(12032),T=i(90843);const A=({onClick:e})=>{const t=(0,s.wA)(),i=(0,a.useCallback)((()=>{e(),t((0,I.A9)(T.EL.END_SESSION))}),[t,e]);return(0,k.jsx)(R.n,{size:"small",onClick:i,children:l.Ru.get("web-player.social-connect.end-session.end-session-button")})},L=({onClick:e})=>(0,k.jsx)(R.n,{size:"small",onClick:async t=>{e(t)},children:l.Ru.get("web-player.social-connect.invite-button")}),O=({onClick:e})=>{const t=(0,s.wA)(),i=(0,a.useCallback)((()=>{e(),t((0,I.A9)(T.EL.LEAVE_SESSION))}),[t,e]);return(0,k.jsx)(R.n,{size:"small",onClick:i,children:l.Ru.get("web-player.social-connect.leave-session.leave-session-button")})};var D=i(85387),P=i(7797),U=i(93794),_=i(98178),F=i(82050),B=i(90630);const M="E6U6SyOECK4IENpzZw2R",H="rirXgOjB8QWiJWDk5hSD",V=({currentSession:e,username:t,onClick:i})=>{const{sessionMembers:n}=e,s=(0,D.Zp)(),c=(0,o.NC)(B.eWj),{setQueueView:u}=(0,P.m)(),d=n.length+2>3?n.length-3:0,p=(0,_.t)(e,t,{userFirst:!0}),m=(0,a.useCallback)((()=>{i&&i(),c?u(P.p.PARTICIPANT_LIST):s(F.S.PARTICIPANTS_PAGE)}),[c,s,i,u]);return(0,k.jsxs)(R.n,{size:"small",className:M,onClick:m,"aria-label":l.Ru.get("web-player.social-connect.participant-list.title"),children:[(0,k.jsx)(U.g,{users:p,maxSlots:3,withoutOverflowBadge:!0}),d>0&&(0,k.jsx)(r.E,{variant:"bodySmallBold",semanticColor:"textBase",className:H,children:`+${d}`})]})};var q=i(73916),z=i(81152),Q=i(94822);const Y="CyBimvsotsoxqwtiZeAn",G="_GKa4bilkTYbQLgcLogI",W="uXHR7rkHhuz9kVPNWwYW",K="KFGFA5pPG0hgIB97pZfI",Z=({id:e,label:t,value:i,onChange:n})=>(0,k.jsxs)("label",{htmlFor:e,className:K,children:[(0,k.jsx)(r.E,{variant:"bodySmall",semanticColor:"textSubdued",children:t}),(0,k.jsx)(c.l,{id:e,value:i,onSelected:n,condensed:!0})]}),X=({className:e,emptyStateComponent:t})=>{const{currentSession:i,setQueueOnlyMode:n,setParticipantVolumeControl:c}=(0,Q.D)(),u=(0,s.d4)((({session:e})=>e.user?.id)),d=i?.joinSessionShortLink,p=i?.joinSessionShortLinkQR,{logFacePileClick:m,logInviteClick:g,logEndClick:v,logLeaveClick:h,UBIFragmentWithSpec:x}=(0,z.O)(),y=(0,q.Z)(),b=(0,o.NC)(B.eWj),[f,j]=(0,a.useState)(!0),S=(0,a.useCallback)((()=>{m()}),[m]),C=(0,a.useCallback)((async()=>{d&&await y(d),g(d?.spotifyUri??"",d?.shareId??"")}),[y,d,g]),N=(0,a.useCallback)((async()=>{b?j((e=>!e)):C()}),[C,b]),w=(0,a.useCallback)((()=>{v()}),[v]),R=(0,a.useCallback)((()=>{h()}),[h]);if(!i?.active)return t?(0,k.jsx)(k.Fragment,{children:t}):null;const I=i.sessionMembers.find((e=>e.id===i.sessionOwnerId));return(0,k.jsx)(x,{children:(0,k.jsxs)("div",{className:e,children:[(0,k.jsx)("div",{className:Y,children:(0,k.jsx)(r.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",children:l.Ru.get("web-player.social-connect.session-info.title",{host:I?.displayName??""})})}),(0,k.jsxs)("div",{className:G,children:[(0,k.jsxs)("div",{className:W,children:[(0,k.jsx)(V,{currentSession:i,username:u,onClick:S}),(0,k.jsx)(L,{onClick:N}),i.isSessionOwner?(0,k.jsx)(A,{onClick:w}):(0,k.jsx)(O,{onClick:R})]}),f&&(0,k.jsx)(E,{onClose:()=>j(!1),onCopyLink:C,inviteUrlQR:p?.shareableUrl??""}),i.isSessionOwner&&(0,k.jsxs)("div",{children:[(0,k.jsx)(Z,{id:"queueOnlyMode",label:l.Ru.get("web-player.social-connect.controls.queue-only-mode"),value:!i.queueOnlyMode,onChange:e=>n(!e)}),"UNAVAILABLE"!==i.participantVolumeControl&&(0,k.jsx)(Z,{id:"participantVolumeControl",label:l.Ru.get("web-player.social-connect.controls.participant-volume-control"),value:"ENABLED"===i.participantVolumeControl,onChange:e=>c(e)})]})]})]})})};var J=i(32824);const $=e=>(0,k.jsx)(n.s,{onError:e=>{(0,J.Jy)(e,"JamQueueHeader")},suspenseFallback:e.emptyStateComponent,children:(0,k.jsx)(X,{...e})})},6269:(e,t,i)=>{i.d(t,{o:()=>s});var n=i(85196),a=i(18308);function s(){return(0,a.N)(n.g)}},19988:(e,t,i)=>{i.d(t,{Nz:()=>o,Vp:()=>s,Vv:()=>l,wD:()=>c,xz:()=>r});var n=i(20256),a=i(56563);const s=[n.fl.TRACKS,n.fl.LOCAL_TRACKS,n.fl.ALBUMS,n.fl.ARTISTS,n.fl.AUTHORS,n.fl.PLAYLISTS,n.fl.PLAYLISTS_V2,n.fl.FOLDERS,n.fl.EPISODES,n.fl.CHAPTERS,n.fl.SHOWS,n.fl.AUDIOBOOKS,n.fl.PSEUDO_PLAYLISTS],r={[n.fl.TRACKS]:"tracks",[n.fl.ALBUMS]:"albums",[n.fl.ARTISTS]:"artists",[n.fl.AUTHORS]:"authors",[n.fl.PLAYLISTS]:"playlists",[n.fl.FOLDERS]:"folders",[n.fl.SHOWS]:"shows",[n.fl.EPISODES]:"episodes",[n.fl.CHAPTERS]:"chapters",[n.fl.LOCAL_TRACKS]:"local-tracks",[n.fl.AUDIOBOOKS]:"audiobooks",[n.fl.PSEUDO_PLAYLISTS]:"pseudo-playlists"};let o=function(e){return e.ON="on",e.BEFORE="before",e.AFTER="after",e}({});const l=(0,a.g)(o);function c(e){return s.includes(e)}},34437:(e,t,i)=>{i.d(t,{A:()=>h});var n=i(30758),a=i(88308),s=i(20256),r=i(19988);function o(e,t,i,n){if(e.defaultPrevented)return null;const a=t.includes(r.Nz.BEFORE),s=t.includes(r.Nz.AFTER);let o=r.Nz.ON;if(e.currentTarget instanceof HTMLElement&&(a||s)){const{top:s,height:l,left:c,width:u,right:d}=e.currentTarget.getBoundingClientRect(),p=t.includes(r.Nz.ON);if("horizontal"===i)if(p&&a){(n?e.clientX>Math.round(d)-u/4:e.clientX<Math.round(c)+u/4)&&(o=r.Nz.BEFORE)}else{o=(n?e.clientX>Math.round(d)-u/2:e.clientX<Math.round(c)+u/2)?r.Nz.BEFORE:r.Nz.AFTER}else"vertical"===i&&(p&&a?e.clientY<Math.round(s)+l/4&&(o=r.Nz.BEFORE):o=e.clientY<Math.round(s)+l/2?r.Nz.BEFORE:r.Nz.AFTER)}return t.includes(o)?o:null}var l=i(72574);function c(e,t){return Array.from(e.dataTransfer?.types??[]).filter(s._4).filter((e=>!!(0,r.wD)(e)&&t.includes(e))).filter(r.wD)}var u=i(98628);function d(e,t,i){const n=c(e,t);if(!n.length)return function(e,t){return e.split(/[\s,;]+/g).map((e=>(0,l.o_h)(e?.trim()))).filter(u.P).reduce(((e,i)=>{const n=s.Ay[i.type];return(0,r.wD)(n)&&t.includes(n)?(e[n]||=[],e[n].push(i.toURI()),e):e}),{})}(e.dataTransfer?.getData("text/plain"),t);const a=Object.fromEntries(n.map((t=>[t,e.dataTransfer?.getData(t)?.split("\n").filter(Boolean)??[]])));if(i){const{[s.fl.PLAYLISTS]:e,...t}=a,i=Array.from(new Set([...a[s.fl.PLAYLISTS_V2]??[],...(a[s.fl.PLAYLISTS]??[]).map(p)]));return{...t,...i.length?{[s.fl.PLAYLISTS_V2]:i}:null}}return a}function p(e){const t=(0,l.o_h)(e);return t?.type===l.NQG.PLAYLIST?(0,l.Pse)(t.id).toURI():e}var m=i(74568),g=i(13867);const v={droppableMimeTypes:"albums artists authors episodes chapters folders playlists shows tracks local-tracks audiobooks pseudo-playlists",useDropTarget:"NxEINIJHGytq4gF1r2N1","useDropTarget--albums":"O0AN8Ty_Cxd4iLwyKATB","useDropTarget--artists":"wQnUXn1m6Gy4PH8jhslb","useDropTarget--authors":"CU0fvofmxUbTupSDNOQ3","useDropTarget--episodes":"XNjgtSbyhshr7YQcVvry","useDropTarget--chapters":"OxrHhBsQAggwnv6RmqRy","useDropTarget--folders":"mhuhir0ikRqXAPHU8ZZ1","useDropTarget--playlists":"D8wJ9TPfJzLeLJYxnad2","useDropTarget--shows":"oE8LAmRhbeQqsZrQo4lb","useDropTarget--tracks":"or84FBarW2zQhXfB9VFb","useDropTarget--local-tracks":"odS2IW9wfNVHhkhc0l_X","useDropTarget--audiobooks":"zWWLnqWslTLHwq3wBgGB","useDropTarget--pseudo-playlists":"pTvxY5yAQklZgb7VZFGS"};function h({uri:e,id:t=e,allowedMimeTypesByDropPosition:i,onDrop:l,onLongDragOver:u,longDragOverTimeout:p=1e3,reorderDirection:h="vertical"}){const y=(0,a.lB)((()=>i),[i]),b=(0,g.W)(),f=(0,m.wK)(),j=!!t&&1===f.length&&f[0]===t,S=Object.values(y).every((e=>e.includes(s.fl.PLAYLISTS_V2)&&!e.includes(s.fl.PLAYLISTS))),[C,N]=(0,n.useState)(null),w=(0,n.useCallback)((e=>j?[]:Object.entries(y).filter((([t,i])=>c(e,i).length>0)).map((([e])=>e)).filter(r.Vv)),[j,y]),k=(0,n.useRef)(!0),E=(0,n.useRef)(null),R=(0,n.useRef)(l);R.current=l;const I=(0,n.useRef)(u);I.current=u;const T=(0,n.useCallback)((()=>{k.current=!0,N(null),E.current&&(window.clearTimeout(E.current),E.current=null)}),[]);(0,n.useEffect)((()=>T),[T]);const A=(0,n.useCallback)((e=>{const t=w(e);t.length&&(N(o(e,t,h,b)),e.dataTransfer&&!e.defaultPrevented&&(e.dataTransfer.dropEffect=t.includes(r.Nz.ON)?"copy":"move"),e.preventDefault())}),[w,b,h]),L=(0,n.useCallback)((e=>{if(w(e).length&&!e.defaultPrevented){if(k.current){k.current=!1;const t=e.currentTarget,i=()=>{document.contains(t)||(T(),document.removeEventListener("dragenter",i))};document.addEventListener("dragenter",i),document.addEventListener("dragend",(()=>{document.removeEventListener("dragenter",i),T()}),{once:!0}),I.current&&(E.current=window.setTimeout((()=>{I.current?.()}),p))}e.preventDefault()}}),[w,p,T]),O=(0,n.useCallback)((e=>{w(e).length&&(function(e){return null===e.relatedTarget&&x?!document.elementsFromPoint(e.clientX,e.clientY).includes(e.currentTarget):!e.currentTarget.contains(e.relatedTarget instanceof Node?e.relatedTarget:null)}(e)&&T(),e.preventDefault())}),[w,T]),D=(0,n.useCallback)((e=>{const t=o(e,w(e),h,b);if(!e.defaultPrevented&&t){const i=d(e,y[t]??[],S),n=function(e){return{sectionId:parseInt(e.dataTransfer.getData("text/x-spotify-section"),10)||0,contextUri:e.dataTransfer.getData("text/x-spotify-context"),itemIds:e.dataTransfer.getData(s.fl.UIDS)?.split("\n").filter(Boolean)??[]}}(e);Object.keys(i).length&&R.current&&(R.current(i,t,n),e.preventDefault())}T()}),[w,h,b,T,y,S]),P=(0,n.useMemo)((()=>`${v.useDropTarget} ${Array.from(new Set(Object.values(y).flat()))?.map((e=>v[`useDropTarget--${r.xz[e]}`]??"")).join(" ")}`),[y]);return(0,n.useMemo)((()=>({dropPosition:C,className:P,onDragEnter:L,onDragLeave:O,onDragOver:A,onDrop:D})),[P,C,L,O,A,D])}const x=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},89977:(e,t,i)=>{i.d(t,{R:()=>a});var n=i(30758);const a=e=>{const[t,i]=(0,n.useState)(null);(0,n.useEffect)((()=>{const t=e.current;if(!t)return()=>{};const n=({target:e})=>{e instanceof HTMLElement&&i(e)};return t.addEventListener("focusout",n),()=>{t.removeEventListener("focusout",n)}}),[e]),(0,n.useEffect)((()=>{const n=e.current;if(!t||!n)return;const a=n.contains(t),s=n.contains(document.activeElement);!a&&!s&&n.focus({preventScroll:!0}),i(null)}),[e,t])}},31531:(e,t,i)=>{i.d(t,{g:()=>n.g});var n=i(27)},96205:(e,t,i)=>{i.d(t,{v:()=>n.v});var n=i(56454)},51278:(e,t,i)=>{i.d(t,{g:()=>c});var n=i(30758),a=i(13982),s=i(91205),r=i(87578),o=i(53405),l=i(55666);function c(){const e=(0,r.V)(),t=(0,l.u)(),[i,c]=(0,n.useState)(null),u=(0,n.useCallback)((async()=>{const i=e.getDefaultDevice();if(null===i)return void c(null);if(i.transportType!==a.Yg.BLUETOOTH)return void c({audioDevice:i});const n=await t.lookup(i.name);c({audioDevice:i,externalAccessory:n})}),[e,t]);return(0,o.k)(s.B.DEVICE_CONNECTED,u),(0,n.useEffect)((()=>{u()}),[u]),i}},73581:(e,t,i)=>{i.d(t,{$:()=>u});var n=i(3118),a=i(86324),s=i(3828),r=i(67759),o=i(75784),l=i(64640);const c=["artistsets","artist-mix-reader","blend","daily-mix","daylist","discover-weekly","descripto","inspiredby-mix","on-repeat","release-radar","repeat-rewind","topic-mix"],u=(e,t)=>{const i=(0,n.NC)(l.en),u=(0,s.i)(e.uri),[d]=(0,r.A)(u);return!(!(0,o.v)(e)||!t||d||!i||e.uri!==u)&&((e,t)=>"autoplay"===e.provider||!("context"!==e.provider||!t.metadata?.format_list_type||!c.includes(t.metadata.format_list_type))||!!(0,a.N)(e))(e,t)}},70303:(e,t,i)=>{i.d(t,{J:()=>n.J});var n=i(95132)},88726:(e,t,i)=>{i.d(t,{r:()=>g});var n=i(30758),a=i(62411),s=i(65652),r=i(32882),o=i(34239),l=i(21832),c=i(14109),u=i(75097),d=i(63291),p=i(90843),m=i(66419);function g(){const e=(0,a.d4)(o.u),t=(0,a.wA)(),{setYlxSidebarState:i}=(0,d.sy)(),{mainLandmarkRef:g,lyricsCinemaRef:v}=(0,s.JT)(),{isActive:h,panelSend:x}=(0,l.AI)(u.Z.NowPlayingView);return{mode:e,setMode:(0,n.useCallback)((e=>{e===p.YU.cinema&&h?(v.current?.classList.add(m.A.lyricsCinemaVisible),g.current?.classList.add(m.A.nonDisplayedArea),i(d.fX.COLLAPSED),x(c.$S.NPV_BUTTON_CLICK)):(v.current?.classList.remove(m.A.lyricsCinemaVisible),g.current?.classList.remove(m.A.nonDisplayedArea),h||x(c.$S.NPV_BUTTON_CLICK)),t((0,r.gh)(e))}),[t,x,h,v,g,i])}}},16408:(e,t,i)=>{i.d(t,{P:()=>d,X:()=>u});var n=i(93492),a=i(82414),s=i(56226),r=i(23046),o=i(75784),l=i(24320),c=i(52596);function u(e){return(0,o.v)(e)?n.Ru.get("playback-control.now-playing-label",e.name,e.artists.map((({name:e})=>e)).join(n.Ru.getSeparator())):(0,r.p)(e)?n.Ru.get("playback-control.now-playing-label",e.name,e.show.name):(0,s.d)(e)?n.Ru.get("playback-control.now-playing-label",e.name,e.book.name):(0,a.N)(e)?n.Ru.get("ad-formats.advertisement"):(0,l.v)(e)?void 0:(0,c.d)(e)}function d(e){let t=u(e);return t||(t=n.Ru.get("queue.now-playing")),t}},4948:(e,t,i)=>{i.d(t,{d:()=>n});const n=e=>{const t=e?.metadata?.["dislike-endpoint"]??null;return{dislikeEndpoint:t,shouldShowFeedbackControls:"1"===e?.metadata?.["dislike-feedback-available"]&&null!==t}}},85271:(e,t,i)=>{i.d(t,{e:()=>v});var n=i(30758),a=i(5119),s=i(56920),r=i(16408),o=i(82414),l=i(56226),c=i(23046),u=i(75784),d=i(24320),p=i(52596),m=i(86070);const g=(0,n.lazy)((()=>i.e(2291).then(i.bind(i,12291)))),v=({context:e,index:t,item:i,isVisible:v,children:h,className:x,referrer:y,onClick:b,adEventReason:f})=>{const j=(0,r.P)(i),S=i.type,C=v?void 0:-1;if((0,u.v)(i)||(0,c.p)(i)||(0,l.d)(i)){const n=(0,s.O)(e,i,t);return n?(0,m.jsx)(a.N,{className:x,referrer:y,"data-testid":"context-link","data-context-item-type":S,style:{border:"none"},to:n.to,search:n.search,"aria-label":j,tabIndex:C,onClick:b,children:h}):(0,m.jsx)(m.Fragment,{children:h})}return(0,o.N)(i)?(0,m.jsx)(n.Suspense,{fallback:(0,m.jsx)(m.Fragment,{children:h}),children:(0,m.jsx)(g,{item:i,"aria-label":j,tabIndex:C,adEventReason:f,children:h})}):(0,d.v)(i)?(0,m.jsx)(m.Fragment,{children:h}):(0,p.d)(i)}},72798:(e,t,i)=>{i.d(t,{a:()=>n.a});var n=i(70196)},33998:(e,t,i)=>{i.d(t,{r:()=>n.r});var n=i(18168)},814:(e,t,i)=>{i.d(t,{X:()=>n.X,w:()=>n.w});var n=i(48926)},39092:(e,t,i)=>{i.d(t,{j:()=>p});var n=i(30758),a=i(98929),s=i(46710),r=i(13982),o=i(98538),l=i(50210),c=i(21328),u=i(88946);const d={headphoneDevice:null,audioDevice:null,predictedState:null,isOnboarded:!1,currentState:{externalizationEnabled:!1,specificEnabled:!1},contentRestrictions:{specificRestricted:!1,externalizationRestricted:!1,processingCapabilitiesRestricted:!1},toggleTuneHeadphones:null,toggleTuneStudio:null,setFilterState:()=>Promise.resolve()},p=()=>{const e=(0,l.N)(),t=(0,a.jE)(),i=(0,o.l)(),p=(0,n.useMemo)((()=>["puffin-current-device"]),[]),{data:m,isLoading:g,isError:v}=(0,s.I)({queryKey:p,queryFn:async()=>await e.getFilterState(),gcTime:5e3,staleTime:5e3});var h;return h=()=>{t.invalidateQueries({queryKey:p})},(0,u.G)(c.n.UPDATE,h),{deviceFilterState:!i&&m||d,isMaybeHeadphoneDevice:(0,r.lS)(m?.audioDevice),isLoading:g,isError:v}}},88342:(e,t,i)=>{i.d(t,{$:()=>n});let n=function(e){return e[e.NowPlaying=0]="NowPlaying",e[e.NextInQueue=1]="NextInQueue",e[e.NextUp=2]="NextUp",e}({})},36408:(e,t,i)=>{i.d(t,{H:()=>r,K:()=>s});var n=i(77782),a=i(28445);function s(e){return"autoplay"===e?.provider}function r(){const{uri:e,description:t}=(0,a.f)(),{current:i,nextUp:r,queued:o}=(0,n.w)(),l=r.filter((e=>s(e)?e:"autoplay"!==e.provider)),c=!!o?.length,u=!!l?.length;return{uri:e,description:t,current:i,nextUp:l,queued:o,isEmpty:!1===(i||c||u),hasQueuedTracks:c,hasNextTracks:u}}},1326:(e,t,i)=>{i.d(t,{x:()=>s});var n=i(46710),a=i(56424);function s(){const e=(0,a.t)();return(0,n.I)({queryKey:["settings-formats"],queryFn:()=>e.quality.getFormats(),gcTime:36e5,staleTime:6e5}).data}},46198:(e,t,i)=>{i.d(t,{o:()=>w});var n=i(30758),a=i(97500),s=i.n(a),r=i(61e3),o=i(78943),l=i(70257),c=i(37558),u=i(72574),d=i(93492),p=i(89913),m=i(23925),g=i(20951),v=i(33059),h=i(28445),x=i(86848),y=i(99802),b=i(82362);const f="VcqCvLW71lZT4kqnCgt0";var j=i(86070);const S=({contextUri:e="",uri:t,id:i=t,className:a,canAdd:u})=>{const{description:x}=(0,h.f)(),S=(0,y.s)(),{spec:C}=(0,b.r)(c.A,{data:{uri:e}}),N=(0,n.useCallback)((()=>{S.logInteraction(C.undoButtonFactory({uri:t}).hitUiHide())}),[S,C,t]),w=(0,n.useCallback)((()=>{S.logInteraction(C.removeRecommendationButtonFactory({uri:t}).hitRemoveRecommendation({recommendedItemUri:t,contextUri:e}))}),[e,S,C,t]),k=(0,n.useCallback)((()=>{S.logInteraction(C.addRecommendationButtonFactory({uri:t}).hitAddToPlaylist({playlist:e,itemToBeAdded:t}))}),[e,S,C,t]),{removeRecommendation:E,addRecommendation:R,canRemoveRecommendation:I,canAddRecommendation:T}=(0,m.t)({uri:t,uid:i,contextUri:e,onUndo:N,onRemoveRecommendation:w,onAddRecommendation:k}),A=(0,n.useCallback)((()=>x?d.Ru.get("web-player.smart-shuffle.add-to-playlist-button",x):d.Ru.get("web-player.smart-shuffle.add-to-playlist-button-fallback")),[x]),L=(0,v.y)();return(0,j.jsxs)("div",{className:s()(f,a),children:[I&&(0,j.jsx)(p.Zp,{label:d.Ru.get("web-player.smart-shuffle.removed-from-recommendations-button"),children:(0,j.jsx)(r.H,{onClick:E,iconOnly:o.P,size:L===g.E.MEDIUM?"medium":"small","aria-label":d.Ru.get("web-player.smart-shuffle.removed-from-recommendations-button"),condensedAll:!0})}),u&&T&&(0,j.jsx)(p.Zp,{label:A(),children:(0,j.jsx)(r.H,{onClick:R,iconOnly:l.P,size:L===g.E.MEDIUM?"medium":"small","aria-label":A(),condensedAll:!0})})]})},C=e=>{const t=(0,x.J)(e.contextUri);return(0,j.jsx)(S,{...e,canAdd:t?.canAdd??!1})},N=e=>(0,j.jsx)(S,{...e,canAdd:!0}),w=e=>e.contextUri&&(0,u.tbX)(e.contextUri)?(0,j.jsx)(C,{...e,contextUri:e.contextUri}):e.contextUri&&(0,u.Z0m)(e.contextUri)?(0,j.jsx)(N,{...e,contextUri:e.contextUri}):(0,j.jsx)(S,{...e,canAdd:!1})},98178:(e,t,i)=>{i.d(t,{c:()=>s,t:()=>r});var n=i(72574);const a=e=>({url:e}),s=e=>{const t=[];return e.largeImageUrl?t.push(a(e.largeImageUrl)):e.imageUrl&&t.push(a(e.imageUrl)),{displayName:e.displayName,images:t,username:e.username,uri:(0,n.Qjr)(e.username).toURI()}},r=(e,t,i)=>{const n=[],a=e.sessionMembers.find((({id:t})=>t===e.sessionOwnerId));a&&n.push(a);const r=e.isSessionOwner?void 0:e?.sessionMembers.find((({username:e})=>e===t));r&&(i?.userFirst?n.unshift(r):n.push(r));const o=e.sessionMembers.filter((({username:i,id:n})=>n!==e.sessionOwnerId&&i!==t));return[...n,...o].map(s)}},71627:(e,t,i)=>{i.d(t,{K:()=>y});var n=i(30758),a=i(62411),s=i(74905),r=i(13505),o=i(93492),l=i(69299),c=i(93794),u=i(98178),d=i(60128),p=i(72574),m=i(82362);var g=i(94822);const v="UWuPbrFbZar0lIcBFH31",h="wFkvSGFYuw6rhfwWWYWC";var x=i(86070);const y=()=>{const{currentSession:e}=(0,g.D)(),t=(0,a.d4)((({session:e})=>e.user?.id)),{logJamNameClick:i}=(()=>{const{spec:e,logger:t}=(0,m.r)(d.V,{});return{logJamNameClick:(0,n.useCallback)((()=>{const i=e.jamNameFactory().hitUiNavigate({destination:(0,p.K72)().toURI()});t.logInteraction(i)}),[t,e])}})(),{openQueue:y}=(0,l.R)(),b=(0,n.useCallback)((()=>{i(),y()}),[i,y]);if(!e?.active)return null;const f=e.sessionMembers.find((({id:t})=>t===e.sessionOwnerId)),j=(0,u.t)(e,t,{userFirst:!0});return(0,x.jsxs)("div",{className:v,children:[(0,x.jsx)(c.g,{users:j,dropShadow:!0,size:"small"}),(0,x.jsx)(s.Y,{className:h,onClick:b,semanticColor:"textBase",tabIndex:0,standalone:!0,children:(0,x.jsx)(r.E,{variant:"bodySmallBold",children:o.Ru.get("web-player.social-connect.session-info.title",{host:f?.displayName??""})})})]})}},72630:(e,t,i)=>{i.d(t,{p:()=>x});var n=i(30758),a=i(13505),s=i(61e3),r=i(27508),o=i(93492),l=i(71338),c=i(47495),u=i(81152),d=i(72288);const p="pIxPdfuNasUDLbEDmuK_",m="T5TwrUTf23N311rgrEAc",g="BTwQUS5iBiiOBgdda2Zi",v="lu2OTpzgQ6hv6AYWXMNQ";var h=i(86070);const x=({localStorageKey:e,onDismiss:t})=>{const[i,x]=(0,d.x)(e,!1),{logStartJam:y}=(0,u.O)(),{enqueueSnackbar:b}=(0,l.d)(),f=(0,n.useCallback)((()=>{x(!0),t&&t(),b(o.Ru.get("web-player.social-connect.promotion.how-to-start-a-jam-reminder"),{autoHideDuration:5e3})}),[b,t,x]);return i?(0,h.jsx)(h.Fragment,{}):(0,h.jsxs)("div",{className:p,children:[(0,h.jsxs)("div",{className:m,children:[(0,h.jsx)(a.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:o.Ru.get("web-player.social-connect.invitation-modal.subtitle")}),(0,h.jsx)(s.H,{iconOnly:r.M,className:g,"aria-label":o.Ru.get("close"),onClick:f,size:"small"})]}),(0,h.jsx)("div",{className:v,children:(0,h.jsx)(c.$,{onClick:y})})]})}},27276:(e,t,i)=>{i.d(t,{y:()=>n.y});var n=i(14628)},36065:(e,t,i)=>{i.d(t,{d:()=>r});var n=i(3118),a=i(60841),s=i(90630);const r=()=>{const e=(0,n.NC)(s.iGu,{loadingValue:!1}),t=(0,a.V)();return e&&!t}},56721:(e,t,i)=>{i.d(t,{v:()=>s});var n=i(50210),a=i(20841);const s=()=>{const e=(0,n.N)(),t="1"===(0,a.$)("is-puffin");return e.isAvailable()&&t}},77287:(e,t,i)=>{i.d(t,{h:()=>a});var n=i(30758);function a(e){return(0,n.useCallback)((t=>{null!==t&&void 0!==t.getAnimations&&t.getAnimations({subtree:!0}).filter((t=>t instanceof CSSAnimation&&t.animationName===e&&"running"===t.playState)).forEach((e=>e.startTime=0))}),[e])}},88853:(e,t,i)=>{i.d(t,{a:()=>c});var n=i(98929),a=i(46710),s=i(2240),r=i(7646),o=i(30758);const l=["play-history-contents"];function c(){const e=(0,r.q)(),t=(0,n.jE)();return function(e,t){const i=(0,r.q)();(0,o.useEffect)((()=>i.getEvents().addListener(e,t)),[e,t,i])}(s.X.UPDATE,(e=>t.setQueryData(l,e.data))),(0,a.I)({queryKey:l,queryFn:()=>e.getContents(),gcTime:3e5,staleTime:0})}},85258:(e,t,i)=>{i.d(t,{L:()=>o});var n=i(30758),a=i(46307),s=i(34668),r=i(16203);function o({episodeUri:e,start:t,stop:i}){const{togglePlay:o,triggerPlay:l,isPlaying:c,isActive:u}=(0,a.P)({uri:e},{featureIdentifier:"episode"}),d=(0,s.o)((e=>(0,r.s)(e)??0)),p=u&&function(e,t,i){return i>=e&&i<t}(t,i,d),m=c&&p;return{onClick:(0,n.useCallback)((e=>{p?o({seekTo:t,loggingParams:e}):l({seekTo:t,loggingParams:e})}),[p,t,o,l]),isPlaying:m,isActive:p}}},13847:(e,t,i)=>{i.d(t,{p:()=>a});var n=i(30758);const a=e=>{const[t,i]=(0,n.useState)(0);function a(n){const a=e.current?.querySelectorAll('button:not([disabled]), [href], input, select, textarea, a,[tabindex]:not([tabindex="-1"])');if(!a)return;a.forEach((e=>{e.setAttribute("tabindex","-1")})),a&&a[0].setAttribute("tabindex","0");let s=t;if(a&&a.length>0)switch(n.key){case"Tab":document.activeElement&&i(0);break;case"ArrowUp":0===s?(n.preventDefault(),s=a.length-1):s-=1,a[s].focus(),i(s);break;case"ArrowDown":n.preventDefault(),s===a.length-1?s=0:s+=1,a[s].focus(),i(s)}}n.useEffect((()=>{const t=e.current;return t?.addEventListener("keydown",a),()=>{t?.removeEventListener("keydown",a)}}))}},43365:(e,t,i)=>{i.d(t,{N:()=>a});var n=i(30758);function a(e){const t=(0,n.useRef)(null);return(0,n.useEffect)((()=>{e&&("function"==typeof e?e(t.current):e.current=t.current)})),t}},78856:(e,t,i)=>{i.d(t,{D:()=>s});var n=i(67813),a=i(18308);function s(){return(0,a.N)(n.x)}},88946:(e,t,i)=>{i.d(t,{G:()=>s});var n=i(30758),a=i(50210);function s(e,t){const i=(0,n.useRef)(t),s=(0,a.N)();i.current=t,(0,n.useEffect)((()=>{const t=s.getFiltersEvents();return t?.addListener(e,(e=>{i.current(e)}))}),[e,s])}},77782:(e,t,i)=>{i.d(t,{w:()=>o});var n=i(30758),a=i(75843),s=i(64273),r=i(78233);function o(){const e=(0,s.z)(),[t,i]=(0,n.useState)(e.getQueue());return(0,r.p)(a.gd.QUEUE_UPDATE,(e=>i(e.data))),t}},10791:(e,t,i)=>{i.d(t,{Q:()=>g});var n=i(13977),a=i(22795),s=i.n(a);let r=function(e){return e[e.UNKNOWN=0]="UNKNOWN",e[e.PLAINTEXT_CONTENT=1]="PLAINTEXT_CONTENT",e[e.MUSIC_TRACK=2]="MUSIC_TRACK",e[e.UNRECOGNIZED=-1]="UNRECOGNIZED",e}({});function o(e){switch(e){case 0:case"UNKNOWN":return r.UNKNOWN;case 1:case"PLAINTEXT_CONTENT":return r.PLAINTEXT_CONTENT;case 2:case"MUSIC_TRACK":return r.MUSIC_TRACK;default:return r.UNRECOGNIZED}}const l={encode(e,t=s().Writer.create()){""!==e.version&&t.uint32(10).string(e.version),""!==e.episodeUri&&t.uint32(18).string(e.episodeUri),""!==e.publishedAt&&t.uint32(26).string(e.publishedAt);for(const i of e.sections)c.encode(i,t.uint32(34).fork()).ldelim();return""!==e.language&&t.uint32(42).string(e.language),!0===e.curated&&t.uint32(48).bool(e.curated),t},decode(e,t){const i=e instanceof s().Reader?e:new(s().Reader)(e);let n=void 0===t?i.len:i.pos+t;const a={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};for(;i.pos<n;){const e=i.uint32();switch(e>>>3){case 1:a.version=i.string();break;case 2:a.episodeUri=i.string();break;case 3:a.publishedAt=i.string();break;case 4:a.sections.push(c.decode(i,i.uint32()));break;case 5:a.language=i.string();break;case 6:a.curated=i.bool();break;default:i.skipType(7&e)}}return a},fromJSON:e=>({version:p(e.version)?String(e.version):"",episodeUri:p(e.episodeUri)?String(e.episodeUri):"",publishedAt:p(e.publishedAt)?String(e.publishedAt):"",sections:Array.isArray(e?.sections)?e.sections.map((e=>c.fromJSON(e))):[],language:p(e.language)?String(e.language):"",curated:!!p(e.curated)&&Boolean(e.curated)}),toJSON(e){const t={};return void 0!==e.version&&(t.version=e.version),void 0!==e.episodeUri&&(t.episodeUri=e.episodeUri),void 0!==e.publishedAt&&(t.publishedAt=e.publishedAt),e.sections?t.sections=e.sections.map((e=>e?c.toJSON(e):void 0)):t.sections=[],void 0!==e.language&&(t.language=e.language),void 0!==e.curated&&(t.curated=e.curated),t},fromPartial(e){const t={version:"",episodeUri:"",publishedAt:"",sections:[],language:"",curated:!1};return t.version=e.version??"",t.episodeUri=e.episodeUri??"",t.publishedAt=e.publishedAt??"",t.sections=e.sections?.map((e=>c.fromPartial(e)))||[],t.language=e.language??"",t.curated=e.curated??!1,t}};const c={encode:(e,t=s().Writer.create())=>(0!==e.type&&t.uint32(8).int32(e.type),0!==e.startMs&&t.uint32(16).int32(e.startMs),void 0!==e.plaintextContent&&u.encode(e.plaintextContent,t.uint32(26).fork()).ldelim(),void 0!==e.musicTrack&&d.encode(e.musicTrack,t.uint32(50).fork()).ldelim(),""!==e.title&&t.uint32(34).string(e.title),void 0!==e.fallback&&u.encode(e.fallback,t.uint32(42).fork()).ldelim(),t),decode(e,t){const i=e instanceof s().Reader?e:new(s().Reader)(e);let n=void 0===t?i.len:i.pos+t;const a={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};for(;i.pos<n;){const e=i.uint32();switch(e>>>3){case 1:a.type=i.int32();break;case 2:a.startMs=i.int32();break;case 3:a.plaintextContent=u.decode(i,i.uint32());break;case 6:a.musicTrack=d.decode(i,i.uint32());break;case 4:a.title=i.string();break;case 5:a.fallback=u.decode(i,i.uint32());break;default:i.skipType(7&e)}}return a},fromJSON:e=>({type:p(e.type)?o(e.type):0,startMs:p(e.startMs)?Number(e.startMs):0,plaintextContent:p(e.plaintextContent)?u.fromJSON(e.plaintextContent):void 0,musicTrack:p(e.musicTrack)?d.fromJSON(e.musicTrack):void 0,title:p(e.title)?String(e.title):"",fallback:p(e.fallback)?u.fromJSON(e.fallback):void 0}),toJSON(e){const t={};return void 0!==e.type&&(t.type=function(e){switch(e){case r.UNKNOWN:return"UNKNOWN";case r.PLAINTEXT_CONTENT:return"PLAINTEXT_CONTENT";case r.MUSIC_TRACK:return"MUSIC_TRACK";default:return"UNKNOWN"}}(e.type)),void 0!==e.startMs&&(t.startMs=Math.round(e.startMs)),void 0!==e.plaintextContent&&(t.plaintextContent=e.plaintextContent?u.toJSON(e.plaintextContent):void 0),void 0!==e.musicTrack&&(t.musicTrack=e.musicTrack?d.toJSON(e.musicTrack):void 0),void 0!==e.title&&(t.title=e.title),void 0!==e.fallback&&(t.fallback=e.fallback?u.toJSON(e.fallback):void 0),t},fromPartial(e){const t={type:0,startMs:0,plaintextContent:void 0,musicTrack:void 0,title:"",fallback:void 0};return t.type=e.type??0,t.startMs=e.startMs??0,t.plaintextContent=void 0!==e.plaintextContent&&null!==e.plaintextContent?u.fromPartial(e.plaintextContent):void 0,t.musicTrack=void 0!==e.musicTrack&&null!==e.musicTrack?d.fromPartial(e.musicTrack):void 0,t.title=e.title??"",t.fallback=void 0!==e.fallback&&null!==e.fallback?u.fromPartial(e.fallback):void 0,t}};const u={encode(e,t=s().Writer.create()){for(const i of e.plaintext)t.uint32(10).string(i);return t},decode(e,t){const i=e instanceof s().Reader?e:new(s().Reader)(e);let n=void 0===t?i.len:i.pos+t;const a={plaintext:[]};for(;i.pos<n;){const e=i.uint32();if(e>>>3==1)a.plaintext.push(i.string());else i.skipType(7&e)}return a},fromJSON:e=>({plaintext:Array.isArray(e?.plaintext)?e.plaintext.map((e=>String(e))):[]}),toJSON(e){const t={};return e.plaintext?t.plaintext=e.plaintext.map((e=>e)):t.plaintext=[],t},fromPartial(e){const t={plaintext:[]};return t.plaintext=e.plaintext?.map((e=>e))||[],t}};const d={encode:(e,t=s().Writer.create())=>(""!==e.uri&&t.uint32(10).string(e.uri),t),decode(e,t){const i=e instanceof s().Reader?e:new(s().Reader)(e);let n=void 0===t?i.len:i.pos+t;const a={uri:""};for(;i.pos<n;){const e=i.uint32();if(e>>>3==1)a.uri=i.string();else i.skipType(7&e)}return a},fromJSON:e=>({uri:p(e.uri)?String(e.uri):""}),toJSON(e){const t={};return void 0!==e.uri&&(t.uri=e.uri),t},fromPartial(e){const t={uri:""};return t.uri=e.uri??"",t}};function p(e){return null!=e}function m(e){return e.type===r.MUSIC_TRACK?{type:"track",startMs:e.startMs,content:e.fallback?.plaintext||[],trackUri:e.musicTrack?.uri}:{type:"text",startMs:e.startMs,content:e.plaintextContent?.plaintext||[]}}async function g(e){try{const t=await fetch(e,{});if(t.ok&&t.body){const e=await t.arrayBuffer(),i=l.decode(new Uint8Array(e));return i.sections.map(m)}return null}catch(e){return null}}s().util.Long!==n.A&&(s().util.Long=n.A,s().configure())},61943:(e,t,i)=>{i.d(t,{c:()=>o});var n=i(30758),a=i(21053),s=i(75788),r=i(49559);function o(e,t){const i=(0,s.d)(),o=(0,r.J)(t),l=(0,a.a)();(0,n.useEffect)((()=>i.getBroadcastingEvents().addListener(e,(e=>{l()&&o(e)}))),[i,o,e,l])}},66419:(e,t,i)=>{i.d(t,{A:()=>n});const n={xs:"(min-width: 0px)",xsOnly:"(min-width: 0px) and (max-width: 767px)",sm:"(min-width: 768px)",smOnly:"(min-width: 768px) and (max-width: 1023px)",md:"(min-width: 1024px)",mdOnly:"(min-width: 1024px) and (max-width: 1279px)",lg:"(min-width: 1280px)",lgOnly:"(min-width: 1280px) and (max-width: 1919px)",xl:"(min-width: 1920px)",lyricsCinemaVisible:"sgQuNaOh5Eu6vnzh3eoh",nonDisplayedArea:"KJNUWtMTBWtQrmsas64b",Container:"F3qS5Fne4ECzEWyFeJ5S",Controls:"dS_1_x4lBrx_vX9AMg6Q",Content:"mC8gFZzy9ZRO5c61MeuO"}},57957:(e,t,i)=>{i.d(t,{A:()=>n});const n={emptyContainer:"BP2Fv3OX_ZYbjdA4lovg",large:"Mxz3x1XNHpH4SvqEVkt0",titleContainer:"Olk6uKV_CIIVtWRrdRJc",icon:"AIW16bVmugXaJ42KBNKQ"}}}]);