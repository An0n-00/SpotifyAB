"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[4483],{80918:(e,t,i)=>{i.d(t,{X:()=>y});var s=i(30758),a=i(62411),n=i(49263),r=i(93492),l=i(12032),o=i(56695),d=i(71338),u=i(56116),c=i(48975),m=i(24395),v=i(21053),p=i(49593),b=i(68055),f=i(80687),g=i(86070);const h=({currentUserUri:e,uri:t,name:i,divider:m,onBlock:h})=>{const y=(0,u.W)(),x=!(0,c.n)(),{isBlocked:C,blockUser:R,unblockUser:w}=function(e,t,i,n){const[o,u]=(0,s.useState)(!1),c=(0,a.wA)(),m=(0,v.a)(),g=(0,f.A)(),{enqueueSnackbar:h}=(0,d.d)();return(0,s.useEffect)((()=>{e&&(0,b.zP)(g,{currentUserUri:e,uri:t}).then((e=>{if(m()){if(200!==e.status)throw new Error("Invalid response from socialgraph");u(e.body?.[0]?.is_dismissed||!1)}}))}),[e,t,m,g]),{isBlocked:o,blockUser:()=>{e&&c((0,l.zj)(t,i,n))},unblockUser:async()=>{e&&(await(0,b.kV)(p.n.getInstance(),{currentUserUri:e,uri:t}),h(r.Ru.get("feedback.unblock-user")))}}}(e,t,i,h),j=(0,s.useCallback)((async()=>{y({targetUri:t,intent:C?"unblock":"block",type:"click"}),C?await w():await R()}),[y,t,R,w,C]);if(!e||e===t)return null;const S=C?r.Ru.get("contextmenu.unblock"):r.Ru.get("contextmenu.block");return(0,g.jsx)(o.D,{role:"menuitem",divider:m,disabled:x,onClick:j,leadingIcon:(0,g.jsx)(n.r,{semanticColor:"textSubdued",size:"small"}),children:S})},y=s.memo((function(e){return(0,g.jsx)(m.pZ,{value:"block-user",children:(0,g.jsx)(h,{...e})})}))},34855:(e,t,i)=>{i.d(t,{B:()=>V});var s=i(30758),a=i(62411),n=i(93492),r=i(55669),l=i(80918),o=i(42026),d=i(33650),u=i(56695),c=i(24395),m=i(86070);const v=s.memo((function({onClick:e,divider:t,canEdit:i}){return e&&i?(0,m.jsx)(c.pZ,{value:"edit-profile",children:(0,m.jsx)(u.D,{role:"menuitem",divider:t,onClick:e,leadingIcon:(0,m.jsx)(d.G,{semanticColor:"textSubdued",size:"small"}),children:n.Ru.get("contextmenu.edit-profile")})}):null}));var p=i(27508),b=i(96869),f=i(8950),g=i(56116),h=i(48975),y=i(306),x=i(98962),C=i(82362);const R=()=>{},w=({uri:e,divider:t,onRemoveCallback:i=R})=>{const{spec:r,logger:l}=(0,C.r)(f.F,{data:{uri:e}}),o=(0,g.W)(),d=!(0,h.n)(),c=(0,a.d4)(x.Ht).user,[v,w]=(0,y.Y)(e),j=(0,s.useCallback)((()=>{const t=r.followButtonFactory();o({targetUri:e,intent:v?"unfollow":"follow",type:"click"}),v?(w(!1),l.logInteraction(t.hitUnfollow({itemToBeUnfollowed:e})),i(e)):(w(!0),l.logInteraction(t.hitFollow({itemToBeFollowed:e})))}),[v,l,o,i,w,r,e]);if(c&&c.uri===e)return null;const S=v?n.Ru.get("contextmenu.unfollow"):n.Ru.get("contextmenu.follow");return(0,m.jsx)(u.D,{role:"menuitem",testid:"follow-user-context-menu-item",divider:t,disabled:d,onClick:j,leadingIcon:v?(0,m.jsx)(p.M,{semanticColor:"textBrightAccent",size:"small"}):(0,m.jsx)(b.h,{semanticColor:"textSubdued",size:"small"}),children:S})},j=s.memo((function(e){return(0,m.jsx)(c.pZ,{value:"follow-user",children:(0,m.jsx)(w,{...e})})}));var S=i(56032),k=i(5879),P=i(12032),E=i(90843),I=i(94822),D=i(75788),O=i(33887);function B({userUri:e}){const{currentSession:t}=(0,I.D)(),i=(0,D.d)(),r=(0,a.wA)(),l=(0,s.useCallback)((()=>{const i=(0,O.Bj)(t?.sessionMembers??[],e);i&&r((0,P.A9)(E.EL.REMOVE_PARTICIPANT,void 0,i))}),[t?.sessionMembers,r,e]),o=(0,O.kt)(i,e);return t?.active&&e&&o?(0,m.jsx)(u.D,{role:"menuitem",onClick:l,leadingIcon:(0,m.jsx)(k.f,{semanticColor:"textSubdued",size:"small"}),children:n.Ru.get("web-player.social-connect.kick-users.remove-the-user")}):(0,m.jsx)(m.Fragment,{})}var U=i(68055),N=i(43080),F=i(69611);const V=s.memo((function({uri:e,onEditProfileCallback:t}){const{user:i}=(0,a.d4)(x.Ht),{spec:s}=(0,F.o)(e),{data:d,loading:u}=(0,N.Z)(U.E$,[{uri:e}]);return u?null:d?(0,m.jsx)(c.pZ,{value:"user",children:(0,m.jsxs)(r.W,{children:[(0,m.jsx)(j,{uri:e}),(0,m.jsx)(B,{userUri:e}),(0,m.jsx)(l.X,{uri:d.uri,name:d.name,currentUserUri:i?.uri}),(0,m.jsx)(v,{onClick:t,canEdit:!(e!==i?.uri||d.edit_image_disabled&&d.edit_name_disabled)}),(0,m.jsx)(S.P,{spec:s,uri:e,canReportUser:!d.report_abuse_disabled,currentUserUri:i?.uri}),(0,m.jsx)(o.m,{spec:s,uri:e,displayText:n.Ru.get("contextmenu.share.copy-profile-link")})]})}):null}))},71981:(e,t,i)=>{i.d(t,{CommentsList:()=>Ne});var s=i(30758),a=i(97500),n=i.n(a),r=i(60749),l=i(59831),o=i(36419),d=i(94566),u=i(3864),c=i(13505),m=i(93492),v=i(32284),p=i(50974),b=i(61175),f=i(555),g=i(74905),h=i(42626),y=i(86070);const x=({url:e,title:t})=>{const{openURLWithSessionTransfer:i}=(0,h.L)(),a=(0,s.useCallback)((()=>{i(e)}),[i,e]);return(0,y.jsx)(g.Y,{semanticColor:"textBase",onClick:a,children:t})},C=()=>(0,y.jsx)(x,{url:"https://www.spotify.com/safetyandprivacy/platform-rules",title:m.Ru.get("web-player.user-comments.trust-safety-modal.terms-conditions.platform-rules")});var R=i(30668);const w=(0,s.createContext)(null);(0,s.createContext)(null),(0,s.createContext)(null),(0,s.createContext)(null),(0,s.createContext)(null),(0,s.createContext)({});var j=i(4041),S=i(50104),k=i(92900),P=i(78307);const E=new WeakMap;var I=i(20879),D=i(81056),O=i(27650),B=i(29905);function U(e,t){let{isDisabled:i,name:s,validationBehavior:a="aria"}=e,{isInvalid:n,validationErrors:r,validationDetails:l}=t.displayValidation,{labelProps:o,fieldProps:d,descriptionProps:u,errorMessageProps:c}=(0,O.M)({...e,labelElementType:"span",isInvalid:n,errorMessage:e.errorMessage||r});E.set(t,{name:s,descriptionId:u.id,errorMessageId:c.id,validationBehavior:a});let m=(0,I.$)(e,{labelable:!0}),{focusWithinProps:v}=(0,B.R)({onBlurWithin:e.onBlur,onFocusWithin:e.onFocus,onFocusWithinChange:e.onFocusChange});return{groupProps:(0,D.v)(m,{role:"group","aria-disabled":i||void 0,...d,...v}),labelProps:o,descriptionProps:u,errorMessageProps:c,isInvalid:n,validationErrors:r,validationDetails:l}}var N=i(9837),F=i(95677),V=i(42868),A=i(61715),M=i(30413);function L(e,t,i){let{isDisabled:s=!1,isReadOnly:a=!1,value:n,name:r,children:l,"aria-label":o,"aria-labelledby":d,validationState:u="valid",isInvalid:c}=e;null!=l||(null!=o||null!=d)||console.warn("If you do not provide children, you must specify an aria-label for accessibility");let{pressProps:m,isPressed:v}=(0,V.d)({isDisabled:s}),{pressProps:p,isPressed:b}=(0,V.d)({isDisabled:s||a,onPress(){t.toggle()}}),{focusableProps:f}=(0,M.W)(e,i),g=(0,D.v)(m,f),h=(0,I.$)(e,{labelable:!0});return(0,A.F)(i,t.isSelected,t.setSelected),{labelProps:(0,D.v)(p,{onClick:e=>e.preventDefault()}),inputProps:(0,D.v)(h,{"aria-invalid":c||"invalid"===u||void 0,"aria-errormessage":e["aria-errormessage"],"aria-controls":e["aria-controls"],"aria-readonly":a||void 0,onChange:e=>{e.stopPropagation(),t.setSelected(e.target.checked)},disabled:s,...null==n?{}:{value:n},name:r,type:"checkbox",...g}),isSelected:t.isSelected,isPressed:v||b,isDisabled:s,isReadOnly:a,isInvalid:c||"invalid"===u}}function T(e,t,i){let a=(0,N.KZ)({...e,value:t.isSelected}),{isInvalid:n,validationErrors:r,validationDetails:l}=a.displayValidation,{labelProps:o,inputProps:d,isSelected:u,isPressed:c,isDisabled:m,isReadOnly:v}=L({...e,isInvalid:n},t,i);(0,F.X)(e,a,i);let{isIndeterminate:p,isRequired:b,validationBehavior:f="aria"}=e;(0,s.useEffect)((()=>{i.current&&(i.current.indeterminate=!!p)}));let{pressProps:g}=(0,V.d)({isDisabled:m||v,onPress(){let{[N.Lf]:t}=e,{commitValidation:i}=t||a;i()}});return{labelProps:(0,D.v)(o,g),inputProps:{...d,checked:u,"aria-required":b&&"aria"===f||void 0,required:b&&"native"===f},isSelected:u,isPressed:c,isDisabled:m,isReadOnly:v,isInvalid:n,validationErrors:r,validationDetails:l}}var $=i(51190);function q(e={}){let{isReadOnly:t}=e,[i,s]=(0,$.P)(e.isSelected,e.defaultSelected||!1,e.onChange);return{isSelected:i,setSelected:function(e){t||s(e)},toggle:function(){t||s(!i)}}}function H(e,t,i){const a=q({isReadOnly:e.isReadOnly||t.isReadOnly,isSelected:t.isSelected(e.value),onChange(i){i?t.addValue(e.value):t.removeValue(e.value),e.onChange&&e.onChange(i)}});let{name:n,descriptionId:r,errorMessageId:l,validationBehavior:o}=E.get(t);var d;o=null!==(d=e.validationBehavior)&&void 0!==d?d:o;let{realtimeValidation:u}=(0,N.KZ)({...e,value:a.isSelected,name:void 0,validationBehavior:"aria"}),c=(0,s.useRef)(N.YD),m=()=>{t.setInvalid(e.value,u.isInvalid?u:c.current)};(0,s.useEffect)(m);let v=t.realtimeValidation.isInvalid?t.realtimeValidation:u,p="native"===o?t.displayValidation:v;var b;let f=T({...e,isReadOnly:e.isReadOnly||t.isReadOnly,isDisabled:e.isDisabled||t.isDisabled,name:e.name||n,isRequired:null!==(b=e.isRequired)&&void 0!==b?b:t.isRequired,validationBehavior:o,[N.Lf]:{realtimeValidation:v,displayValidation:p,resetValidation:t.resetValidation,commitValidation:t.commitValidation,updateValidation(e){c.current=e,m()}}},a,i);return{...f,inputProps:{...f.inputProps,"aria-describedby":[e["aria-describedby"],t.isInvalid?l:null,r].filter(Boolean).join(" ")||void 0}}}var _=i(19304),K=i(75282),z=i(40524);function W(e={}){let[t,i]=(0,$.P)(e.value,e.defaultValue||[],e.onChange),a=!!e.isRequired&&0===t.length,n=(0,s.useRef)(new Map),r=(0,N.KZ)({...e,value:t}),l=r.displayValidation.isInvalid;var o;return{...r,value:t,setValue(t){e.isReadOnly||e.isDisabled||i(t)},isDisabled:e.isDisabled||!1,isReadOnly:e.isReadOnly||!1,isSelected:e=>t.includes(e),addValue(s){e.isReadOnly||e.isDisabled||t.includes(s)||i(t.concat(s))},removeValue(s){e.isReadOnly||e.isDisabled||t.includes(s)&&i(t.filter((e=>e!==s)))},toggleValue(s){e.isReadOnly||e.isDisabled||(t.includes(s)?i(t.filter((e=>e!==s))):i(t.concat(s)))},setInvalid(e,t){let i=new Map(n.current);t.isInvalid?i.set(e,t):i.delete(e),n.current=i,r.updateValidation((0,N.cX)(...i.values()))},validationState:null!==(o=e.validationState)&&void 0!==o?o:l?"invalid":null,isInvalid:l,isRequired:a}}var Z=i(84216),Y=i(25167);const X=(0,s.createContext)(null),J=(0,s.createContext)(null),G=(0,s.forwardRef)((function(e,t){[e,t]=(0,j.JT)(e,t,X);let{validationBehavior:i}=(0,j.CC)(R.c)||{};var a,n;let r=null!==(n=null!==(a=e.validationBehavior)&&void 0!==a?a:i)&&void 0!==n?n:"native",l=W({...e,validationBehavior:r}),[o,d]=(0,j._E)(),{groupProps:u,labelProps:c,descriptionProps:m,errorMessageProps:v,...p}=U({...e,label:d,validationBehavior:r},l),b=(0,j.Sl)({...e,values:{isDisabled:l.isDisabled,isReadOnly:l.isReadOnly,isRequired:e.isRequired||!1,isInvalid:l.isInvalid,state:l},defaultClassName:"react-aria-CheckboxGroup"});return s.createElement("div",{...u,...b,ref:t,slot:e.slot||void 0,"data-readonly":l.isReadOnly||void 0,"data-required":e.isRequired||void 0,"data-invalid":l.isInvalid||void 0,"data-disabled":e.isDisabled||void 0},s.createElement(j.Kq,{values:[[J,l],[k.I,{...c,ref:o,elementType:"span"}],[P.h,{slots:{description:m,errorMessage:v}}],[S.C,p]]},b.children))})),Q=(0,s.forwardRef)((function(e,t){let{inputRef:i=null,...a}=e;[e,t]=(0,j.JT)(a,t,w);let{validationBehavior:n}=(0,j.CC)(R.c)||{};var r,l;let o=null!==(l=null!==(r=e.validationBehavior)&&void 0!==r?r:n)&&void 0!==l?l:"native",d=(0,s.useContext)(J),u=(0,Z.U)((0,Y.P)(i,void 0!==e.inputRef?e.inputRef:null)),{labelProps:c,inputProps:m,isSelected:v,isDisabled:p,isReadOnly:b,isPressed:f,isInvalid:g}=d?H({...(0,j.SK)(e),value:e.value,children:"function"==typeof e.children||e.children},d,u):T({...(0,j.SK)(e),children:"function"==typeof e.children||e.children,validationBehavior:o},q(e),u),{isFocused:h,isFocusVisible:y,focusProps:x}=(0,_.o)(),C=p||b,{hoverProps:S,isHovered:k}=(0,K.M)({...e,isDisabled:C}),P=(0,j.Sl)({...e,defaultClassName:"react-aria-Checkbox",values:{isSelected:v,isIndeterminate:e.isIndeterminate||!1,isPressed:f,isHovered:k,isFocused:h,isFocusVisible:y,isDisabled:p,isReadOnly:b,isInvalid:g,isRequired:e.isRequired||!1}}),E=(0,I.$)(e);return delete E.id,s.createElement("label",{...(0,D.v)(E,c,S,P),ref:t,slot:e.slot||void 0,"data-selected":v||void 0,"data-indeterminate":e.isIndeterminate||void 0,"data-pressed":f||void 0,"data-hovered":k||void 0,"data-focused":h||void 0,"data-focus-visible":y||void 0,"data-disabled":p||void 0,"data-readonly":b||void 0,"data-invalid":g||void 0,"data-required":e.isRequired||void 0},s.createElement(z.s,{elementType:"span"},s.createElement("input",{...(0,D.v)(m,x),ref:u})),P.children)}));var ee=i(50154),te=i(71353);const ie=()=>(0,y.jsx)(x,{url:"https://www.spotify.com/se/legal/end-user-agreement/",title:m.Ru.get("web-player.user-comments.trust-safety-modal.terms-conditions.terms-of-use")});var se=i(30320);const ae="LTw1rQOh8jedxHmEmV5Y",ne="FgLVUdYnnnDyo2qiCXUN",re="mXPudEv1VY8KNOdLMcqj",le="CNxfpLOVnZR2mz_iBYro",oe="kjwqPxVbTBKOEKtP8CR6",de=()=>(0,y.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"32",height:"32",viewBox:"0 0 32 32",fill:"none",className:le,children:(0,y.jsx)("path",{d:"M2.33333 15.9997C2.33333 8.45196 8.45228 2.33301 16 2.33301C23.5477 2.33301 29.6667 8.45196 29.6667 15.9997C29.6667 23.5474 23.5477 29.6663 16 29.6663C8.45228 29.6663 2.33333 23.5474 2.33333 15.9997Z",strokeWidth:"2"})});var ue=i(77750);const ce=({value:e,title:t,subtitle:i})=>(0,y.jsx)(Q,{className:re,value:e,isRequired:!0,"aria-describedby":ue.bA,children:({isSelected:e})=>(0,y.jsxs)(y.Fragment,{children:[e?(0,y.jsx)(se.k,{size:"large",semanticColor:"textBrightAccent"}):(0,y.jsx)(de,{}),(0,y.jsxs)("div",{className:oe,children:[(0,y.jsx)(c.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:t}),(0,y.jsx)(c.E,{variant:"bodySmall",semanticColor:"textBase",children:i})]})]})});var me=i(4586),ve=i(94119),pe=i(92654),be=i(72288);const fe=(0,ve.y)((()=>!1)),ge=e=>fe.setState(e),he=()=>{const[e,t]=(0,be.x)("user-comments-approved-conditions",!1);return{isOpen:(0,pe.Pj)(fe),setModalOpenState:ge,hasApproved:e,setHasApproved:t}},ye=()=>{const{isOpen:e,setModalOpenState:t,setHasApproved:i}=he(),{logCommentConsentAccepted:a}=(0,me._)(),[n,r]=(0,s.useState)(!1);return(0,s.useEffect)((()=>{e||r(!1)}),[e]),(0,y.jsx)(te.A,{isOpen:e,onRequestClose:()=>t(!1),children:(0,y.jsx)(R.l,{onInvalid:e=>{e.preventDefault(),r(!0),!(document.activeElement instanceof HTMLInputElement)&&e.target instanceof HTMLInputElement&&e.target.focus()},onSubmit:e=>{e.preventDefault(),r(!1),a(),i(!0),t(!1)},children:(0,y.jsx)(G,{children:(0,y.jsxs)("div",{className:ae,children:[(0,y.jsxs)("div",{className:ne,children:[(0,y.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",children:m.Ru.get("web-player.user-comments.trust-safety-modal.title")}),(0,y.jsx)(c.E,{variant:"bodySmall",children:m.Ru.get("web-player.user-comments.trust-safety-modal.subtitle")})]}),(0,y.jsxs)(ee.a,{variant:"tinted",padding:"16px 24px",children:[(0,y.jsx)(ce,{title:m.Ru.get("web-player.user-comments.trust-safety-modal.row-1.title"),subtitle:m.Ru.get("web-player.user-comments.trust-safety-modal.row-1.subtitle"),value:"public"}),(0,y.jsx)(ce,{title:m.Ru.get("web-player.user-comments.trust-safety-modal.row-2.title"),subtitle:m.Ru.get("web-player.user-comments.trust-safety-modal.row-2.subtitle"),value:"review"}),(0,y.jsx)(ce,{title:m.Ru.get("web-player.user-comments.trust-safety-modal.row-3.title"),subtitle:m.Ru.get("web-player.user-comments.trust-safety-modal.row-3.subtitle"),value:"safety"})]}),(0,y.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:m.Ru.get("web-player.user-comments.trust-safety-modal.terms-conditions",{platformRules:(0,y.jsx)(C,{}),termsOfUse:(0,y.jsx)(ie,{})})}),n&&(0,y.jsx)(c.E,{variant:"bodySmall",semanticColor:"textNegative",id:ue.bA,children:m.Ru.get("web-player.user-comments.trust-safety-modal.agree-to-continue")}),(0,y.jsx)(f.$,{size:"large",type:"submit",children:m.Ru.get("web-player.user-comments.trust-safety-modal.submit")})]})})})})};var xe=i(33016);const Ce="EzubtLtLldmRrerGnzHG",Re="WJoPBwb17TQkdjM85AjA",we="LIPKVT33tO8QKqsCDMiD",je="Sts43e3FSkhLlkgWo3fC",Se=e=>e<=10?"textNegative":e<=20?"textWarning":"textSubdued",ke=({addComment:e,autoFocusInput:t})=>{const[i,a]=(0,s.useState)(""),n=(0,s.useRef)(null),{hasApproved:r,setModalOpenState:l}=he();(0,xe.i)({ref:t?n:{current:null},preventScroll:!0,deps:[t]});const o=i.length,d=500-o,u=d<0||0===o,v=(0,s.useCallback)((()=>{u||(e(i),a(""))}),[e,u,i]),p=(0,s.useCallback)((e=>{e.preventDefault(),v()}),[v]),g=(0,s.useCallback)((e=>{if(!r)return e.preventDefault(),void l(!0);"Enter"===e.key&&e.metaKey&&v()}),[r,l,v]),h=(0,s.useCallback)((e=>{e.target.style.height="auto",e.target.style.height=`${e.target.scrollHeight}px`,a(e.target.value)}),[]);return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)("form",{className:Re,onSubmit:p,children:[(0,y.jsx)(b.h,{ref:n,className:Ce,size:"small",placeholder:m.Ru.get("web-player.user-comments.comment-input.leave-comment"),onChange:h,onKeyDown:g}),(0,y.jsxs)("div",{className:we,children:[(0,y.jsx)(c.E,{semanticColor:"textSubdued",variant:"bodySmall",children:m.Ru.get("web-player.user-comments.comment-input.platform-rules",{platformRules:(0,y.jsx)(C,{})})}),(0,y.jsxs)("div",{className:je,children:[(0,y.jsx)(c.E,{semanticColor:Se(d),variant:"bodySmall",children:d}),(0,y.jsx)(f.$,{type:"submit",size:"small","aria-disabled":u,children:m.Ru.get("web-player.user-comments.comment")})]})]})]}),(0,y.jsx)(ye,{})]})};var Pe=i(62867);const Ee=({entityUri:e,comments:t,addComment:i,user:a,isRestricted:n})=>{const l=(0,s.useRef)(null),[o]=(0,r.ok)(),{logSubmitComment:d}=(0,me._)(),u="new"===o.get("id")||"top"===o.get("id"),b="new"===o.get("id");(0,s.useEffect)((()=>{u&&l.current&&l.current.scrollIntoView({block:"start"})}),[u]);const f=(0,s.useCallback)((t=>{d(e),i(t)}),[i,e,d]),g=0===t.totalCount;return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(c.E,{variant:"titleSmall",semanticColor:"textBase",ref:l,children:g?m.Ru.get("web-player.user-comments.comments"):m.Ru.get("web-player.user-comments.comment-list-header.count",t.totalCount)}),(0,y.jsxs)("div",{className:Pe.A.header,children:[(0,y.jsx)(p.K,{eligibility:t.eligibilityStatus}),!n&&(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(v.e,{label:a.displayName||a.username,width:32,images:a?.images,userIconSize:"small",testID:"user-widget-avatar"}),(0,y.jsx)(ke,{addComment:f,autoFocusInput:b})]})]}),!n&&g&&(0,y.jsx)(c.E,{variant:"bodySmall",semanticColor:"textSubdued",children:m.Ru.get("web-player.user-comments.comment-input.first-comment")})]})};var Ie=i(28616),De=i(8267),Oe=i(33659),Be=i(82226);const Ue=({commentsResponse:e,entityUri:t,user:i,className:a})=>{const{fetchNextPage:c,addComment:m}=(0,o.$)(t),[v]=(0,r.ok)(),p=(0,s.useMemo)((()=>e.comments.filter((e=>!e.isSensitive))),[e]),b=(0,s.useMemo)((()=>e.comments.filter((e=>e.isSensitive))),[e]),{isRestricted:f}=(0,De.K)(e.eligibilityStatus);return(0,y.jsxs)("div",{className:n()(Pe.A.container,a),style:{"--transition-duration":`${ue.xt}ms`},children:[(0,y.jsx)(Ee,{entityUri:t,comments:e,addComment:m,user:i,isRestricted:f}),(0,y.jsx)(l.B,{children:(0,y.jsxs)(Be._,{onReachBottom:c,children:[(0,y.jsx)(d.Y,{comments:p,renderComment:(e,i)=>(0,y.jsx)(u.c,{comment:e,entityUri:t,showSeparator:i>0,scrollIntoViewOnMount:v.get("id")===e.id,collapseReplies:!1})}),(0,y.jsx)(Ie.U,{sensitiveComments:b,entityUri:t,scrollIntoViewOnMount:v.get("id")===ue.bM})]})})]})},Ne=({uri:e,className:t})=>{const{data:i}=(0,o.$)(e),s=(0,Oe.C)();if(!i||!s)return null;const{isHidden:a}=(0,De.K)(i.eligibilityStatus);return a?null:(0,y.jsx)(Ue,{commentsResponse:i,entityUri:e,user:s,className:t})}},53833:(e,t,i)=>{i.d(t,{DeleteCommentDialog:()=>u});var s=i(30758),a=i(62411),n=i(93492),r=i(82220),l=i(4586),o=i(50107),d=i(86070);const u=()=>{const e=(0,a.wA)(),{logCancelDeleteComment:t}=(0,l._)(),{isOpen:i,onConfirm:u}=(0,a.d4)((e=>e.ui.deleteCommentDialog)),c=(0,s.useCallback)((()=>{t(),e(o.FR.actions.close())}),[e,t]),m=(0,s.useCallback)((()=>{u(),e(o.FR.actions.close())}),[e,u]);return(0,d.jsx)(r.T,{isOpen:i,"aria-label":n.Ru.get("web-player.user-comments.delete-comment-dialog.title"),titleText:n.Ru.get("web-player.user-comments.delete-comment-dialog.title"),descriptionText:n.Ru.get("web-player.user-comments.delete-comment-dialog.subtitle"),onConfirm:m,onClose:c,confirmText:n.Ru.get("contextmenu.delete"),confirmLabel:n.Ru.get("contextmenu.delete"),cancelText:n.Ru.get("queue.cancel-button")})}},306:(e,t,i)=>{i.d(t,{Y:()=>o});var s=i(30758),a=i(72574),n=i(12469),r=i(37395),l=i(9043);const o=e=>{const t=(0,r.f)(),[i,o]=(0,s.useState)(!1);if(!(0,a.APS)(e))throw new Error(`Expected a Spotify uri in format 'spotify:user:***', got "${e}"`);const d=(0,s.useCallback)((s=>s&&!i?t.followUsers([e]):!s&&i?t.unfollowUsers([e]):Promise.resolve()),[t,i,e]);return(0,s.useEffect)((()=>{o(!1),t.isFollowing([e]).then((t=>{o(t[e]??!1)}))}),[t,e]),(0,l.N)(n.mc.OPERATION_COMPLETE,(t=>{t.data.uris.includes(e)&&!t.data.error&&(t.data.operation===n.JK.FOLLOW_USER?o(!0):t.data.operation===n.JK.UNFOLLOW_USER&&o(!1))})),[i,d]}},82226:(e,t,i)=>{i.d(t,{_:()=>u});var s=i(30758),a=i(75773),n=i(97500),r=i.n(n);const l="eqw9lvuoZHrkWMTdyTpY",o="lb08f71wES9AQnKx6e0R";var d=i(86070);const u=(0,s.memo)((function(e){const{triggerOnInitialLoad:t=!1,onReachBottom:i,showScrollbar:n=!0,horizontalScroll:u=!1,className:c}=e,{ref:m,inView:v}=(0,a.Wx)({initialInView:t});return(0,s.useLayoutEffect)((()=>{v&&i&&i()}),[v,i]),(0,d.jsxs)("div",{className:r()({[o]:!n,[l]:u},c),"data-testid":"infinite-scroll-list",children:[e.children,(0,d.jsx)("div",{ref:m})]})}))},33659:(e,t,i)=>{i.d(t,{C:()=>n});var s=i(62411),a=i(78172);const n=()=>{const e=(0,s.d4)((e=>e.session?.user));return e?{type:a.c.USER,uri:e.uri,username:e.id,displayName:e.display_name??null,images:e.images.map((({url:e,width:t,height:i})=>({url:e,width:t||void 0,height:i||void 0})))}:null}},37395:(e,t,i)=>{i.d(t,{f:()=>n});var s=i(68334),a=i(18308);const n=()=>(0,a.N)(s.t)},9043:(e,t,i)=>{i.d(t,{N:()=>n});var s=i(30758),a=i(37395);const n=(e,t)=>{const i=(0,a.f)();(0,s.useEffect)((()=>i.getEvents().addListener(e,t)),[e,i,t])}},33887:(e,t,i)=>{i.d(t,{Bj:()=>a,T4:()=>n,kt:()=>r});var s=i(72574);function a(e,t){if(!t)return null;const i=(0,s.o_h)(t);if(!i||!(0,s.APS)(i))return null;const a=(0,s.XIp)(i.username);return e.find((e=>e.username===a))??null}function n(e){const t=e.getCurrentSession(),i=t?.sessionOwnerId;return i?t.sessionMembers.find((e=>e.id===i))??null:null}function r(e,t){if(!t||!function(e){return e.getCurrentSession()?.isSessionOwner??!1}(e))return!1;const i=e.getCurrentSession(),s=a(i?.sessionMembers??[],t),r=n(e);return!!s&&s?.username!==r?.username}},61175:(e,t,i)=>{i.d(t,{h:()=>p});var s=i(32511),a=i(30758),n=i(9714),r=i(69116),l=i(63616),o=i(21528),d=i(581),u=i(42861),c=i(70585),m=i(59804).Ay.textarea.withConfig({displayName:"Textarea",componentId:"sc-7bfmzb-0"})(["",";",";margin-block:0;border-radius:",";padding:",";",";"],(function(e){return(0,d.x4)(e.$useBrowserDefaultFocusStyle)}),(0,u.W)(),(0,c.AN)("base","4px"),(function(e){return"small"===e.$size?(0,c.po)("tighter-2"):(0,c.po)("tighter")}),(function(e){return(0,d.Hb)({isUsingKeyboard:e.$isUsingKeyboard,isHover:e.$isHover,isFocus:e.$isFocus,error:e.$error,useBrowserDefaultFocusStyle:e.$useBrowserDefaultFocusStyle})})),v=["size","error","isHover","isFocus","className"],p=a.forwardRef((function(e,t){var i=e.size,d=void 0===i?"medium":i,u=e.error,p=e.isHover,b=e.isFocus,f=e.className,g=(0,s.A)(e,v),h=(0,a.useContext)(r.E).isUsingKeyboard,y=(0,a.useContext)(n.g).useBrowserDefaultFocusStyle;return a.createElement(m,Object.assign({ref:t,className:(0,o.ZP)([(0,c.W3)("small"===d?"bodySmall":"bodyMedium")],f),"aria-invalid":u,$isUsingKeyboard:h,$useBrowserDefaultFocusStyle:y,$size:d,$isHover:p,$isFocus:b,$error:u,"data-encore-id":l.j.FormTextarea},g))}))},59831:(e,t,i)=>{i.d(t,{B:()=>g});var s=i(32511),a=i(30758),n=i(81066),r=i(63616),l=i(33813),o=i(55480),d=i(26273),u=i(59804),c=i(87150),m=i(42861),v=i(70585),p=i(32037),b=u.Ay.div.withConfig({displayName:"List__ListComponent",componentId:"sc-qwoko3-0"})(["",""],(function(e){var t=e.$orientation,i=void 0===t?"column":t,s=e.$hasDividers,a=void 0!==s&&s,n=e.$gap;return(0,c.AH)(["",";display:flex;flex-direction:",";"," ",";"],m.W,i,n&&(0,c.AH)(["gap:",";"],(0,v.rn)(n)?(0,v.po)(n):n),a&&(0,c.AH)(["--animation-speed:300ms;--animation-ease:ease;&& > *:not(:first-child)::before{content:'';display:block;position:absolute;border-width:",";border-color:",";transition:border-color var(--animation-speed) var(--animation-ease);"," ","}",":hover::before,",":hover + ","::before{border-color:transparent;}",":active::before,",":active + ","::before{border-color:transparent;}"],(0,v.iX)("hairline","1px"),(0,p.oj)("decorativeSubdued"),"column"===i&&(0,c.AH)(["border-bottom-style:solid;inset-inline:12px;top:0;"]),"row"===i&&(0,c.AH)(["border-inline-end-style:solid;top:8px;bottom:8px;inset-inline-start:0;"]),d.a,d.a,d.a,d.a,d.a,d.a))})),f=["orientation","hasDividers","gap"],g=a.forwardRef((function(e,t){var i=e.orientation,d=e.hasDividers,u=e.gap,c=(0,s.A)(e,f),m=(0,a.useContext)(n.i_);return(0,n.BS)(n.NH.list,m)===n.sS.next?a.createElement(b,Object.assign({$orientation:i,$hasDividers:d,$gap:u},c,{ref:t,"data-encore-id":r.j.List})):((0,l.co)("List","TypeList","v7",'Pass the "condensedAll" and "listStyleReset" props in order to achieve the same behavior.'),a.createElement(o.b,Object.assign({ref:t,condensedAll:!0,listStyleReset:!("listStyleReset"in c)||c.listStyleReset},c)))}))}}]);