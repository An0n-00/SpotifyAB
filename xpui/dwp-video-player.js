"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7988],{67890:(e,t,r)=>{r.d(t,{x:()=>U});const i="pn5V0OzovI9p6b8nWq8p",n="IPbBrI6yF4zhaizFmrg6",a="gglUjikTBtMzCZFgSmpS",s="dN6OLjjcmnuleiECu55A",o="DSdahCi0SDG37V9ZmsGO",l="B1vgcMXBqOxgMxXh5j1f";var c=r(30758),d=r(97500),u=r.n(d),m=r(13505),p=r(3118),v=r(93492),g=r(59929),f=r(56425),b=r(86496),x=r(72288),h=r(51496);const y="kQqIrFPM5PjMWb5qUS56";var C=r(86070);const w=({position:e,duration:t,isPreview:r,semanticColor:i="textSubdued",isFullscreenMode:n=!1,className:a})=>{const[s,o]=(0,x.x)(b.fC,!1),l=(0,c.useCallback)((()=>{r||o(!s)}),[s,o,r]);return(0,C.jsx)(m.E,{as:"div","data-testid":"playback-duration","data-test-position":e,variant:n?"bodyMedium":"marginal",className:u()(y,a),onClick:l,semanticColor:i,children:s?`-${(0,h.f)(t-e)}`:(0,h.f)(t)})};var N=r(56266),P=r(34668),j=r(75784);const k="Bn7RYdPUyzN4qo1bC1Ic",V="OEe8k2xe6o6x9x0FAc4b",E=[{name:"Anakin",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"7px","--core-color":"white","--edge-glow-color":"rgb(55, 132, 214)","--blur-glow-color":"#2e77d0","--blur-radius":"16px","--spread-radius":"8px","--saber-hilt-url":`url(${(0,N.b)("images/sw_saber_anakin.png")})`,"--saber-hilt-overlap":"5px"}},{name:"Luke",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"9px","--core-color":"white","--edge-glow-color":"rgb(135, 220, 90)","--blur-glow-color":"#1ed760","--blur-radius":"16px","--spread-radius":"4px","--saber-hilt-url":`url(${(0,N.b)("images/sw_saber_luke.png")})`,"--saber-hilt-overlap":"5px"}},{name:"Vader",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"10px","--core-color":"white","--edge-glow-color":"rgb(229, 17, 21)","--blur-glow-color":"#cd1a2b","--blur-radius":"20px","--spread-radius":"14px","--saber-hilt-url":`url(${(0,N.b)("images/sw_saber_vader.png")})`,"--saber-hilt-overlap":"6px"}},{name:"Rey",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"8px","--core-color":"white","--edge-glow-color":"rgb(249, 164, 11)","--blur-glow-color":"rgb(253, 175, 33)","--blur-radius":"20px","--spread-radius":"5px","--saber-hilt-url":`url(${(0,N.b)("images/sw_saber_rey.png")})`,"--saber-hilt-overlap":"3px"}},{name:"Leia",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"9px","--core-color":"white","--edge-glow-color":"rgb(55, 132, 214)","--blur-glow-color":"#2e77d0","--blur-radius":"16px","--spread-radius":"8px","--saber-hilt-url":`url(${(0,N.b)("images/sw_saber_leia.png")})`,"--saber-hilt-overlap":"2px"}},{name:"Mace",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"9px","--core-color":"white","--edge-glow-color":"rgb(90, 22, 167)","--blur-glow-color":"rgb(172, 57, 193)","--blur-radius":"20px","--spread-radius":"8px","--saber-hilt-url":`url(${(0,N.b)("images/sw_saber_mace.png")})`,"--saber-hilt-overlap":"1px"}},{name:"Ahsoka",vars:{"--bg-color":"","--fg-color":"transparent","--is-active-fg-color":"transparent","--progress-bar-height":"6px","--core-color":"white","--edge-glow-color":"rgb(255,255,255)","--blur-glow-color":"rgb(255,255,255)","--blur-radius":"20px","--spread-radius":"5px","--saber-hilt-url":`url(${(0,N.b)("images/sw_saber_ahsoka1.png")})`,"--saber-hilt-overlap":"-9px","--saber-hilt-width":"100px","--saber-hilt-height":"36px"}}],R=["spotify:playlist:37i9dQZF1DXaUaRhCgtpCo","spotify:playlist:69BOXIItwwyxTgdz6flzvU","spotify:playlist:37i9dQZF1DWUgUvAPAFxdh"],I=["official_star_wars","kirbysayshi","hansencc"],M=/Star Wars/i,A="THX1138";function L({onChange:e}){const t=function(){const[e,t]=(0,c.useState)([]),[r,i]=(0,c.useState)(!1);return(0,c.useEffect)((()=>{const n=n=>{for(e.push(n.key);e.length>7;)e.shift();e.join("")===A&&i(!r),t([...e])};return window.addEventListener("keypress",n),()=>{window.removeEventListener("keypress",n)}}),[e,r]),(0,P.o)((e=>{const t=e?.context.uri??"",r=e?.context?.metadata?.context_owner??"",i=e?.item??void 0;return!!R.includes(t)||!!I.includes(r)||!!(0,j.v)(i)&&(M.test(i.name)||M.test(i.album.name))}))||r}(),{next:r,config:i}=function(e){const[t,r]=(0,c.useState)(0);return{next:()=>{r((t+1)%E.length)},config:e?E[t]:null}}(t),n=(0,c.useRef)(e);return n.current=e,(0,c.useEffect)((()=>{n.current(i?.vars??null)}),[i]),i?(0,C.jsx)("div",{className:k,children:(0,C.jsx)("button",{"data-testid":"saber-hilt-button","aria-label":v.Ru.get("playback-control.a11y.lightsaber-hilt-button",i?.name),className:V,style:i.vars,onClick:r})}):null}var O=r(32636),_=r(18492);const B=["spotify:playlist:37i9dQZF1DXc3KPAjGyPdm"];var S=r(90630),F=r(64273),z=r(71850),D=r(50209);const W=1e3,U=({isPreview:e,isFullscreenMode:t=!1,timerPlacement:r="inline",onChange:d,onDragStart:b,onDragEnd:x})=>{const y=(0,p.NC)(S.O14),[N,j]=(0,c.useState)(null),k=(0,F.z)(),V=(0,P.o)((e=>e),((e,t)=>e?.duration===t?.duration&&e?.hasContext===t?.hasContext&&e?.restrictions?.canSeek===t?.restrictions?.canSeek)),{seekOffsetMs:E}=(0,D.p)(),R=V?.duration??0,I=V?.hasContext??!1,M=V?.restrictions?.canSeek??!1,[A,U,T]=(0,z.S)(W),[K,H]=(0,c.useState)(null),Z=null!==K?K:A,G=null!==K?K:A+(y&&!T?W:0),X=e=>{H(e*R),b?.()},Y=(Z>0||R>0)&&"true"!==V?.item?.metadata?.is_narration,q=(0,h.f)(Y?Z:NaN),$=(0,h.f)(Y?R:NaN),Q=function(){const e=(0,_.S)()!==O.z.CLOSED,t=(0,P.o)((e=>{const t=e?.context.uri??"";return B.includes(t)}));return!e&&t}(),J=(0,f.O)(),ee="above"===r?s:a;return(0,C.jsxs)("div",{className:u()(i,ee),children:["indicatorOnly"!==r&&(0,C.jsx)(m.E,{"data-testid":"playback-position",as:"div",variant:t?"bodyMedium":"marginal",className:n,semanticColor:t?"textBase":"textSubdued",children:q}),(0,C.jsxs)("div",{className:l,children:[I?(0,C.jsx)(L,{onChange:e=>{j(e)}}):null,(0,C.jsx)(g.z2,{labelText:v.Ru.get("playback-control.a11y.seek-slider-button"),value:G,updateFrequency:W,offFrequencyUpdate:T,max:R,step:E,"aria-valuetext":v.Ru.get("download.progress-global",q,$),isInteractive:I&&Y,onDragStart:X,onDragMove:X,onDragEnd:(e,{wasDraggedBeforeReleased:t})=>{if(H(null),x?.(),!M)return;const r=e*R;U(r),k.seekTo(r);const i=t?"drag":"hit";d?.(r,i)},saberConfig:N,isPlayingStrangerThings:Q,isAttackOnTitanEasterEggActive:J,"data-testid":"playback-progressbar",enableAnimation:y,showValueAsTimeOverHandle:"indicatorOnly"===r})]}),"indicatorOnly"!==r&&(0,C.jsx)(w,{position:Z,duration:Y?R:NaN,isPreview:e,semanticColor:t?"textBase":"textSubdued",isFullscreenMode:t,className:o})]})}},61358:(e,t,r)=>{r.d(t,{VideoPlayer:()=>jt});var i=r(30758),n=r(62411),a=r(97500),s=r.n(a),o=r(85387),l=r(93492);var c=r(92732),d=r(555),u=r(46558);const m="KopIqvLbHzuI_pYTXRSw";var p=r(86070);const v=({onMinimizeButtonClick:e})=>(0,p.jsx)("div",{className:s()(m),children:(0,p.jsx)(d.$,{"aria-label":l.Ru.get("ad-formats.dismissAd"),colorSet:"overMedia",iconOnly:u.b,onClick:e,size:"small"})});var g=r(25136),f=r(1893),b=r(71353),x=r(40684),h=r(32636),y=r(18492),C=r(34668),w=r(82414);const N="Lk23rM5uSl5mgEXroOPH",P="XvNci8tJYTXGgFBNzRWg",j="Hj1B5D7WgG4aZkU8meAp",k="ctQf8WC83qR_pcv7bOEh",V="Xyaz284GhueBbBPn6gOS",E="pIMAcTC5w2dZdMGe4U_A",R="XeZ0TCAoRGXh8soWVo5S",I=({setVideoContainer:e})=>{const t=(0,n.wA)(),r=(0,C.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri)),a=(0,w.N)(r)?r.url??void 0:void 0,d=((0,w.N)(r)?r.advertiser:void 0)||"Advertiser",u=(0,n.d4)((e=>e?.ads?.vto?.isMinimized)),m=(0,w.N)(r)&&"portrait"===r.videoOrientation,I=(0,i.useRef)(),M=(0,o.zy)(),A=(0,y.S)();(0,i.useEffect)((()=>{I.current?t((0,c.iB)()):I.current=!0}),[t,M.pathname]);const[L,O]=(0,i.useState)(null);(0,i.useEffect)((()=>{t((0,c.MW)())}),[t]),(0,i.useEffect)((()=>{null!==L&&e(L)}),[e,u,L]);const _=s()(N,{[P]:m});return(0,p.jsxs)(b.A,{className:j,animation:{overlay:{base:V,beforeClose:R,afterOpen:E},closeTimeoutMs:300},isOpen:!u,parentSelector:()=>document.querySelector(".VTO__modal-slot"),shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,contentLabel:l.Ru.get("ad-formats.advertisement"),children:[(0,p.jsxs)("div",{className:_,children:[(0,p.jsx)("a",{"aria-label":l.Ru.get("ad-formats.video-ad-overlay.cta-button",{advertiserName:d}),className:_,"data-testid":"video-takeover-link",href:a?(0,g.H)(a):void 0,onClick:()=>{t((0,c.i2)(f.ee.CLICKED,f.Wh.VIDEO_TAKEOVER,f.Lv.VIDEO_PLAYER))},ref:e=>{O(e)},target:"_blank"}),A===h.z.CLOSED&&(0,p.jsx)(v,{onMinimizeButtonClick:()=>{t((0,c.Oc)()),t((0,c.i2)(f.ee.COLLAPSED,f.Wh.MINIMIZE_BUTTON,f.Lv.VIDEO_PLAYER))}})]}),A===h.z.NOW_PLAYING_VIEW&&(0,w.N)(r)&&(0,p.jsx)(x.h,{item:r,className:k})]})},M=({setVideoContainer:e})=>(0,n.d4)((e=>e?.ads?.vto?.isHidden))?null:(0,p.jsx)(I,{setVideoContainer:e});var A=r(38167),L=r(8143),O=r(3118),_=r(40638);function B(){const[e,t]=(0,i.useState)(!1),r=(0,i.useRef)(null),n=(0,_.YQ)((()=>{r.current&&clearTimeout(r.current),r.current=setTimeout((()=>{t(!1)}),1500),t(!0)}),100,{maxWait:100,leading:!0}),a=(0,i.useCallback)((e=>{t(e),n.cancel()}),[n]);return(0,i.useEffect)((()=>()=>{r.current&&clearTimeout(r.current)}),[]),{isControlsVisible:e,setIsControlsVisible:a,handleKeepViewVisible:n}}var S=r(80545),F=r(74073),z=r(37079),D=r(24971),W=r(1444),U=r(12367),T=r(80478),K=r(99202),H=r(59426),Z=r(64612),G=r(86726),X=r(37550),Y=r(74911),q=r(39150),$=r(4298),Q=r(90630),J=r(28445),ee=r(82362);const te="Wkw36VsNH5vn2NWdtLuR",re="MBzbwWcyfbqSftBtnn3g",ie=({noBackground:e,iconSize:t="small",className:r})=>{const{setVideoPlayerUIFlag:i,videoPlayerUIFlags:n,videoPlayerMode:a}=(0,q.d)(),o=a===$.K.cinemaLegacy,{uri:c}=(0,J.f)(),{hideLyrics:d}=(0,Y.A)({referrer:"cinema-mode-toggle"}),u=(0,O.NC)(Q.Au4),{spec:m,logger:v}=(0,ee.r)(D.E,{data:{uri:c??"",identifier:$.K.cinemaLegacy}});if(!u||a===$.K.fullscreen)return null;return(0,p.jsx)("div",{className:s()({[re]:o}),children:(0,p.jsx)(W.D,{noBackground:e,active:o,label:o?l.Ru.get("video-player.default-view"):l.Ru.get("video-player.cinema-mode"),onClick:()=>{o?v.logInteraction(m.cinemaModeButtonFactory().hitUiHide()):v.logInteraction(m.cinemaModeButtonFactory().hitUiReveal()),d(),i($.n.cinemaLegacy,!n.cinemaLegacy)},className:s()(te,r),children:o?(0,p.jsx)(G.Q,{size:t}):(0,p.jsx)(X.C,{size:t})})})};var ne=r(61e3),ae=r(24409),se=r(89913),oe=r(16512);const le=({className:e})=>{const t=(0,oe.l)(),r=(0,i.useCallback)((()=>{t(h.z.NOW_PLAYING_VIEW)}),[t]);return(0,p.jsx)(se.Zp,{label:l.Ru.get("web-player.now-playing-view.cinema-mode.expand"),children:(0,p.jsx)(ne.H,{iconOnly:ae.L,size:"small",onClick:r,"aria-label":l.Ru.get("web-player.now-playing-view.cinema-mode.expand"),semanticColor:"textBase",className:e})})};var ce=r(84812),de=r(67156),ue=r(69166),me=r(21832),pe=r(75097),ve=r(94502);function ge(){const e=(0,n.wA)(),t=(0,me.XB)();return{enterPipVideoMode:(0,i.useCallback)((()=>{e((0,ve.R2)($.K.pip))}),[e]),leavePipVideoMode:(0,i.useCallback)((()=>{t===pe.Z.NowPlayingView&&e((0,ve.R2)($.K.npv))}),[e,t])}}var fe=r(95008),be=r(34756);const xe="fuONPgUcYO2bf15HunlX",he=({noBackground:e,iconSize:t="small",uri:r})=>{const i=(0,n.d4)(de.c),a=i===$.K.pip,{enterPipVideoMode:o,leavePipVideoMode:c}=ge(),{item:d}=(0,Z.L)()??{},{isActive:u}=(0,ue.D)({item:d}),m=(0,C.o)(be.A3),{spec:v,logger:g}=(0,ee.r)(D.E,{data:{uri:r,identifier:i}}),f=(0,ce.u)({parentAbsoluteLocation:v.pipButtonContainerFactory().getAbsoluteLocation()});if(!m)return null;let b=l.Ru.get("video-player.default-view");return a||(b=u?l.Ru.get("miniplayer.close"):l.Ru.get("miniplayer.open-in")),(0,p.jsx)("div",{className:s()({[xe]:a}),children:(0,p.jsx)(W.D,{noBackground:e,active:a,label:b,onClick:()=>{(0,fe.ge)()&&(0,fe.SP)(),a?(c(),g.logInteraction(f.pipButtonFactory({uri:r}).hitUiHide())):(o(),f.pipButtonFactory({uri:r}).hitUiReveal())},children:(0,p.jsx)(S.F,{size:t})})})};var ye=r(71417),Ce=r(12032),we=r(73120),Ne=r(20473),Pe=r(54893);const je="aHe1QDDI5hmYWAKf4MoR",ke="ACGZS5YQp3lxBSr4RKaF",Ve="DtWKCk0YYDlZT11U1niL",Ee="RTSxo7zS2ozOeg4gnC2c",Re="ZcIaDrsIojjWZ_Xf_6iN",Ie="viN5UfPr2XfnYOWHTS0W",Me="pLL2Ok4QckLG8GAWriCB",Ae="OrGQiDAXobDXrw9LVnnD",Le=()=>{const e=(0,oe.l)(),{isFullScreenSupported:t,toggleFullScreen:r}=(0,Pe.H)({refOrElement:document.body}),n=(0,i.useCallback)((async()=>{try{await r()}catch(e){}e(h.z.NOW_PLAYING_VIEW)}),[e,r]);return t?(0,p.jsx)(se.Zp,{label:l.Ru.get("npv.full-screen"),children:(0,p.jsx)(ne.H,{iconOnly:Ne.T,size:"small",onClick:n,"aria-label":l.Ru.get("npv.full-screen"),semanticColor:"textBase",className:s()("encore-over-media-set",ke)})}):null},Oe=()=>{const e=(0,n.wA)(),t=(0,i.useContext)(we.s),r=(0,i.useCallback)((()=>{t?.current&&((0,fe.X8)(t.current),e((0,Ce.f)()))}),[e,t]);return(0,p.jsx)(se.Zp,{label:l.Ru.get("npv.full-screen"),children:(0,p.jsx)(ne.H,{iconOnly:ae.L,size:"small","aria-label":l.Ru.get("npv.full-screen"),semanticColor:"textBase",onClick:r,className:s()("encore-over-media-set",ke)})})},_e=(0,i.memo)((()=>(0,O.NC)(Q.mzn)?(0,p.jsx)(Le,{}):(0,p.jsx)(Oe,{})));var Be=r(33625),Se=r(95573),Fe=r(64273),ze=r(58225);const De=[{transform:"scale(1)",opacity:0},{transform:"scale(1.3)",opacity:1},{transform:"scale(1.6)",opacity:0}],We=[{transform:"scale(1)",opacity:1},{transform:"scale(1)",opacity:1}],Ue={duration:500,easing:"ease-out"},Te=function({visible:e,className:t,darkOverlayOnHover:r=!1,animatePlayPauseButtonOnClick:a=!0,showProgressbar:o=!1}){const{videoPlayerMode:c}=(0,q.d)(),d=(0,T.lZ)(),u=(0,Be.$)(),m=(0,O.NC)(Q.mzn),v=c===$.K.cinemaLegacy,g=(0,y.S)(),f=(0,Se.j)(),b=(0,n.d4)((e=>e.platform.isDesktop)),{item:x,context:w}=(0,Z.L)()??{},N=x?.uri??"",{isActive:P,onClick:j,showButton:k}=(0,ue.D)({item:x}),V=u.getCapabilities().hasPipSupport,E=(0,Fe.z)(),R=(0,C.o)((e=>e),((e,t)=>(0,ze.a)(e?.restrictions,t?.restrictions)&&e?.item?.uri===t?.item?.uri&&e?.isPaused===t?.isPaused)),{isPaused:I,canResume:M,canPause:A}=(0,T.Nh)(R),{spec:L,logger:_,UBIFragment:B}=(0,ee.r)(D.E,{data:{uri:N,identifier:$.K.npv}}),G=(0,i.useRef)(null),X=(0,i.useRef)(null),Y=s()("encore-over-media-set",ke),J=(0,i.useCallback)((()=>{let e=null;I&&M?(E.resume(),_.logInteraction(L.playButtonFactory().hitPlay({itemToBePlayed:N})),e=G):!I&&A&&(E.pause(),_.logInteraction(L.playButtonFactory().hitPause({itemToBePaused:N})),e=X),a&&e?.current?.animate&&e.current.animate(f?We:De,Ue)}),[A,M,I,_,E,L,N,a,f]),te=(0,i.useMemo)((()=>v?null:k?(0,p.jsx)(W.D,{label:P?l.Ru.get("miniplayer.close"):l.Ru.get("miniplayer.open-in"),onClick:j,active:P,className:Y,noBackground:!0,children:(0,p.jsx)(S.F,{size:"small",semanticColor:"textBase"})}):b&&V?(0,p.jsx)(he,{uri:N}):null),[P,v,b,V,j,k,N,Y]);return x&&w?(0,p.jsxs)(B,{spec:L,children:[g!==h.z.NOW_PLAYING_VIEW&&(0,p.jsxs)("div",{className:s()(je,t,{[Me]:e}),children:[(0,p.jsx)(ye.C,{renderInline:!0,className:s()(Y,{[Ae]:m}),noBackground:!0}),te,d&&(0,p.jsx)(_e,{}),m?(0,p.jsx)(le,{className:Y}):(0,p.jsx)(ie,{noBackground:!0,className:Y})]}),r&&(0,p.jsx)("div",{tabIndex:-1,"data-prevents-ambient-mode":"false",className:s()(Ve,{[Me]:e})}),(0,p.jsx)(U.h,{menu:(0,p.jsx)(K.W,{context:w,item:x}),children:(0,p.jsxs)("div",{className:Ee,tabIndex:-1,"data-prevents-ambient-mode":"false",onClick:J,onKeyDown:()=>{},"aria-label":I?l.Ru.get("play"):l.Ru.get("pause"),role:"button",children:[(0,p.jsx)("div",{className:Re,ref:G,children:(0,p.jsx)(F.x,{size:"xlarge",width:48})}),(0,p.jsx)("div",{className:Re,ref:X,children:(0,p.jsx)(z.B,{size:"xlarge",width:48})})]})}),o&&m&&(0,p.jsx)("div",{className:s()(Ie,{[Me]:e}),children:(0,p.jsx)(H.x,{isPreview:!1,timerPlacement:"indicatorOnly"})})]}):(0,p.jsx)(p.Fragment,{})};function Ke(e,t){(0,i.useLayoutEffect)((()=>{t.current&&e(t.current)}),[t,e])}const He="kJKEEG391Pf_PLzwG2Vm",Ze=({setVideoContainer:e})=>{const t=(0,i.useRef)(null);Ke(e,t);const{isControlsVisible:r,handleKeepViewVisible:n}=B(),a=(0,O.NC)(Q.mzn),s=document.getElementById("VideoPlayerCinema_ReactPortal");return null===s?null:(0,L.createPortal)((0,p.jsx)("div",{ref:t,hidden:!1,className:He,onMouseMove:n,onFocus:n,"data-testid":"video-player-cinema",children:(0,p.jsx)(Te,{visible:r&&!a})}),s)};var Ge=r(65652),Xe=r(57081),Ye=r(99998);const qe="dg_LeRfnn0R3ivigmbze",$e="wdZZT43qDlLzMbBxRH7T",Qe=({cinemaModeRef:e,setVideoContainer:t})=>{const r=(0,i.useRef)(null),{nowPlayingBarRef:n}=(0,Ge.JT)(),{videoPlayerUIFlags:a,setVideoPlayerUIFlag:s}=(0,Xe.d)();Ke(t,r);const{isControlsVisible:o,handleKeepViewVisible:l}=B();return(0,i.useEffect)((()=>{const e=e=>{"Escape"===e.key&&s($.n.cinemaLegacy,!1)};return window.addEventListener("keydown",e),()=>{window.removeEventListener("keydown",e)}}),[s,a.cinemaLegacy]),e.current?n.current?(0,L.createPortal)((0,p.jsxs)("div",{ref:r,className:qe,onMouseMove:l,onFocus:l,"data-testid":"video-player-cinema",children:[(0,p.jsx)(Ye.s,{containerElements:[e.current,n.current],active:!0,focusTrapOptions:{allowOutsideClick:!0}}),(0,p.jsx)(Te,{visible:o,className:$e})]}),e.current):(console.error("No ref found for nowPlayingBar!"),null):(console.error("No container found for cinema video!"),null)};var Je=r(58127);const et=({setVideoContainer:e})=>{const t=(0,i.useRef)(null);Ke(e,t);const r=window.documentPictureInPicture?.window,n=r?.document.getElementById("document-pip-main-container"),a=(0,Be.$)();return(0,i.useEffect)((()=>(r&&a.setWindow(r),()=>{a.setWindow(window)})),[r,a]),n?(0,L.createPortal)((0,p.jsx)("div",{ref:t,"data-testid":"video-player-document-pip",className:Je.A.videoPlayerContainer}),n):(0,p.jsx)(p.Fragment,{})},tt=i.memo((function({setVideoContainer:e,fullscreenModeRef:t}){const r=(0,i.useRef)(null);return Ke(e,r),t.current?(0,L.createPortal)((0,p.jsx)("div",{"data-testid":"video-player-fullscreen",className:s()("VideoFullscreenMode"),children:(0,p.jsx)("div",{className:"VideoFullscreenMode__video-container",ref:r})}),t.current):(console.error("No container found for fullscreen video!"),null)}));var rt=r(42372);const it="_2r290M0vbnbQGfhLbvq",nt=({setVideoContainer:e})=>{const t=(0,i.useRef)(null),r=(0,rt.SF)();Ke(e,t);const n=document.getElementById("VideoPlayerNpb_ReactPortal");return null===n?null:(0,L.createPortal)((0,p.jsx)("div",{ref:t,hidden:!1,className:it,style:{position:"relative"},onMouseDown:e=>{t.current&&r.current&&(e.stopPropagation(),e.preventDefault())},"data-testid":"video-player-npb"}),n)};var at=r(10325),st=r(35656);const ot="H2mo30Z5kNiGZbZ9U2Nu",lt="TbZ7pNOfpFK2FmnFuQcW",ct="BRt_JFU0qTnWIGCaWWJY",dt=({visible:e})=>{const t=(0,n.wA)(),r=s()(lt,{[ct]:e});return(0,p.jsx)("div",{className:ot,children:(0,p.jsx)("div",{className:r,children:(0,p.jsx)(d.$,{"aria-label":l.Ru.get("npv.full-screen"),colorSet:"overMedia",iconOnly:ae.L,onClick:e=>{e.stopPropagation(),e.preventDefault(),t((0,c.MW)()),t((0,c.i2)(f.ee.EXPANDED))},size:"small"})})})},ut="Qhq7SHNg9UlhtkK9I6Km",mt="ZWx9Xu8F_WoC4M_KEbtW",pt=({element:e,handleKeepViewVisible:t,isControlsVisible:r,item:i,scrollNodeRef:a,setIsControlsVisible:o,setVideoContainer:l,videoContainerRef:c})=>{Ke(l,c);const d=(0,n.wA)(),u="portrait"===i.videoOrientation,m=i.url??void 0,v=s()(ut,{[mt]:u});return(0,L.createPortal)((0,p.jsx)("div",{ref:c,hidden:!1,className:v,onMouseLeave:()=>{o(!1)},onMouseDown:e=>{c.current&&a.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:t,onFocus:t,"data-testid":"ads-video-player-npv",children:m?(0,p.jsx)("a",{style:{zIndex:2},href:m,onClick:()=>{d((0,st.q5)(at.c.VIDEO_PLAYER,at.V.AD_NPV))},"data-testid":"video-player-ad-wrapper",children:(0,p.jsx)(dt,{visible:r})}):(0,p.jsx)(dt,{visible:r})}),e)},vt="ouiL5cH1WduxtprQ0Iig",gt="ZFMDHV2keRjBzLaxEHri",ft="jJ41rQFZ_WobELYKsjJz",bt="Ml4Cdu0qida6i2P4xr5z",xt=({setVideoContainer:e})=>{const t=(0,i.useRef)(null),r=(0,rt.SF)(),n=(0,C.o)((e=>e?.item??void 0),((e,t)=>e?.uri===t?.uri));Ke(e,t);const{isControlsVisible:a,setIsControlsVisible:s,handleKeepViewVisible:o}=B(),l=document.getElementById("VideoPlayerNpv_ReactPortal");return null===l?null:(0,w.N)(n)?(0,p.jsx)(pt,{element:l,handleKeepViewVisible:o,isControlsVisible:a,item:n,scrollNodeRef:r,setIsControlsVisible:s,setVideoContainer:e,videoContainerRef:t}):(0,L.createPortal)((0,p.jsx)("div",{className:vt,children:(0,p.jsx)("div",{ref:t,hidden:!1,className:gt,onMouseLeave:()=>{s(!1)},onMouseDown:e=>{t.current&&r.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:o,onFocus:o,"data-testid":"video-player-npv",children:(0,p.jsx)("div",{ref:t,children:(0,p.jsx)(Te,{visible:a,darkOverlayOnHover:!0,showProgressbar:!0,className:a?ft:bt})})})}),l)};const ht=e=>{const t=(()=>{const[e]=(0,i.useState)((()=>{const e=document.createElement("div");return e.classList.add("VideoPlayer__container"),e}));return e})();if((0,i.useLayoutEffect)((()=>{null!==e&&null!==t&&e.insertBefore(t,e.firstChild)}),[e,t]),t&&t.firstChild instanceof HTMLVideoElement){const e=t.firstChild;return`${e.videoWidth}/${e.videoHeight}`}return"16/9"};var yt=r(1689);var Ct=r(57724),wt=r(73097);const Nt=r(4505).S.PICTURE_IN_PICTURE_CHANGED;const Pt=({setVideoContainer:e,videoContainerRef:t})=>(Ke(e,t),(0,p.jsx)("div",{ref:t,style:{display:"none"}})),jt=({cinemaModeRef:e,fullscreenModeRef:t})=>{const{videoPlayerMode:r}=(0,Xe.d)(),a=(0,i.useRef)(null),[s,o]=(0,i.useState)(null),l=(0,n.d4)((e=>e.platform.isDesktop)),{isPlayingVideoAd:d}=(0,C.o)((e=>{const t=e?.item??void 0;return{isPlayingVideoAd:(0,be.A3)(e)&&(0,w.N)(t)}})),u=(0,n.d4)((e=>e?.ads?.vto?.isMinimized));if(ht(s),(()=>{const{isPlayingVideo:e,contextUri:t}=(0,C.o)((e=>({isPlayingVideo:(0,be.A3)(e),contextUri:e?.context.uri}))),{setVideoPlayerUIFlag:r}=(0,q.d)(),n=(0,Ct.v)((({connectionStatus:e})=>e===wt.zP.CONNECTED||e===wt.zP.CONNECTING));(0,i.useEffect)((()=>{const t=e&&!n;r($.n.videoAvailable,t)}),[e,n,r,t])})(),(()=>{const{setVideoPlayerUIFlag:e}=(0,q.d)(),t=(0,O.NC)(Q.mzn);(0,yt.P)((r=>{t||e($.n.fullscreen,r)}))})(),(()=>{const e=(0,Be.$)(),{videoPlayerMode:t}=(0,Xe.d)(),{leavePipVideoMode:r}=ge(),n=t===$.K.pip;(0,i.useEffect)((()=>e.getEvents().addListener(Nt,(({data:e})=>{!e&&n&&r()}))),[e,n,r]),(0,i.useEffect)((()=>{const t=document.pictureInPictureElement;n&&!t&&e.setPip?.(!0),!n&&t&&e.setPip?.(!1)}),[e,n])})(),function(){const e=(0,Be.$)(),{videoPlayerMode:t}=(0,q.d)(),[r,n]=(0,i.useState)(!document.hidden),[a,s]=(0,i.useState)(!1);(0,i.useEffect)((()=>{const e="visibilitychange",t=()=>{n(!document.hidden)};return document.addEventListener(e,t),()=>{document.removeEventListener(e,t)}}),[e,n]),(0,i.useEffect)((()=>{const i=!(t===$.K.pip||t===$.K.documentPip||t!==$.K.none&&r),n=e.getCapabilities().hasMinimizeBitrateSupport&&i;a!==n&&(e.setMinimizeBitrate(n),s(n))}),[e,t,r,a,s])}(),(()=>{const e=(0,n.wA)(),t=(0,i.useRef)(),{isPlayingVideoAd:r,playbackId:a}=(0,C.o)((e=>{const t=e?.item??void 0;return{isPlayingVideoAd:(0,be.A3)(e)&&(0,w.N)(t),playbackId:e?.playbackId}}));(0,i.useEffect)((()=>{r&&t.current!==a&&(e((0,c.MW)()),t.current=a)}),[a,r,e])})(),l&&d&&r!==$.K.pip&&!u)return(0,p.jsx)(M,{setVideoContainer:o});switch(r){case $.K.fullscreen:return(0,p.jsx)(A.s,{children:(0,p.jsx)("div",{ref:a,children:(0,p.jsx)(tt,{fullscreenModeRef:t,setVideoContainer:o})})});case $.K.cinema:return(0,p.jsx)(A.s,{children:(0,p.jsx)("div",{ref:a,children:(0,p.jsx)(Ze,{setVideoContainer:o})})});case $.K.cinemaLegacy:return(0,p.jsx)(A.s,{children:(0,p.jsx)("div",{ref:a,children:(0,p.jsx)(Qe,{cinemaModeRef:e,setVideoContainer:o})})});case $.K.npv:return(0,p.jsx)(A.s,{children:(0,p.jsx)("div",{ref:a,children:(0,p.jsx)(xt,{setVideoContainer:o})})});case $.K.documentPip:return(0,p.jsx)(A.s,{children:(0,p.jsx)("div",{ref:a,children:(0,p.jsx)(et,{setVideoContainer:o})})});case $.K.nowPlayingBar:return(0,p.jsx)(A.s,{children:(0,p.jsx)("div",{ref:a,children:(0,p.jsx)(nt,{setVideoContainer:o})})});case $.K.none:default:return(0,p.jsx)("div",{ref:a,children:(0,p.jsx)(Pt,{videoContainerRef:a,setVideoContainer:o})})}}},80478:(e,t,r)=>{r.d(t,{sY:()=>h,Nh:()=>x,bo:()=>y,r3:()=>b,EX:()=>f,lZ:()=>g});var i=r(3118),n=r(44947);r(49810);const a=new n.l("queryFullscreenMode","query","5d8427bc0f6f2f6b96521121faf162094c2a3f14f0511b5ca0628c6a5028a3ea",null);var s=r(90630),o=r(34668),l=r(82414),c=r(56226),d=r(23046),u=r(75784),m=r(24320),p=r(34756),v=r(52596);const g=()=>{const e=(0,i.NC)(s.WYm,{loadingValue:!1});return(0,o.o)(p.A3)||e};function f(e){return(0,u.v)(e)?{uri:e.uri,name:e.name,creatorName:e.artists[0]?.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,d.p)(e)?{uri:e.uri,name:e.name,creatorName:e.show.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,c.d)(e)?{uri:e.uri,name:e.name,creatorName:e.book.name,coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,l.N)(e)?{uri:e.uri,name:e.title??"",creatorName:e.advertiser??"",coverArtImageUrl:e.images?.[0]?.url,duration:e.duration.milliseconds}:(0,m.v)(e)||void 0===e?void 0:(0,v.d)(e)}function b(e){const t=f(e);return(0,u.v)(e)||(0,d.p)(e)||(0,c.d)(e)||(0,l.N)(e)?{...t,duration:e.duration.milliseconds,mediaType:(r=e.mediaType,"video"===r||"mixed"===r?"video":"audio")}:(0,m.v)(e)||void 0===e?void 0:(0,v.d)(e);var r}function x(e){const t=e?.context.metadata?.context_description,r=e?.context.uri||void 0,i=e?.positionAsOfTimestamp??void 0,n=e?.timestamp,a=e?.isPaused,s=e?.restrictions.canPause,o=e?.restrictions.canResume;return{contextName:t,contextUri:r,position:i,timestamp:n,isPaused:a,canPause:s,canResume:o}}async function h(e,t){return e(a,{artistUri:t}).then((e=>{if("Artist"===e?.data?.artistUnion.__typename){const t=e.data.artistUnion.headerImage;if("ImageV2"===t?.data?.__typename)return t?.data.sources[0]?.url}})).catch((()=>{}))}function y(e,t,r){if(e&&r&&r.hasLyrics)return{status:t?"loading":"success",content:{provider:r.provider,syncType:r.syncType,lines:r.lyrics.map((e=>({timestamp:Number(e.start),text:e.text})))}}}},61176:(e,t,r)=>{r.d(t,{$:()=>a});var i=r(85387);const n="/lyrics",a=()=>({isActive:(0,i.zy)().pathname.startsWith(n),routeDestination:n})},74911:(e,t,r)=>{r.d(t,{A:()=>o});var i=r(85387),n=r(61176),a=r(39150),s=r(4298);function o({referrer:e,onChange:t}){const r=(0,i.Zp)(),{isActive:o,routeDestination:l}=(0,n.$)(),{setVideoPlayerUIFlag:c}=(0,a.d)(),d=()=>{o||(c(s.n.cinemaLegacy,!1),r(l,{state:{referrer:e}}),t?.(l))},u=()=>{o&&(r(-1),t?.(null))};return{isActive:o,showLyrics:d,hideLyrics:u,toggleLyrics:()=>{o?u():d()}}}},59426:(e,t,r)=>{r.d(t,{x:()=>i.x});var i=r(67890)},69166:(e,t,r)=>{r.d(t,{D:()=>d});var i=r(30758),n=r(34433);var a=r(39150),s=r(4298),o=r(56116),l=r(97393),c=r(82362);const d=({item:e,onClick:t})=>{const r=(0,o.W)(),{capabilities:{isEnabled:d},isOpen:u,close:m,open:p,canOpen:v}=(0,l.H)(),{videoPlayerMode:g}=(0,a.d)(),{spec:f,logger:b}=(0,c.r)(n.h9,{data:{identifier:g===s.K.cinemaLegacy?n.gw.CINEMA:n.gw.DESKTOP}}),x=(0,i.useCallback)((()=>{let i;d&&(u?(m(),e?.uri&&b.logInteraction(f.pipButtonFactory({uri:e.uri}).hitUiHide()),i="close-picture-in-picture"):(p(),e?.uri&&(({spec:e,logger:t,uri:r})=>{const i=window.documentPictureInPicture;if(!i)return;const n=a=>{setTimeout((()=>{const i=a.window?.innerWidth,n=a.window?.innerHeight;if(!i||!n)return;const s=e.pipButtonFactory({uri:r}).hitUiOpenWindow({widthPx:i,heightPx:n});t.logInteraction(s)}),100),i.removeEventListener("enter",n)};i.addEventListener("enter",n)})({spec:f,logger:b,uri:e.uri}),i="show-picture-in-picture"),t?.(!u,e?.uri),r({type:"click",intent:i,targetUri:e?.uri,itemIdSuffix:"picture-in-picture-toggle"}))}),[m,d,u,e?.uri,b,t,r,p,f]);return{showButton:v,isActive:u,onClick:x}}},58127:(e,t,r)=>{r.d(t,{A:()=>i});const i={videoPlayerContainer:"ngkFeIGFyNUaxRspbs5H"}}}]);