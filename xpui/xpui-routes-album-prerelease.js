"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1408,8865],{80918:(e,t,r)=>{r.d(t,{X:()=>v});var a=r(30758),n=r(62411),o=r(49263),i=r(93492),s=r(12032),c=r(56695),l=r(71338),u=r(56116),d=r(48975),p=r(24395),h=r(21053),m=r(49593),g=r(68055),x=r(80687),f=r(86070);const b=({currentUserUri:e,uri:t,name:r,divider:p,onBlock:b})=>{const v=(0,u.W)(),y=!(0,d.n)(),{isBlocked:_,blockUser:j,unblockUser:k}=function(e,t,r,o){const[c,u]=(0,a.useState)(!1),d=(0,n.wA)(),p=(0,h.a)(),f=(0,x.A)(),{enqueueSnackbar:b}=(0,l.d)();return(0,a.useEffect)((()=>{e&&(0,g.zP)(f,{currentUserUri:e,uri:t}).then((e=>{if(p()){if(200!==e.status)throw new Error("Invalid response from socialgraph");u(e.body?.[0]?.is_dismissed||!1)}}))}),[e,t,p,f]),{isBlocked:c,blockUser:()=>{e&&d((0,s.zj)(t,r,o))},unblockUser:async()=>{e&&(await(0,g.kV)(m.n.getInstance(),{currentUserUri:e,uri:t}),b(i.Ru.get("feedback.unblock-user")))}}}(e,t,r,b),A=(0,a.useCallback)((async()=>{v({targetUri:t,intent:_?"unblock":"block",type:"click"}),_?await k():await j()}),[v,t,j,k,_]);if(!e||e===t)return null;const C=_?i.Ru.get("contextmenu.unblock"):i.Ru.get("contextmenu.block");return(0,f.jsx)(c.D,{role:"menuitem",divider:p,disabled:y,onClick:A,leadingIcon:(0,f.jsx)(o.r,{semanticColor:"textSubdued",size:"small"}),children:C})},v=a.memo((function(e){return(0,f.jsx)(p.pZ,{value:"block-user",children:(0,f.jsx)(b,{...e})})}))},50532:(e,t,r)=>{r.d(t,{p:()=>d});var a=r(30758),n=r(62411),o=r(30320),i=r(12032),s=r(56695),c=r(48975),l=r(36663),u=r(86070);const d=a.memo((function({uri:e,divider:t,removeLabel:r}){const d=(0,n.wA)(),p=!(0,c.n)(),h=(0,l.f)(),m=(0,a.useCallback)((async()=>{d((0,i.aw)(e,!0))}),[d,e]);return(0,u.jsx)(s.D,{role:"menuitem",divider:t,disabled:p&&!h?.getCapabilities().canModifyOffline,onClick:m,leadingIcon:(0,u.jsx)(o.k,{semanticColor:"textBrightAccent",size:"small"}),children:r})}))},2103:(e,t,r)=>{r.d(t,{P:()=>x});var a=r(30758),n=r(93492),o=r(55669),i=r(42026),s=r(38246),c=r(2082),l=r(61890),u=r(50532),d=r(24395),p=r(68508),h=r(69611),m=r(78172),g=r(86070);const x=a.memo((function({uri:e,artistUri:t,canPin:r=p.oT.NO,isPinned:a=!1,canRemove:x=!1}){const{spec:f}=(0,h.o)(e);return(0,g.jsx)(d.pZ,{value:"album",children:(0,g.jsxs)(o.W,{children:[x&&(0,g.jsx)(u.p,{uri:e,removeLabel:n.Ru.get("contextmenu.remove-from-library")}),t&&(0,g.jsx)(s.z,{spec:f,divider:"after",uri:t,displayText:n.Ru.get("contextmenu.go-to-artist-radio")}),r!==p.oT.NO&&(0,g.jsx)(l.k,{uri:e,canPin:r,isPinned:a,type:m.c.PRE_RELEASE_ALBUM,spec:f}),(0,g.jsx)(i.m,{uri:e,spec:f,displayText:n.Ru.get("context-menu.copy-album-link")}),(0,g.jsx)(c.q,{spec:f,divider:"before",uri:e})]})})}))},34855:(e,t,r)=>{r.d(t,{B:()=>F});var a=r(30758),n=r(62411),o=r(93492),i=r(55669),s=r(80918),c=r(42026),l=r(33650),u=r(56695),d=r(24395),p=r(86070);const h=a.memo((function({onClick:e,divider:t,canEdit:r}){return e&&r?(0,p.jsx)(d.pZ,{value:"edit-profile",children:(0,p.jsx)(u.D,{role:"menuitem",divider:t,onClick:e,leadingIcon:(0,p.jsx)(l.G,{semanticColor:"textSubdued",size:"small"}),children:o.Ru.get("contextmenu.edit-profile")})}):null}));var m=r(27508),g=r(96869),x=r(8950),f=r(56116),b=r(48975),v=r(306),y=r(98962),_=r(82362);const j=()=>{},k=({uri:e,divider:t,onRemoveCallback:r=j})=>{const{spec:i,logger:s}=(0,_.r)(x.F,{data:{uri:e}}),c=(0,f.W)(),l=!(0,b.n)(),d=(0,n.d4)(y.Ht).user,[h,k]=(0,v.Y)(e),A=(0,a.useCallback)((()=>{const t=i.followButtonFactory();c({targetUri:e,intent:h?"unfollow":"follow",type:"click"}),h?(k(!1),s.logInteraction(t.hitUnfollow({itemToBeUnfollowed:e})),r(e)):(k(!0),s.logInteraction(t.hitFollow({itemToBeFollowed:e})))}),[h,s,c,r,k,i,e]);if(d&&d.uri===e)return null;const C=h?o.Ru.get("contextmenu.unfollow"):o.Ru.get("contextmenu.follow");return(0,p.jsx)(u.D,{role:"menuitem",testid:"follow-user-context-menu-item",divider:t,disabled:l,onClick:A,leadingIcon:h?(0,p.jsx)(m.M,{semanticColor:"textBrightAccent",size:"small"}):(0,p.jsx)(g.h,{semanticColor:"textSubdued",size:"small"}),children:C})},A=a.memo((function(e){return(0,p.jsx)(d.pZ,{value:"follow-user",children:(0,p.jsx)(k,{...e})})}));var C=r(56032),L=r(5879),P=r(12032),E=r(90843),R=r(94822),S=r(75788),w=r(33887);function N({userUri:e}){const{currentSession:t}=(0,R.D)(),r=(0,S.d)(),i=(0,n.wA)(),s=(0,a.useCallback)((()=>{const r=(0,w.Bj)(t?.sessionMembers??[],e);r&&i((0,P.A9)(E.EL.REMOVE_PARTICIPANT,void 0,r))}),[t?.sessionMembers,i,e]),c=(0,w.kt)(r,e);return t?.active&&e&&c?(0,p.jsx)(u.D,{role:"menuitem",onClick:s,leadingIcon:(0,p.jsx)(L.f,{semanticColor:"textSubdued",size:"small"}),children:o.Ru.get("web-player.social-connect.kick-users.remove-the-user")}):(0,p.jsx)(p.Fragment,{})}var T=r(68055),I=r(43080),U=r(69611);const F=a.memo((function({uri:e,onEditProfileCallback:t}){const{user:r}=(0,n.d4)(y.Ht),{spec:a}=(0,U.o)(e),{data:l,loading:u}=(0,I.Z)(T.E$,[{uri:e}]);return u?null:l?(0,p.jsx)(d.pZ,{value:"user",children:(0,p.jsxs)(i.W,{children:[(0,p.jsx)(A,{uri:e}),(0,p.jsx)(N,{userUri:e}),(0,p.jsx)(s.X,{uri:l.uri,name:l.name,currentUserUri:r?.uri}),(0,p.jsx)(h,{onClick:t,canEdit:!(e!==r?.uri||l.edit_image_disabled&&l.edit_name_disabled)}),(0,p.jsx)(C.P,{spec:a,uri:e,canReportUser:!l.report_abuse_disabled,currentUserUri:r?.uri}),(0,p.jsx)(c.m,{spec:a,uri:e,displayText:o.Ru.get("contextmenu.share.copy-profile-link")})]})}):null}))},77910:(e,t,r)=>{r.d(t,{G:()=>C});var a=r(97500),n=r.n(a),o=r(93492),i=r(13505);const s="YNXLVjlRXPfM4xObTojA",c="CVRy4NtxZYSle8dJ1E67",l="holKDGFNEFSz85czBeSv",u="gqidZhN1lgoZDfI_7E6w",d="_IQ8dgA5pEr_V8PfUkWa",p="xNkPMA_OvAxcFTdfyroI";var h=r(86070);const m=({value:e,label:t,hasDivider:r=!1})=>(0,h.jsxs)("div",{className:l,"aria-hidden":"true",children:[(0,h.jsx)(i.E,{variant:"titleSmall",className:n()({[d]:r}),children:e}),(0,h.jsx)(i.E,{variant:"marginal",semanticColor:"textSubdued",children:t})]});var g=r(30758);const x=6e4,f=36e5,b=864e5;var v=r(40841),y=r(48455);const _={days:0,hours:0,minutes:0,seconds:0};function j(e){return e>0?function(e){const t=Math.abs(e);return{days:Math.floor(t/b),hours:Math.floor(t%b/f),minutes:Math.floor(t%f/x),seconds:Math.floor(t%x/1e3)}}(e):_}var k=r(13317),A=r(78172);const C=({targetDate:e,className:t,onComplete:r,images:a,imageTitle:i})=>{const{days:l,hours:d,minutes:x,seconds:f}=((e,t)=>{const r=(0,g.useRef)(t);r.current=t;const[a,n]=(0,g.useState)((()=>j((0,v.u)(e))));return(0,y.$)((t=>{const a=(0,v.u)(e),o=j(a);n(o),a<=0&&(t(),r.current?.())}),1e3),a})(e,r),b=void 0!==a&&a.length>0&&i,_=o.Ru.get("web-player.prerelease.countdown_label",{days:l,hours:d,minutes:x,seconds:f});return(0,h.jsxs)("div",{className:n()(s,t,{[c]:b}),role:"timer","data-testid":"countdown",children:[(0,h.jsx)("span",{className:p,children:_}),b&&(0,h.jsx)(k.b,{images:a,type:A.c.ALBUM,shape:k.u.ROUNDED_CORNERS,className:u,title:i}),(0,h.jsx)(m,{value:l,label:o.Ru.get("web-player.prerelease.days",l),hasDivider:!0}),(0,h.jsx)(m,{value:d,label:o.Ru.get("web-player.prerelease.hours",d),hasDivider:!0}),(0,h.jsx)(m,{value:x,label:o.Ru.get("web-player.prerelease.minutes",x),hasDivider:!0}),(0,h.jsx)(m,{value:f,label:o.Ru.get("web-player.prerelease.seconds",f)})]})}},15810:(e,t,r)=>{r.d(t,{j:()=>E});var a=r(30758),n=r(97500),o=r.n(n),i=r(13505),s=r(24587),c=r(72574),l=r(93492),u=r(32284),d=r(12367),p=r(96691),h=r(34855),m=r(5119);var g=r(89232),x=r(20951),f=r(33059),b=r(54550),v=r(86070);function y(e){return e.displayName||e.name||""}const _=e=>{let t=null;return(0,c.ecE)(e)&&(t=(0,v.jsx)(p.t,{uri:e})),(0,c.APS)(e)&&(t=(0,v.jsx)(h.B,{uri:e})),t},j=({creator:e,onClick:t,position:r=0})=>{const n=(0,a.useCallback)((a=>{t?.(a,{position:r,creator:e})}),[e,t,r]);return(0,g.s)(e)?(0,v.jsx)(d.h,{menu:_(e.uri),children:(0,v.jsx)(i.E,{variant:"bodySmallBold",children:(0,v.jsx)(m.N,{"data-testid":"creator-link",to:e.uri,onClick:n,children:y(e)})})}):(0,v.jsx)(i.E,{variant:"bodySmall",children:y(e)})},k=({creator:e,onClick:t,isSmallIcon:r})=>{const[a,n]=l.Ru.get("playlist.header.made-for","USER").split("USER");return(0,v.jsxs)("div",{className:o()(b.A.metaDataText,b.A.creatorWrapper,{[b.A.smallMadeForIcon]:r}),children:[(0,v.jsx)(s.D,{semanticColor:"textBrightAccent"}),(0,v.jsx)(i.E,{variant:"bodySmall",children:a}),(0,v.jsx)(j,{creator:e,onClick:t}),n&&(0,v.jsx)(i.E,{variant:"bodySmall",children:n})]})},A=({creator:e,onClick:t,isSmallIcon:r,prefix:a})=>(0,v.jsxs)("div",{className:o()(b.A.metaDataText,b.A.creatorWrapper),children:[e.images.length>0&&(0,v.jsx)(u.e,{label:y(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:r?20:24,userIconSize:r?"xsmall":"small"}),a&&(0,v.jsx)(i.E,{variant:"bodySmall",children:a}),(0,v.jsx)(j,{creator:e,onClick:t})]}),C=({creators:e,onPiledCreatorsClick:t,isSmallIcon:r})=>{const a=(0,v.jsx)("div",{className:b.A.piled,children:e.slice(0,3).map(((e,t)=>(0,v.jsx)(u.e,{label:y(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:r?20:24,userIconSize:r?"xsmall":"small",piled:t>0},e.uri)))});let n=l.Ru.get("playlist.header.creator-and-others",y(e[0]),e.length-1);return 2===e.length&&(n=l.Ru.get("playlist.header.creator-and-co-creator",y(e[0]),y(e[1]))),t?(0,v.jsxs)("button",{className:o()(b.A.metaDataText,b.A.creatorWrapper,b.A.creatorButton),onClick:t,children:[a,n]}):(0,v.jsxs)("div",{className:o()(b.A.metaDataText,b.A.creatorWrapper),children:[a,n]})},L=({creators:e,onCreatorClick:t})=>(0,v.jsx)(v.Fragment,{children:e.map(((e,r)=>(0,v.jsxs)(a.Fragment,{children:[0!==r&&(0,v.jsx)("span",{className:b.A.divider}),(0,v.jsx)(j,{creator:e,onClick:t,position:r})]},e.id)))}),P=({creators:e,onPiledCreatorsClick:t,onCreatorClick:r,isTunaApplied:a})=>{const n=(0,f.y)(),o=n===(x.E.SMALL||n===x.E.XSMALL);if(1===e.length){const[t]=e;return t.isMadeFor?(0,v.jsx)(k,{creator:t,onClick:r,isSmallIcon:o}):(0,v.jsx)(A,{creator:t,onClick:r,isSmallIcon:o,prefix:a?"":void 0})}return e.length>0&&e.every((e=>(0,c.APS)(e.uri)))?(0,v.jsx)(C,{creators:e,onPiledCreatorsClick:t,isSmallIcon:o}):(0,v.jsx)(L,{creators:e,onCreatorClick:r})};function E({creators:e,onCreatorClick:t,onPiledCreatorsClick:r,isTunaApplied:n}){return(0,v.jsx)(a.Suspense,{fallback:null,children:(0,v.jsx)(P,{creators:e,onPiledCreatorsClick:r,onCreatorClick:t,isTunaApplied:n})})}},37299:(e,t,r)=>{r.d(t,{B:()=>i});var a=r(13505),n=r(54550),o=r(86070);const i=({children:e})=>(0,o.jsx)(a.E,{variant:"bodySmall",className:n.A.pretitle,children:e})},95321:(e,t,r)=>{r.d(t,{h:()=>d});var a=r(30758),n=r(81899),o=r(41179),i=r(60841),s=r(13753),c=r(18308);var l=r(9875),u=r(86070);const d=({children:e,action:t,uri:r})=>{const d=(0,i.V)(),p=(0,c.N)(s.JD);let h;const m=()=>{const e={triggerId:o.d,triggerAction:{type:t}};n.h.set((t=>({...t,...e}))),p.storeAction(s.j8,{operation:l.tS.ADD,uris:[r]})};try{h=a.Children.only(e)}catch(t){return(0,u.jsx)(u.Fragment,{children:e})}return d?a.cloneElement(h,{onClick:m}):(0,u.jsx)(u.Fragment,{children:e})}},99557:(e,t,r)=>{r.d(t,{v:()=>p});var a=r(21974),n=r(30320),o=r(555),i=r(70257),s=r(93492),c=r(95321),l=r(28552),u=r(3910),d=r(86070);const p=({uri:e,isBook:t=!1})=>{const{isPreSaved:r,addPresave:p,removePresave:h}=(0,l.w)({uri:e,isBook:t});return r?(0,d.jsx)(a.n,{onClick:h,iconTrailing:n.k,children:s.Ru.get("web-player.prerelease.presaved")}):(0,d.jsx)(c.h,{uri:e,action:u.no.SAVE_PRERELEASE,children:(0,d.jsx)(o.$,{disabled:void 0===r,onClick:p,iconTrailing:i.P,children:s.Ru.get("web-player.prerelease.presave")})})}},58691:(e,t,r)=>{r.r(t),r.d(t,{AlbumPrerelease:()=>ve});var a=r(97500),n=r.n(a),o=r(85387),i=r(13505),s=r(72574),c=r(93492),l=r(40841),u=r(64359),d=r(99035),p=r(30758),h=r(75690),m=r(42297),g=r(85277),x=r(80352),f=r(585),b=r(2103),v=r(99557),y=r(555),_=r(39363),j=r(82362),k=r(86070);const A=({uri:e})=>{const t=(0,_.V)(e),{spec:r,logger:a}=(0,j.r)(h.k,{data:{uri:e||""}}),n=(0,p.useCallback)((()=>{e&&(a.logInteraction(r.actionBarFactory().preSaveButtonFactory().hitUiNavigate({destination:e})),t())}),[t,r,e,a]);return e?(0,k.jsx)(y.$,{onClick:n,children:c.Ru.get("web-player.prerelease.listen_now")}):null};var C=r(96437);const L=({prerelease:e,backgroundColor:t})=>{const r=function(e){const[t,r]=(0,p.useState)((()=>!!e&&(0,l.u)(e)<=0));return(0,p.useEffect)((()=>{if(!e)return;const t=(0,l.u)(e);if(t<=0)return void r(!0);if(t>=36e5)return void r(!1);const a=setTimeout((()=>{r(!0)}),t);return()=>{clearTimeout(a)}}),[e]),t}(e.releaseDate?.isoString),{spec:a,UBIFragment:n}=(0,j.r)(h.k,{data:{uri:e.uri}}),o=(0,C.j)();return(0,k.jsx)(m.E,{backgroundColor:t,children:(0,k.jsxs)(g.S,{children:[r?(0,k.jsx)(A,{uri:e.content?.uri}):(0,k.jsx)(v.v,{uri:e.uri}),(0,k.jsx)(n,{spec:a,children:(0,k.jsx)(f.b,{menu:(0,k.jsx)(b.P,{uri:e.uri,artistUri:e.content?.artists[0].uri}),children:(0,k.jsx)(x.e,{label:c.Ru.get("more.label.context",e.content?.name),size:o})})})]})})};var P=r(12367),E=r(77910),R=r(72163),S=r(3996),w=r(4378),N=r(11951),T=r(26641),I=r(30092),U=r(15810),F=r(39856),B=r(5389),M=r(37299),D=r(26101),V=r(20951),O=r(33059),z=r(2036);const Z="LFDgGRo4wD273tY6cKQ0",H=({prerelease:e,children:t})=>(0,k.jsx)(P.h,{menu:(0,k.jsx)(b.P,{uri:e.uri,artistUri:e.content?.artists[0].uri}),children:t}),W=({prerelease:e,backgroundColor:t})=>{const{content:r,releaseDate:a}=e,n=(0,O.y)(),o=n===V.E.SMALL||n===V.E.XSMALL,{spec:i,logger:s}=(0,j.r)(h.k,{data:{uri:e.uri}}),c=(0,p.useCallback)(((e,t)=>{if(i){const e=i.headerFactory().artistNameFactory().hitUiNavigate({destination:t.creator.uri});s.logInteraction(e)}}),[s,i]),l=r,u=(0,p.useMemo)((()=>a?.isoString?new Date(a.isoString):void 0),[a]);return(0,k.jsxs)(R.z,{backgroundColor:t,size:R.K.XLARGE,children:[(0,k.jsx)(N.h,{children:l.name?(0,k.jsx)(H,{prerelease:e,children:(0,k.jsx)(T.X,{text:l.name})}):null}),!o&&(0,k.jsx)(H,{prerelease:e,children:(0,k.jsx)(S.K,{images:l.coverArt.sources,name:l.name??"",placeholderType:"album"})}),(0,k.jsxs)(w.Y,{children:[(0,k.jsx)(M.B,{children:(0,z.C)(l.type)}),(0,k.jsx)(H,{prerelease:e,children:(0,k.jsx)(D.mm,{scaleAtMinWidth:D.Cl,children:l.name})}),(0,k.jsxs)(I.X,{children:[(0,k.jsx)(U.j,{creators:l.artists,onCreatorClick:c}),(0,k.jsx)(B.J,{}),(0,k.jsx)(F.H,{releaseDate:a,timeZone:e.timezone})]}),u&&l.name?(0,k.jsx)(E.G,{images:o?l.coverArt.sources:[],className:Z,imageTitle:l.name,targetDate:u}):null]})]})};var $=r(43758),X=r(34094),K=r(40997),q=r(5537),G=r(33279),Y=r(44947),J=r(49810);const Q=new Y.l("albumPreReleaseTracks","query","dfbdcf2688995adc2c2196fcdd7802b2a5137a2549b361aa7fb23cd6493f4672",null);var ee=r(11663),te=r(88176);const re={totalLength:0,items:[]};function ae(e){const t=e.preReleaseContent,r=[];if(t?.tracks)for(const e of t.tracks.items)r.push({uri:e.uri,name:e.name?e.name:"",isPlayable:e.playability.playable,durationMs:e.duration?.totalMilliseconds??0,hasOriginalAudio:e.hasOriginalAudio,artists:ne(e.artists.items),isExplicit:e.contentRating?.label===te.x7.Explicit,is19PlusOnly:e.contentRating?.label===te.x7.NineteenPlus});return{totalLength:t?.tracks.totalCount??0,items:r}}function ne(e){const t=[];for(const r of e)"Artist"===r.data.__typename&&t.push({name:r.data.profile.name,uri:r.data.uri});return t}const oe=[G.$.INDEX,G.$.TITLE_AND_ARTIST,G.$.DURATION],ie=(0,p.memo)((function({ariaLabel:e,nrTracks:t,prereleaseUri:r,highlightUri:a,scrollToIndex:n,usePlayContextItem:o,hasHeaderRow:i=!0,initalTracks:s}){const{spec:c,UBIFragment:l}=(0,j.r)(h.k,{data:{uri:r}}),u=(e=>{const{request:t}=(0,p.useContext)(ee.j);return(0,p.useCallback)((async(r,a)=>{const n=await t(Q,{uri:e,offset:r,limit:a});for(const t of n?.data?.lookup||[])if("PreReleaseResponseWrapper"===t.__typename&&"PreRelease"===t.data.__typename&&t.data.uri===e)return ae(t.data);return re}),[t,e])})(r),d=(0,p.useRef)(!1),m=(0,p.useRef)(null),[g,x]=(0,p.useState)(null),f=(0,p.useCallback)((e=>({uri:e.uri})),[]);(0,p.useEffect)((()=>{m.current&&(g?m.current.scrollToIndex(g):n&&m.current.scrollToIndex(n))}),[g,n]);const b=(0,p.useCallback)((async(e,t)=>{const r=await u(e,t);if(a&&!g){const e=r.items.findIndex((e=>e?.uri===a));x(e||-1)}return r}),[u,a,g]),v=(0,p.useCallback)(((e,t)=>{const n=!d.current&&!!a&&a===e.uri;return n&&(d.current=!0),(0,k.jsx)(X.d,{uri:e.uri,isPlayable:e.isPlayable,name:e.name,trackNumber:t+1,index:t,artists:e.artists,playcount:0,contextUri:r,duration_ms:e.hasOriginalAudio?e.durationMs:null,usePlayContextItem:o,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,shouldHighLight:n,isReleased:e.isPlayable},t+e.uri)}),[a,r,o]);return(0,k.jsx)(l,{spec:c,children:(0,k.jsx)(q.a,{columns:oe,children:(0,k.jsx)(K.S4,{ariaLabel:e,columns:oe,hasHeaderRow:i,rowPlaceholder:$.Bz,renderRow:v,resolveItem:f,nrTracks:t,fetchTracks:b,limit:300,tracks:s,outerRef:m,columnPersistenceKey:"album-tracklist"},r)})})})),se=new Y.l("albumPreRelease","query","e1a5537a42c3b8a687f10ae865c3b6776d6d797f8c0c272b2d40dc159a8e1a94",null),ce=(e,t)=>(0,J.I)(se,e,t),le=(e,t=ce)=>{const{data:r,loading:a,error:n}=t({uri:e},{staleTime:3e5,gcTime:36e5});return{loading:a,error:!!n,prerelease:(0,p.useMemo)((()=>{if(!r)return null;for(const t of r.lookup)if("PreReleaseResponseWrapper"===t.__typename&&"PreRelease"===t.data.__typename&&t.data.uri===e)return de(t.data);return null}),[r,e])}};function ue(e){return e.includes("℗")?{type:"P",text:e}:{type:"C",text:e}}function de(e){const t=e.preReleaseContent;let r;if(t){const a=ae(e);r={artists:pe(t.artists.items),name:t.name??void 0,uri:t.uri,coverArt:{extractedColors:t.coverArt?.extractedColors?.colorRaw,sources:t.coverArt?.sources??[]},type:t.type,tracks:a,copyrights:t.copyright?.split("\n").map(ue)??[]}}return{uri:e.uri,releaseDate:e.releaseDate,timezone:e.timezone??void 0,content:r}}function pe(e){const t=[];for(const r of e)"Artist"===r.data.__typename&&t.push({name:r.data.profile.name,id:r.data.id,uri:r.data.uri,images:r.data.visuals.avatarImage?.sources??[]});return t}var he=r(98846);var me=r(4937),ge=r(85981),xe=r(46307),fe=r(78172);const be="nPhSYFMXHpfImT4H04k3",ve=e=>{const{uri:t}=e,{prerelease:r,loading:a,error:p}=le(t),h=(e=>{const t=e?.content?.coverArt.extractedColors?.hex;return(0,he.z)(t),t})(r),m=parseInt(new URLSearchParams((0,o.zy)().search).get("index")||"0",10),{usePlayContextItem:g}=(0,xe.P)({uri:t,pages:[{items:(x=r?.content?.tracks.items||[],x.filter((e=>e.isPlayable)).map((e=>({uri:e.uri,uid:null,type:fe.c.TRACK,provider:null}))))}]},{featureIdentifier:"album_prerelease"});var x;if(a||p||!r)return(0,k.jsx)(d.LoadingPage,{hasError:!!p,errorMessage:c.Ru.get("error.not_found.title.album")});if(r?.content?.uri&&function(e,t){if(!e.content?.uri||!e.releaseDate?.isoString)return!1;const r=(0,l.u)(e.releaseDate.isoString);if(r>0)return!1;return r<=-1*t}(r,1728e5)){const e=(0,s.Lce)(r?.content?.uri);if(e)return(0,k.jsx)(me.$,{to:e.toURLPath(!0)})}return(0,k.jsxs)("section",{children:[(0,k.jsx)(u.Q,{children:c.Ru.get("album.page-title",r.content?.name??"")}),(0,k.jsx)(W,{prerelease:r,backgroundColor:h}),(0,k.jsx)(L,{prerelease:r,backgroundColor:h}),r.content?.tracks.totalLength?(0,k.jsxs)("div",{className:"contentSpacing",children:[(0,k.jsx)(i.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:c.Ru.get("web-player.prerelease.album_tracklist_preview")}),(0,k.jsx)(ie,{prereleaseUri:t,ariaLabel:r.content?.name??c.Ru.get("error.not_found.title.album"),nrTracks:r.content?.tracks.totalLength??0,scrollToIndex:m,usePlayContextItem:g,initalTracks:r.content?.tracks.items,albumUri:r.content?.uri})]}):null,(0,k.jsx)("div",{className:n()(be,"contentSpacing"),children:(0,k.jsx)(ge.Z,{copyrights:r.content?.copyrights??[]})})]})}},306:(e,t,r)=>{r.d(t,{Y:()=>c});var a=r(30758),n=r(72574),o=r(12469),i=r(37395),s=r(9043);const c=e=>{const t=(0,i.f)(),[r,c]=(0,a.useState)(!1);if(!(0,n.APS)(e))throw new Error(`Expected a Spotify uri in format 'spotify:user:***', got "${e}"`);const l=(0,a.useCallback)((a=>a&&!r?t.followUsers([e]):!a&&r?t.unfollowUsers([e]):Promise.resolve()),[t,r,e]);return(0,a.useEffect)((()=>{c(!1),t.isFollowing([e]).then((t=>{c(t[e]??!1)}))}),[t,e]),(0,s.N)(o.mc.OPERATION_COMPLETE,(t=>{t.data.uris.includes(e)&&!t.data.error&&(t.data.operation===o.JK.FOLLOW_USER?c(!0):t.data.operation===o.JK.UNFOLLOW_USER&&c(!1))})),[r,l]}},85981:(e,t,r)=>{r.d(t,{Z:()=>i});var a=r(87732);const n="rTMkDBDp47Eo12ZEQv4U";var o=r(86070);const i=({copyrights:e,courtesyLine:t})=>{const r=(e||[]).map(((e,t)=>{if(e.untyped)return(0,o.jsx)(a.Z,{as:"p",variant:"finale",dir:"auto",children:e.text},t);const r=e.text.replace(/^(\(C\)\s+)/,"").replace(/^(\(P\)\s+)/,"").replace(/^(©\s+)/,"").replace(/^(℗\s+)/,"");let n;return n="C"===e.type?"©":"P"===e.type?"℗":`(${e.type})`,(0,o.jsx)(a.Z,{as:"p",variant:"finale",dir:"auto",children:`${n} ${r}`},t)}));return t&&r.unshift((0,o.jsx)(a.Z,{as:"p",variant:"finale",dir:"auto",children:t},r.length)),(0,o.jsx)("div",{className:n,children:r})}},40841:(e,t,r)=>{function a(e){const t=new Date;return(e instanceof Date?e:new Date(e)).getTime()-t.getTime()}r.d(t,{u:()=>a})},28552:(e,t,r)=>{r.d(t,{w:()=>u});var a=r(30758),n=r(75690),o=r(93492),i=r(71338),s=r(49889),c=r(98866),l=r(82362);const u=({uri:e,isBook:t})=>{const{add:r,remove:u}=(0,c.p)("prerelease"),d=(0,s.o)("prerelease",[e]).at(0),{enqueueSnackbar:p}=(0,i.d)(),{spec:h,logger:m}=(0,l.r)(n.k,{data:{uri:e}});return{isPreSaved:d,addPresave:(0,a.useCallback)((async()=>{m.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:e,itemToBePresaved:e,contextUri:e})),await r(e),p(t?o.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):o.Ru.get("web-player.prerelease.album_feedback_presaved"))}),[r,p,t,m,h,e]),removePresave:(0,a.useCallback)((async()=>{m.logInteraction(h.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:e,contextUri:e})),await u(e)}),[m,u,h,e])}}},48455:(e,t,r)=>{r.d(t,{$:()=>n});var a=r(30758);const n=(e,t)=>{const r=(0,a.useRef)(e);(0,a.useEffect)((()=>{r.current=e}),[e]),(0,a.useEffect)((()=>{let e;function a(){e&&clearInterval(e)}if(null!==t)return e=setInterval((function(){r.current(a)}),t),a}),[t])}},39363:(e,t,r)=>{r.d(t,{V:()=>i});var a=r(30758),n=r(85387),o=r(72574);function i(e){const t=(0,o.o_h)(e);let r="";return t&&(r=t.toURLPath(!0)),function(e){const t=(0,n.Zp)();return(0,a.useCallback)((()=>{""!==e&&t(e)}),[e,t])}(r)}},98846:(e,t,r)=>{r.d(t,{f:()=>s,z:()=>i});var a=r(30758),n=r(668),o=r(7180);function i(e,t=n.l0o){const r=(0,o.as)();return(0,a.useEffect)((()=>(e&&r((0,o.Mo)(e)),()=>{r((0,o.Hf)())})),[e,r]),e||t}const s=({color:e,fallbackColor:t})=>(i(e,t),null)},37395:(e,t,r)=>{r.d(t,{f:()=>o});var a=r(68334),n=r(18308);const o=()=>(0,n.N)(a.t)},9043:(e,t,r)=>{r.d(t,{N:()=>o});var a=r(30758),n=r(37395);const o=(e,t)=>{const r=(0,n.f)();(0,a.useEffect)((()=>r.getEvents().addListener(e,t)),[e,r,t])}},33887:(e,t,r)=>{r.d(t,{Bj:()=>n,T4:()=>o,kt:()=>i});var a=r(72574);function n(e,t){if(!t)return null;const r=(0,a.o_h)(t);if(!r||!(0,a.APS)(r))return null;const n=(0,a.XIp)(r.username);return e.find((e=>e.username===n))??null}function o(e){const t=e.getCurrentSession(),r=t?.sessionOwnerId;return r?t.sessionMembers.find((e=>e.id===r))??null:null}function i(e,t){if(!t||!function(e){return e.getCurrentSession()?.isSessionOwner??!1}(e))return!1;const r=e.getCurrentSession(),a=n(r?.sessionMembers??[],t),i=o(e);return!!a&&a?.username!==i?.username}},75690:(e,t,r)=>{r.d(t,{k:()=>s});const a="music",n="3.0.1",o="default",i="15.2.1";function s(e){return new c(e)}class c{constructor(e){this._path=[{name:"desktop-pre-release-page",...e.data}],e?.parentAbsoluteLocation&&(this._parentAbsoluteLocation=e.parentAbsoluteLocation)}headerFactory(){return new c.HeaderEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}actionBarFactory(){return new c.ActionBarEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}tracklistPreviewFactory(){return new c.TracklistPreviewEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[o,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}!function(e){e.HeaderEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:r}){this._path=e.concat({name:"header"}),t&&(this._parentAbsoluteLocation=t)}artistNameFactory(){return new e.HeaderEventFactory.ArtistNameEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[o,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}}(c||(c={})),function(e){e.ActionBarEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:r}){this._path=e.concat({name:"action_bar"}),t&&(this._parentAbsoluteLocation=t)}preSaveButtonFactory(){return new e.ActionBarEventFactory.PreSaveButtonEventFactory({path:this._path,parentAbsoluteLocation:this._parentAbsoluteLocation})}_getCurrentLocation(){return{pathNodes:this._path,specMode:[o,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}}(c||(c={})),function(e){e.TracklistPreviewEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:r}){this._path=e.concat({name:"tracklist_preview"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[o,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}}}(c||(c={})),function(e){!function(e){e.ArtistNameEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:r}){this._path=e.concat({name:"artist_name"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[o,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:a,generatorVersion:i,interactionType:"hit",specificationMode:o,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.HeaderEventFactory||(e.HeaderEventFactory={}))}(c||(c={})),function(e){!function(e){e.PreSaveButtonEventFactory=class{constructor({path:e,parentAbsoluteLocation:t,data:r}){this._path=e.concat({name:"pre_save_button"}),t&&(this._parentAbsoluteLocation=t)}_getCurrentLocation(){return{pathNodes:this._path,specMode:[o,...[...Array(this._path.length-1)].map((()=>""))],specVersion:[n,...[...Array(this._path.length-1)].map((()=>""))]}}getAbsoluteLocation(){const e=this._parentAbsoluteLocation?.locations;return{locations:[...e||[],this._getCurrentLocation()]}}hitPresave({prereleaseId:e,itemToBePresaved:t,contextUri:r}){return{actionParameterNames:["prerelease_id","item_to_be_presaved","context_uri"],actionParameterValues:[e.toString(),t.toString(),r.toString()],actionName:"presave",actionVersion:1,app:a,generatorVersion:i,interactionType:"hit",specificationMode:o,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitRemovePresave({prereleaseId:e,itemToBeRemovedFromPresaved:t,contextUri:r}){return{actionParameterNames:["prerelease_id","item_to_be_removed_from_presaved","context_uri"],actionParameterValues:[e.toString(),t.toString(),r.toString()],actionName:"remove_presave",actionVersion:1,app:a,generatorVersion:i,interactionType:"hit",specificationMode:o,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}hitUiNavigate({destination:e}){return{actionParameterNames:["destination"],actionParameterValues:[e.toString()],actionName:"ui_navigate",actionVersion:1,app:a,generatorVersion:i,interactionType:"hit",specificationMode:o,specificationVersion:n,annotatorConfigurationVersion:"",annotatorVersion:"",location:this._getCurrentLocation(),parentAbsoluteLocation:this._parentAbsoluteLocation}}}}(e.ActionBarEventFactory||(e.ActionBarEventFactory={}))}(c||(c={}))}}]);