"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{93114:(e,t,a)=>{a.d(t,{w:()=>m});var s=a(30758),i=a(97500),r=a.n(i),l=a(8126),n=a(93492),o=a(68692),c=a(73080);const d="pvGZ831aNzHTQMZ8CA_u";var u=a(86070);const m=(0,s.memo)((function({onClick:e=()=>{},size:t,className:a,uri:i,sharingInfo:m,interactionData:p,ariaLabel:y=n.Ru.get("mwp.list.item.share"),condensedAll:g,placement:h,semanticColor:x,disableTooltip:f}){const{onCopyLink:b}=(0,c.L)({sharingInfo:m,uri:i,interactionData:p}),T=(0,s.useCallback)((()=>{b(),e()}),[e,b]);return(0,u.jsx)(o.a,{ariaLabel:y,size:t,onClick:T,className:r()(d,a),icon:l.C,condensedAll:g,placement:h,condensed:!0,semanticColor:x,disableTooltip:f})}))},74918:(e,t,a)=>{a.d(t,{B:()=>A});var s=a(30758),i=a(1648),r=a(13505),l=a(93492),n=a(92907),o=a(30848),c=a(36776),d=a(61894),u=a(60452),m=a(12367),p=a(26630),y=a(34855),g=a(5119),h=a(46775),x=a(59829),f=a(28019),b=a(86070);const T=(e,t)=>(a,s)=>{s&&e.logInteraction(t.cardLinkFactory({position:0}).hitUiNavigate({destination:s}))},A=({name:e,uri:t,images:a,description:A,authorName:S,authorUri:j,isHero:C=!1,onClick:R=()=>{},testId:k,index:v,requestId:E,color:I,isPlayable:P,variant:L,logCardImpressions:N=!1,leaveTitleVisible:w})=>{let U,_=(0,b.jsx)(p.W,{uri:t}),O=P,D=!1;const B=j||"",M=(0,s.useCallback)((()=>{R?.(B)}),[R,B]);(0,x.c0)(t)&&(O=!0,_=(0,b.jsx)(h.gb,{}),D=!0);const F=w||!("spotify:user:spotify"===j);return U=C?(0,b.jsx)(d.A,{index:v,onClick:R,headerText:e,featureIdentifier:"playlist",uri:t,isDownloadable:!0,playInsteadOfNavigating:D,renderCardImage:()=>(0,b.jsx)(o.M,{isHero:!0,images:a,color:I,FallbackComponent:e=>(0,b.jsx)(i.e,{size:"xxlarge",...e})}),renderSubHeaderContent:(e,t)=>(0,b.jsxs)(c.c,{isHero:!0,children:[(0,b.jsx)(u.t,{children:l.Ru.get("card.tag.playlist")}),A?(0,b.jsx)(f.N,{source:A,LinkComponent:g.N,onLinkClick:T(e,t)}):S&&j&&(0,b.jsx)(m.h,{menu:(0,b.jsx)(y.B,{uri:B}),children:(0,b.jsx)(r.E,{variant:"bodySmall",children:(0,b.jsx)(g.N,{to:B,onClick:M,children:S})})})]}),testId:k,requestId:E,isPlayable:O,logCardImpressions:N}):(0,b.jsx)(n.Z,{variant:L,index:v,onClick:R,headerText:e,featureIdentifier:"playlist",uri:t,isDownloadable:!0,playInsteadOfNavigating:D,renderCardImage:()=>(0,b.jsx)(o.M,{images:a,color:I,FallbackComponent:e=>(0,b.jsx)(i.e,{size:"xxlarge",...e})}),renderSubHeaderContent:(e,t)=>(0,b.jsx)(c.c,{children:A?(0,b.jsx)(f.N,{source:A,LinkComponent:g.N,onLinkClick:T(e,t)}):S&&(0,b.jsx)("span",{children:l.Ru.get("search.playlist-by",S)})}),testId:k,requestId:E,isPlayable:O,logCardImpressions:N,showTitle:F}),(0,b.jsx)(m.h,{menu:_,children:U})}},15810:(e,t,a)=>{a.d(t,{j:()=>E});var s=a(30758),i=a(97500),r=a.n(i),l=a(13505),n=a(24587),o=a(72574),c=a(93492),d=a(32284),u=a(12367),m=a(96691),p=a(34855),y=a(5119);var g=a(89232),h=a(20951),x=a(33059),f=a(54550),b=a(86070);function T(e){return e.displayName||e.name||""}const A=e=>{let t=null;return(0,o.ecE)(e)&&(t=(0,b.jsx)(m.t,{uri:e})),(0,o.APS)(e)&&(t=(0,b.jsx)(p.B,{uri:e})),t},S=({creator:e,onClick:t,position:a=0})=>{const i=(0,s.useCallback)((s=>{t?.(s,{position:a,creator:e})}),[e,t,a]);return(0,g.s)(e)?(0,b.jsx)(u.h,{menu:A(e.uri),children:(0,b.jsx)(l.E,{variant:"bodySmallBold",children:(0,b.jsx)(y.N,{"data-testid":"creator-link",to:e.uri,onClick:i,children:T(e)})})}):(0,b.jsx)(l.E,{variant:"bodySmall",children:T(e)})},j=({creator:e,onClick:t,isSmallIcon:a})=>{const[s,i]=c.Ru.get("playlist.header.made-for","USER").split("USER");return(0,b.jsxs)("div",{className:r()(f.A.metaDataText,f.A.creatorWrapper,{[f.A.smallMadeForIcon]:a}),children:[(0,b.jsx)(n.D,{semanticColor:"textBrightAccent"}),(0,b.jsx)(l.E,{variant:"bodySmall",children:s}),(0,b.jsx)(S,{creator:e,onClick:t}),i&&(0,b.jsx)(l.E,{variant:"bodySmall",children:i})]})},C=({creator:e,onClick:t,isSmallIcon:a,prefix:s})=>(0,b.jsxs)("div",{className:r()(f.A.metaDataText,f.A.creatorWrapper),children:[e.images.length>0&&(0,b.jsx)(d.e,{label:T(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:a?20:24,userIconSize:a?"xsmall":"small"}),s&&(0,b.jsx)(l.E,{variant:"bodySmall",children:s}),(0,b.jsx)(S,{creator:e,onClick:t})]}),R=({creators:e,onPiledCreatorsClick:t,isSmallIcon:a})=>{const s=(0,b.jsx)("div",{className:f.A.piled,children:e.slice(0,3).map(((e,t)=>(0,b.jsx)(d.e,{label:T(e),images:e.images.map((e=>({url:e.url,width:e.width||null,height:e.height||null}))),width:a?20:24,userIconSize:a?"xsmall":"small",piled:t>0},e.uri)))});let i=c.Ru.get("playlist.header.creator-and-others",T(e[0]),e.length-1);return 2===e.length&&(i=c.Ru.get("playlist.header.creator-and-co-creator",T(e[0]),T(e[1]))),t?(0,b.jsxs)("button",{className:r()(f.A.metaDataText,f.A.creatorWrapper,f.A.creatorButton),onClick:t,children:[s,i]}):(0,b.jsxs)("div",{className:r()(f.A.metaDataText,f.A.creatorWrapper),children:[s,i]})},k=({creators:e,onCreatorClick:t})=>(0,b.jsx)(b.Fragment,{children:e.map(((e,a)=>(0,b.jsxs)(s.Fragment,{children:[0!==a&&(0,b.jsx)("span",{className:f.A.divider}),(0,b.jsx)(S,{creator:e,onClick:t,position:a})]},e.id)))}),v=({creators:e,onPiledCreatorsClick:t,onCreatorClick:a,isTunaApplied:s})=>{const i=(0,x.y)(),r=i===(h.E.SMALL||i===h.E.XSMALL);if(1===e.length){const[t]=e;return t.isMadeFor?(0,b.jsx)(j,{creator:t,onClick:a,isSmallIcon:r}):(0,b.jsx)(C,{creator:t,onClick:a,isSmallIcon:r,prefix:s?"":void 0})}return e.length>0&&e.every((e=>(0,o.APS)(e.uri)))?(0,b.jsx)(R,{creators:e,onPiledCreatorsClick:t,isSmallIcon:r}):(0,b.jsx)(k,{creators:e,onCreatorClick:a})};function E({creators:e,onCreatorClick:t,onPiledCreatorsClick:a,isTunaApplied:i}){return(0,b.jsx)(s.Suspense,{fallback:null,children:(0,b.jsx)(v,{creators:e,onPiledCreatorsClick:a,onCreatorClick:t,isTunaApplied:i})})}},55068:(e,t,a)=>{a.d(t,{H:()=>J});var s=a(30758),i=a(97500),r=a.n(i),l=a(62411),n=a(85387),o=a(57977),c=a(13505),d=a(21974),u=a(94154),m=a(78218),p=a(18143),y=a(72574),g=a(93492),h=a(12032),x=a(66917),f=a(61407),b=a(79202),T=a(93114),A=a(585),S=a(12367),j=a(5928),C=a(13128),R=a(5488),k=a(15393),v=a(95211),E=a(66298),I=a(75395),P=a(96089),L=a(81995),N=a(2989),w=a(5119),U=a(46106),_=a(3568),O=a(67759),D=a(46777),B=a(21081),M=a(45176),F=a(46307),V=a(5797),$=a(27506),z=a(99802),H=a(82362),Y=a(74505),W=a(16772);const K="i3wVxndfxMEqUujUJOYc",q="XFwXZEToljeXDRWQYSEm",G="hZ_wTiRO870PNY1cRKCd";var Q=a(86070);const J=(0,s.memo)((function({book:e,contextUri:t,featureIdentifier:a,index:i,sharingInfo:J,uid:X,rating:Z,isRecommendation:ee=!1,canRemove:te=!1,showSeparator:ae=!1,highlightText:se=e=>e,onAddClick:ie,...re}){const{name:le,description:ne,isLocked:oe,isExplicit:ce,images:de,type:ue,uri:me,authorName:pe,consumptionCapExplanation:ye,durationMs:ge,topics:he=[],signifierText:xe}=e,fe=(0,z.s)(),{spec:be}=(0,H.r)(p.m,{data:{position:i,uri:me}}),{isPlaying:Te,isActive:Ae,togglePlay:Se}=(0,F.P)({uri:me},{featureIdentifier:a}),je=(0,n.Zp)(),Ce=(0,y.o_h)(me).toURLPath(!0),Re=(0,N.$)(),ke=(0,V.p)(me),[ve,Ee]=(0,O.A)(me),Ie=(0,B.T)(me),Pe=(0,l.wA)(),Le=Re===N.e.SMALL?"small":"medium",Ne=(0,s.useCallback)((()=>{fe.logInteraction(be.addButtonFactory().hitAddToPlaylist({playlist:t,itemToBeAdded:me})),ie?.(me)}),[fe,be,t,me,ie]),we=(0,s.useCallback)((()=>{if(ye)Pe((0,h._3)(ye));else if(oe&&!ye)je(Ce);else{const e=(0,U.$I)({isPlaying:Te,isActive:Ae,spec:be.playButtonFactory(),logger:fe,uri:me});Se({loggingParams:e})}}),[ye,Pe,Ae,oe,Te,fe,je,be,Se,me,Ce]),Ue=(0,s.useCallback)((()=>{fe.logInteraction(be.genreLinkFactory({uri:he[0].uri??""}).hitUiNavigate({destination:he[0].uri??""}))}),[fe,be,he]),_e=(0,Q.jsx)(P.U,{children:se(le,L.u.TITLE)}),Oe=(0,Q.jsx)(v.k,{description:ne,children:(0,Q.jsxs)(C.X,{badges:!!ce&&(0,Q.jsx)(_.U,{}),children:[!0===Z?.showAverage&&void 0!==Z.average&&(0,Q.jsxs)("span",{children:[(0,Q.jsx)(o.j,{size:"xsmall",className:K}),g.Ru.formatNumber(Z.average,{maximumFractionDigits:1})]}),he.at(0)?.title&&(0,Q.jsx)(w.N,{className:q,to:he[0].uri??"",onClick:Ue,children:he[0].title}),void 0!==ge&&(0,Q.jsx)(Y.j,{isPlaying:!1,fullyPlayed:ke?.state===$.H7.Completed,durationMs:ge,position:ke?.playPositionMilliseconds})]})}),De=(0,Q.jsx)(j.p,{uri:me,uid:X,contextUri:t,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:te}),Be=!oe&&!!!ye,Me=(0,Q.jsxs)(Q.Fragment,{children:[(0,Q.jsx)(x.M,{className:r()({[W.A.visibleAction]:ve}),isAdded:ve,onClick:()=>{ve?fe.logInteraction(be.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:me})):fe.logInteraction(be.saveToLibraryButtonFactory().hitLike({itemToBeLiked:me})),Ee(!ve)},size:Le,condensedAll:!0,condensed:!0}),(0,Q.jsx)(f.I,{className:r()({[W.A.visibleAction]:(0,D.X)(Ie)}),uri:me,onClick:(e,t)=>{t===M.NV.ADD&&fe.logInteraction(be.downloadButtonFactory().hitDownload({itemToDownload:me}))},size:Le,canDownload:Be,condensedAll:!0}),(0,Q.jsx)(T.w,{uri:me,sharingInfo:J??null,interactionData:{intent:"share",type:"click"},size:Le,onClick:()=>{fe.logInteraction(be.shareButtonFactory().hitShare({entityToBeShared:me,shareId:J?.shareId??""}))},condensedAll:!0}),(0,Q.jsx)(A.b,{menu:De,children:(0,Q.jsx)(b.e,{label:g.Ru.get("more.label.context",le),size:Le,onClick:()=>{fe.logInteraction(be.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),Fe=ee?null:(0,Q.jsx)(E.F,{actions:Me,playButton:(0,Q.jsx)(R.q,{onClick:we,isPlaying:Te,ariaPlayLabel:g.Ru.get("tracklist.a11y.play",le,pe),ariaPauseLabel:g.Ru.get("tracklist.a11y.pause",le,pe),locked:oe})}),Ve=(0,Q.jsx)(I.e,{images:de,name:le,type:ue,breakpoint:Re}),$e=xe?(0,Q.jsx)(c.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:xe}):null,ze=ie?(0,Q.jsx)(d.n,{size:"small",onClick:Ne,children:g.Ru.get("playlist.extender.button.add")}):null,He=(0,Q.jsxs)(u.j,{hasTextSeparator:!0,children:[(0,Q.jsxs)(Q.Fragment,{children:[ee&&oe&&(0,Q.jsx)(m.u,{semanticColor:"textSubdued",title:g.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:G}),g.Ru.get("card.tag.audiobook")]}),se(pe,L.u.SUBTITLE)]});return(0,Q.jsx)(S.h,{menu:De,onShow:()=>{fe.logInteraction(be.secondaryHitUiReveal())},children:(0,Q.jsx)(k.k,{breakpoint:Re,id:`book-${me}`,media:Ve,pretitle:$e,title:_e,body:Oe,subtitle:He,footer:Fe,trailing:ze,isActive:Ae,onClick:()=>{fe.logInteraction(be.hitUiNavigate({destination:me})),je(Ce)},showSeparator:ae,...re})})}))},62479:(e,t,a)=>{a.d(t,{Z:()=>p});var s=a(30758),i=a(85387),r=a(41223),l=a(13505),n=a(555),o=a(93492),c=a(67759);const d="hOOwEKqNuXrNvOCB1SgZ",u="csEdkIN9z2LjJIuZraqz";var m=a(86070);const p=({uri:e})=>{const[t,a]=(0,c.A)(e),p=(0,i.Zp)(),y=(0,s.useCallback)((()=>{a(!1),p("/",{replace:!0})}),[p,a]);return(0,m.jsxs)("div",{className:d,children:[(0,m.jsx)(r.b,{size:"xxlarge"}),(0,m.jsxs)("div",{className:u,children:[(0,m.jsx)(l.E,{as:"p",variant:"titleSmall",children:o.Ru.get("forbidden-page.title")}),(0,m.jsx)(l.E,{as:"p",variant:"bodySmall",children:o.Ru.get("forbidden-page.description")})]}),t&&(0,m.jsx)(n.$,{colorSet:"invertedLight",onClick:y,children:o.Ru.get("remove_from_your_library")})]})}},92533:(e,t,a)=>{a.d(t,{u:()=>n});var s=a(30758),i=a(3118),r=a(86070);const l=({renderOldExperience:e=()=>null,renderNewExperience:t=()=>null,forceNewExperience:a,property:s})=>(0,i.NC)(s)||a?t():e(),n=({suspenseFallback:e=null,renderNewExperience:t,renderOldExperience:a,forceNewExperience:i=!1,property:n})=>(0,r.jsx)(s.Suspense,{fallback:e,children:(0,r.jsx)(l,{renderNewExperience:t,renderOldExperience:a,forceNewExperience:i,property:n})})},35393:(e,t,a)=>{a.d(t,{p:()=>d});var s=a(2169),i=a(19549),r=a(15936),l=a(81994),n=a(42262),o=a(39876),c=a(86070);const d=({index:e,logShelfImpressions:t=!1,...a})=>{const{id:d,seeAllUri:u}=a,{onClickShelfTitle:m,onClickShelfSeeAll:p,spec:y}=(0,i.w)({seeAllUri:u,index:e,id:d}),g=(0,o.t)(y),h=(0,r.a)(u),x=(0,l.O)(u);return(0,c.jsx)(n.r,{spec:y,children:(0,c.jsx)(s.$,{...a,elementRef:t?g:void 0,onClickShelfTitle:()=>{m(),h({category:r.w.TitleClicks}),x({category:l.U.TitleClicks})},onClickShelfSeeAll:()=>{p(),h({category:r.w.ShowAll}),x({category:l.U.ShowAll})}})})}},19549:(e,t,a)=>{a.d(t,{w:()=>l});var s=a(30758),i=a(62187),r=a(82362);const l=({seeAllUri:e,index:t,id:a})=>{const{spec:l,logger:n}=(0,r.r)(i.f,{data:{identifier:a,position:t,uri:e??""}}),o=(0,s.useCallback)((()=>{const e=l.swipeUiReveal();n.logInteraction(e)}),[n,l]),c=(0,s.useCallback)((e=>{const t=l.shelfHeaderFactory().shelfCarouselControlsFactory(),a="next"===e?t.shelfCarouselControlsNextFactory():t.shelfCarouselControlsPreviousFactory();n.logInteraction(a.hitUiReveal())}),[n,l]);return{onClickShelfTitle:(0,s.useCallback)((()=>{const t=l.shelfHeaderFactory().shelfHeaderTitleFactory().hitUiNavigate({destination:e??""});n.logInteraction(t)}),[n,e,l]),onClickShelfSeeAll:(0,s.useCallback)((()=>{const t=l.shelfHeaderFactory().shelfHeaderSeeAllFactory().hitUiNavigate({destination:e??""});n.logInteraction(t)}),[n,e,l]),onSwipe:o,onClickCarouselControls:c,spec:l}}},30368:(e,t,a)=>{a.d(t,{l:()=>d});var s=a(30758),i=a(13505),r=a(93492),l=a(89913),n=a(32883),o=a(99802),c=a(86070);const d=({artists:e,spec:t,className:a})=>{const d=(0,o.s)(),u=(0,s.useCallback)(((e,a)=>{t&&d.logInteraction(t.artistLinkFactory({position:a??0,uri:e}).hitUiNavigate({destination:e}))}),[d,t]);if(!e||0===e.length)return null;const m=e.map((({name:e})=>e)).join(r.Ru.getSeparator());return(0,c.jsx)(l.Zp,{label:m,showDelay:l.uF,children:(0,c.jsx)(i.E,{as:"span",variant:"bodySmall",className:a,children:e.map((({uri:e,name:t},a)=>(0,c.jsxs)(s.Fragment,{children:[a>0&&r.Ru.getSeparator(),(0,c.jsx)(n.y,{name:t,uri:e,onClick:u,index:a,children:t},e)]},e)))})})}},19146:(e,t,a)=>{a.d(t,{u:()=>p});var s=a(97500),i=a.n(s),r=a(40638),l=a(78245),n=a(62355),o=a(56116),c=a(22232),d=a(99802),u=a(80104),m=a(86070);const p=({uri:e,src:t,playAriaLabel:a,onClick:s,isPlaying:p,isActive:y,isLocked:g,isEpisode:h,isVideo:x,spec:f})=>{const b=(0,o.W)(),T=(0,d.s)(),A=(0,r.YQ)((t=>{let a;if(b({type:"click",intent:p?"pause":"play"}),f){const t=f.playbackButtonFactory();let s;s=y&&p?t.hitPause({itemToBePaused:e}):y&&!p?t.hitResume({itemToBeResumed:e}):t.hitPlay({itemToBePlayed:e}),a=T.logInteraction(s)}s(t,a)}),c.d,{leading:!0,trailing:!1});return(0,m.jsxs)("div",{className:u.A.rowImageWithPlay,children:[(0,m.jsx)(n.e,{src:t,isEpisode:h,isVideo:x}),(0,m.jsx)(l.x,{className:i()(u.A.rowPlayPauseButton,u.A.rowImagePlayPauseButton),iconClassName:u.A.rowPlayPauseIcon,onClick:A,isPlaying:p,isLocked:g,playAriaLabel:a})]})}},80742:(e,t,a)=>{a.d(t,{Y:()=>o});var s=a(30758),i=a(13505),r=a(93492),l=a(80104),n=a(86070);const o=(0,s.memo)((function({playcount:e}){return e<1?null:(0,n.jsx)(i.E,{as:"div",variant:"bodySmall",className:l.A.rowPlayCount,children:r.Ru.formatNumber(e)})}))},61895:(e,t,a)=>{a.d(t,{c:()=>b,p:()=>h});var s=a(30758),i=a(48237),r=a(87347),l=a(34109),n=a(93492),o=a(82220),c=a(69623),d=a(68508),u=a(36663),m=a(20967),p=a(39876),y=a(82362),g=a(86070);let h=function(e){return e.ALBUM="album",e.ARTIST="artist",e.AUDIOBOOK="audiobook",e.EPISODE="episode",e.PLAYLIST="playlist",e.PODCAST="podcast",e.TRACK="track",e}({});const x=e=>e===h.TRACK?n.Ru.get("web-player.deeplink-intent.add-to-library.liked-songs-title"):e===h.EPISODE?n.Ru.get("web-player.deeplink-intent.add-to-library.episodes-title"):n.Ru.get("web-player.deeplink-intent.add-to-library.title"),f=({entityType:e,artistOrShow:t,title:a})=>e===h.ARTIST||e===h.PODCAST?n.Ru.get("web-player.deeplink-intent.add-to-library.artist-description",{name:t??""}):n.Ru.get("web-player.deeplink-intent.add-to-library.description",{title:a??"",name:t??""}),b=e=>{const{intent:t,clear:a}=(0,c.AT)();return t!==c.pg.ADD_TO_LIBRARY?null:(0,g.jsx)(T,{...e,clearDeeplinkIntent:a})};function T({uri:e,entityType:t,artistOrShow:a,title:c,clearDeeplinkIntent:b}){const T=(0,u.f)(),A=(0,m._)(),{enqueueSnackbar:S}=(0,i.dh)(),[j,C]=(0,s.useState)(null),{spec:R,logger:k}=(0,y.r)(r.K0,{data:{uri:e,identifier:t}}),{spec:v,logger:E}=(0,y.r)(l.y4,{data:{uri:e,identifier:t}}),I=(0,p.t)(R);(0,s.useEffect)((()=>{t===h.PLAYLIST?A?.contains([e]).then((e=>C(e[0]))):T.contains(e).then((e=>C(e[0])))}),[t,T,A,e]),(0,s.useEffect)((()=>{j&&(S(n.Ru.get("web-player.deeplink-intent.add-to-library.already-in-library")),E.logImpression(v.impression()),b())}),[b,S,j,E,v]);const P=(0,s.useCallback)((()=>{k.logInteraction(R.closeButtonFactory().hitUiHide()),b()}),[b,k,R]),L=(0,s.useCallback)((()=>{t===h.PLAYLIST?A?.add([e],{before:"start"}):T.add({uris:[e]}),t===h.EPISODE||t===h.TRACK?k.logInteraction(R.addButtonFactory().hitAddToPlaylist({playlist:t===h.TRACK?d.BP:d.Xn,itemToBeAdded:e})):k.logInteraction(R.addButtonFactory().hitFollow({itemToBeFollowed:e})),b()}),[b,t,T,k,A,R,e]);return null===j?null:(0,g.jsx)(o.T,{ref:I,titleText:x(t),descriptionText:f({entityType:t,artistOrShow:a,title:c}),confirmText:n.Ru.get("playlist.extender.button.add"),cancelText:n.Ru.get("block-user.dialog.cancel"),onConfirm:L,onClose:P,"aria-label":x(t)})}},19988:(e,t,a)=>{a.d(t,{Nz:()=>n,Vp:()=>r,Vv:()=>o,wD:()=>c,xz:()=>l});var s=a(20256),i=a(56563);const r=[s.fl.TRACKS,s.fl.LOCAL_TRACKS,s.fl.ALBUMS,s.fl.ARTISTS,s.fl.AUTHORS,s.fl.PLAYLISTS,s.fl.PLAYLISTS_V2,s.fl.FOLDERS,s.fl.EPISODES,s.fl.CHAPTERS,s.fl.SHOWS,s.fl.AUDIOBOOKS,s.fl.PSEUDO_PLAYLISTS],l={[s.fl.TRACKS]:"tracks",[s.fl.ALBUMS]:"albums",[s.fl.ARTISTS]:"artists",[s.fl.AUTHORS]:"authors",[s.fl.PLAYLISTS]:"playlists",[s.fl.FOLDERS]:"folders",[s.fl.SHOWS]:"shows",[s.fl.EPISODES]:"episodes",[s.fl.CHAPTERS]:"chapters",[s.fl.LOCAL_TRACKS]:"local-tracks",[s.fl.AUDIOBOOKS]:"audiobooks",[s.fl.PSEUDO_PLAYLISTS]:"pseudo-playlists"};let n=function(e){return e.ON="on",e.BEFORE="before",e.AFTER="after",e}({});const o=(0,i.g)(n);function c(e){return r.includes(e)}},34437:(e,t,a)=>{a.d(t,{A:()=>h});var s=a(30758),i=a(88308),r=a(20256),l=a(19988);function n(e,t,a,s){if(e.defaultPrevented)return null;const i=t.includes(l.Nz.BEFORE),r=t.includes(l.Nz.AFTER);let n=l.Nz.ON;if(e.currentTarget instanceof HTMLElement&&(i||r)){const{top:r,height:o,left:c,width:d,right:u}=e.currentTarget.getBoundingClientRect(),m=t.includes(l.Nz.ON);if("horizontal"===a)if(m&&i){(s?e.clientX>Math.round(u)-d/4:e.clientX<Math.round(c)+d/4)&&(n=l.Nz.BEFORE)}else{n=(s?e.clientX>Math.round(u)-d/2:e.clientX<Math.round(c)+d/2)?l.Nz.BEFORE:l.Nz.AFTER}else"vertical"===a&&(m&&i?e.clientY<Math.round(r)+o/4&&(n=l.Nz.BEFORE):n=e.clientY<Math.round(r)+o/2?l.Nz.BEFORE:l.Nz.AFTER)}return t.includes(n)?n:null}var o=a(72574);function c(e,t){return Array.from(e.dataTransfer?.types??[]).filter(r._4).filter((e=>!!(0,l.wD)(e)&&t.includes(e))).filter(l.wD)}var d=a(98628);function u(e,t,a){const s=c(e,t);if(!s.length)return function(e,t){return e.split(/[\s,;]+/g).map((e=>(0,o.o_h)(e?.trim()))).filter(d.P).reduce(((e,a)=>{const s=r.Ay[a.type];return(0,l.wD)(s)&&t.includes(s)?(e[s]||=[],e[s].push(a.toURI()),e):e}),{})}(e.dataTransfer?.getData("text/plain"),t);const i=Object.fromEntries(s.map((t=>[t,e.dataTransfer?.getData(t)?.split("\n").filter(Boolean)??[]])));if(a){const{[r.fl.PLAYLISTS]:e,...t}=i,a=Array.from(new Set([...i[r.fl.PLAYLISTS_V2]??[],...(i[r.fl.PLAYLISTS]??[]).map(m)]));return{...t,...a.length?{[r.fl.PLAYLISTS_V2]:a}:null}}return i}function m(e){const t=(0,o.o_h)(e);return t?.type===o.NQG.PLAYLIST?(0,o.Pse)(t.id).toURI():e}var p=a(74568),y=a(13867);const g={droppableMimeTypes:"albums artists authors episodes chapters folders playlists shows tracks local-tracks audiobooks pseudo-playlists",useDropTarget:"NxEINIJHGytq4gF1r2N1","useDropTarget--albums":"O0AN8Ty_Cxd4iLwyKATB","useDropTarget--artists":"wQnUXn1m6Gy4PH8jhslb","useDropTarget--authors":"CU0fvofmxUbTupSDNOQ3","useDropTarget--episodes":"XNjgtSbyhshr7YQcVvry","useDropTarget--chapters":"OxrHhBsQAggwnv6RmqRy","useDropTarget--folders":"mhuhir0ikRqXAPHU8ZZ1","useDropTarget--playlists":"D8wJ9TPfJzLeLJYxnad2","useDropTarget--shows":"oE8LAmRhbeQqsZrQo4lb","useDropTarget--tracks":"or84FBarW2zQhXfB9VFb","useDropTarget--local-tracks":"odS2IW9wfNVHhkhc0l_X","useDropTarget--audiobooks":"zWWLnqWslTLHwq3wBgGB","useDropTarget--pseudo-playlists":"pTvxY5yAQklZgb7VZFGS"};function h({uri:e,id:t=e,allowedMimeTypesByDropPosition:a,onDrop:o,onLongDragOver:d,longDragOverTimeout:m=1e3,reorderDirection:h="vertical"}){const f=(0,i.lB)((()=>a),[a]),b=(0,y.W)(),T=(0,p.wK)(),A=!!t&&1===T.length&&T[0]===t,S=Object.values(f).every((e=>e.includes(r.fl.PLAYLISTS_V2)&&!e.includes(r.fl.PLAYLISTS))),[j,C]=(0,s.useState)(null),R=(0,s.useCallback)((e=>A?[]:Object.entries(f).filter((([t,a])=>c(e,a).length>0)).map((([e])=>e)).filter(l.Vv)),[A,f]),k=(0,s.useRef)(!0),v=(0,s.useRef)(null),E=(0,s.useRef)(o);E.current=o;const I=(0,s.useRef)(d);I.current=d;const P=(0,s.useCallback)((()=>{k.current=!0,C(null),v.current&&(window.clearTimeout(v.current),v.current=null)}),[]);(0,s.useEffect)((()=>P),[P]);const L=(0,s.useCallback)((e=>{const t=R(e);t.length&&(C(n(e,t,h,b)),e.dataTransfer&&!e.defaultPrevented&&(e.dataTransfer.dropEffect=t.includes(l.Nz.ON)?"copy":"move"),e.preventDefault())}),[R,b,h]),N=(0,s.useCallback)((e=>{if(R(e).length&&!e.defaultPrevented){if(k.current){k.current=!1;const t=e.currentTarget,a=()=>{document.contains(t)||(P(),document.removeEventListener("dragenter",a))};document.addEventListener("dragenter",a),document.addEventListener("dragend",(()=>{document.removeEventListener("dragenter",a),P()}),{once:!0}),I.current&&(v.current=window.setTimeout((()=>{I.current?.()}),m))}e.preventDefault()}}),[R,m,P]),w=(0,s.useCallback)((e=>{R(e).length&&(function(e){return null===e.relatedTarget&&x?!document.elementsFromPoint(e.clientX,e.clientY).includes(e.currentTarget):!e.currentTarget.contains(e.relatedTarget instanceof Node?e.relatedTarget:null)}(e)&&P(),e.preventDefault())}),[R,P]),U=(0,s.useCallback)((e=>{const t=n(e,R(e),h,b);if(!e.defaultPrevented&&t){const a=u(e,f[t]??[],S),s=function(e){return{sectionId:parseInt(e.dataTransfer.getData("text/x-spotify-section"),10)||0,contextUri:e.dataTransfer.getData("text/x-spotify-context"),itemIds:e.dataTransfer.getData(r.fl.UIDS)?.split("\n").filter(Boolean)??[]}}(e);Object.keys(a).length&&E.current&&(E.current(a,t,s),e.preventDefault())}P()}),[R,h,b,P,f,S]),_=(0,s.useMemo)((()=>`${g.useDropTarget} ${Array.from(new Set(Object.values(f).flat()))?.map((e=>g[`useDropTarget--${l.xz[e]}`]??"")).join(" ")}`),[f]);return(0,s.useMemo)((()=>({dropPosition:j,className:_,onDragEnter:N,onDragLeave:w,onDragOver:L,onDrop:U})),[_,j,N,w,L,U])}const x=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},34148:(e,t,a)=>{a.r(t),a.d(t,{default:()=>u,useThisisPlaylistExtensionQuery:()=>g});var s=a(13505),i=a(21974),r=a(93492),l=a(5119),n=a(99802),o=a(39876),c=a(6506),d=a(86070);const u=e=>{const{artistImageUrl:t,artistName:a,artistConcertsUri:u,spec:m}=e,p=(0,n.s)(),y=(0,o.t)(m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}));return t&&a&&u?(0,d.jsxs)("section",{ref:y,className:"contentSpacing",children:[(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:r.Ru.get("concerts")}),(0,d.jsx)("div",{className:c.A.cards,children:(0,d.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,d.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,d.jsxs)("div",{className:c.A.cardContent,children:[(0,d.jsx)(s.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:r.Ru.get("concerts_on_tour")}),(0,d.jsx)(s.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:a}),(0,d.jsx)(l.N,{to:u,className:c.A.cardLink,children:(0,d.jsx)(i.n,{as:"span",size:"small",onClick:()=>{const e=m.concertsCardFactory({identifier:a,uri:u,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:u});p.logInteraction(e)},className:c.A.cardButton,children:r.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=a(44947),p=a(49810);const y=new m.l("thisisPlaylistExtension","query","906c2e14927400c8a71645c647576ce032f837a112d5e6f9375b19c80445c8cf",null),g=(e,t)=>(0,p.I)(y,e,t)},12536:(e,t,a)=>{a.r(t),a.d(t,{default:()=>Di});var s=a(30758),i=a(62411),r=a(85387),l=a(13505),n=a(3118),o=a(42809),c=a(72574),d=a(93492),u=a(36002),m=a(99132),p=a(86070);const y=(e,t,a)=>({event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(a),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}),g=({clickTracking:e,clickThrough:t,thirdPartyImpression:a,impression:r,logoUrl:n,advertiserName:o,creativeId:c,lineItemId:u})=>{const g=(0,i.wA)(),[h,x]=(0,s.useState)(!1);return(0,s.useEffect)((()=>(g((0,m.tb)()),g((0,m.i2)(y("event_viewed",c,u))),()=>{g((0,m.zV)())})),[g,c,u]),(0,p.jsxs)("div",{className:"sponsor-container",children:[(0,p.jsx)(l.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:d.Ru.get("playlist.presented_by",o)}),(0,p.jsxs)("div",{className:"sponsor-logo",children:[(0,p.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:t,onClick:()=>{g((0,m.i2)(y("event_clicked",c,u))),x(!0)},children:(0,p.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:n,alt:o,"data-ta-id":"sponsor-logo"})}),(0,p.jsx)("img",{className:"sponsor-logo__imp-pixel",src:r,alt:""}),a&&(0,p.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:a,alt:""}),h&&(0,p.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:e,alt:""})]})]})},h=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((t=>t.ads.sponsoredPlaylist.previewAd||t.ads.sponsoredPlaylist.sponsoredPlaylist.get(e)));return(0,s.useEffect)((()=>{a||t((0,m.uP)(e))}),[t,e,a]),a?(0,p.jsx)("div",{children:(0,p.jsx)(g,{...a})}):null},x=({playlistUri:e})=>{const t=(0,i.wA)(),a=(0,i.d4)((e=>e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships"))),r=(0,i.d4)((e=>e.ads.sponsoredPlaylist.previewAd));(0,s.useEffect)((()=>{a||t((0,m.uU)())}),[t,a]);const l=r||a&&((e,t)=>{const a=Date.now()/1e3,s=e.split(":"),i=s[s.length-1];return t.some((({playlistId:e,endTime:t,startTime:s})=>e===i&&a>=s&&a<(t||a+1)))})(e,a);return l?(0,p.jsx)(h,{playlistUri:e}):null};var f=a(20256),b=a(19988),T=a(34437),A=a(64359),S=a(62479),j=a(99035),C=a(70225),R=a(464),k=a(13417),v=a(78281),E=a(5537),I=a(34148),P=a(61895),L=a(53097),N=a(42372),w=a(82362);var U=a(27508),_=a(14259),O=a(81878),D=a(44947),B=a(49810);const M=new D.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),F=new D.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),V=new D.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),$=new D.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null);var z=a(78172),H=a(78203),Y=a(27506);function W(e){return{type:z.c.AUDIOBOOK,uri:e.uri,name:e.name,description:e.htmlDescriptionPlain??"",authorName:e.authors?.map((e=>e?.name)).join(d.Ru.getSeparator())||"",images:e.coverArt?.sources??[],isLocked:(0,H.e$)(e.accessInfo),isExplicit:e.contentRating?.label===Y.x7.Explicit,durationMs:e.duration?.totalMilliseconds??0,topics:e.genres?.map((e=>({uri:e.destinationUri,title:e.contextualName})))||[],signifierText:e.accessInfo?.signifier?.text??"",rating:{average:e.rating?.averageRating?.average??0,showAverage:!!e.rating?.averageRating?.showAverage},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var K=a(88176),q=a(35292),G=a(20062),Q=a(98628),J=a(52596);function X(e){return{type:z.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,G.r)(e.coverArt)}}function Z(e){if("Album"!==e.data.__typename)return null;return X(e.data)}function ee(e){const t=e?.items.filter((e=>"AlbumResponseWrapper"===e.__typename));return(t??[]).map((e=>Z(e))).filter(Q.P)||[]}function te(e){if("Artist"!==e.data.__typename)return null;const t=e.data;return{type:z.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,G.r)(t.visuals.avatarImage)}}function ae(e){if("Episode"!==e.data.__typename)return null;const t=e.data,a=t.podcastV2.data;return"Podcast"!==a.__typename?null:{type:z.c.EPISODE,uri:t.uri,id:t.id,name:t.name,images:(0,G.r)(t.coverArt),isExplicit:t.contentRating?.label===K.x7.Explicit,is19PlusOnly:t.contentRating?.label===K.x7.NineteenPlus,podcast:{id:a.id,uri:a.uri,name:a.name},isPlayable:t.playability.playable}}function se(e){const t=(0,G.r)(e.albumOfTrack?.coverArt||null);return{type:z.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:e.albumOfTrack?.name||"",uri:e.albumOfTrack?.uri||"",imgUrl:t.at(0)?.url||"",id:e.albumOfTrack?.id||""},artists:e.artists.items.map((e=>({id:e.id,name:e.profile.name,uri:e.uri}))),isPlayable:e.playability.playable,isExplicit:e.contentRating?.label===K.x7.Explicit,is19PlusOnly:e.contentRating?.label===K.x7.NineteenPlus}}function ie(e){if("Track"!==e.data.__typename)return null;return se(e.data)}function re(e){return(e?.itemsV2??[]).map((e=>{const t=(0,q.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return Z(t);case"ArtistResponseWrapper":return te(t);case"EpisodeResponseWrapper":return ae(t);case"TrackResponseWrapper":return ie(t);default:return(0,J.k)(t),null}})).filter(Q.P)||[]}function le(e){return(e?.itemsV2??[]).map((e=>{const t=(0,q.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?W(t.data):null})).filter(Q.P)||[]}const ne=async(e,t,a,s=0,i=10,r=10)=>{const l={term:t,offset:s,limit:i,numberOfTopResults:r};if(a){const a=await e(F,l),s=a?.data?.searchV2;return s?(n=t,{albums:[],artists:[],episodes:[],tracks:[],topResults:le(s.topResultsV2)??[],query:n}):null}var n;const o=await e(M,l),c=o?.data?.searchV2;return c?function(e,t){return{albums:ee(e.albumsV2)??[],artists:(i=e.artists,((i?.items??[]).map((e=>te(e))).filter(Q.P)||[])??[]),episodes:(s=e.episodes,((s?.items??[]).map((e=>ae(e))).filter(Q.P)||[])??[]),tracks:(a=e.tracksV2,((a?.items??[]).map((e=>ie(e.item))).filter(Q.P)||[])??[]),topResults:re(e.topResultsV2)??[],query:t};var a,s,i}(c,t):null},oe=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e(V,i),l=r?.data?.albums;return l?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((e=>se(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,J.k)(t),null}}(l):null},ce=async(e,t,a=50,s=0)=>{const i={uris:[t],limit:a,offset:s},r=await e($,i),l=r?.data?.artists;return l?function(e){const t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((e=>X(e)))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((e=>se(e.track)))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,J.k)(t),null}}(l):null};let de=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({});const ue=(e,t)=>"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e={...e,breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}:"NAV_TO_ENTITY"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:("NAV_TO_RESULTS"===t.type?e={...e,breadcrumbs:[...e.breadcrumbs,t.level]}:"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:de.SEARCH,term:t.term,title:""}]}),e);var me=a(97500),pe=a.n(me),ye=a(40638),ge=a(66758);const he="YAYCVnYpPvmYV4JyTmn5",xe="FeWwGSRANj36qpOBoxdx",fe="_h5mio6VqcL_fmiXAb1S",be="Hfgj4Zbb2ijt8g54MlCA",Te="sgZ_MgcS1NlccH19fYsa",Ae="JzyZE2R09wq7xtjECDeR",Se=s.memo((function({placeholder:e,onChange:t=()=>{},onFocus:a=()=>{}}){const[i,r]=(0,s.useState)(""),n=(0,s.useRef)(null),o=(0,ye.YQ)((e=>{t(e)}),200),c=(0,s.useCallback)((e=>{const t=e.currentTarget.value;r(t),o(t)}),[r,o]),u=(0,s.useCallback)((()=>{n.current&&n.current.focus(),r(""),t("")}),[r,t]),m=(0,s.useCallback)((e=>{"Escape"===e.key&&i&&u()}),[i,u]);return(0,p.jsxs)("div",{className:he,role:"search",children:[(0,p.jsx)(l.E,{as:"input",variant:"bodySmall",ref:n,className:pe()(xe),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:e,onChange:c,onKeyDown:m,onFocus:a,value:i}),(0,p.jsxs)("div",{className:fe,children:[(0,p.jsx)("span",{className:be,children:(0,p.jsx)(ge.C,{size:"small",className:Te,"aria-hidden":"true"})}),i&&(0,p.jsx)("button",{className:Ae,onClick:u,"aria-label":d.Ru.get("search.a11y.clear-input"),children:(0,p.jsx)(U.M,{size:"small"})})]})]})}));var je=a(55068),Ce=a(43758),Re=a(40997),ke=a(33279);const ve=({renderRow:e,searchResults:t})=>(0,p.jsx)(Re.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ce.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ke.$.TITLE_AND_ARTIST,ke.$.ALBUM,ke.$.ADD]});var Ee=a(7282);const Ie=({renderRow:e,searchResults:t})=>{const a=t.filter((e=>e.type===z.c.TRACK)),s=t.filter((e=>e.type===z.c.ALBUM));return(0,p.jsxs)("div",{children:[(0,p.jsx)(l.E,{as:"p",variant:"bodyMediumBold",className:Ee.A.artistResultListTitle,children:d.Ru.get("playlist.curation.popular_songs")}),(0,p.jsx)(Re.S4,{ariaLabel:d.Ru.get("playlist.curation.popular_songs"),renderRow:e,rowPlaceholder:Ce.qq,nrTracks:a.length,tracks:a,resolveItem:e=>({uri:e.uri}),columns:[ke.$.TITLE_AND_ARTIST,ke.$.ALBUM,ke.$.ADD]}),(0,p.jsx)(l.E,{as:"p",variant:"bodyMediumBold",className:Ee.A.artistResultListTitle,children:d.Ru.get("playlist.curation.albums")}),(0,p.jsx)(Re.S4,{ariaLabel:d.Ru.get("playlist.curation.albums"),renderRow:e,rowPlaceholder:Ce.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[ke.$.TITLE_AND_ARTIST,ke.$.ALBUM,ke.$.ADD]})]})},Pe=({renderRow:e,searchResults:t,renderSeeAllRow:a,seeAllXList:s})=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Re.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ce.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ke.$.TITLE_AND_ARTIST,ke.$.ALBUM,ke.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,p.jsx)(Re.S4,{ariaLabel:d.Ru.get("search.title.all"),renderRow:a,rowPlaceholder:Ce.qq,nrTracks:s.length,tracks:s,resolveItem:e=>({uri:e.uri}),columns:[ke.$.TITLE_AND_ARTIST,ke.$.ALBUM,ke.$.ADD],testID:"playlist-inline-curation-see-all-options"})]}),Le=({renderRow:e,searchResults:t})=>(0,p.jsx)(Re.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ce.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ke.$.TITLE_AND_ARTIST,ke.$.ALBUM,ke.$.ADD]}),Ne=({renderRow:e,searchResults:t})=>(0,p.jsx)(Re.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ce.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ke.$.TITLE_AND_ARTIST,ke.$.ALBUM,ke.$.ADD]}),we=({renderRow:e,searchResults:t})=>(0,p.jsx)(Re.S4,{ariaLabel:d.Ru.get("search.title.top-results"),renderRow:e,rowPlaceholder:Ce.qq,nrTracks:t.length,tracks:t,resolveItem:e=>({uri:e.uri}),columns:[ke.$.TITLE_AND_ARTIST,ke.$.ALBUM,ke.$.ADD]});var Ue=a(66987),_e=a(43866);const Oe="G2t3w2AAeb5OXp0_GeWs",De="saVjTFMyWYUz975_tkQm",Be="thi8fNCkEhutRkDC90c0",Me="pHVlkChuJpEnBQyU3ADv",Fe="ENWs3JxcqtD98_8fbPz2",Ve="L8IUKEJL6JiTyE_qUVCc",$e="XcyjdXgsNX0DBt72tfiD",ze="VhJnuS7UcUPfIlzD8dlU",He="He29vQ5anFj_bJ5iEaI2",Ye=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(_e.$,{className:Fe,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:He,onClick:s,children:[(0,p.jsxs)(Ue.T,{columnIndex:0,className:Ve,children:[void 0!==i?(0,p.jsx)("img",{className:Be,src:i,alt:e.name}):null,(0,p.jsxs)("div",{className:$e,children:[(0,p.jsx)(l.E,{as:"p",className:Me,variant:"bodyMedium",children:e.name}),(0,p.jsx)(l.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("album")})]})]}),(0,p.jsx)(Ue.T,{columnIndex:1}),(0,p.jsx)(Ue.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:ze,onClick:s,children:a?(0,p.jsx)(O.g,{}):(0,p.jsx)(_.V,{})})})]})})};var We=a(26411);const Ke=({size:e})=>(0,p.jsx)("div",{className:De,children:(0,p.jsx)(We.r,{size:e})}),qe=({searchResult:e,index:t,isRTL:a,onClick:s})=>{const i=e.images.at(0)?.url;return(0,p.jsx)(_e.$,{className:Fe,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":`${d.Ru.get("artist-page.tracks.seemore")} ${e.name}`,className:He,onClick:s,"data-testid":"playlist-inline-curation-artist",children:[(0,p.jsxs)(Ue.T,{columnIndex:0,className:Ve,children:[void 0!==i?(0,p.jsx)("img",{className:Oe,src:i,alt:e.name}):(0,p.jsx)(Ke,{size:"small"}),(0,p.jsxs)("div",{className:$e,children:[(0,p.jsx)(l.E,{as:"p",className:Me,variant:"bodyMedium",children:e.name}),(0,p.jsx)(l.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:d.Ru.get("artist")})]})]}),(0,p.jsx)(Ue.T,{columnIndex:1}),(0,p.jsx)(Ue.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":`See more from ${e.name}`,className:ze,onClick:s,children:a?(0,p.jsx)(O.g,{}):(0,p.jsx)(_.V,{})})})]})})};var Ge=a(21974),Qe=a(12367),Je=a(92734),Xe=a(34978),Ze=a(76762),et=a(19146),tt=a(22360),at=a(97998),st=a(1782),it=a(8562),rt=a(61056),lt=a(13670),nt=a(56116),ot=a(8766),ct=a(3568),dt=a(57836),ut=a(39595),mt=a(24395),pt=a(21081),yt=a(28704),gt=a(89979),ht=a(80104);const xt=s.memo((function({uid:e,uri:t,isPlayable:a,isMOGEFRestricted:i,isExplicit:r,contextUri:l,name:n,imgUrl:o,index:c,podcast:u,usePlayContextItem:m}){const y=(0,s.useMemo)((()=>l.replace("internal:recs:","")),[l]),g=(0,nt.W)(),{addItems:h}=(0,yt.x)(y),{isActive:x,isPlaying:f,triggerPlay:b,togglePlay:T}=m({uid:e,uri:t,index:c}),A=(0,s.useCallback)((()=>{h([t],{after:"end"}),g({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:y})}),[h,t,g,y]),S=(0,pt.T)(t),{isPlayable:j,isAnyArtistBanned:C}=(0,ot.g)(t,{isPlayable:a}),{badges:R,hasBadges:k}=(0,gt.b)({downloadAvailability:S,isExplicit:r,isMOGEFRestricted:i});return(0,p.jsx)(mt.pZ,{value:"row",index:c,children:(0,p.jsx)(Qe.h,{menu:(0,p.jsx)(Je.b,{uri:t,contextUri:l}),children:(0,p.jsxs)(lt.w,{uri:t,contextUri:t,isPlayable:j,isAnyArtistBanned:C,onTriggerPlay:()=>{b()},isActive:x,ageRestricted:i,index:c,ariaRowIndex:c,dragMetadata:{name:n,createdBy:u.name},isExplicit:r,children:[(0,p.jsxs)(st.U,{ariaColIndex:0,children:[(0,p.jsx)(et.u,{uri:t,src:o,onClick:()=>{T()},isLocked:!1,isPlaying:f,isActive:x,isEpisode:!0,playAriaLabel:d.Ru.get("tracklist.a11y.play",n,u.name)}),(0,p.jsxs)(tt.l,{children:[(0,p.jsx)(rt.p,{titleText:n,children:n}),k&&(0,p.jsxs)(Ze.P,{children:[R.download&&(0,p.jsx)(dt._,{}),R.explicit&&(0,p.jsx)(ct.U,{}),R.nineteen&&(0,p.jsx)(ut.q,{className:ht.A.nineteen,size:16})]})]})]}),(0,p.jsx)(it.o,{ariaColIndex:1,children:(0,p.jsx)(Xe.g,{uri:u.uri,name:u.name,children:u.name})}),(0,p.jsx)(at.l,{ariaColIndex:2,children:(0,p.jsx)(Ge.n,{size:"small",onClick:A,children:d.Ru.get("playlist.extender.button.add")})})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),ft=({episode:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(xt,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.images.at(0)?.url??"",index:a,podcast:e.podcast,usePlayContextItem:s}),bt=({label:e,index:t,isRTL:a,onClick:s})=>(0,p.jsx)(_e.$,{className:Fe,rowIndex:t,"aria-selected":!1,children:(0,p.jsxs)("div",{"aria-label":e,className:He,onClick:s,children:[(0,p.jsx)(Ue.T,{columnIndex:0,className:Ve,children:(0,p.jsx)(l.E,{as:"p",className:Me,variant:"bodyMedium",children:e})}),(0,p.jsx)(Ue.T,{columnIndex:1}),(0,p.jsx)(Ue.T,{columnIndex:2,children:(0,p.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":e,className:ze,onClick:s,children:a?(0,p.jsx)(O.g,{}):(0,p.jsx)(_.V,{})})})]})});var Tt=a(46136),At=a(82502),St=a(5119),jt=a(30368),Ct=a(54878),Rt=a(83298),kt=a(23602),vt=a(53458),Et=a(49157),It=a(95059);const Pt=s.memo((function({uid:e,uri:t,name:a,imgUrl:i,artists:r,isExplicit:l,index:n,album:o,contextUri:c,isPlayable:u,isMOGEFRestricted:m,usePlayContextItem:y,durationMs:g,shouldRenderDuration:h,internalLink:x}){const{spec:f,logger:b}=(0,w.r)(Tt.i,{data:{position:n,reason:"",uri:t}}),T=(0,s.useMemo)((()=>c.replace("internal:recs:","")),[c]),A=(0,nt.W)(),{addItems:S}=(0,yt.x)(T),{isActive:j,isPlaying:C,triggerPlay:R,togglePlay:k}=y({uid:e,uri:t,index:n}),v=(0,s.useCallback)((()=>{b.logInteraction(f.addButtonFactory().hitAddToPlaylist({playlist:T,itemToBeAdded:t})),S([t],{after:"end"}),A({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:T})}),[b,f,T,t,S,A]),E=(0,pt.T)(t),{isPlayable:I,isAnyArtistBanned:P}=(0,ot.g)(t,{isPlayable:u,isLocal:!1,isOutOfMarket:!1,artistUris:r?.map((e=>e.uri))}),{unBanArtists:L}=(0,Et.M)(r.map((e=>e.uri))),N=r.map((e=>e.name)).join(d.Ru.getSeparator()),{badges:U,hasBadges:_}=(0,gt.b)({downloadAvailability:E,isExplicit:l,isMOGEFRestricted:m}),O=h&&g,D=r.map((e=>e.name)).join(d.Ru.getSeparator()),B=(0,It.c)();return(0,p.jsx)(mt.pZ,{value:"row",index:n,children:(0,p.jsx)(Qe.h,{menu:(0,p.jsx)(At.P,{uri:t,albumUri:o.uri,artists:r,contextUri:c}),children:(0,p.jsxs)(lt.w,{uri:t,contextUri:c,isPlayable:I,isAnyArtistBanned:P,handleArtistBanUndoClick:L,onTriggerPlay:(e,t)=>{R({loggingParams:t})},isActive:j,ageRestricted:m,index:n,ariaRowIndex:n,dragMetadata:{name:a,createdBy:N},spec:f,className:ht.A.isRecommendedTrackListRow,isExplicit:l,children:[(0,p.jsxs)(st.U,{ariaColIndex:0,children:[(0,p.jsx)(et.u,{uri:t,src:i,onClick:(e,t)=>{k({loggingParams:t})},isLocked:!1,isPlaying:C,isActive:j,playAriaLabel:d.Ru.get("tracklist.a11y.play",a,N),spec:f}),(0,p.jsxs)(tt.l,{children:[x&&B?(0,p.jsx)(St.N,{to:t,className:ht.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(rt.p,{titleText:a,children:a})}):(0,p.jsx)(rt.p,{titleText:a,children:a}),_&&(0,p.jsxs)(Ze.P,{children:[U.explicit&&(0,p.jsx)(ct.U,{}),U.download&&(0,p.jsx)(dt._,{}),U.nineteen&&(0,p.jsx)(ut.q,{className:ht.A.nineteen,size:16})]}),(0,p.jsx)(kt.p,{children:(0,p.jsx)(jt.l,{artists:r,spec:f})})]})]}),(0,p.jsx)(it.o,{ariaColIndex:1,children:(0,p.jsx)(Xe.g,{uri:o.uri,name:o.name,creatorUri:r?.[0]?.uri,spec:f,children:o.name})}),(0,p.jsx)(it.o,{ariaColIndex:2,children:(0,p.jsx)("span",{})}),(0,p.jsxs)(at.l,{ariaColIndex:3,children:[O?(0,p.jsx)(vt.d,{uri:t}):null,O?(0,p.jsx)(Ct.P,{duration:g,dataTestId:"render-duration"}):(0,p.jsx)(Ge.n,{size:"small",onClick:v,"aria-label":d.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:d.Ru.get("playlist.extender.button.add")}),O?(0,p.jsx)(Rt.Y,{menu:(0,p.jsx)(At.P,{uri:t,albumUri:o.uri,contextUri:c,artists:r}),label:d.Ru.get("more.label.track",a,D)}):null]})]})})})}),((e,t)=>e.uid===t.uid&&e.uri===t.uri&&e.index===t.index)),Lt=({track:e,contextUri:t,index:a,usePlayContextItem:s})=>(0,p.jsx)(Pt,{uid:e.id,uri:e.uri,isPlayable:e.isPlayable,isMOGEFRestricted:e.is19PlusOnly,isExplicit:e.isExplicit,contextUri:t,name:e.name,imgUrl:e.album.imgUrl,index:a,album:e.album,artists:e.artists,usePlayContextItem:s});var Nt=a(53575),wt=a(46307);const Ut=({resultList:e,level:t,isRTL:a,playlistUri:i,navToResults:r,navToEntity:n,term:o,isBooklist:u})=>{let m=e;const y=(e=>e.map((e=>{if(e.type===z.c.TRACK||e.type===z.c.EPISODE){const{uri:t,id:a}=e;return{type:(0,c.U_m)(t)?z.c.TRACK:z.c.EPISODE,uri:t,uid:a,provider:null}}return null})).filter(Q.P))(e),{draggable:g,onDragStart:h}=(0,Nt.P)(),{addItems:x}=(0,yt.x)(i),b=(0,s.useCallback)((e=>{x([e],{after:"end"})}),[x]),{usePlayContextItem:T}=(0,wt.P)({uri:`${i.replace("spotify:","spotify:internal:recs:")}:${encodeURIComponent(o)}:${t?.navType??0}`,pages:[{items:y}]},{featureIdentifier:"search"}),A=(0,s.useCallback)(((e,t)=>(0,p.jsx)(bt,{isRTL:a,index:t,label:e.label,onClick:()=>{r({navType:e.type,term:o,title:e.label})}},e.uri)),[a,r,o]),S=(0,s.useCallback)(((e,t)=>e.type===z.c.ARTIST?(0,p.jsx)(qe,{isRTL:a,index:t,searchResult:e,onClick:()=>{n({navType:de.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===z.c.EPISODE?(0,p.jsx)(ft,{index:t,episode:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:T},e.uri):e.type===z.c.TRACK?(0,p.jsx)(Lt,{index:t,track:e,contextUri:i.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:T},e.uri):e.type===z.c.ALBUM?(0,p.jsx)(Ye,{index:t,isRTL:a,searchResult:e,onClick:()=>{n({navType:de.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,p.jsx)(je.H,{book:e,index:t,featureIdentifier:"playlist_recommendations",contextUri:i,isRecommendation:!0,onAddClick:b,showSeparator:0!==t},e.uri)),[a,n,b,i,T]);if(""===o)return(0,p.jsx)("div",{className:Ee.A.emptySearchTermContainer});if(!e||0===e?.length)return(0,p.jsxs)("div",{className:Ee.A.emptyStateContainer,children:[(0,p.jsx)(l.E,{as:"h1",variant:"titleSmall",children:d.Ru.get("search.empty-results-title",o)}),(0,p.jsx)(l.E,{as:"p",variant:"bodySmall",children:d.Ru.get("search.empty-results-text")})]});if(t?.navType===de.SEARCH){const t=[{type:de.ARTISTRESULTS,label:d.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:de.ALBUMRESULTS,label:d.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:de.TRACKRESULTS,label:d.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=e,u?(0,p.jsx)(p.Fragment,{children:m.map(((e,t)=>e&&e.type===z.c.AUDIOBOOK?(0,p.jsx)(je.H,{contextUri:i,index:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,onAddClick:b,draggable:g,onDragStart:t=>{h(t,{itemUris:[e.uri],itemMimeTypes:[f.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null))}):(0,p.jsx)(Pe,{renderRow:S,searchResults:m,renderSeeAllRow:A,seeAllXList:t})}return t?.navType===de.ALBUM?(0,p.jsx)(ve,{renderRow:S,searchResults:m}):t?.navType===de.ARTIST?(0,p.jsx)(Ie,{renderRow:S,searchResults:m}):t?.navType===de.ALBUMRESULTS?(0,p.jsx)(Le,{renderRow:S,searchResults:m}):t?.navType===de.TRACKRESULTS?(0,p.jsx)(we,{renderRow:S,searchResults:m}):t?.navType===de.ARTISTRESULTS?(0,p.jsx)(Ne,{renderRow:S,searchResults:m}):null};var _t=a(13867),Ot=a(11663);const Dt=({playlistUri:e,hideInlineCuration:t,isBooklist:a})=>{const[i,r]=(0,s.useState)([]),[n,o]=(0,s.useState)(),c=(0,_t.W)(),{level:u,changeTerm:m,goBack:y,navToEntity:g,navToResults:h,term:x}=(()=>{const[e,t]=(0,s.useReducer)(ue,{term:"",breadcrumbs:[]}),{breadcrumbs:a,term:i}=e;return{changeTerm:e=>{t({type:"CHANGE_TERM",term:e})},level:a[a.length-1]||null,goBack:()=>{t({type:"GO_BACK"})},navToEntity:e=>{t({type:"NAV_TO_ENTITY",level:e})},navToResults:e=>{t({type:"NAV_TO_RESULTS",level:e})},term:i}})(),{request:f}=(0,s.useContext)(Ot.j),{spec:b,logger:T,UBIFragment:A}=(0,w.r)(L.e,{}),S=(0,s.useCallback)((e=>{m(e),e?T.logInteraction(b.searchBarFactory().keyStrokeFilter()):T.logInteraction(b.searchBarFactory().hitClearFilter())}),[m,T,b]);return(0,s.useEffect)((()=>{let e=!0;return(async()=>{if(u)switch(u.navType){case de.SEARCH:try{if(!n||n.query!==x&&""!==x){const t=await ne(f,x,a);e&&o(t)}else""===x&&r([])}catch{r([])}n&&r(n.topResults);break;case de.ARTISTRESULTS:n&&r(n?.artists);break;case de.ALBUMRESULTS:n&&r(n?.albums);break;case de.TRACKRESULTS:n&&r(n?.tracks);break;case de.EPISODERESULTS:n&&r(n?.episodes);break;case de.ALBUM:try{const t=await oe(f,u.uri,100,0);e&&t&&r(t.tracks)}catch{r([])}break;case de.ARTIST:try{const t=await ce(f,u.uri,100,0);e&&t&&r([...t.albums,...t.tracks])}catch{r([])}}})(),()=>{e=!1}}),[u,x,n,f,a]),(0,p.jsxs)(A,{spec:b,children:[(0,p.jsxs)("section",{className:Ee.A.playlistInlineCurationSection,children:[(0,p.jsxs)("div",{className:Ee.A.playlistInlineCurationWrapper,children:[(0,p.jsx)(l.E,{as:"h1",className:Ee.A.playlistInlineCurationTitle,variant:"titleSmall",children:d.Ru.get("playlist.curation.title")}),(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Se,{placeholder:a?d.Ru.get("playlist.curation.search_placeholder-booklists"):d.Ru.get("playlist.curation.search_placeholder"),onChange:S})})]}),(0,p.jsx)("button",{className:Ee.A.playlistInlineCurationCloseButton,onClick:t,children:(0,p.jsx)(U.M,{"aria-label":d.Ru.get("close")})})]}),null!==u&&u.navType!==de.SEARCH?(0,p.jsxs)("button",{className:Ee.A.playlistInlineCurationBackButton,onClick:()=>y(),children:[c?(0,p.jsx)(_.V,{"aria-label":d.Ru.get("navbar.go-back"),className:Ee.A.icon}):(0,p.jsx)(O.g,{"aria-label":d.Ru.get("navbar.go-back"),className:Ee.A.icon}),(0,p.jsx)(l.E,{as:"p",variant:"bodyMediumBold",children:u.title})]}):null,(0,p.jsx)("div",{className:Ee.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,p.jsx)(Ut,{playlistUri:e,term:x,level:u,resultList:i,navToEntity:g,navToResults:h,isRTL:c,isBooklist:a})})]})};var Bt=a(3408),Mt=a(81995),Ft=a(58792),Vt=a(64493);const $t=(0,s.createContext)({getReference:()=>null,setReference:()=>{}}),zt=({children:e})=>{const t=(0,s.useRef)(null),a=(0,s.useCallback)((()=>t.current),[]),i=(0,s.useCallback)((e=>{t.current=e}),[]),r=(0,s.useMemo)((()=>({getReference:a,setReference:i})),[a,i]);return(0,p.jsx)($t.Provider,{value:r,children:e})};var Ht=a(27653);const Yt=(e,t,a)=>{const{name:r,uri:l,uid:n}=e,{sortState:o}=(0,s.useContext)(k.cL),c=o.order!==ke.H.NONE,{draggable:d,onDragStart:m}=(0,Nt.P)({itemIds:[n],itemUris:[l],itemMimeTypes:[f.fl.AUDIOBOOKS],dragLabelText:r,contextUri:t}),{setReference:p,getReference:y}=(0,s.useContext)($t),g=(0,s.useCallback)((e=>{p({uri:l,uid:n}),m(e)}),[m,p,n,l]),h=(0,i.wA)(),x=(0,Ht.m)(),A=(0,s.useCallback)(((e,a)=>{const s=e[f.fl.AUDIOBOOKS];if(!s)return;const i=y();i?a===b.Nz.BEFORE?x.move(t,[i],{before:{uri:l,uid:n}}):x.move(t,[i],{after:{uri:l,uid:n}}):a===b.Nz.BEFORE?h((0,u.io)(t,s,{before:{uri:l,uid:n}})):h((0,u.io)(t,s,{after:{uri:l,uid:n}})),p(null)}),[t,h,y,x,p,n,l]),S=a&&!c?[f.fl.AUDIOBOOKS]:[];return{...(0,T.A)({uri:l,id:n,allowedMimeTypesByDropPosition:{[b.Nz.BEFORE]:S,[b.Nz.AFTER]:S},onDrop:A}),onDragStart:g,draggable:d}},Wt="bg5inM_sdkHpYWiFf7Id",Kt="DyW2LAm9YDcCkcdM0eeP",qt=()=>(0,p.jsx)("div",{className:Kt}),Gt=(0,s.memo)((function({item:e,contextUri:t,canEdit:a=!1,canRemove:s=!1,index:i,highlightText:r}){const{className:l,dropPosition:n,draggable:o,...c}=Yt(e,t,a);return(0,p.jsxs)(Vt.W,{className:l,"aria-posinset":i,reRunOnDOMUpdate:!0,children:[n===b.Nz.BEFORE&&(0,p.jsx)(qt,{}),(0,p.jsx)(je.H,{book:e,contextUri:t,index:i,featureIdentifier:"playlist",sharingInfo:e.sharingInfo,uid:e.uid,rating:e.rating,canRemove:s,className:l,draggable:o,showSeparator:0!==i,highlightText:r,...c}),n===b.Nz.AFTER&&(0,p.jsx)(qt,{})]})}));var Qt=a(1172),Jt=a(24573),Xt=a(16026),Zt=a(65494),ea=a(82974);const ta=({contextUri:e,initialItems:t,nrItems:a,canEdit:i,canRemove:l,ariaLabel:n})=>{const o=(0,Ht.m)(),c=(0,N.SF)(),{filter:d}=(0,s.useContext)(R.g),{sortState:u}=(0,s.useContext)(k.cL),{contentsOptions:m}=(0,Qt.$)(u,d),[,y]=(0,v.z)(),g=(0,s.useCallback)((async(t,a)=>{const s=await o.getContents(e,{...m,offset:t,limit:a}),i=s.items.map((e=>null===e?null:(0,Zt.pW)(e)?e:null));return{...s,items:i}}),[o,m,e]),{getItem:h,nrValidItems:x,invalidateCache:f}=(0,Xt.E)({nrItems:a,fetch:g,limit:50,initialItems:t});(0,s.useLayoutEffect)((()=>{y(x)}),[x,y]),(0,ea.H)(e,f);const b=(0,s.useCallback)((e=>(0,p.jsx)("div",{style:{height:e}})),[]),T=(0,s.useCallback)(((e,t)=>t===Mt.u.TITLE||t===Mt.u.SUBTITLE?(0,p.jsx)(Ft.M,{searchWords:[d],textToHighlight:e}):e),[d]),A=(0,s.useCallback)(((t,a)=>{const s=h(t);return s?(0,p.jsx)(Gt,{contextUri:e,item:s,canEdit:i,canRemove:l,index:t,highlightText:T},s.uri):b(`${a}px`)}),[i,l,e,h,T,b]),S="POP"===(0,r.wQ)()?0:10;return(0,p.jsx)("div",{className:Wt,children:(0,p.jsx)(Bt.R,{firstInteractiveIsWrapper:!0,"aria-label":n,"aria-rowcount":x,"aria-colcount":6,children:(0,p.jsx)(zt,{children:(0,p.jsx)(Jt.M,{totalCount:x,estimatedHeight:200,renderItem:A,renderPlaceholder:b,scrollNodeRef:c,nrRowsOverscan:10,persistanceKey:e,nrInitialInView:S})})})})};var aa=a(84676),sa=a(82953),ia=a(18376),ra=a(88783),la=a(33125);let na=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({});const oa={[na.DOWN]:()=>(0,p.jsx)(ia.y,{size:"small",className:ht.A.statusChangeDown}),[na.UP]:()=>(0,p.jsx)(ra.J,{size:"small",className:ht.A.statusChangeUp}),[na.NEW]:()=>(0,p.jsx)(la.Z,{className:ht.A.notificationDot}),[na.EQUAL]:()=>null},ca=({status:e,number:t})=>{const a=oa[e];return(0,p.jsxs)("div",{className:pe()(ht.A.rowChartStatus),children:[(0,p.jsx)(l.E,{variant:"bodyMedium",children:t}),(0,p.jsx)(a,{})]})};var da=a(62355),ua=a(3050),ma=a(76422),pa=a(37502),ya=a(80742),ga=a(44474),ha=a(83777),xa=a(38377);const fa=s.memo((function({uri:e,name:t,duration_ms:a,artists:s,album:i,isMOGEFRestricted:r,isExplicit:l,isPlayable:n,uid:o,index:c,contextUri:u,imgUrl:m,statusChange:y,playCount:g,usePlayContextItem:h,isCompactMode:x}){const{spec:f}=(0,w.r)(Tt.i,{data:{position:c,reason:"",uri:e}}),b=(0,aa.w)(),T=(0,It.c)(),{isActive:A,isPlaying:S,triggerPlay:j,togglePlay:C}=h({uid:o,uri:e,index:c}),R=(0,pt.T)(e),{isPlayable:k,isAnyArtistBanned:v}=(0,ot.g)(e,{isPlayable:n,isLocal:!1,isOutOfMarket:!1,artistUris:s?.map((e=>e.uri))}),{unBanArtists:E}=(0,Et.M)(s?.map((e=>e.uri))??[]),{badges:I,hasBadges:P}=(0,gt.b)({downloadAvailability:R,isExplicit:l,isMOGEFRestricted:r}),L=s?.map((e=>e.name)).join(d.Ru.getSeparator())||"";return(0,p.jsx)(mt.pZ,{value:"row",index:c,children:(0,p.jsx)(Qe.h,{menu:(0,p.jsx)(At.P,{uri:e,albumUri:i?.uri,artists:s}),children:(0,p.jsx)(lt.w,{uri:e,contextUri:u,index:c,onTriggerPlay:(e,t)=>{j({loggingParams:t})},isActive:A,ariaRowIndex:c+1,isPlayable:k,isAnyArtistBanned:v,handleArtistBanUndoClick:E,ageRestricted:r,dragMetadata:{name:t,createdBy:L},allowedDropTypes:[],spec:f,isCompactMode:x,isExplicit:l,children:b.map((({columnType:r,options:l},n)=>{const o=(0,ha.y)(n,r,b);return(0,p.jsx)(o,{ariaColIndex:n,children:(()=>{switch(r){case ke.$.INDEX:return(0,p.jsx)(ma.$,{uri:e,className:ht.A.rowMarkerChartStatus,playAriaLabel:d.Ru.get("tracklist.a11y.play",t,L),onClick:(e,t)=>{k&&C({loggingParams:t})},isPlaying:S,isActive:A,spec:f,children:y?(0,p.jsx)(ca,{number:c+1,status:y}):(0,p.jsx)(pa.a,{children:c+1})});case ke.$.TITLE_AND_ARTIST:case ke.$.TITLE_AND_AUTHOR:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(da.e,{src:m}),(0,p.jsxs)(tt.l,{children:[(0,p.jsx)(rt.p,{titleText:t,children:t}),P&&(0,p.jsxs)(Ze.P,{children:[I.download&&(0,p.jsx)(dt._,{}),I.explicit&&(0,p.jsx)(ct.U,{}),I.nineteen&&(0,p.jsx)(ut.q,{className:ht.A.nineteen,size:16})]}),(0,p.jsx)(kt.p,{children:(0,p.jsx)(jt.l,{artists:s,spec:f})})]})]});case ke.$.TITLE:return(0,p.jsxs)(ua.q,{children:[T?(0,p.jsx)(St.N,{to:e,className:ht.A.rowTitle,"data-testid":"internal-track-link",children:(0,p.jsx)(rt.p,{titleText:t,children:t})}):(0,p.jsx)(rt.p,{titleText:t,children:t}),P&&(0,p.jsxs)(Ze.P,{children:[I.download&&(0,p.jsx)(dt._,{}),I.explicit&&(0,p.jsx)(ct.U,{}),I.nineteen&&(0,p.jsx)(ut.q,{className:ht.A.nineteen,size:16}),I.hasAssociatedVideo&&(0,p.jsx)(xa.l,{})]})]});case ke.$.ARTIST:case ke.$.AUTHOR:return(0,p.jsx)(ga.Y,{children:s&&(0,p.jsx)(sa.E,{artists:s,spec:f})});case ke.$.PLAYS:return(0,p.jsx)(ya.Y,{playcount:g});case ke.$.ALBUM_OR_PODCAST:case ke.$.ALBUM:return(0,p.jsx)(Xe.g,{uri:i.uri,name:i.name,creatorUri:s?.[0]?.uri,spec:f,children:i.name});case ke.$.DURATION:return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(vt.d,{uri:e,spec:f}),!l?.hideDuration&&(0,p.jsx)(Ct.P,{duration:a}),(0,p.jsx)(Rt.Y,{menu:(0,p.jsx)(At.P,{uri:e,albumUri:i?.uri,artists:s}),label:d.Ru.get("more.label.track",t,L),spec:f})]});case ke.$.ADDED_BY:case ke.$.ADDED_AT:case ke.$.RELEASE_DATE:case ke.$.ACTIONS:case ke.$.ALBUM_OR_SHOW:case ke.$.EVENT_DATE:case ke.$.EVENT_INFO:case ke.$.CONCERT:case ke.$.CONCERT_VENUE:case ke.$.ADD:case ke.$.BPM:case ke.$.KEY:case ke.$.VIBE:return null;default:(0,J.d)(r)}return null})()},`column-${n}`)}))})})})}),((e,t)=>e.uri===t.uri&&e.isCompactMode===t.isCompactMode));var ba=a(95717);const Ta={column:null,order:ke.H.NONE},Aa=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,scrollToUid:i,usePlayContextItem:r,tracklistDomRef:l,sortableColumns:n,isCompactMode:o=!1}){const c=(0,Ht.m)(),{filter:d,setFilter:u}=(0,s.useContext)(R.g),m=(0,s.useRef)(null),y=(0,s.useCallback)((()=>{m.current&&m.current.update()}),[]);(0,ea.H)(a,y);const{sortState:g,setSortState:h}=(0,s.useContext)(k.cL),x=(0,s.useCallback)((e=>{h((0,C.So)(e,g))}),[g,h]);(0,s.useEffect)((()=>{h(Ta),u("")}),[a,u,h]),(0,s.useEffect)((()=>{m.current&&i&&m.current.scrollToItem({uid:i})}),[i]);const f=(0,s.useCallback)((async(e,t)=>{const s=await c.getContents(a,{offset:e,limit:t,sort:(0,C.Xt)(g),filter:d,decorateFormatListData:!0});return{items:s.items,totalLength:s.totalLength}}),[a,c,g,d]),b=(0,s.useCallback)(((e,t)=>{const s=(0,ba.g)(e.album?.images,{desiredSize:40,desiredLabel:"small"});return(0,p.jsx)(fa,{index:t,contextUri:a,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:s?.url||"",statusChange:e.formatListAttributes?.status,playCount:parseInt(e.formatListAttributes?.rank||"0",10),usePlayContextItem:r,isCompactMode:o},t+e.uri)}),[a,r,o]),T=(0,aa.w)(),A=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid})),[]);return(0,p.jsx)(mt.pZ,{value:"chart-tracklist",children:(0,p.jsx)(Re.S4,{ariaLabel:e,hasHeaderRow:!0,columns:T,sortableColumns:n,sortState:g,onSort:x,renderRow:b,resolveItem:A,nrTracks:t,fetchTracks:f,limit:100,canFetchAllTracks:c.getCapabilities().canFetchAllTracks,outerRef:m,outerDomRef:l,columnPersistenceKey:"chart-tracklist",isCompactMode:o,className:ht.A.chartTrackList},a)})}));var Sa=a(75773),ja=a(74918),Ca=a(35393),Ra=a(44816),ka=a(43080);function va(e,t){return e.build().withHost(Ra.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:`playlistURI:${t}`,limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var Ea=a(29844),Ia=a(72288);const Pa="BagEpNps_J8R2QuHRZMa",La="mbuOeSEBZed4fc2naMS6",Na="bjB8WZd0Ev30ZFbiScDm",wa=(0,s.memo)((({uri:e})=>{const t=(0,N.SF)(),{ref:a,inView:i}=(0,Sa.Wx)({initialInView:!1,rootMargin:"128px 100%",root:t.current}),r=function(e,t){const{data:a}=(0,ka.Z)(va,[e],{enabled:t,staleTime:36e5,gcTime:72e5});return a?.body.content?.items}(e,i),l=(0,s.useRef)(null),n=function(e){const[t,a]=(0,Ia.x)("mlt-height",300),i=(0,s.useCallback)((()=>{const t=e.current?.getBoundingClientRect()?.height;t&&a(t)}),[e,a]);return(0,Ea.w)({refOrElement:e,observeOnly:"height",onResize:i,observeOnMount:!0}),t}(l);return 0===r?.length?null:(0,p.jsx)("div",{className:Pa,style:{"--last-height":`${n}px`},ref:a,children:(0,p.jsx)("div",{className:La,children:r&&(0,p.jsx)(Ca.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:d.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:r.length,elementRef:l,className:Na,children:r.map(((e,t)=>(0,p.jsx)(ja.B,{index:t,uri:e.uri,name:e.name,authorName:e.owner?.display_name??null,description:null,images:e.images},e.uri)))})})})}));var Ua=a(35251),_a=a(42297),Oa=a(85277),Da=a(66917),Ba=a(72418),Ma=a(79202),Fa=a(93114),Va=a(585),$a=a(26630),za=a(9830),Ha=a(92533),Ya=a(53185),Wa=a(71858),Ka=a(69623),qa=a(61e3),Ga=a(96869),Qa=a(89913),Ja=a(48383),Xa=a(54981),Za=a(36923);const es={bottomEnd:Za.dw.topStart,top:Za.dw.bottom},ts=({visible:e,onHide:t,placement:a,children:s,label:i})=>(0,p.jsx)(Ja.W,{placement:a,withPortal:!0,overlay:e&&(0,p.jsx)("div",{children:(0,p.jsx)(Xa.A,{arrow:es[a],colorSet:"announcement",onClose:t,children:i})}),children:s});var as=a(59282),ss=a(42892),is=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(is||{});const rs=({uri:e,label:t,onClick:a,size:s=is.md})=>{const{onCopyLink:i}=(0,ss.J)({uri:e,permissionLevel:"CONTRIBUTOR"}),{toggleActivationVisible:r,setToggleActivationVisible:l}=(0,as.R)();return null;(0,p.jsx)(ts,{visible:r,onHide:()=>l(!1),label:d.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,p.jsx)(Qa.Zp,{label:t,children:(0,p.jsx)(qa.H,{onClick:e=>{a?.(e),i?.()},iconOnly:Ga.h,size:s,"aria-hidden":"true","aria-label":t,condensed:!0})})})};var ls=a(32485),ns=a(13706),os=a(79059);const cs=s.memo((({metadata:e,tracklistDomRef:t,sortableColumns:a})=>{const{hasSpotifyAudiobooks:i}=e,r=i||!1,{spec:l,logger:n}=(0,w.r)(ls.E,{}),o=(0,s.useCallback)((()=>{n.logInteraction(l.filterFieldFactory().keyStrokeFilter())}),[n,l]),c=(0,s.useCallback)((()=>{n.logInteraction(l.filterFieldFactory().hitClearFilter())}),[n,l]);return(0,p.jsxs)("div",{className:Ee.A.searchBoxContainer,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(ns.S,{placeholder:d.Ru.get("playlist.search_in_playlist"),onFilter:o,onClear:c,clearOnEscapeInElementRef:t})}),(0,p.jsx)(os.d,{columns:[...a],isBooklist:r})]})}));var ds=a(45143),us=a(42746),ms=a(90630);const ps="dw-display-",ys=({uri:e,formatListAttributes:t,availableSignals:a})=>{const s=(0,Ht.m)();if(!(0,n.NC)(ms.MFf))return null;const i=function(e){return e?.filter((({name:e})=>e.startsWith(ps)))??null}(a);return i?.length?(0,p.jsx)(Oa.S,{children:(0,p.jsx)(us.FN,{children:i.map((({name:a})=>{const i=a===t?.["session_control.selected_signals"];return(0,p.jsx)(ds.v,{selected:i,onClick:async()=>{await s.sendSignal(e,i?"dw-session-control-reset":a)},selectedColorSet:"invertedLight",tabIndex:-1,children:(r=a,r.replace(ps,"").split("-").map((e=>e.charAt(0).toUpperCase()+e.slice(1))).join(" "))},a);var r}))})}):null};var gs=a(15508),hs=a(43995),xs=a(12200);const fs=()=>null;var bs=a(4319),Ts=a(68882),As=a(96437),Ss=a(48975),js=a(46106),Cs=a(67759),Rs=a(42262),ks=a(99802);const vs=s.memo((function({playlist:e,capabilities:t,spec:a,isPlaying:i,isActive:r,togglePlay:l,isBooklist:n,isConcert:o=!1,backgroundColor:c,tracklistDomRef:u,sortableColumns:m,className:y,watchFeedEntityEntryPoint:g,formatListAttributes:h,availableSignals:x}){const{metadata:{uri:f,name:b,unfilteredTotalLength:T,isOwnedBySelf:A,isRootlistable:S,canPlay:j,isPublished:C,totalLength:R}}=e,k=(0,Ss.n)(),v=(0,ks.s)(),E=(0,s.useMemo)((()=>a.shuffleButtonContainerFactory()),[a]),I=t.canFilter&&T>0,P=t.canSort&&T>0,L=T>0,N=(0,xs.X)(),U=(0,bs.x)(),[_,O]=(0,Cs.A)(f),D=(0,s.useCallback)((async()=>{try{await O(!_)}catch{}}),[_,O]),B=(0,s.useCallback)((()=>{const e=a.shareButtonFactory().hitShare({entityToBeShared:f,shareId:""});v.logInteraction(e)}),[a,v,f]),M=(0,Ka.d$)(),{spec:F,logger:V}=(0,w.r)(Ua.e,{data:{uri:f}});(0,s.useEffect)((()=>{M&&V.logImpression(F.impression())}),[M,V,F]);const $=(0,s.useCallback)((()=>{let e;const t=a.heartButtonFactory();_?e=t.hitUnfollow({itemToBeUnfollowed:f}):(e=t.hitFollow({itemToBeFollowed:f}),M&&V.logInteraction(F.hitFollow({itemToBeFollowed:f}))),v.logInteraction(e),D()}),[a,D,_,v,f,M,V,F]),H=(0,As.j)(),Y=I&&P;return(0,p.jsxs)(_a.E,{backgroundColor:c,className:y,children:[(0,p.jsxs)(Oa.S,{children:[j&&!n?(0,p.jsx)(Ya.D,{onClick:l,isPlaying:i,size:H,uri:f,ariaPlayLabel:d.Ru.get("playlist.a11y.play",b),ariaPauseLabel:d.Ru.get("playlist.a11y.pause",b)}):null,g&&(0,p.jsx)(Rs.r,{spec:a,children:(0,p.jsx)(Ts.H,{entryPoint:g,watchFeedTitle:b,type:z.c.PLAYLIST,entityUri:f})}),N&&R>0&&!n&&(0,p.jsx)(Rs.r,{spec:E,children:(0,p.jsx)(gs.Y,{shuffleContext:hs.b.playlistActionBar,entityName:b,contextUri:f,isActive:r,activationPlacement:"bottomEnd",size:H})}),!A&&S?(0,p.jsx)(za.e,{children:(0,p.jsx)(Da.M,{isAdded:_,onClick:$,size:H,condensed:!0})}):null,!n&&L&&(0,p.jsx)(Ba.f,{uri:f,isFollowing:_,canDownload:L,onClick:(e,t)=>(0,js.Qv)(t,a.downloadButtonFactory(),v,f),onFollow:D,size:H,condensed:!0}),e.metadata.permissions?.canAdministratePermissions&&k&&(0,p.jsx)(rs,{onClick:B,label:d.Ru.get("permissions.invite-collaborators",b),uri:f,size:H}),(o||n)&&(0,p.jsx)(Fa.w,{uri:f,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:o?"concerts-near-you/share":"booklist/share"},onClick:B,size:H}),U&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(fs,{uri:f,playlistMetadata:e.metadata})}),(0,p.jsx)(Va.b,{onShow:()=>(0,js.R2)(a,v),menu:(0,p.jsx)($a.W,{uri:f,isPublished:C}),children:(0,p.jsx)(Ma.e,{label:d.Ru.get("more.label.context",b),size:H})}),Y?(0,p.jsx)(Rs.r,{spec:a,children:(0,p.jsx)(cs,{metadata:e.metadata,tracklistDomRef:u,sortableColumns:m})}):(0,p.jsx)("div",{className:Ee.A.leadingSlot,children:(0,p.jsx)(Ha.u,{property:ms.mA2,renderNewExperience:()=>(0,p.jsx)(Wa.g,{options:[],onSelect:()=>{},selected:null,enableViewModeMenu:!0})})})]}),(0,p.jsx)(ys,{uri:f,formatListAttributes:h,availableSignals:x})]})}));var Es=a(39876);const Is=e=>{const t=(0,ks.s)(),a=(0,s.useMemo)((()=>e.spec.promoCardFactory()),[e.spec]),i=(0,Es.t)(a);return(0,p.jsxs)("div",{className:Ee.A.concertsFooter,children:[(0,p.jsx)(St.N,{to:"/concerts",className:Ee.A.ctaLink,onClick:()=>{const e=a.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,p.jsxs)("div",{className:Ee.A.promoRow,ref:i,children:[(0,p.jsx)(l.E,{as:"h2",variant:"bodyMediumBold",className:Ee.A.promoTitle,children:d.Ru.get("concerts.find_more")}),(0,p.jsx)(ds.v,{as:"span",selected:!0,children:d.Ru.get("concerts.find_nearby")}),(0,p.jsx)("img",{className:Ee.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,p.jsx)("div",{className:Ee.A.disclaimerContainer,children:(0,p.jsx)(l.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:d.Ru.get("concerts_near_you.playlist_disclaimer")})})]})};var Ps=a(45361),Ls=a(26687),Ns=a(24651);const ws="multiUserAttributionDisplayNamesV2";var Us=a(71130);function _s(e){return(0,Zt.Jy)(e)||(0,Zt.xp)(e)}function Os(e){return(0,Zt.Jy)(e)||(0,Zt.xp)(e)||(0,Zt.pW)(e)}const Ds=s.memo((function({ariaLabel:e,nrTracks:t,playlistUri:a,playlistName:r,isMixedMedia:l,isLive:o,isBlend:m,isConcert:y,isBooklist:g,canEdit:h,scrollToUid:x,feedbackPath:b,deleteFeedbackPath:T,usePlayContextItem:A,tracklistRef:S,tracklistDomRef:j,canRemove:E,spec:I,initialItems:P,isCompactMode:L=!1,sortableColumns:N,hasSpotifyAudiobooks:w}){const U=(0,ks.s)(),_=(0,n.NC)(ms.LX5),O=(0,Ht.m)(),{filter:D}=(0,s.useContext)(R.g),{sortState:B,setSortState:M}=(0,s.useContext)(k.cL),F=(0,Us.m)(),V=(0,s.useRef)((()=>{})),[$,z]=(0,s.useState)([]),H=(0,i.wA)(),Y=(0,aa.w)(),W=(0,s.useCallback)((()=>{S?.current&&S.current.update()}),[S]);(0,ea.H)(a,W);const K=(0,s.useCallback)(((e,t)=>{M((0,C.So)(e,B)),U.logInteraction(I.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[M,B,U,I]),q=(0,s.useCallback)((e=>{V.current(),O.remove(a,e)}),[O,a]),G=(0,s.useCallback)(((e,t,a=!1)=>{E&&(V.current=t,e.length>1&&!a?z(e):q(e))}),[E,q]);(0,s.useEffect)((()=>{S?.current&&x&&S.current.scrollToItem({uid:x})}),[x,S]);const Q=(0,s.useCallback)((async(e,t)=>{const s=await O.getContents(a,{offset:e,limit:t,sort:(0,C.Xt)(B),filter:D,decorateFormatListData:!!b||o||m,isExtraColumnsEnabled:F});return{items:s.items,totalLength:s.totalLength}}),[O,a,B,D,b,o,m,F]),J=(0,s.useCallback)(((e,t,s)=>{if(!S?.current)return;const i=S.current.getRows()[t];i&&(U.logInteraction(I.dragSort()),s===lt.Y.Before?O.move(a,e,{before:i}):O.move(a,e,{after:i}))}),[S,U,I,O,a]),X=(0,s.useCallback)(((e,t,s)=>{if(!S?.current)return;const i=S.current.getRows()[t];i&&(U.logInteraction(I.dragAddToPlaylist({playlist:a,itemToBeAdded:e[0]})),s===lt.Y.Before?H((0,u.io)(a,e,{before:{uri:i.uri,uid:i.uid}})):H((0,u.io)(a,e,{after:{uri:i.uri,uid:i.uid}})))}),[S,U,I,a,H]),Z=(0,s.useCallback)(((e,t)=>{let s,i=null;(0,Zt.xp)(e)?(i=e.show,s=e.images.concat(e.show?.images||[])):(0,Zt.Jy)(e)?(i=e.album,s=e.album?.images):(0,Zt.pW)(e)&&(s=e.images);const n=(0,ba.g)(s,{desiredSize:40,desiredLabel:"small"});let o=[];h&&B.order===ke.H.NONE&&(o=g?[f.fl.AUDIOBOOKS]:[f.fl.TRACKS,f.fl.LOCAL_TRACKS,f.fl.EPISODES,...w?[f.fl.AUDIOBOOKS]:[]]);const d="1"===e?.formatListAttributes?.["dislike-feedback-selected"],u=!!(0,Zt.xp)(e)&&e.podcastSubscription.isUserSubscribed;let x=!1;(0,Zt.xp)(e)&&e.podcastSubscription.isPaywalled&&!u?x=!0:_s(e)?x=e.isPlayable&&!d:(0,Zt.pW)(e)&&(x=!0);let S=!1;(0,Zt.xp)(e)&&e.podcastSubscription.isPaywalled?S=!0:(0,Zt.pW)(e)&&(S=e.isLocked&&!e.isOutOfMarket);const j=m&&((e,t)=>{const a=[];if(!t)return a;const s=t[ws]?ws:"multiUserAttributionDisplayNames",i=t?.[s]?.split(","),r=t?.multiUserAttributionImages?.split(",");if(!i||!r)return a;const l=t?.multiUserAttributionUsernamesV2?.split(",")||[],n=t?.multiUserAttributionType?.split(",")||[],o=i.length;for(let e=0;e<o;e++){const t=l[e],s=t&&(0,c.Qjr)(t).toURI();a.push({username:t,uri:s,displayName:i[e],images:(d=r[e],d.length>1?[{url:d}]:[]),recsplanation:n[e]})}var d;return a.sort(((t,a)=>t.username?t.username===e?.username?-1:a.username===e?.username?1:0:0))})(e.addedBy,e?.formatListAttributes)||e.addedBy&&[e.addedBy]||[];let C=0;_s(e)?C=e.duration.milliseconds:(0,Zt.pW)(e)&&(C=e.durationMs||0);let R="";Os(e)&&(R=e.name);let k=null;return(0,Zt.xp)(e)&&(k=e.gatedEntityRelations),(0,p.jsx)(Ns.W,{isCompactMode:L,index:t,playIndex:e.playIndex??void 0,contextUri:a,uri:e.uri,uid:e.uid,isPlayable:x,duration_ms:C,isPaywalled:S,isUserSubscribed:u,name:R,artists:(0,Zt.Jy)(e)?e.artists:void 0,albumOrShow:i,isExplicit:(Os(e)&&e.isExplicit)??!1,hasAssociatedVideo:((0,Zt.Jy)(e)&&e.hasAssociatedVideo&&_)??!1,isMixedMedia:l,isLocal:(0,Zt.Jy)(e)&&e.isLocal,addedBy:j,hasDecoratedAddedBy:O.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Zt.xp)(e)&&e.release.isoString||"",isMOGEFRestricted:((0,Zt.Jy)(e)||(0,Zt.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:n?.url||"",onMove:J,onInsert:X,usePlayContextItem:A,allowedDropTypes:o,feedbackPath:b,feedbackUri:e?.formatListAttributes?.feedback_uri,deleteFeedbackPath:T,isDisliked:d,isBlend:m,ticketingSiteURL:e?.formatListAttributes?.ticketingSite,eventDate:e?.formatListAttributes?.eventDate,canRemove:E,playlistName:r,isConcert:y,concertsCount:String(e.formatListAttributes?.concert_uris?.split(",").length??0),concertURI:e.formatListAttributes?.concert_uri,concertDate:e.formatListAttributes?.concert_date,concertVenue:e.formatListAttributes?.concert_subtitle,authorName:(0,Zt.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,Zt.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Zt.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:h,bpm:(0,Zt.Jy)(e)?e.bpm:void 0,musicKey:(0,Zt.Jy)(e)?e.key:void 0,gatedEntityRelations:k,isBanned:!!(0,Zt.Jy)(e)&&e.isBanned},t+e.uri)}),[h,g,B.order,m,L,a,_,l,O,J,X,A,b,T,E,r,y,w]),ee=(0,s.useCallback)((e=>({uri:e.uri,uid:e.uid,type:e.type})),[]),[,te]=(0,v.z)();return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(mt.pZ,{value:"playlist-tracklist",children:(0,p.jsx)(Re.S4,{isCompactMode:L,testID:"playlist-tracklist",ariaLabel:e,hasHeaderRow:!0,columns:Y,sortableColumns:N,sortState:B,onSort:K,onRemove:G,renderRow:Z,resolveItem:ee,nrTracks:t,fetchTracks:Q,limit:100,canFetchAllTracks:O.getCapabilities().canFetchAllTracks,outerRef:S,outerDomRef:j,tracks:P,isConcertPlaylist:y,onNrValidItemsChange:te,columnPersistenceKey:"playlist-tracklist"},a)}),(0,p.jsx)(Ls.F,{title:d.Ru.get("playlist.remove_from_playlist",r),isOpen:$.length>0,tracks:$,onClose:e=>{e.stopPropagation(),z([])},onRemove:q})]})}));var Bs=a(63127);var Ms=a(90803),Fs=a(8903);const Vs={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},$s=e=>{const t=e.replace(/\+/g,"%20");return decodeURIComponent(t)},zs=e=>{const t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};const a=t[1],s=/([^:]+):([^:]+)/g;let i;const r=[],l=[];for(;i=s.exec(a);){const e=i[1];let t=i[2];e===Vs.USER&&(t=$s(t)),r.push(e),l.push(t)}if(0===r.length)return{type:null,id:null};const n=r.reduce(((e,t,a)=>(e[r[a]]=l[a],e)),{});return{type:r[r.length-1],id:l[l.length-1],...n}};var Hs=a(90829),Ys=a(99013),Ws=a(98929);const Ks=new D.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),qs=3e5;function Gs(e,t){return["list-extender",e,t]}const Qs=(e,t,a=10,i)=>{const r=2*a,l=3*a,n=(0,Ws.jE)(),c=(0,s.useRef)(0),[d,u]=(0,s.useState)(e),[m,p]=(0,s.useState)((()=>n.getQueriesData({queryKey:Gs(e,t),stale:!1}).at(0)?.[1]??[])),y=(0,s.useRef)(m.map((e=>e.uri??""))),{spec:g,logger:h}=(0,w.r)(o.K,{data:{uri:e}}),x=(0,s.useMemo)((()=>g.recommendedFactory()),[g]);(0,Ys.e)(Hs.Lj.OPERATION_COMPLETE,(({data:a})=>{a.uri===e&&(a.operation===Hs.sP.ADD?p((e=>e.filter((e=>a.uris.every((t=>t!==e.uri)))))):a.operation===Hs.sP.REMOVE&&p((e=>e.filter((e=>a.items.every((t=>t.uri!==e.uri)))))),a.operation!==Hs.sP.ADD&&a.operation!==Hs.sP.REMOVE||n.invalidateQueries({queryKey:Gs(e,t)}))}));const f=(0,s.useRef)(!0);(0,s.useEffect)((()=>(f.current||(p([]),u(e),y.current=[],c.current=c.current+1),f.current=!0,()=>{c.current=c.current+1})),[e]),(0,s.useEffect)((()=>{if(m.length<r){const e=Math.min(r,l-m.length),a=c.current,s=Gs(d,t),o=f.current&&0===y.current.length;(o?n.fetchQuery({queryKey:s,queryFn:()=>i(d,[],e),staleTime:qs,gcTime:qs}):i(d,y.current,e)).then((t=>{if(a!==c.current||!t)return;const i=t.map((e=>e?.uri&&e.uri)).filter((e=>null!==e));t.length<e&&y.current.length?y.current=[]:y.current=[...y.current,...i],p((e=>[...e,...t])),o&&n.setQueryData(s,t)}))}f.current=!1}),[r,l,d,m.length,n,i,t]);const b=(0,s.useCallback)((()=>{if(g){const e=x.refreshButtonFactory().hitRefreshContent();h.logInteraction(e)}p((e=>e.slice(a)))}),[h,x,g,a]);return{recommendations:m.slice(0,a),_bufferedRecommendations:m.slice(a),refresh:b}},Js=s.memo((function({uri:e,canEdit:t}){const{recommendations:a,refresh:i}=((e,t=10)=>{const a=(0,Ht.m)(),{request:i}=(0,s.useContext)(Ot.j),r=(0,s.useCallback)((async(e,t,s)=>{const r=await a.getRecommendedBookUris(e,t,s),l=await i(Ks,{uris:r});return l?.data?.podcasts?.map((e=>"Audiobook"===e.__typename?W(e):null)).filter(Q.P)??[]}),[a,i]);return Qs(e,"book",t,r)})(e),{draggable:r,onDragStart:n}=(0,Nt.P)(),{addItems:o}=(0,yt.x)(e),c=(0,Fs.p)(),u=(0,s.useCallback)((e=>{o([e],{after:"end"})}),[o]);return c?a?.length&&a.length>0?(0,p.jsxs)("div",{className:Ee.A.recommendedTrackList,"data-testid":"recommended-books",children:[(0,p.jsx)("div",{className:Ee.A.top,children:(0,p.jsxs)("div",{className:Ee.A.header,children:[(0,p.jsx)(l.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(l.E,{variant:"bodySmall",className:Ee.A.subtitle,children:d.Ru.get("playlist.extender.songs.in.playlist")})]})}),c&&(0,p.jsxs)(p.Fragment,{children:[a.map(((a,s)=>a?(0,p.jsx)(je.H,{contextUri:e,index:s,featureIdentifier:"playlist_recommendations",book:a,sharingInfo:a.sharingInfo,isRecommendation:!0,draggable:r,onAddClick:t?u:void 0,onDragStart:e=>{n(e,{itemUris:[a.uri],itemMimeTypes:[f.fl.AUDIOBOOKS],dragLabelText:a.name})},showSeparator:0!==s},s):null)),(0,p.jsx)(qa.H,{className:Ee.A.refreshButton,onClick:i,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:Ee.A.recommendedTrackList,children:(0,p.jsx)("div",{className:Ee.A.top,children:(0,p.jsxs)("div",{className:Ee.A.header,children:[(0,p.jsx)(l.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(l.E,{variant:"bodySmall",className:Ee.A.subtitle,children:d.Ru.get("web-player.playlist.booklist-recommender-dsa-message")})]})})})}));var Xs=a(20841);const Zs=s.memo((function({playlistUri:e,canEdit:t,tracks:a}){const i="1"===(0,Xs.$)("filter-age-restricted-content"),{usePlayContextItem:r}=(0,wt.P)({uri:e.replace("spotify:","spotify:internal:recs:"),pages:[{items:a.map((e=>({...e,provider:null,type:z.c.TRACK,uid:null})))}]},{featureIdentifier:"playlist_recommendations"}),l=(0,s.useCallback)(((a,s)=>{const l=a.duration;return(0,p.jsx)(Pt,{index:s,imgUrl:a.album.imageUrl,contextUri:e.replace("spotify","spotify:internal:recs"),uri:a.uri,isPlayable:!(i&&a.isMOGEFRestricted),name:a.name,artists:a.artists,album:{...a.album,imgUrl:a.album.imageUrl},isExplicit:a.explicit,isMOGEFRestricted:a.isMOGEFRestricted,usePlayContextItem:r,durationMs:l,shouldRenderDuration:!t,internalLink:!0},`${s}-${a.uri}`)}),[e,i,r,t]),n=(0,s.useMemo)((()=>[ke.$.TITLE_AND_ARTIST,ke.$.ALBUM,ke.$.ADDED_AT,ke.$.ADD]),[]),o=(0,s.useCallback)((e=>({uri:e.uri,uid:e.id})),[]),c=(0,s.useMemo)((()=>a.slice(0,Math.min(a.length,10))),[a]);return(0,p.jsx)(Re.S4,{ariaLabel:d.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(a.length,10),rowPlaceholder:Ce.qq,tracks:c,renderRow:l,resolveItem:o,columns:n},`${e}-recommended`)})),ei=s.memo((function({playlistUri:e,playlistLength:t,canEdit:a}){const{recommendations:i,refresh:r}=((e,t=10)=>{const a=(0,Ht.m)(),i=(0,s.useCallback)((async(e,t,s)=>{const i=t.map((e=>zs(e).id??""));return a.getRecommendedTracks(e,i,s)}),[a]);return Qs(e,"track",t,i)})(e),n=!t||0===t,o=(0,Fs.p)(),c=n?d.Ru.get("playlist.extender.empty.playlist"):d.Ru.get("playlist.extender.songs.in.playlist");return o?i.length>0?(0,p.jsxs)("div",{className:Ee.A.recommendedTrackList,children:[(0,p.jsx)("div",{className:Ee.A.top,children:(0,p.jsxs)("div",{className:Ee.A.header,children:[(0,p.jsx)(l.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(l.E,{variant:"bodySmall",className:Ee.A.subtitle,children:c})]})}),o&&(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)(Zs,{playlistUri:e,canEdit:a,tracks:i}),(0,p.jsx)(qa.H,{className:Ee.A.refreshButton,onClick:r,children:d.Ru.get("playlist.extender.refresh")})]})]}):null:(0,p.jsx)("div",{className:Ee.A.recommendedTrackList,children:(0,p.jsx)("div",{className:Ee.A.top,children:(0,p.jsxs)("div",{className:Ee.A.header,children:[(0,p.jsx)(l.E,{variant:"titleSmall",children:d.Ru.get("playlist.extender.recommended.title")}),(0,p.jsx)(l.E,{variant:"bodySmall",className:Ee.A.subtitle,children:d.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})}));var ti=a(12524),ai=a(14867),si=a(98176),ii=a(41801),ri=a(17108);const li=(e,t,a)=>{const s=(0,ii.sH)(e.seo.playlist||e.seo.playlistV2||{},e.playlistId,t);return(0,ai.o)(a,(0,r.zy)())||s},ni=()=>{const{playlistId:e=""}=(0,r.g)(),t=(0,It.c)(),a={seo:{playlist:(0,i.d4)(ti.LO),playlistV2:(0,i.d4)(ti.nc)},playlistId:e},s=(e=>li(e,ri.T.VARIANT_1,si.P.SpotifyPlaylistTitleTag1))(a),l=(e=>li(e,ri.T.VARIANT_2,si.P.SpotifyPlaylistTitleTag2))(a),n=(e=>li(e,ri.T.VARIANT_3,si.P.SpotifyPlaylistTitleTag3))(a);return t?{spotifyPlaylistTitleTagVariant1Enabled:s,spotifyPlaylistTitleTagVariant2Enabled:l,spotifyPlaylistTitleTagVariant3Enabled:n}:{spotifyPlaylistTitleTagVariant1Enabled:!1,spotifyPlaylistTitleTagVariant2Enabled:!1,spotifyPlaylistTitleTagVariant3Enabled:!1}},oi=(e,t,a)=>{const s=(0,ii.lM)(e.seo.playlist||e.seo.playlistV2||{},e.playlistId,t);return(0,ai.o)(a,(0,r.zy)())||s},ci=()=>{const{playlistId:e=""}=(0,r.g)(),t=(0,It.c)(),a={seo:{playlist:(0,i.d4)(ti.LO),playlistV2:(0,i.d4)(ti.nc)},playlistId:e},s=(e=>oi(e,ri.T.VARIANT_1,si.P.UserPlaylistTitleTag1))(a),l=(e=>oi(e,ri.T.VARIANT_2,si.P.UserPlaylistTitleTag2))(a),n=(e=>oi(e,ri.T.VARIANT_3,si.P.UserPlaylistTitleTag3))(a);return t?{userPlaylistTitleTagVariant1Enabled:s,userPlaylistTitleTagVariant2Enabled:l,userPlaylistTitleTagVariant3Enabled:n}:{userPlaylistTitleTagVariant1Enabled:!1,userPlaylistTitleTagVariant2Enabled:!1,userPlaylistTitleTagVariant3Enabled:!1}};var di=a(9425);class ui{async deleteChanges(e){throw new Error("Method not implemented.")}async getChanges(e){throw new Error("Method not implemented.")}async applyChanges(e,t){throw new Error("Method not implemented.")}async applyChangesNewPlaylist(e,t){throw new Error("Method not implemented.")}async previewChanges(e,t){throw new Error("Method not implemented.")}async getTrackPairTransitionMetadata(e){throw new Error("Method not implemented.")}maybeApplyAutoTuna(e){throw new Error("Method not implemented.")}turnOnMix(e){throw new Error("Method not implemented.")}turnOffMix(e){throw new Error("Method not implemented.")}}const mi=(0,s.createContext)(null);const pi=function({children:e}){const t=(0,s.useMemo)((()=>new ui),[]);return(0,p.jsx)(mi.Provider,{value:t,children:e})},yi=()=>{};var gi=a(86422),hi=a(39695),xi=a(46726),fi=a(27463),bi=a(19512),Ti=a(39355),Ai=a(17013);const Si=["meta+v"];var ji=a(98962),Ci=a(77612),Ri=a(13946),ki=a(27931),vi=a(10312),Ei=a(17807),Ii=a(64640);const Pi=s.lazy((()=>a.e(4789).then(a.bind(a,87851)))),Li=s.lazy((()=>Promise.resolve().then(a.bind(a,34148)))),Ni=s.lazy((()=>a.e(3632).then(a.bind(a,20950)))),wi=s.lazy((()=>a.e(9718).then(a.bind(a,97557)))),Ui=new Set([]),_i=s.memo((function({playlist:e,capabilities:t}){const{metadata:{uri:a,name:m,images:y,totalLength:g,unfilteredTotalLength:h,isOwnedBySelf:S,hasEpisodes:j,canAdd:U,canRemove:_,formatListData:O,hasDateAdded:D,collaborators:M,isPublished:F,hasSpotifyAudiobooks:V,hasSpotifyTracks:$,availableSignals:z},contents:{items:H}}=e,{spec:Y,logger:W,UBIFragment:K}=(0,w.r)(o.K,{data:{uri:a}});yi(a,e.metadata);const q=(0,Ss.n)(),G=(0,n.NC)(Ii.Cf,{loadingValue:!1}),Q=(0,di.m)(),{isCompactMode:J}=(0,gi.a)(),X=s.useMemo((()=>Y.headerFactory()),[Y]),Z=s.useMemo((()=>Y.tracklistFactory()),[Y]),ee=s.useMemo((()=>Y.actionBarFactory()),[Y]),te="chart"===O?.type,ae="concerts-near-you"===O?.type&&G,se="live-streams"===O?.type,ie=["blend","celebrity-blend","friends-mix"].indexOf(O?.type||"")>-1,re=[$,j,V].filter(Boolean).length>1,le=!re&&!!V&&(0,Ms.R)(H),ne="artistsets"===O?.type||"this-is"===O?.attributes["editorial.series"],oe=O?.attributes||{},ce=oe.header_image_url_desktop||oe.image_url||null,de=U&&_,{isInlineCurationVisible:ue,showInlineCuration:me,hideInlineCuration:pe}=((e,t)=>{const[a,i]=(0,s.useState)(e&&0===t),r=(0,s.useRef)(a),{scrollNodeChildRef:l}=(0,s.useContext)(N.bi),{spec:n,logger:o}=(0,w.r)(L.e,{}),c=(0,s.useCallback)((()=>{i(!0),o.logInteraction(n.findMoreButtonFactory().hitUiReveal())}),[o,n]),d=(0,s.useCallback)((()=>{i(!1),o.logInteraction(n.closeButtonFactory().hitUiHide())}),[o,n]);return(0,s.useEffect)((()=>{l&&!r.current&&a&&l.current?.scrollIntoView({block:"end",behavior:"smooth"}),r.current=a}),[l,a]),{isInlineCurationVisible:a,showInlineCuration:c,hideInlineCuration:d}})(de,h),{productState:ge}=(0,i.d4)(ji.Ht),he=!!ge?.ads&&parseInt(ge.ads,10)>0,xe="spotify"===e.metadata.owner.username,fe=(0,i.wA)(),be=(0,r.wQ)(),Te=(0,r.zy)(),Ae=(0,n.NC)(ms.vQ3,{loadingValue:!1}),Se=(0,n.NC)(ms.UPi,{loadingValue:!1}),je=(0,I.useThisisPlaylistExtensionQuery)({uri:a},{gcTime:5*B.i,enabled:ne}).data?.playlistV2,Ce="Playlist"===je?.__typename?je.artistsOnTour?.[0]:null,Re=Se&&"Playlist"===je?.__typename?je.concerts?.items.map((e=>e.data)):null,ke=Re?.flatMap((e=>"ConcertV2"===e.__typename?[e]:[])).map((e=>{const t=[e.location.name,e.location.city].join(d.Ru.getSeparator()),a=e.artists.items.flatMap((e=>"Artist"===e.data.__typename?[e.data]:[]));return{venue:t,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:a[0]?.visuals.avatarImage?.sources[0]?.url,saved:e.saved}})),ve="POP"!==be?new URLSearchParams(Te.search).get("uid"):null,{filter:Ie}=(0,s.useContext)(R.g),{sortState:Pe}=(0,s.useContext)(k.cL),Le=(0,Ht.m)(),Ne=(0,s.useRef)(null),we=(0,s.useRef)(null),[Ue]=y,_e=(0,xi.H)(null!==ce?ce:Ue?.url||null),{contentsOptions:Oe}=(0,Qt.$)(Pe,Ie),{isPlaying:De,isActive:Be,togglePlay:Me,usePlayContextItem:Fe}=(0,wt.P)((0,ki.A)(a,Oe),{featureIdentifier:"playlist"}),Ve=(0,s.useCallback)((()=>{const e=(0,js.$I)({isPlaying:De,isActive:Be,spec:ee.playButtonFactory(),logger:W,uri:a});Me({loggingParams:e})}),[De,Be,Me,ee,W,a]);!function(e){const t=(0,fi._)(),a=(0,ye.YQ)((()=>{t.paste().then((t=>e(t)))}),500,{leading:!0,trailing:!1});(0,Ai.f)(Si,a),(0,Ti.x)(bi.W.PASTE,a)}((0,s.useCallback)((e=>{const t=e.split(/[\r\n]+/g).map((e=>(0,c.o_h)(e))).filter((e=>null!==e&&((0,c.U_m)(e)||(0,c.gHQ)(e)||(0,c.PkR)(e))));if(t.length>0&&U){const e=t.map((e=>e.toURI())),s=Ne.current?.getSelected()?.slice(-1)?.[0],i={after:s??"end"};fe((0,u.io)(a,e,i))}}),[U,fe,a]));const $e=(0,s.useCallback)((e=>{const t=[...e[f.fl.TRACKS]||[],...e[f.fl.LOCAL_TRACKS]||[],...e[f.fl.EPISODES]||[],...e[f.fl.ALBUMS]||[],...e[f.fl.AUDIOBOOKS]||[]];t.length>0&&U&&(W.logInteraction(Y.dragAddToPlaylist({playlist:a,itemToBeAdded:t[0]})),fe((0,u.io)(a,t)))}),[U,W,Y,a,fe]),ze=!xe&&0!==h,He=!le&&q&&(de&&!ue||ze),Ye=le&&q&&(de&&!ue||ze),We=S&&q,Ke=!de&&!le&&!ze&&q,qe=M?.count??1,[Ge]=(0,v.z)(),Qe="plays"===oe.rank_type,Je=(0,s.useMemo)((()=>(0,C.Ey)({isMixedMedia:re,hasEpisodes:j,hasSpotifyAudiobooks:V,hasDateAdded:D,isLive:se,isConcert:ae,isBlend:ie,nrCollaborators:qe,isBooklist:le,isCompactMode:J,isChart:te,showPlayCount:Qe,isExtraColumnsEnabled:Q})),[re,j,V,D,se,ae,ie,qe,le,J,te,Qe,Q]),Xe=(0,s.useMemo)((()=>{let e;return e=Le.getCapabilities().canSort?le?new Set(k.dh):new Set((0,C.zq)(Je)):Ui,e}),[Je,le,Le]),Ze=le&&!J,et=(0,s.useMemo)((()=>{const e=le?[f.fl.AUDIOBOOKS]:[f.fl.TRACKS,f.fl.LOCAL_TRACKS,f.fl.EPISODES,f.fl.ALBUMS];return{[b.Nz.ON]:U?e:[]}}),[U,le]),{className:tt,dropPosition:at,...st}=(0,T.A)({allowedMimeTypesByDropPosition:et,onDrop:$e}),it=ni(),rt=ci();return(0,hi.K)(a),(0,p.jsxs)(s.Suspense,{fallback:null,children:[(0,p.jsx)(P.c,{artistOrShow:e.metadata.owner.displayName,title:m,uri:a,entityType:P.p.PLAYLIST}),(0,p.jsx)(A.Q,{children:(0,Ei.Q2)({playlistName:m,userName:e.metadata.owner.displayName||"",isSpotifyOwned:xe,spotifyPlaylistTitleTagVariants:it,userPlaylistTitleTagVariants:rt,count:g})}),(0,p.jsxs)("section",{role:"presentation","data-testid":"playlist-page","data-test-uri":a,...st,children:[(0,p.jsx)(Ps.x,{metadata:e.metadata,isPlaying:De,isPublished:F,totalItems:Ge,togglePlay:Ve,backgroundColor:_e,spec:X,className:tt}),(0,p.jsxs)("div",{className:Ee.A.playlistContent,children:[(0,p.jsx)(vs,{playlist:e,capabilities:t,spec:ee,isPlaying:De,isActive:Be,togglePlay:Ve,isBooklist:le,backgroundColor:_e,tracklistDomRef:we,isConcert:ae,sortableColumns:Xe,className:tt,watchFeedEntityEntryPoint:e.metadata.watchFeedEntityEntryPoint,availableSignals:z,formatListAttributes:oe}),(0,p.jsxs)("div",{className:tt,children:[(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Pi,{formatListData:e.metadata.formatListData})}),!Se&&Ce?.upcomingEventsCount?(0,p.jsx)(Li,{artistConcertsUri:Ce.uri||"",artistImageUrl:Ce.imageUrl||"",artistName:Ce.title||"",spec:Y}):null,Se&&!!Ce&&ke&&ke.length>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:(0,p.jsx)(Ni,{liveEvents:ke,artistConcertsUri:Ce.uri||"",artistName:Ce.title||"",spec:Y})}),(0,p.jsxs)("div",{className:"contentSpacing",children:[he?(0,p.jsx)(x,{playlistUri:a}):null,he&&xe?(0,p.jsx)(wi,{uri:a,playlistName:m}):null,e.metadata.hasSpotifyAudiobooks&&Ae&&(0,p.jsxs)("div",{className:Ee.A.noBooklistSupportContainer,children:[(0,p.jsx)(l.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:d.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,p.jsx)(l.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:d.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),g>0&&(0,p.jsx)(s.Suspense,{fallback:null,children:Ze?(0,p.jsx)(ta,{initialItems:H,contextUri:a,nrItems:g,canEdit:de,canRemove:_,ariaLabel:m}):(0,p.jsx)(K,{spec:Z,children:(0,p.jsx)(E.a,{columns:Je,children:te?(0,p.jsx)(Aa,{ariaLabel:m,nrTracks:g,playlistUri:a,scrollToUid:ve,usePlayContextItem:Fe,tracklistDomRef:we,sortableColumns:Xe,isCompactMode:J},a):(0,p.jsx)(Ds,{ariaLabel:m,nrTracks:g,playlistUri:a,playlistName:m,isMixedMedia:re,isLive:se,isConcert:ae,isBlend:ie,isBooklist:le,canEdit:de,scrollToUid:ve,feedbackPath:oe["dislike-endpoint"],deleteFeedbackPath:oe["delete-endpoint"],usePlayContextItem:Fe,tracklistRef:Ne,tracklistDomRef:we,canRemove:_,spec:Z,initialItems:H,isCompactMode:J,sortableColumns:Xe,hasSpotifyAudiobooks:V??!1},a)})})}),We&&(0,p.jsx)(s.Suspense,{fallback:null,children:ue?(0,p.jsx)(Dt,{playlistUri:a,hideInlineCuration:pe,isBooklist:le}):(0,p.jsx)("button",{className:Ee.A.seeMore,onClick:me,children:(0,p.jsx)(l.E,{as:"div",variant:"bodySmallBold",children:d.Ru.get("playlist.curation.find_more")})})}),He?(0,p.jsx)("div",{"data-testid":"recommended-track",children:(0,p.jsx)(ei,{playlistUri:a,playlistLength:e.metadata.unfilteredTotalLength,canEdit:de})}):null,Ye?(0,p.jsx)(Js,{uri:a,canEdit:de}):null,Ke&&(0,p.jsx)(wa,{uri:a})]})]})]}),ae&&(0,p.jsx)(Is,{spec:Y.footerSectionFactory()})]})]})})),Oi=s.memo((function({uri:e}){const t=(0,Ht.m)().getCapabilities(),{filter:a}=(0,s.useContext)(R.g),{sortState:i}=(0,s.useContext)(k.cL),{metadataOptions:r,contentsOptions:l}=(0,Qt.$)(i,a),{data:n,isLoading:o,isError:c}=(0,vi.W)(e,r,l);return(e=>{const t=(0,Bs.j)(),a=(0,Ht.m)(),i=(0,s.useRef)(!1);(0,s.useEffect)((()=>{t&&i.current&&a.resync(e,{maybe:!0}),t||(i.current=!0)}),[t,a,e])})(e),!n||o?(0,p.jsx)(j.LoadingPage,{hasError:c,errorMessage:d.Ru.get("error.not_found.title.playlist"),loadOffline:t.canModifyOffline}):n.metadata.permissions&&!n.metadata.permissions.canView?(0,p.jsx)(S.Z,{uri:e}):(0,p.jsx)(_i,{playlist:n,capabilities:t})})),Di=()=>{const{playlistId:e}=(0,r.g)(),t=(0,c.Pse)((e||"").split("&")[0]).toURI();return(0,p.jsx)(Ri.P,{surface:Ci.u.PLAYLIST,uris:[t],children:(0,p.jsx)(k.sn,{uri:t,children:(0,p.jsx)(R.s,{uri:t,children:(0,p.jsx)(v.S,{children:(0,p.jsx)(pi,{children:(0,p.jsx)(Oi,{uri:t})})})})})})}},68882:(e,t,a)=>{a.d(t,{H:()=>k});var s=a(30758),i=a(97500),r=a.n(i),l=a(44397),n=a(83596),o=a(3118),c=a(6686),d=a(56266),u=a(93492),m=a(89913),p=a(78172),y=a(52596);var g=a(21956),h=a(48975),x=a(90630),f=a(48450),b=a(80761),T=a(82362);const A="K06ol8ltPT_atXE_JjUP",S="ZsK_P9NvvpkeVeJJQw2a",j="GDMQCw6b3Yz93pmFo5lr",C="gfkPhYWdcpnq5_F4sd7U";var R=a(86070);const k=({entryPoint:e,watchFeedTitle:t,type:a,entityUri:i})=>{const k=(0,o.NC)(x.ggJ,{loadingValue:!1}),{spec:v,logger:E}=(0,T.r)(c.f,{data:{uri:i}}),{open:I}=(0,g.P)(),P=(0,h.n)(),L=(0,s.useCallback)((()=>{E.logInteraction(v.openButtonFactory({uri:e.feedUri}).hitUiReveal()),I(e.feedUri,"entity",void 0,t)}),[e.feedUri,E,I,v,t]);if(!k||!P)return null;const N=e.thumbnail?.url,w=(e=>{switch(e){case p.c.ALBUM:return u.Ru.get("web-player.watch-feed.entity-button.label-album");case p.c.PLAYLIST:case p.c.PLAYLISTV2:return u.Ru.get("web-player.watch-feed.entity-button.label-playlist");case p.c.ARTIST:return u.Ru.get("web-player.watch-feed.entity-button.label-artist");case p.c.SHOW:case p.c.EPISODE:return u.Ru.get("web-player.watch-feed.entity-button.label-podcast");default:return(0,y.k)(e),""}})(a),U=u.Ru.get("web-player.watch-feed.entity-button.aria-label",t);return(0,R.jsx)(m.Zp,{label:w,children:(0,R.jsxs)("button",{className:A,onClick:L,"aria-label":U,children:[(0,R.jsx)(s.Suspense,{fallback:null,children:(0,R.jsx)(b.o,{loop:!1,autoplay:!0,path:(0,d.b)("animations/watch-feed-entry-point-border.json")})}),(0,R.jsxs)("div",{className:j,children:[(0,R.jsx)(f._,{loading:"eager",src:N,width:30,height:40,children:(0,R.jsx)("div",{className:C,children:(0,R.jsx)(l.B,{size:"xsmall"})})}),(0,R.jsx)("div",{className:r()("encore-over-media-set",S),children:(0,R.jsx)(n.A,{semanticColor:"textBase",size:"xsmall"})})]})]})})}},39695:(e,t,a)=>{a.d(t,{K:()=>o});var s=a(30758),i=a(62411),r=a(11260),l=a(95059),n=a(12524);const o=e=>{const t=(0,i.wA)(),a=(0,l.c)(),o=(0,i.d4)(n.uY);(0,s.useEffect)((()=>{a&&e!==o&&t((0,r.SC)(e))}),[e,o,t,a])}},46726:(e,t,a)=>{a.d(t,{H:()=>n});var s=a(30758),i=a(668),r=a(7180),l=a(63317);function n(e=null,t=i.l0o){const{backgroundColor:a}=(0,r.oI)(),n=(0,r.as)(),o=(0,l.z)(e);return(0,s.useEffect)((()=>(n((0,r.Mo)(o)),()=>{n((0,r.Hf)())})),[o,n]),a||t}},12524:(e,t,a)=>{a.d(t,{LO:()=>o,QT:()=>n,nc:()=>c,uY:()=>l});var s=a(42551),i=a(78172);const r=e=>e.seoExperiment,l=(0,s.Mz)(r,(e=>e?.uri)),n=(0,s.Mz)(r,(e=>e?.[i.c.ARTIST])),o=(0,s.Mz)(r,(e=>e?.[i.c.PLAYLIST])),c=(0,s.Mz)(r,(e=>e?.[i.c.PLAYLISTV2]))},80761:(e,t,a)=>{a.d(t,{o:()=>s.o});var s=a(4692)},13946:(e,t,a)=>{a.d(t,{P:()=>s.P});var s=a(6704)},46777:(e,t,a)=>{a.d(t,{X:()=>i});var s=a(45176);function i(e){return[s.kw.YES,s.kw.DOWNLOADING,s.kw.WAITING].includes(e)}},27931:(e,t,a)=>{function s(e,t){return{uri:e,playlistQueryOptions:t}}a.d(t,{A:()=>s})},17807:(e,t,a)=>{a.d(t,{L$:()=>o,Q2:()=>c,hV:()=>n,j2:()=>l,pr:()=>u,qc:()=>r,rO:()=>d});var s=a(88176),i=a(2036);const r=({albumArtists:e,albumName:t,albumType:a,shouldLocalize:r,i18n:l})=>{if(!a||!t||!e)return"";const n=a!==s._m.Ep?(e=>e.charAt(0).toUpperCase()+e.toLowerCase().slice(1))(a):a,o=(0,i.C)(a),c=`${t} - ${n} by ${e} | Spotify`,d=l.get("i18n.meta.album.title",t,o,e);return r?d:c},l=({i18n:e,shouldLocalize:t,artistTitleTagExperimentVariants:a={artistTitleTagSongsVariantEnabled:!1,artistTitleTagSongsAndMoreVariantEnabled:!1,artistTitleTagSongsAndMusicVariantEnabled:!1},artistName:s})=>{if(!s)return"";const{artistTitleTagSongsVariantEnabled:i,artistTitleTagSongsAndMoreVariantEnabled:r,artistTitleTagSongsAndMusicVariantEnabled:l}=a;if(t){if(i)return e.get("i18n.meta.artist.title.artist-songs",s);if(l)return e.get("i18n.meta.artist.title.artist-songs-and-music",s);if(r)return e.get("i18n.meta.artist.title.artist-songs-and-more",s)}return`${s} | Spotify`},n=({showOrAudiobookName:e,type:t})=>e?`${e} | ${t} on Spotify`:"",o=({episodeOrChapterName:e,showOrAudiobookName:t,type:a})=>e&&t?`${e} - ${t} | ${a} on Spotify`:"",c=({playlistName:e,userName:t,isSpotifyOwned:a=!1,spotifyPlaylistTitleTagVariants:s={spotifyPlaylistTitleTagVariant1Enabled:!1,spotifyPlaylistTitleTagVariant2Enabled:!1,spotifyPlaylistTitleTagVariant3Enabled:!1},userPlaylistTitleTagVariants:i={userPlaylistTitleTagVariant1Enabled:!1,userPlaylistTitleTagVariant2Enabled:!1,userPlaylistTitleTagVariant3Enabled:!1},count:r})=>{if(!e||!t)return"";const{spotifyPlaylistTitleTagVariant1Enabled:l,spotifyPlaylistTitleTagVariant2Enabled:n,spotifyPlaylistTitleTagVariant3Enabled:o}=s,{userPlaylistTitleTagVariant1Enabled:c,userPlaylistTitleTagVariant2Enabled:d,userPlaylistTitleTagVariant3Enabled:u}=i;if(r){const s=r>1?"Songs":"Song",i=r>1?"songs":"song";if(a){if(l)return`${e} - ${r} ${s} | Spotify Playlist`;if(n)return`${e} - Top ${r} ${s} | Spotify Playlist`;if(o)return`${e} - ${r} ${s} - playlist by Spotify`}if(c)return`${e} - playlist by ${t} - ${r} ${i} | Spotify`;if(d)return`${e} - ${r} ${i} - playlist by ${t} | Spotify`;if(u)return`${e} - ${r} ${i} | Spotify`}return`${e}${a?"":` - playlist by ${t}`} | ${a?"Spotify Playlist":"Spotify"}`},d=({i18n:e,trackArtistsList:t,trackName:a,shouldLocalize:s,disabled:i=!1})=>{if(!t||!a)return"";let r=`${a} - song and lyrics by ${t} | Spotify`,l=e.get("i18n.meta.track-lyrics.title",a,t);return i&&(r=`${a} - song by ${t} | Spotify`,l=e.get("i18n.meta.track.title",a,t)),s?l:r},u=({i18n:e,shouldLocalize:t})=>{const a=e.get("i18n.meta.home.title");return t?a:"Spotify - Web Player: Music for everyone"}},41801:(e,t,a)=>{a.d(t,{F$:()=>r,lM:()=>n,sH:()=>l});var s=a(17108);const i=({treatment:e,entityId:t,experimentId:a,treatmentVariation:s})=>{if(e&&e[t]){const i=e[t].find((e=>e.experimentId===a));return i?.treatment===s}return!1},r=(e,t,a)=>i({treatment:e,entityId:t,experimentId:s.R7.ARTIST_TITLE_TAG_TEST,treatmentVariation:a}),l=(e,t,a)=>i({treatment:e,entityId:t,experimentId:s.R7.SPOTIFY_PLAYLIST_TITLE_TAG_TEST,treatmentVariation:a}),n=(e,t,a)=>i({treatment:e,entityId:t,experimentId:s.R7.USER_PLAYLIST_TITLE_TAG_TEST,treatmentVariation:a})},17108:(e,t,a)=>{a.d(t,{R7:()=>s,T:()=>i,mm:()=>r});let s=function(e){return e.TEST="test",e.ARTIST_TITLE_TAG_TEST="artist_title_tag",e.SPOTIFY_PLAYLIST_TITLE_TAG_TEST="playlist_title_tag_spotify",e.USER_PLAYLIST_TITLE_TAG_TEST="playlist_title_tag_user",e}({}),i=function(e){return e.CONTROL="0",e.VARIANT_1="1",e.VARIANT_2="2",e.VARIANT_3="3",e}({}),r=function(e){return e.CONTROL="0",e.SONGS="1",e.SONGS_AND_MUSIC="2",e.SONGS_AND_MORE="3",e}({})},6506:(e,t,a)=>{a.d(t,{A:()=>s});const s={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);