"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3890],{6443:(e,a,t)=>{t.d(a,{J:()=>c});var n=t(44947),r=t(49810);const i=new n.l("getTrack","query","9c7858f12cbd045bb1a4473291e3076ab05dbd3247f8542a690d59afd1d26ae0",null),c=(e,a)=>(0,r.I)(i,e,a)},153:(e,a,t)=>{t.r(a),t.d(a,{default:()=>p});var n=t(30758),r=t(62411),i=t(85387),c=t(72574),o=t(93492),d=t(99035),s=t(6443),l=t(98962),u=t(49810),k=t(64273),f=t(27653),g=t(88176),b=t(86070);const m=n.memo((function(){const e=(0,i.Zp)(),a=(0,i.zy)(),t=(0,f.m)(),m=(0,k.z)(),{trackId:p=""}=(0,i.g)(),{isAnonymous:h}=(0,r.d4)(l.Ht),y=(0,n.useMemo)((()=>new URLSearchParams(a.search)),[a.search]),U=y.get("context")||"",T=(0,c.Mce)(p).toURI(),I=(0,s.J)({uri:T},{gcTime:30*u.i}),_="Track"===I.data?.trackUnion.__typename&&I.data?.trackUnion?.playability.playable,w=(0,n.useCallback)(((a,t,n)=>{const r=m.getState(),i=(0,c.o_h)(t||a)?.toURLPath(!0);y.delete("context");const o=y.toString()?`&${y.toString()}`:"",d=`${i}?highlight=${T}${o}`;if(h)e(d);else{if((!r||r.isPaused)&&_){const e=Number.isInteger(n)&&void 0!==n?{skipTo:{index:n}}:void 0;m.play({uri:a},{featureIdentifier:"track",referrerIdentifier:"deeplink"},e)}e(d,{replace:!0})}}),[m,y,T,h,e,_]),x=(0,n.useCallback)((()=>{if(!I.loading&&I.data?.trackUnion&&"Track"===I.data.trackUnion.__typename){const e=(I.data.trackUnion.albumOfTrack?.tracks?.items??[]).findIndex((e=>e.track.uri===T)),a=I.data?.trackUnion?.firstArtist?.items[0]?.uri;if(I.data.trackUnion.mediaType===g.IX.Video)return void w(T,a);e>=0&&w(I.data.trackUnion.albumOfTrack?.uri||"",I.data.trackUnion.albumOfTrack?.uri||"",e)}}),[w,I,T]);return(0,n.useEffect)((()=>{const e=(0,c.tbX)(U);U&&e?t.getContents(U).then((e=>{const a=e.items.findIndex((e=>e?.uri===T));a<0?x():w(U,U,a)})):x()}),[U,x,w,t,T]),I.loading||I.error||"Track"!==I.data?.trackUnion?.__typename?(0,b.jsx)(d.LoadingPage,{hasError:!I.loading,errorMessage:o.Ru.get("track-page.error")}):null})),p=m}}]);