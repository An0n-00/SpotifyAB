"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[6457],{50532:(e,t,r)=>{r.d(t,{p:()=>u});var i=r(30758),n=r(62411),a=r(30320),l=r(12032),s=r(56695),o=r(48975),c=r(36663),d=r(86070);const u=i.memo((function({uri:e,divider:t,removeLabel:r}){const u=(0,n.wA)(),p=!(0,o.n)(),g=(0,c.f)(),y=(0,i.useCallback)((async()=>{u((0,l.aw)(e,!0))}),[u,e]);return(0,d.jsx)(s.D,{role:"menuitem",divider:t,disabled:p&&!g?.getCapabilities().canModifyOffline,onClick:y,leadingIcon:(0,d.jsx)(a.k,{semanticColor:"textBrightAccent",size:"small"}),children:r})}))},2103:(e,t,r)=>{r.d(t,{P:()=>f});var i=r(30758),n=r(93492),a=r(55669),l=r(42026),s=r(38246),o=r(2082),c=r(61890),d=r(50532),u=r(24395),p=r(68508),g=r(69611),y=r(78172),m=r(86070);const f=i.memo((function({uri:e,artistUri:t,canPin:r=p.oT.NO,isPinned:i=!1,canRemove:f=!1}){const{spec:x}=(0,g.o)(e);return(0,m.jsx)(u.pZ,{value:"album",children:(0,m.jsxs)(a.W,{children:[f&&(0,m.jsx)(d.p,{uri:e,removeLabel:n.Ru.get("contextmenu.remove-from-library")}),t&&(0,m.jsx)(s.z,{spec:x,divider:"after",uri:t,displayText:n.Ru.get("contextmenu.go-to-artist-radio")}),r!==p.oT.NO&&(0,m.jsx)(c.k,{uri:e,canPin:r,isPinned:i,type:y.c.PRE_RELEASE_ALBUM,spec:x}),(0,m.jsx)(l.m,{uri:e,spec:x,displayText:n.Ru.get("context-menu.copy-album-link")}),(0,m.jsx)(o.q,{spec:x,divider:"before",uri:e})]})})}))},67507:(e,t,r)=>{r.d(t,{u:()=>b});var i=r(30758),n=r(40565),a=r(3118),l=r(93492),s=r(55669),o=r(56695),c=r(42026),d=r(2082),u=r(61890),p=r(48785),g=r(90630),y=r(24395),m=r(68508),f=r(69611),x=r(78172),h=r(86070);const b=i.memo((function({uri:e,onClickNotInterested:t,canPin:r=m.oT.NO,isPinned:i=!1}){const{spec:b}=(0,f.o)(e),v=(0,a.NC)(g.ihJ);return(0,h.jsx)(y.pZ,{value:"concert",children:(0,h.jsxs)(s.W,{children:[!!t&&(0,h.jsx)(o.D,{role:"menuitem",leadingIcon:(0,h.jsx)(n.P,{semanticColor:"textSubdued",size:"small"}),onClick:t,children:l.Ru.get("concerts.not_interested.title")}),r!==m.oT.NO&&v&&(0,h.jsx)(u.k,{uri:e,canPin:r,isPinned:i,type:x.c.CONCERT,spec:b}),(0,h.jsx)(p.h,{children:(0,h.jsx)(c.m,{spec:b,uri:e,displayText:l.Ru.get("context-menu.copy-concert-link")})}),(0,h.jsx)(d.q,{spec:b,uri:e})]})})}))},66987:(e,t,r)=>{r.d(t,{T:()=>s});var i=r(30758),n=r(5604),a=r(52956),l=r(86070);const s=({children:e,columnIndex:t,className:r,...s})=>{const o=(0,i.useRef)(null);return(0,a.g)(o),(0,n.l)(o),(0,l.jsx)("div",{ref:o,className:r,role:"gridcell","aria-colindex":t+1,...s,children:e})}},5604:(e,t,r)=>{r.d(t,{l:()=>n});var i=r(30758);const n=e=>{(0,i.useEffect)((()=>{if(!e.current)return;let t=e.current.parentElement;do{if(!t)return;t.getAttribute("role")||t.setAttribute("role","presentation"),t=t.parentElement}while("grid"!==t?.getAttribute("role"))}),[e])}},69156:(e,t,r)=>{r.d(t,{$:()=>u});var i=r(30758),n=r(2164),a=r(70824);function l(e,t,r=!0,i=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,a.fk)(e))return;const l=e.querySelector('[tabindex="0"]');t===n.O.UP&&(0,a.MS)(l,s(e,l,n.O.UP,r,i)),t===n.O.DOWN&&(0,a.MS)(l,s(e,l,n.O.DOWN,r,i))}function s(e,t,r,i,l){const s=t.closest('li[role="listitem"]');if(!s)return t;let o=s,c=t;const d=Array.from(e.querySelectorAll('li[role="listitem"]')),u=d.indexOf(s);if(u<0)return t;if(r===n.O.UP){if(document.activeElement===e){if(o=d[d.length-1],l){const e=o?.querySelectorAll(a.nu);c=e[e.length-1]}else c=o?.querySelector(a.nu);return c??t}if(l){const e=Array.from(s.querySelectorAll(a.nu)),r=e.indexOf(t)-1;if(r>=0)return e[r]}let r=u-1;const n=()=>!c&&(!i&&r>=0||i&&u!==r);do{o=d[r];if(i&&!o&&(r=d.length-1,o=d[r]),l){const e=o?.querySelectorAll(a.nu);c=e?e[e.length-1]:null}else c=o?.querySelector(a.nu);r-=1}while(n())}else if(r===n.O.DOWN){if(document.activeElement===e)return o=d[0],c=o?.querySelector(a.nu),c??t;if(l){const e=Array.from(s.querySelectorAll(a.nu)),r=e.indexOf(t)+1;if(r<e.length)return e[r]}let r=u+1;const n=()=>{const e=!i&&r<=d.length;return!c&&(e||i&&u!==r)};do{o=d[r];i&&!o&&(r=0,o=d[r]),c=o?.querySelector(a.nu),r+=1}while(n())}return c||t}var o=r(89977),c=r(43365),d=r(86070);const u=(0,i.forwardRef)((({onKeyDown:e,children:t,circular:r=!0,allowsMultipleInteractiveChildrenInItem:s=!1,...u},p)=>{const g=(0,c.N)(p);(0,o.R)(g);const y=(0,i.useCallback)((t=>{g.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key||(t.preventDefault(),document.documentElement.classList.remove("no-focus-outline")),"ArrowUp"===t.key&&l(g.current,n.O.UP,r,s),"ArrowDown"===t.key&&l(g.current,n.O.DOWN,r,s),e?.(t))}),[r,s,g,e]),m=(0,i.useCallback)((e=>{if(!g.current)return;const t=e.target,r=g.current.querySelector('[tabindex="0"]');t.closest('li[role="listitem"]')&&t!==r&&(0,a.MS)(r,t,{preventScroll:!0})}),[g]);return(0,d.jsx)("ul",{role:"list",ref:g,onKeyDown:y,onFocus:m,tabIndex:0,...u,children:t})}))},48405:(e,t,r)=>{r.d(t,{c:()=>l});var i=r(30758),n=r(52956),a=r(86070);const l=({children:e,innerRef:t,...r})=>{const l=(0,i.useRef)(null),s=t??l;return(0,n.g)(s),(0,a.jsx)("li",{ref:s,role:"listitem",...r,children:e})}},3408:(e,t,r)=>{r.d(t,{R:()=>g});var i=r(30758),n=r(2164),a=r(70824);function l(e,t,r=!1){if(!e)return void console.error("No list element found. Canceling moving focus");if(!(0,a.fk)(e))return;const i=e.querySelector('[tabindex="0"]');t===n.O.UP&&(0,a.MS)(i,s(e,i,n.O.UP,r)),t===n.O.DOWN&&(0,a.MS)(i,s(e,i,n.O.DOWN,r)),t===n.O.RIGHT&&(0,a.MS)(i,o(i,n.O.RIGHT,r)),t===n.O.LEFT&&(0,a.MS)(i,o(i,n.O.LEFT,r)),t===n.O.HOME&&(0,a.MS)(i,c(n.O.HOME,r)??i),t===n.O.END&&(0,a.MS)(i,c(n.O.END,r)??i)}function s(e,t,r,i=!1){const l=t.closest('li[role="row"]');if(!l)return t;let s=l;const c=Array.from(e.querySelectorAll('li[role="row"]')),d=Array.from(l.querySelectorAll(a.nu)),u=c.indexOf(l);if(u<0)return t;const p=(i&&t!==d[0]||!i&&t!==l)&&!(t instanceof HTMLLIElement);if(r===n.O.UP){if(document.activeElement===e){s=c[c.length-1];return(i?s.querySelector(a.nu):s)??t}if(p)return o(t,n.O.LEFT,i);let r=u-1;if(-1===r)return t;s=c[r],r-=1}else if(r===n.O.DOWN){if(document.activeElement===e){s=c[0];return(i?s.querySelector(a.nu):s)??t}if(p)return o(t,n.O.RIGHT,i);let r=u+1;if(r===c.length)return t;s=c[r],r+=1}return(i?s.querySelector(a.nu):s)??t}function o(e,t,r=!1){const i=e.closest('li[role="row"]');if(!i)return e;let l=e;const s=Array.from(i.querySelectorAll(a.nu)),o=s.indexOf(e);let c=0;if(t===n.O.RIGHT&&o-1!==s.length)c=o+1;else{if(t===n.O.LEFT&&-1===o)return i;if(t===n.O.LEFT&&0!==o)c=o-1;else if(t===n.O.LEFT&&0===o){return(r?i.querySelector(a.nu):i)??i}}return l=s.at(c),l??e}function c(e,t=!1){const{currentFocus:r,listEl:i}=function(){const e=document.activeElement,t=e?.closest("ul");return((0,n.I)(e)||e instanceof HTMLLIElement)&&t?{currentFocus:e,listEl:t}:{currentFocus:null,listEl:null}}();if(null===r||null===i)return null;const l=r.closest('li[role="row"]');if(!l)return r;const s=Array.from(i.querySelectorAll('li[role="row"]')),o=Array.from(l.querySelectorAll(a.nu));if(s.indexOf(l)<0)return r;const c=t&&r===o[0]||!t&&r===l;if(e===n.O.HOME){if(c){return(t?s[0].querySelector(a.nu):s[0])??r}return(t?o[1]:o[0])??r}if(e===n.O.END){if(c){return(t?s[s.length-1].querySelector(a.nu):s[s.length-1])??r}return o[o.length-1]??r}return r}var d=r(89977),u=r(43365),p=r(86070);const g=(0,i.forwardRef)((({onKeyDown:e,children:t,firstInteractiveIsWrapper:r=!1,...s},o)=>{const c=(0,u.N)(o);(0,d.R)(c);const g=(0,i.useCallback)((t=>{c.current?.contains(t.target)&&("ArrowUp"!==t.key&&"ArrowDown"!==t.key&&"Home"!==t.key&&"End"!==t.key||t.preventDefault(),"ArrowUp"!==t.key&&"ArrowDown"!==t.key||document.documentElement.classList.remove("no-focus-outline"),"ArrowUp"===t.key&&l(c.current,n.O.UP,r),"ArrowDown"===t.key&&l(c.current,n.O.DOWN,r),"ArrowRight"===t.key&&l(c.current,n.O.RIGHT,r),"ArrowLeft"===t.key&&l(c.current,n.O.LEFT,r),"Home"===t.key&&l(c.current,n.O.HOME,r),"End"===t.key&&l(c.current,n.O.END,r),e?.(t))}),[r,c,e]),y=(0,i.useCallback)((e=>{if(!c.current)return;const t=e.target,r=c.current.querySelector('[tabindex="0"]');t.closest('li[role="row"]')&&t!==r&&(0,a.MS)(r,t,{preventScroll:!0})}),[c]);return(0,p.jsx)("ul",{role:"treegrid",ref:c,onKeyDown:g,onFocus:y,tabIndex:0,...s,children:t})}))},64493:(e,t,r)=>{r.d(t,{W:()=>l});var i=r(30758),n=r(52956),a=r(86070);const l=({children:e,innerRef:t,reRunOnDOMUpdate:r=!1,...l})=>{const s=(0,i.useRef)(null),o=t??s;return(0,n.g)(o,r),(0,a.jsx)("li",{ref:o,"aria-expanded":"true","aria-level":1,role:"row",...l,children:e})}},28784:(e,t,r)=>{r.d(t,{e:()=>l});var i=r(72332);const n="k270skPbT7JOaSidSA2a";var a=r(86070);const l=({iconSize:e=64,...t})=>(0,a.jsx)("div",{className:n,children:(0,a.jsx)(i.E,{iconSize:e,...t,semanticColor:"textBrightAccent","aria-hidden":!0})})},24810:(e,t,r)=>{r.d(t,{g:()=>s});var i=r(91259),n=r(93492),a=r(65349),l=r(86070);const s=({pinned:e,size:t="xsmall"})=>e?(0,l.jsx)(i.H,{semanticColor:"textBrightAccent",size:t,title:n.Ru.get("web-player.your-library-x.pinned"),className:a.A.icon}):null},46106:(e,t,r)=>{r.d(t,{$I:()=>l,Qv:()=>a,R2:()=>n});var i=r(45176);const n=(e,t)=>{const r=e.contextMenuButtonFactory().hitUiReveal();t.logInteraction(r)},a=(e,t,r,n)=>{let a;e===i.NV.ADD?a=t.hitDownload({itemToDownload:n}):e===i.NV.REMOVE?a=t.hitRemoveDownload({itemToRemoveFromDownloads:n}):e===i.NV.NO_PERMISSION&&(a=t.hitUiReveal?.()),a&&r.logInteraction(a)},l=({isPlaying:e,isActive:t,spec:r,logger:i,uri:n})=>{let a;return a=e?r.hitPause({itemToBePaused:n}):t?r.hitResume({itemToBeResumed:n}):r.hitPlay({itemToBePlayed:n}),i.logInteraction(a)}},97204:(e,t,r)=>{r.d(t,{L:()=>p});var i=r(30758),n=r(29844);const a="JUa6JJNj7R_Y3i4P8YUX",l="lyVkg68L7ycnwyOcO3vj",s="qnYVzttodnzg9WdrVQ1p";var o=r(21053),c=r(86070);const d=(e,t)=>(0,c.jsx)("div",{style:{height:e}},t),u=()=>"undefined"!=typeof window&&"requestIdleCallback"in window,p=({renderRows:e,nrRows:t,rowHeight:r,scrollNodeRef:p,nrRowsOverscan:g=10,renderPlaceholder:y=d})=>{const m=(0,o.a)(),f=(0,i.useRef)(null),x=(0,i.useRef)(null),h=(0,i.useRef)(null),b=(0,i.useRef)(0),[v,S]=(0,i.useState)(u()?0:g),[P,w]=(0,i.useState)(null),[T,C]=(0,i.useState)(0),R=(0,i.useCallback)((()=>{const e=p.current;if(!e)return;const t=Math.ceil(e.offsetHeight/r)+2;C(t)}),[p,r]),A=(0,i.useCallback)((()=>{const e=p.current;if(!e)return;const t=Math.floor((e.scrollTop-b.current-1)/r);w(t)}),[r,p]);(0,i.useEffect)((()=>{u()&&window.requestIdleCallback((()=>{m()&&S(g)}))}),[m,g]),(0,i.useLayoutEffect)((()=>{const e=h.current,t=p.current;e&&t&&(b.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[p,h.current?.offsetTop]),(0,i.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&A()}))}));return f.current&&e.observe(f.current),x.current&&e.observe(x.current),()=>{e.disconnect()}}),[A,P,T,t]),(0,i.useLayoutEffect)((()=>{R(),A()}),[R,A]),(0,n.w)({refOrElement:p,observeOnly:"height",onResize:R});const I=(P??0)-v,D=Math.min(null!==P?I+2*v+T-1:-1,t-1),j=Math.max(I,0),O=Math.max(D,-1),E=Math.min(T>0?t*r:0,Math.max(r*(v-2),0)),L=r*j,k=r*t,N=k-r*Math.max(t-(O+1),0);return(0,c.jsxs)("div",{ref:h,className:a,style:{height:`${k}px`,"--row-height":`${r}px`},role:"presentation",children:[(0,c.jsxs)("div",{ref:f,"data-testid":"top-sentinel",className:l,style:{height:`${L+E}px`},role:"presentation",children:[y(`calc(100% - ${E}px)`,"top-sentinel"),(0,c.jsx)("div",{style:{height:`${E}px`},role:"presentation"})]}),(0,c.jsx)("div",{style:{transform:`translateY(${L}px)`},role:"presentation",children:e(j,O)}),(0,c.jsxs)("div",{ref:x,"data-testid":"bottom-sentinel",className:s,style:{height:`calc(100% - ${N}px + ${E}px)`},role:"presentation",children:[(0,c.jsx)("div",{style:{height:`${E}px`},role:"presentation"}),y(`calc(100% - ${E}px)`,"bottom-sentinel")]})]})}},19988:(e,t,r)=>{r.d(t,{Nz:()=>s,Vp:()=>a,Vv:()=>o,wD:()=>c,xz:()=>l});var i=r(20256),n=r(56563);const a=[i.fl.TRACKS,i.fl.LOCAL_TRACKS,i.fl.ALBUMS,i.fl.ARTISTS,i.fl.AUTHORS,i.fl.PLAYLISTS,i.fl.PLAYLISTS_V2,i.fl.FOLDERS,i.fl.EPISODES,i.fl.CHAPTERS,i.fl.SHOWS,i.fl.AUDIOBOOKS,i.fl.PSEUDO_PLAYLISTS],l={[i.fl.TRACKS]:"tracks",[i.fl.ALBUMS]:"albums",[i.fl.ARTISTS]:"artists",[i.fl.AUTHORS]:"authors",[i.fl.PLAYLISTS]:"playlists",[i.fl.FOLDERS]:"folders",[i.fl.SHOWS]:"shows",[i.fl.EPISODES]:"episodes",[i.fl.CHAPTERS]:"chapters",[i.fl.LOCAL_TRACKS]:"local-tracks",[i.fl.AUDIOBOOKS]:"audiobooks",[i.fl.PSEUDO_PLAYLISTS]:"pseudo-playlists"};let s=function(e){return e.ON="on",e.BEFORE="before",e.AFTER="after",e}({});const o=(0,n.g)(s);function c(e){return a.includes(e)}},34437:(e,t,r)=>{r.d(t,{A:()=>f});var i=r(30758),n=r(88308),a=r(20256),l=r(19988);function s(e,t,r,i){if(e.defaultPrevented)return null;const n=t.includes(l.Nz.BEFORE),a=t.includes(l.Nz.AFTER);let s=l.Nz.ON;if(e.currentTarget instanceof HTMLElement&&(n||a)){const{top:a,height:o,left:c,width:d,right:u}=e.currentTarget.getBoundingClientRect(),p=t.includes(l.Nz.ON);if("horizontal"===r)if(p&&n){(i?e.clientX>Math.round(u)-d/4:e.clientX<Math.round(c)+d/4)&&(s=l.Nz.BEFORE)}else{s=(i?e.clientX>Math.round(u)-d/2:e.clientX<Math.round(c)+d/2)?l.Nz.BEFORE:l.Nz.AFTER}else"vertical"===r&&(p&&n?e.clientY<Math.round(a)+o/4&&(s=l.Nz.BEFORE):s=e.clientY<Math.round(a)+o/2?l.Nz.BEFORE:l.Nz.AFTER)}return t.includes(s)?s:null}var o=r(72574);function c(e,t){return Array.from(e.dataTransfer?.types??[]).filter(a._4).filter((e=>!!(0,l.wD)(e)&&t.includes(e))).filter(l.wD)}var d=r(98628);function u(e,t,r){const i=c(e,t);if(!i.length)return function(e,t){return e.split(/[\s,;]+/g).map((e=>(0,o.o_h)(e?.trim()))).filter(d.P).reduce(((e,r)=>{const i=a.Ay[r.type];return(0,l.wD)(i)&&t.includes(i)?(e[i]||=[],e[i].push(r.toURI()),e):e}),{})}(e.dataTransfer?.getData("text/plain"),t);const n=Object.fromEntries(i.map((t=>[t,e.dataTransfer?.getData(t)?.split("\n").filter(Boolean)??[]])));if(r){const{[a.fl.PLAYLISTS]:e,...t}=n,r=Array.from(new Set([...n[a.fl.PLAYLISTS_V2]??[],...(n[a.fl.PLAYLISTS]??[]).map(p)]));return{...t,...r.length?{[a.fl.PLAYLISTS_V2]:r}:null}}return n}function p(e){const t=(0,o.o_h)(e);return t?.type===o.NQG.PLAYLIST?(0,o.Pse)(t.id).toURI():e}var g=r(74568),y=r(13867);const m={droppableMimeTypes:"albums artists authors episodes chapters folders playlists shows tracks local-tracks audiobooks pseudo-playlists",useDropTarget:"NxEINIJHGytq4gF1r2N1","useDropTarget--albums":"O0AN8Ty_Cxd4iLwyKATB","useDropTarget--artists":"wQnUXn1m6Gy4PH8jhslb","useDropTarget--authors":"CU0fvofmxUbTupSDNOQ3","useDropTarget--episodes":"XNjgtSbyhshr7YQcVvry","useDropTarget--chapters":"OxrHhBsQAggwnv6RmqRy","useDropTarget--folders":"mhuhir0ikRqXAPHU8ZZ1","useDropTarget--playlists":"D8wJ9TPfJzLeLJYxnad2","useDropTarget--shows":"oE8LAmRhbeQqsZrQo4lb","useDropTarget--tracks":"or84FBarW2zQhXfB9VFb","useDropTarget--local-tracks":"odS2IW9wfNVHhkhc0l_X","useDropTarget--audiobooks":"zWWLnqWslTLHwq3wBgGB","useDropTarget--pseudo-playlists":"pTvxY5yAQklZgb7VZFGS"};function f({uri:e,id:t=e,allowedMimeTypesByDropPosition:r,onDrop:o,onLongDragOver:d,longDragOverTimeout:p=1e3,reorderDirection:f="vertical"}){const h=(0,n.lB)((()=>r),[r]),b=(0,y.W)(),v=(0,g.wK)(),S=!!t&&1===v.length&&v[0]===t,P=Object.values(h).every((e=>e.includes(a.fl.PLAYLISTS_V2)&&!e.includes(a.fl.PLAYLISTS))),[w,T]=(0,i.useState)(null),C=(0,i.useCallback)((e=>S?[]:Object.entries(h).filter((([t,r])=>c(e,r).length>0)).map((([e])=>e)).filter(l.Vv)),[S,h]),R=(0,i.useRef)(!0),A=(0,i.useRef)(null),I=(0,i.useRef)(o);I.current=o;const D=(0,i.useRef)(d);D.current=d;const j=(0,i.useCallback)((()=>{R.current=!0,T(null),A.current&&(window.clearTimeout(A.current),A.current=null)}),[]);(0,i.useEffect)((()=>j),[j]);const O=(0,i.useCallback)((e=>{const t=C(e);t.length&&(T(s(e,t,f,b)),e.dataTransfer&&!e.defaultPrevented&&(e.dataTransfer.dropEffect=t.includes(l.Nz.ON)?"copy":"move"),e.preventDefault())}),[C,b,f]),E=(0,i.useCallback)((e=>{if(C(e).length&&!e.defaultPrevented){if(R.current){R.current=!1;const t=e.currentTarget,r=()=>{document.contains(t)||(j(),document.removeEventListener("dragenter",r))};document.addEventListener("dragenter",r),document.addEventListener("dragend",(()=>{document.removeEventListener("dragenter",r),j()}),{once:!0}),D.current&&(A.current=window.setTimeout((()=>{D.current?.()}),p))}e.preventDefault()}}),[C,p,j]),L=(0,i.useCallback)((e=>{C(e).length&&(function(e){return null===e.relatedTarget&&x?!document.elementsFromPoint(e.clientX,e.clientY).includes(e.currentTarget):!e.currentTarget.contains(e.relatedTarget instanceof Node?e.relatedTarget:null)}(e)&&j(),e.preventDefault())}),[C,j]),k=(0,i.useCallback)((e=>{const t=s(e,C(e),f,b);if(!e.defaultPrevented&&t){const r=u(e,h[t]??[],P),i=function(e){return{sectionId:parseInt(e.dataTransfer.getData("text/x-spotify-section"),10)||0,contextUri:e.dataTransfer.getData("text/x-spotify-context"),itemIds:e.dataTransfer.getData(a.fl.UIDS)?.split("\n").filter(Boolean)??[]}}(e);Object.keys(r).length&&I.current&&(I.current(r,t,i),e.preventDefault())}j()}),[C,f,b,j,h,P]),N=(0,i.useMemo)((()=>`${m.useDropTarget} ${Array.from(new Set(Object.values(h).flat()))?.map((e=>m[`useDropTarget--${l.xz[e]}`]??"")).join(" ")}`),[h]);return(0,i.useMemo)((()=>({dropPosition:w,className:N,onDragEnter:E,onDragLeave:L,onDragOver:O,onDrop:k})),[N,w,E,L,O,k])}const x=/^((?!chrome|android).)*safari/i.test(navigator.userAgent)},89977:(e,t,r)=>{r.d(t,{R:()=>n});var i=r(30758);const n=e=>{const[t,r]=(0,i.useState)(null);(0,i.useEffect)((()=>{const t=e.current;if(!t)return()=>{};const i=({target:e})=>{e instanceof HTMLElement&&r(e)};return t.addEventListener("focusout",i),()=>{t.removeEventListener("focusout",i)}}),[e]),(0,i.useEffect)((()=>{const i=e.current;if(!t||!i)return;const n=i.contains(t),a=i.contains(document.activeElement);!n&&!a&&i.focus({preventScroll:!0}),r(null)}),[e,t])}},86263:(e,t,r)=>{r.d(t,{X:()=>u,A:()=>z});var i=r(30758),n=r(21974),a=r(38109),l=r(93492),s=r(93079),o=r(1038);const c="KsnGjjEeMb2miriJrkjW";var d=r(86070);const u=()=>{const e=l.Ru.getLocaleForTranslation(),t=o.IB[e]??o.IB.en,r=(0,s.ZZ)(),u=(0,i.useCallback)((()=>{r({type:"OPEN"})}),[r]);return(0,d.jsx)("div",{className:c,children:(0,d.jsx)(n.n,{iconLeading:a.d,size:"small",onClick:u,"data-testid":"language-selection-button",children:t.displayName})})};var p=r(8143),g=r(62411),y=r(13505),m=r(75635),f=r(72574),x=r(16077),h=r(93311),b=r(78172),v=r(18374),S=r(81531);const P="ZpqHX3kvsJIsR1QIc4kf",w=({children:e,locale:t,onClick:r,type:i="button"})=>{const n=t===h.Xn,a=(0,S.vf)(window.location.pathname),s=(0,f.o_h)(window.location.pathname),o=(0,x.W)({type:"route",uri:a?b.c.HOME:s?.toURI()}),c={className:P,id:t,onClick:e=>(e=>{if("button"===i){e.preventDefault();const t=new URL(window.location.href);window.location.href.includes("locale")&&t.searchParams.delete("locale"),window.location.href=t.href}r(t)})(e),"data-testid":`language-option-${t}`};if("link"===i){const r=(0,v.ll)(window.location.pathname,!n),i=(0,v.hF)(r,(0,l.a7)(t).baseName),a=o?i:window.location.pathname,s=(e=>e.endsWith("/")?e.slice(0,-1):e)(`${window.location.origin}${a}`);return(0,d.jsx)("a",{href:s,...c,children:e})}return(0,d.jsx)("button",{...c,children:e})},T="eYLSfS4EKfwsdTsItWkY",C=({style:e,children:t})=>(0,d.jsx)("div",{className:T,style:e,children:t});var R=r(97500),A=r.n(R);const I="KPuW9eE4auKgVgMtPZoH",D="zCedVxWmwaJhPIGzJixP",j="qzuG9AHNXHQrOGF06r9A",O="ZgjCz5A7qOyprtvcLK8y",E="BSwvSvqHiQUVuim4Eidv",L="TpluDuF12UKv3IIq_VDu",k=({onClose:e,children:t})=>{const r=(0,i.useRef)(null),{isOpen:n}=(0,s.iL)();return(0,d.jsx)("div",{"data-testid":"language-selection-modal",className:A()(I,{[D]:n}),onClick:t=>{t.target===r.current&&e()},role:"presentation",ref:r,children:t})},N=({ariaDescribedBy:e,ariaLabelledBy:t,children:r})=>{const{isOpen:i}=(0,s.iL)();return(0,d.jsx)("div",{className:j,role:"dialog",hidden:!i,"aria-modal":!0,"aria-labelledby":t,"aria-describedby":e,children:r})};var F=r(27508);const M=({onClose:e})=>(0,d.jsx)("button",{"data-testid":"close-button",className:L,onClick:()=>{e()},children:(0,d.jsx)(F.M,{size:"small","aria-label":l.Ru.get("close")})});var B=r(73171),U=r(4895),V=r(99998),_=r(29844),H=r(59764);const z=({languageSelectionModalRef:e})=>{const t=(0,i.useRef)(null),[r,n]=(0,i.useState)("0"),a=(0,s.ZZ)(),c=(0,g.d4)(U.M),u=(0,i.useCallback)((()=>{a({type:"CLOSE"})}),[a]),{isOpen:f}=(0,s.iL)(),x=(0,i.useCallback)((()=>{n(`${t.current?.getBoundingClientRect().height}px`)}),[n]),h=e=>{var t;(0,H.n0)({name:"sp_locale",value:e,domain:(t="open.spotify.com",t.substring(t.indexOf("."))),days:365}),u()};if((0,B.m)(u),(0,_.w)({refOrElement:t,observeOnly:"height",onResize:x}),(0,i.useEffect)((()=>{x()}),[x]),!e.current)return null;const b="language-selection-title",v="language-selection-subtitle",P={"--header-height":r};return(0,p.createPortal)((0,d.jsx)(V.s,{active:f,children:(0,d.jsx)("div",{children:(0,d.jsx)(k,{onClose:u,children:(0,d.jsxs)(N,{ariaLabelledBy:b,ariaDescribedBy:v,children:[(0,d.jsxs)("div",{className:O,ref:t,children:[(0,d.jsxs)("div",{className:E,children:[(0,d.jsx)(y.E,{as:"h1",variant:"titleSmall",semanticColor:"textBase",id:b,paddingBottom:m.v4,children:l.Ru.get("i18n.language-selection.title")}),(0,d.jsx)(y.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",id:v,paddingBottom:m.CD,children:l.Ru.get("i18n.language-selection.subtitle")})]}),(0,d.jsx)(M,{onClose:u})]}),(0,d.jsx)(C,{style:{...P},children:o.Np.map((e=>{const t=(0,l.a7)(e).baseName,r=(0,S.p)({localeFeatureFlag:c,urlLocale:t,type:"locale"});return(0,d.jsxs)(w,{onClick:h,locale:e,type:r?"link":"button",children:[(0,d.jsx)(y.E,{semanticColor:"textBase",children:o.IB[e].displayName}),(0,d.jsx)(y.E,{children:o.IB[e].displayNameEn})]},e)}))})]})})})}),e.current)}},40806:(e,t,r)=>{r.d(t,{A:()=>n,j:()=>a});var i=r(72288);let n=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({});const a=()=>(0,i.x)("library-row-mode",n.DEFAULT)},29544:(e,t,r)=>{r.d(t,{YourLibraryX:()=>Vo});var i=r(30758),n=r(97500),a=r.n(n),l=r(96131),s=r(62411),o=r(40638),c=r(88308),d=r(3118),u=r(21083),p=r(56266),g=r(12367),y=r(55669),m=r(12600),f=r(15752),x=r(93492),h=r(56695),b=r(56116),v=r(54112),S=r(24395),P=r(99802),w=r(86070);const T=({position:e,divider:t,onCreateCallback:r=()=>{},spec:n})=>{const a=(0,b.W)(),{createPlaylist:l}=(0,v.A)(),s=(0,P.s)(),o=(0,i.useCallback)((()=>{a({intent:"create-playlist",type:"click"});const t=n.createButtonFactory().hitCreatePlaylist();t&&s.logInteraction(t),l(x.Ru.get("playlist.default_playlist_name"),e),r()}),[a,n,s,l,e,r]);return(0,w.jsx)(h.D,{role:"menuitem",divider:t,onClick:o,leadingIcon:(0,w.jsx)(f.u,{semanticColor:"textSubdued",size:"small"}),children:x.Ru.get("contextmenu.create-playlist")})},C=i.memo((function(e){return(0,w.jsx)(S.pZ,{value:"create-playlist",children:(0,w.jsx)(T,{...e})})}));var R=r(68508),A=r(69611);const I=i.memo((function({folderUri:e,onCreateCallback:t}){const r=e?{after:{uri:e}}:{before:"start"},{spec:i}=(0,A.o)(e??R.gv);return(0,w.jsx)(S.pZ,{value:"folder",children:(0,w.jsxs)(y.W,{children:[(0,w.jsx)(C,{position:r,onCreateCallback:t,spec:i}),(0,w.jsx)(m.j,{position:r,onCreateCallback:t,spec:i})]})})}));var D=r(20256),j=r(19988),O=r(34437),E=r(38167),L=r(71429),k=r(74568),N=r(10478),F=r(63425),M=r(86496),B=r(61912),U=r(27354),V=r(21832),_=r(14109),H=r(75097),z=r(83898),W=r(63291),Y=r(7185),X=r(90630),K=r(56563);const G=1248,Z=(0,K.g)(H.Z),q=(0,K.g)(W.fX),J=()=>(function(){const{size:e,setSize:t,minWidth:r,maxWidth:n,ylxCollapsedStateNavbarWidth:a,ylxDefaultStateNavbarWidth:s,ylxExpandedStateNavbarWidth:o}=(0,U.y)(),{ylxSidebarState:c,setYlxSidebarState:u,canCollapse:p}=(0,W.sy)(),g=(0,V.XB)(),y=(0,V._Y)(),{min:m,max:f,size:x,setSize:h}=(0,z.f)(),b=(0,Y.H)(),v=(0,i.useRef)(null),S=(0,i.useRef)(null),P=(0,i.useRef)(null),w=(0,d.NC)(X.ZDY)?F.j:0;(0,i.useLayoutEffect)((()=>{const i=b-e-3*M.KV-(g!==H.Z.Disabled?x+M.KV:w),d={leftSidebarWidth:e,leftSidebarMinWidth:r,leftSidebarMaxWidth:n,ylxSidebarState:c,ylxSidebarStateRestoreTarget:v.current,rightSidebarWidth:x,rightSidebarMinWidth:m,rightSidebarMaxWidth:f,rightSidebarPanel:g,rightSidebarPanelRestoreTarget:S.current,storedCollapsedYLXWidth:a,storedDefaultYLXWidth:s,storedExpandedYLXWidth:o,clientWidth:b,mainContentWidth:i,canCollapse:p},T=P.current;if((0,l.j)(d,T))return;const C=function(e,t){if(!e)return{};let{leftSidebarWidth:r=0,rightSidebarWidth:i=0}=t;const{mainContentWidth:n=0,leftSidebarMinWidth:a=0,leftSidebarMaxWidth:l=0,ylxSidebarState:s,ylxSidebarStateRestoreTarget:o,rightSidebarMinWidth:c=0,rightSidebarMaxWidth:d=0,rightSidebarPanel:u,rightSidebarPanelRestoreTarget:p,storedCollapsedYLXWidth:g=0,storedDefaultYLXWidth:y=0,storedExpandedYLXWidth:m=0,clientWidth:f=0,canCollapse:x=!0}=t,h={},b=u!==H.Z.Disabled,v=void 0!==e.leftSidebarWidth&&r>e.leftSidebarWidth,S=void 0!==e.rightSidebarWidth&&i>e.rightSidebarWidth,P=void 0===e.clientWidth?0:f-e.clientWidth,w=P<0,T=f>0,C=n<M.ev?M.ev-n:0;let R=w?-1*P:0;n>G?R=Math.max(0,R-(n-G)):C&&(R=C);const A=s===W.fX.EXPANDED&&e.ylxSidebarState!==W.fX.EXPANDED,I=s===W.fX.DEFAULT&&e.ylxSidebarState!==W.fX.DEFAULT;let D=r-a;v&&(D=A?r-B.Z.EXPANDED_MIN:I?r-B.Z.DEFAULT_MIN:0);let j=S?0:i-c;const O=R<=D+j;if(n<M.ev&&!O)b&&(v||w&&(s===W.fX.COLLAPSED||!x))?(h.rightSidebarPanel=H.Z.Disabled,h.rightSidebarPanelRestoreTarget=t.rightSidebarPanel,R-=i,j=0):(s===W.fX.EXPANDED&&n+(r-B.Z.DEFAULT_MIN)>M.ev?(h.ylxSidebarState=W.fX.DEFAULT,R-=r-y,D=y-B.Z.DEFAULT_MIN):(h.ylxSidebarState=W.fX.COLLAPSED,R-=r-g,D=0),h.ylxSidebarStateRestoreTarget=t.ylxSidebarState);else if(u===H.Z.Disabled&&p!==H.Z.Disabled&&Z(p)&&u!==e.rightSidebarPanelRestoreTarget&&n-i-M.KV>=M.ev)h.rightSidebarPanel=p,h.rightSidebarPanelRestoreTarget=null;else if(s===W.fX.DEFAULT&&o===W.fX.EXPANDED&&n-(m-r)>=M.ev)h.ylxSidebarState=W.fX.EXPANDED,h.ylxSidebarStateRestoreTarget=null;else if(s===W.fX.COLLAPSED&&o===W.fX.DEFAULT&&n-(y-r)>=M.ev)h.ylxSidebarState=W.fX.DEFAULT,h.ylxSidebarStateRestoreTarget=null;else if(T&&n>=800){let e=l-r,t=d-i;const n=Math.min(P,e+t);for(let a=0;a<n;a++)r<i&&r<l&&e>0?(r++,e--):i<d&&t>0&&(i++,t--)}s!==e.ylxSidebarState&&q(o)&&o===e.ylxSidebarStateRestoreTarget&&(h.ylxSidebarStateRestoreTarget=null);u!==e.rightSidebarPanel&&Z(p)&&p===e.rightSidebarPanelRestoreTarget&&(h.rightSidebarPanelRestoreTarget=null);if(R>0&&R<=D+j)for(let e=0;e<R;e++)r>i&&r>a&&D>0?(r--,D--):i>c&&j>0&&(i--,j--);r&&r!==t.leftSidebarWidth&&(h.leftSidebarWidth=r);i&&i!==t.rightSidebarWidth&&(h.rightSidebarWidth=i);return h}(T,d);void 0!==C.leftSidebarWidth&&t(C.leftSidebarWidth),q(C.ylxSidebarState)&&u(C.ylxSidebarState),void 0!==C.ylxSidebarStateRestoreTarget&&(v.current=C.ylxSidebarStateRestoreTarget),void 0!==C.rightSidebarWidth&&0!==T?.rightSidebarWidth&&h(C.rightSidebarWidth),void 0!==C.rightSidebarPanel&&y((0,_.MQ)(C.rightSidebarPanel)),void 0!==C.rightSidebarPanelRestoreTarget&&(S.current=C.rightSidebarPanelRestoreTarget),P.current=d}),[e,r,n,t,c,x,m,f,h,g,a,s,o,u,y,b,p,w])}(),null);var Q=r(464);let $=function(e){return e.YLX_SORT_AND_VIEW_PICKER="ylx-sort-and-view-picker",e.YLX_CUSTOM_ORDERING="ylx-custom-ordering",e.REFINERS_PICKER="refiners-picker",e}({}),ee=function(e){return e.URGENT="urgent",e.CONTEXTUAL="contextual",e.DEFAULT="default",e}({});class te{itemsRecord={[ee.URGENT]:new Set,[ee.CONTEXTUAL]:new Set,[ee.DEFAULT]:new Set};visibleItem=null;static PRIORITIES=[ee.URGENT,ee.CONTEXTUAL,ee.DEFAULT];static NO_CHANGE={keyToShow:null,keyToHide:null};getNextItem(){let e=null;return te.PRIORITIES.some((t=>{const r=this.itemsRecord[t];return e=Array.from(r).at(-1)??null,e})),e}updateVisibility(e,t,r){const i=this.visibleItem;"add"===r?this.itemsRecord[t].add(e):this.itemsRecord[t].delete(e);const n=this.getNextItem();return this.visibleItem=n,i===n?te.NO_CHANGE:{keyToShow:n,keyToHide:i}}}var re=r(26986);let ie=function(e){return e.VISIBILITY_GRANTED="visibilityGranted",e.VISIBILITY_DENIED="visibilityDenied",e}({});class ne extends re.V{}const ae=(0,i.createContext)({notifyShowInterest:()=>{throw new Error("notifyShowInterest must be used within a VisibilityOrchestratorProvider")},notifyHideInterest:()=>{throw new Error("notifyHideInterest must be used within a VisibilityOrchestratorProvider")},events:new ne}),le=({children:e})=>{const t=(0,i.useMemo)((()=>new te),[]),r=(0,i.useRef)(new ne),n=(0,i.useCallback)(((e,t)=>{t&&r.current.emitSync(ie.VISIBILITY_DENIED,{key:t}),e&&r.current.emitSync(ie.VISIBILITY_GRANTED,{key:e})}),[]),a=(0,i.useCallback)(((e,r=ee.DEFAULT)=>{const{keyToShow:i,keyToHide:a}=t.updateVisibility(e,r,"add");n(i,a)}),[t,n]),l=(0,i.useCallback)(((e,r=ee.DEFAULT)=>{const{keyToShow:i,keyToHide:a}=t.updateVisibility(e,r,"remove");n(i,a)}),[t,n]),s=(0,i.useMemo)((()=>({events:r.current,notifyShowInterest:a,notifyHideInterest:l})),[a,l]);return(0,w.jsx)(ae.Provider,{value:s,children:e})};class se{events=new re.V;addRefiners(){throw new Error("Method not implemented.")}removeRefiners(){throw new Error("Method not implemented.")}getEvents(){return this.events}updateSelectedRefinersOrder(e){throw new Error("Method not implemented.")}}const oe=(0,i.createContext)(null);const ce=function({children:e}){const t=(0,i.useMemo)((()=>new se),[]);return(0,w.jsx)(oe.Provider,{value:t,children:e})},de=()=>null,ue=()=>null,pe=()=>null,ge=()=>null,ye=()=>null;const me={focusElement:()=>{},getFocusElement:()=>null,registerFocusElement:()=>()=>{}},fe=(0,i.createContext)(me);class xe{focusElement=()=>{};getFocusElement=()=>null;registerFocusElement=()=>()=>{}}const he=({children:e})=>{const t=(0,i.useMemo)((()=>new xe),[]);return(0,w.jsx)(fe.Provider,{value:t,children:e})};var be=r(72288);const ve=()=>({cheetaraOnboardingIsActive:!1,setCheetaraOnboardingIsActive:()=>{},cheetaraOnboardingDismissed:!1,setCheetaraOnboardingDismissed:()=>{},handleCloseCheetaraOnboarding:()=>{},cheetaraTooltipVisible:!1,setCheetaraTooltipVisible:()=>{}});r(20841);const Se=()=>!1;var Pe=r(86263),we=r(13505),Te=r(74384),Ce=r(60841),Re=r(76252),Ae=r(94910);const Ie="rqGyIqd3Igk05BEB2ZC6",De="WycFx_Gl2tUXbUJpZiD8",je=()=>{const[e,t]=(0,i.useState)(!1),r=(0,Ce.V)(),n=(0,s.d4)(Re.JJ);(0,i.useEffect)((()=>{const e=setTimeout((()=>{t(!0)}),1100);return()=>{t(!1),clearTimeout(e)}}),[]);const a=(0,s.d4)(Re.mo);return r&&e?(0,w.jsx)(Te.t5,{language:x.Ru.getLocaleForSmartling(),market:n.toLowerCase(),children:(0,w.jsxs)("div",{className:Ie,"data-testid":"left-sidebar-legal-links",children:[(0,w.jsx)(Te.JM,{}),(0,w.jsx)("a",{draggable:!1,href:Ae.Bl,target:"_blank",rel:"noopener",className:De,children:(0,w.jsx)(we.E,{variant:"marginal",children:x.Ru.get("cookies")})}),a&&(0,w.jsx)("a",{draggable:!1,href:Ae.Vd,target:"_blank",rel:"noopener",className:De,children:(0,w.jsx)(we.E,{variant:"marginal",children:"Форма для Ваших обращений"})})]})}):null},Oe="YNnobzGm5w3XKBniKdW9",Ee=(0,i.memo)((function({isAnonymous:e}){return(0,w.jsx)("div",{className:Oe,"data-testid":"left-sidebar-footer",children:e&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(je,{}),(0,w.jsx)(Pe.X,{})]})})}));var Le=r(3585),ke=r(61e3),Ne=r(42360),Fe=r(89913),Me=r(19264),Be=r(50107),Ue=r(82362);const Ve="lvJXjYO7YXxGKHcgx5pe",_e="yYGZUqSKJttCw_Z2JvPL",He="wkyebhrfwyJPCfDhQgbp",ze=()=>{const e=(0,Me.sy)(),t=(0,P.s)(),r=(0,s.wA)(),{spec:n}=(0,Ue.r)(Ne.V,{}),a=x.Ru.get("web-player.your-library-x.dsa-message",x.Ru.get("web-player.your-library-x.dsa-message-link")),l=(0,i.useCallback)((()=>{r(Be.r8.actions.open()),t.logInteraction(n.learnMoreButtonFactory().hitUiReveal())}),[r,t,n]);return(0,w.jsx)("div",{className:Ve,children:e?(0,w.jsx)(Fe.Zp,{label:(0,w.jsx)(we.E,{children:a}),placement:"right",showDelay:0,children:(0,w.jsx)("div",{className:_e,children:(0,w.jsx)(Le.p,{"aria-label":a})})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{children:(0,w.jsx)(Le.p,{size:"small"})}),(0,w.jsx)(we.E,{as:"p",semanticColor:"textSubdued",children:x.Ru.get("web-player.your-library-x.dsa-message",(0,w.jsx)(ke.H,{condensedAll:!0,size:"small",semanticColor:"textBase",onClick:l,className:He,children:(0,w.jsx)(we.E,{variant:"bodyMedium",children:x.Ru.get("web-player.your-library-x.dsa-message-link")})}))})]})})},We="AhNLpx0iVnlj4SuL_Gaw",Ye="JyZRugeRBHbUtS5ABOQ8",Xe=({className:e})=>(0,w.jsx)("section",{className:a()(We,e),children:(0,w.jsxs)("div",{className:Ye,children:[(0,w.jsx)(we.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:x.Ru.get("web-player.your-library-x.empty-state-folder-title")}),(0,w.jsx)(we.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:x.Ru.get("web-player.your-library-x.empty-state-folder-subtitle")})]})});var Ke=r(63736),Ge=r(9487);const Ze={getTitle:()=>x.Ru.get("action-trigger.create-playlist"),getDescription:()=>x.Ru.get("action-trigger.login-playlist")},qe=({children:e,renderInline:t})=>(0,w.jsx)(Ke.y,{id:Ge.x9,options:{...Ze,renderInline:t},children:e});var Je=r(555),Qe=r(90591);const $e="CfruGiDGW_FH4l65GMpb",et="fIgbQ9qpINdyy__tkaHi",tt="wv308QWnPnkI8n0GdqYO",rt=(0,i.memo)((function(e){const{message:t,title:r,linkTitle:i,linkTo:n,onClick:l,className:s}=e;return(0,w.jsxs)("section",{className:a()($e,s),children:[(0,w.jsxs)("div",{className:et,children:[(0,w.jsx)(we.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:r}),(0,w.jsx)(we.E,{variant:"bodySmall",semanticColor:"textBase",children:t})]}),(0,w.jsx)("div",{className:tt,children:i&&(n||l)&&(0,w.jsx)(Je.$,{className:tt,as:l?"button":void 0,colorSet:"invertedLight",href:n,onClick:l,component:Qe.v,size:"small",children:i})})]})})),it=({className:e})=>{const{createPlaylist:t}=(0,v.A)(),r=(0,i.useCallback)((()=>{t()}),[t]);return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(qe,{renderInline:!1,children:(0,w.jsx)(rt,{onClick:r,linkTitle:x.Ru.get("web-player.your-library-x.empty-state-playlists-cta"),title:x.Ru.get("web-player.your-library-x.empty-state-playlists-title"),message:x.Ru.get("web-player.your-library-x.empty-state-playlists-subtitle"),className:e})}),(0,w.jsx)(rt,{linkTo:"/genre/podcasts-web",linkTitle:x.Ru.get("web-player.your-library-x.empty-state-podcasts-browse"),title:x.Ru.get("web-player.your-library-x.empty-state-podcasts-to-follow"),message:x.Ru.get("web-player.your-library-x.empty-state-podcasts-keep-you-updated"),className:e})]})},nt="NOXrKH_1anB9lsOlyv5g",at="FIARvjbv_YZKwz7yxNHw",lt="Fqrv8StT3DnEAfntIKCg",st="JydI9ZzWnssPC899sOGP",ot=({query:e,className:t})=>(0,w.jsxs)("div",{className:a()(nt,t),"data-testid":"no-search-results-view",children:[(0,w.jsx)(we.E,{as:"h1",variant:"bodyMediumBold",className:at,children:x.Ru.get("web-player.your-library-x.empty-results-title-short",(0,w.jsx)("span",{className:lt,children:(0,w.jsx)("span",{className:st,children:e})}))}),(0,w.jsx)(we.E,{as:"h2",variant:"bodySmall",children:x.Ru.get("web-player.your-library-x.empty-results-text-short")})]});var ct=r(41223);const dt="vhOeYrTmSoea5vemsMpv",ut="pCKhe1uJhYBUC4YVmz9B",pt=({onClick:e})=>(0,w.jsxs)("div",{className:dt,children:[(0,w.jsx)("div",{className:"icon",children:(0,w.jsx)(ct.b,{size:"xlarge",semanticColor:"textBase"})}),(0,w.jsxs)("div",{className:ut,children:[(0,w.jsx)(we.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:x.Ru.get("web-player.your-library-x.error-title")}),(0,w.jsx)(we.E,{as:"p",variant:"bodySmall",semanticColor:"textBase",children:x.Ru.get("web-player.your-library-x.error-body")})]}),(0,w.jsx)("div",{children:(0,w.jsx)(Je.$,{onClick:e,colorSet:"invertedLight",size:"small",children:x.Ru.get("web-player.your-library-x.error-button")})})]}),gt=(0,i.createContext)(null);const yt=({children:e})=>{const t=function(){const[e,t]=(0,be.x)("ylx-expanded-folders",[]),r=(0,i.useCallback)((t=>e.includes(t)),[e]),n=(0,i.useCallback)(((r,i)=>{const n=e.indexOf(r);if(i){if(-1!==n)return;t([...e,r])}else{if(-1===n)return;t(e.filter((e=>e!==r)))}}),[e,t]);return{expandedFolders:e,getIsFolderExpanded:r,setIsFolderExpanded:n}}();return(0,w.jsx)(gt.Provider,{value:t,children:e})},mt="fYWNdY4zhj4OX_T2Xtg6",ft="BRX6aJUAuAsvHKD_fpbo",xt="ZZsPF3Sn4h7m0_5Clhk0",ht="IZq_xBKdh88HLD4QY90X",bt="PUipCs3_0Qott0Sru3pB",vt="XAOxFVWnd185_vZ5zPGu",St="YsCa3XbOXEm79LH0B7do",Pt="eC25_w41L83mXDCqdm_A",wt="VyDwqqtx0153zD8a3TED",Tt="rOgsguaurlHVlgCTY0P7",Ct="zS8ATyQNwnAiEoPrCcIo",Rt="Zwr4MoUVImDin82vBn4y",At="lb8li6m8Zei4tr0zNKxX",It="aK6vld0FgHGxjz6IiHyS",Dt="Xw1OibA6EkrU4F47EMw9",jt="_EFIA9HjgZxxgTSZzQcg",Ot="JUPaw8kZF94Coth4G88s",Et="vSC5QuwmzUhqUNWdMTJ5",Lt="BfALkuQy0UjTI70U9QlQ",kt="IeIwiYLvr7PD_4aZAxGE",Nt="qBiMgWp7EVg3k1YU8DQ0",Ft="c1PJ2LHU0EnzyA0jDc1j",Mt=({isScrolled:e})=>(0,w.jsxs)("div",{className:a()(Rt,It,{[Dt]:e}),children:[(0,w.jsx)(we.E,{variant:"marginalBold",semanticColor:"textSubdued",children:x.Ru.get("web-player.your-library-x.expanded-list-header.title")}),(0,w.jsx)(we.E,{variant:"marginalBold",semanticColor:"textSubdued",children:x.Ru.get("web-player.your-library-x.expanded-list-header.date-added")}),(0,w.jsx)(we.E,{variant:"marginalBold",semanticColor:"textSubdued",children:x.Ru.get("web-player.your-library-x.expanded-list-header.played-at")})]});var Bt=r(42746);const Ut=()=>null,Vt=()=>null;const _t=()=>({getFocusElement:null,registerFocusElement:null});var Ht=r(45143),zt=r(36663);const Wt="a2XwshgvydvJO9If_GzQ",Yt="aVLBGREPTnbTFhkSdUMV",Xt="ViXEX4SVVU_NA7zcS9kd",Kt="pQvrkwXAqZnbSqJiiQuo",Gt="mA1QNQx6oUXgQ8kMID2S",Zt={marginBlockEnd:0,willChange:"transform, opacity"},qt=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:n,toggleFilterId:l,allowedDropTargetMimeTypes:s=j.Vp,className:o,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,P.s)(),y=(0,zt.f)(),m=p.selected,f=e?y.getFilterLabel(e):"",x=(0,i.useCallback)((()=>{!e||m&&t?(n(),m&&t&&e?g.logInteraction(u.filterChipFactory({identifier:f,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?g.logInteraction(u.filterChipFactory({identifier:f,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:f,position:d}).hitFilter()))}),[e,f,m,t,n,l,d,g,u]),h=(0,i.useCallback)((e=>{e.detail>1||r||x()}),[r,x]),{className:b,dropPosition:v,...S}=(0,O.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:s},onLongDragOver:x});return(0,w.jsx)(Ht.v,{...p,"aria-label":p["aria-label"],...S,...v===j.Nz.ON?{selectedColorSet:"base"}:void 0,className:a()(o,b,{[Yt]:v===j.Nz.ON,[Gt]:r}),onClick:h,selectedColorSet:v===j.Nz.ON?"invertedDark":"invertedLight",secondary:m&&!t,style:Zt,ref:c,tabIndex:-1})};var Jt=r(43683);const Qt={marginBlockEnd:0,willChange:"transform, opacity"},$t=({filterId:e,isPrimaryFilter:t,isPlaceholder:r,resetFilterIds:n,toggleFilterId:l,allowedDropTargetMimeTypes:s=j.Vp,className:o,innerRef:c,index:d=0,spec:u,...p})=>{const g=(0,P.s)(),y=(0,zt.f)(),m=p.selected,f=e?y.getFilterLabel(e):"",x=(0,i.useCallback)((()=>{!e||m&&t?(n(),m&&t&&e?g.logInteraction(u.filterChipFactory({identifier:f,position:d}).hitClearFilter()):g.logInteraction(u.clearButtonFactory().hitClearFilter())):(l(e),m?g.logInteraction(u.filterChipFactory({identifier:f,position:d}).hitClearFilter()):g.logInteraction(u.filterChipFactory({identifier:f,position:d}).hitFilter()))}),[e,f,m,t,n,l,d,g,u]),h=(0,i.useCallback)((e=>{e.detail>1||r||x()}),[r,x]),{className:b,dropPosition:v,...S}=(0,O.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:s},onLongDragOver:x});return(0,w.jsx)(Jt.m,{...p,"aria-label":p["aria-label"],...S,...v===j.Nz.ON?{selectedColorSet:"base"}:void 0,className:a()(o,b,{[Yt]:v===j.Nz.ON,[Gt]:r}),onClick:h,style:Qt,ref:c,tabIndex:-1})},er=[D.fl.TRACKS,D.fl.LOCAL_TRACKS,D.fl.ALBUMS,D.fl.ARTISTS,D.fl.AUTHORS,D.fl.PLAYLISTS_V2,D.fl.SHOWS,D.fl.AUDIOBOOKS,D.fl.EPISODES,D.fl.FOLDERS],tr=[D.fl.TRACKS,D.fl.LOCAL_TRACKS,D.fl.ALBUMS,D.fl.EPISODES,D.fl.PLAYLISTS_V2,D.fl.FOLDERS],rr=[D.fl.TRACKS,D.fl.LOCAL_TRACKS,D.fl.ALBUMS,D.fl.EPISODES,D.fl.PLAYLISTS_V2,D.fl.FOLDERS];re.V;r(21053);const ir=()=>[];function nr(e){return{type:"contentType",id:e.id,name:e.name}}function ar(e){return e.id.startsWith("spotify:concept:")?{type:"tag",id:e.id,name:e.name,count:0}:nr(e)}var lr=r(70824);const sr=(0,i.memo)((function({availableFilters:e,selectedFilters:t,toggleFilterId:r,resetFilterIds:n,className:a,spec:l,inFolderView:s}){const o=!(t||e),{availableRefiners:c,activeRefiners:d,allContentTypeRefiners:u}=(({availableFilters:e,activeFilters:t,inFolderView:r})=>{const i=e?.map(nr),n=t?.map(ar)??[],a=ir(),l=Se();return{availableRefiners:t?.length||!l||r?i:a,activeRefiners:n,allContentTypeRefiners:i}})({availableFilters:e,activeFilters:t,inFolderView:s}),{registerFocusElement:p}=_t(),y=o?u:[...d??[],...c??[]],m=(0,i.useRef)(null),f=(0,i.useCallback)((()=>{(0,lr.MS)(m.current,m.current?.nextElementSibling instanceof HTMLElement?m.current?.nextElementSibling:null),n()}),[n]),h=Se();return y&&0!==y?.length?(0,w.jsxs)(Bt.FN,{dragToScrollOptions:{isDisabled:!1},className:a,ariaLabel:x.Ru.get("web-player.your-library-x.filter_options"),children:[!!t?.length&&(0,w.jsx)($t,{resetFilterIds:f,toggleFilterId:r,allowedDropTargetMimeTypes:er,"aria-label":x.Ru.get("web-player.your-library-x.clear_filters"),innerRef:m,spec:l}),y.map(((e,t)=>{const a=d?.includes(e),s=0===t,c=t>0&&d?.includes(y[0]),u=(0,w.jsx)(qt,{innerRef:void 0,filterId:e.id,isPrimaryFilter:s,isPlaceholder:o,resetFilterIds:n,toggleFilterId:r,selected:a,spec:l,index:t,children:e.name},e.id);return!h||c?u:(0,w.jsx)(g.h,{menu:(0,w.jsx)(i.Suspense,{fallback:!0,children:(0,w.jsx)(Vt,{refiner:e,resetFilterIds:n,isSelected:a})}),children:u},e.id)})),h&&!d?.length&&!s&&(0,w.jsx)(Ut,{})]}):null}));var or=r(72574);const cr="",dr=(0,i.createContext)({openedFolderUri:cr,pushFolder:()=>{},popFolder:()=>{},resetFolder:()=>{},change:"PUSH"}),ur=({children:e})=>{const{setFilter:t}=(0,i.useContext)(Q.g),[r,n]=(0,be.x)("opened-folder-uri",cr),a=(0,i.useRef)([r??cr]),l=(0,i.useRef)("PUSH"),s=(0,i.useCallback)((e=>{n(e),t(cr)}),[n,t]),o=(0,i.useCallback)((e=>{a.current.push(e),l.current="PUSH",s(a.current.at(-1))}),[s]),c=(0,i.useCallback)((()=>{a.current.pop();const e=a.current.at(-1);return l.current="POP",s(e),e}),[s]),d=(0,i.useCallback)((()=>{a.current=[cr],s(cr)}),[s]),u=(0,i.useMemo)((()=>({openedFolderUri:(0,or.fpb)(r)?r:cr,pushFolder:o,popFolder:c,resetFolder:d,change:l.current})),[r,c,o,d]);return(0,w.jsx)(dr.Provider,{value:u,children:e})};var pr=r(3408),gr=r(59829),yr=r(12032),mr=r(56463),fr=r(22034),xr=r(58792),hr=r(75229),br=r(75635),vr=r(64493),Sr=r(14146),Pr=r(78172),wr=r(52596);const Tr=(e,t)=>t?(e=>{switch(e){case"album":default:return x.Ru.get("web-player.your-library-x.type-album");case"ep":return x.Ru.get("ep");case"single":return x.Ru.get("single");case"compilation":return x.Ru.get("compilation")}})(t):(e=>{switch(e){case Pr.c.ALBUM:return x.Ru.get("web-player.your-library-x.type-album");case Pr.c.ARTIST:return x.Ru.get("web-player.your-library-x.type-artist");case Pr.c.AUTHOR:return x.Ru.get("web-player.your-library-x.type-author");case Pr.c.FOLDER:return x.Ru.get("web-player.your-library-x.type-folder");case Pr.c.AUDIOBOOK:return x.Ru.get("web-player.your-library-x.type-audiobook");case Pr.c.YOUR_EPISODES:case Pr.c.LOCAL_FILES:case Pr.c.LIKED_SONGS:case Pr.c.PLAYLIST:return x.Ru.get("web-player.your-library-x.type-playlist");case Pr.c.SHOW:return x.Ru.get("web-player.your-library-x.type-show");case Pr.c.PRE_RELEASE_ALBUM:return x.Ru.get("web-player.your-library-x.type-prerelease-album");case Pr.c.PRE_RELEASE_BOOK:return x.Ru.get("web-player.your-library-x.type-prerelease-audiobook");case Pr.c.CONCERT:return"Event";default:return(0,wr.d)(e)}})(e),Cr=e=>e.type===Pr.c.ALBUM&&"album"!==e.albumType,Rr=e=>{switch(e){case Pr.c.YOUR_EPISODES:case Pr.c.LIKED_SONGS:case Pr.c.LOCAL_FILES:return Pr.c.PLAYLIST;default:return e}},Ar=({shouldShowType:e,type:t,subtitle:r,specialType:i})=>(0,w.jsxs)(w.Fragment,{children:[e&&Tr(t,i),!!r&&e&&" • ",r]});var Ir=r(48138);const Dr=({iconSize:e="small"})=>(0,w.jsx)("span",{className:bt,children:(0,w.jsx)(Ir.C,{size:e,semanticColor:"textBrightAccent",className:ht})}),jr=({children:e,title:t,subtitleSlot:r,isPlaying:i})=>(0,w.jsx)(Fe.Zp,{label:(0,w.jsxs)("div",{className:Ct,children:[(0,w.jsxs)("div",{children:[t,r]}),i&&(0,w.jsx)(Dr,{})]}),placement:"right",showDelay:0,children:e});var Or=r(94154),Er=r(57802),Lr=r(65349);const kr=({leading:e,subtitle:t,uri:r})=>{const i=`listrow-subtitle-${r}`;return(0,w.jsx)("div",{className:Lr.A.subtitle,children:(0,w.jsxs)(Or.j,{className:Lr.A.link,id:i,dir:"auto",children:[(0,w.jsx)("span",{className:Lr.A.subtitleLeadingWrapper,children:e}),(0,w.jsx)("span",{className:Lr.A.subtitleText,children:t})]})})},Nr=({leading:e,subtitle:t,uri:r})=>{const i=`card-subtitle-${r}`;return(0,w.jsx)("div",{className:Lr.A.subtitle,children:(0,w.jsxs)(Er.j,{lineClamp:1,className:Lr.A.link,id:i,role:"gridcell",dir:"auto",children:[(0,w.jsx)("span",{className:Lr.A.subtitleLeadingWrapper,children:e}),t]})})};var Fr=r(85387),Mr=r(55158),Br=r(58294),Ur=r(16077),Vr=r(22408);const _r=new Set(["Unidentified","Alt","AltGraph","CapsLock","Control","Fn","FnLock","Meta","NumLock","ScrollLock","Shift","Symbol","SymbolLock","Hyper","Super","Enter","Tab","ArrowDown","ArrowLeft","ArrowRight","ArrowUp","End","Home","PageDown","PageUp","Backspace","Clear","Copy","CrSel","Cut","Delete","EraseEof","ExSel","Insert","Paste","Redo","Undo","Accept","Again","Attn","Cancel","ContextMenu","Escape","Execute","Find","Help","Pause","Play","Props","Select","ZoomIn","ZoomOut","BrightnessDown","BrightnessUp","Eject","LogOff","Power","PowerOff","PrintScreen","Hibernate","Standby","WakeUp","AllCandidates","Alphanumeric","CodeInput","Compose","Convert","Dead","FinalMode","GroupFirst","GroupLast","GroupNext","GroupPrevious","ModeChange","NextCandidate","NonConvert","PreviousCandidate","Process","SingleCandidate","HangulMode","HanjaMode","JunjaMode","Eisu","Hankaku","Hiragana","HiraganaKatakana","KanaMode","KanjiMode","Katakana","Romaji","Zenkaku","ZenkakuHankaku","F1","F2","F3","F4","F5","F6","F7","F8","F9","F10","F11","F12","Soft1","Soft2","Soft3","Soft4","ChannelDown","ChannelUp","Close","MailForward","MailReply","MailSend","MediaClose","MediaFastForward","MediaPause","MediaPlay","MediaPlayPause","MediaRecord","MediaRewind","MediaStop","MediaTrackNext","MediaTrackPrevious","New","Open","Print","Save","SpellCheck","Key11","Key12","AudioBalanceLeft","AudioBalanceRight","AudioBassBoostDown","AudioBassBoostToggle","AudioBassBoostUp","AudioFaderFront","AudioFaderRear","AudioSurroundModeNext","AudioTrebleDown","AudioTrebleUp","AudioVolumeDown","AudioVolumeUp","AudioVolumeMute","MicrophoneToggle","MicrophoneVolumeDown","MicrophoneVolumeUp","MicrophoneVolumeMute","SpeechCorrectionList","SpeechInputToggle","LaunchApplication1","LaunchApplication2","LaunchCalendar","LaunchContacts","LaunchMail","LaunchMediaPlayer","LaunchMusicPlayer","LaunchPhone","LaunchScreenSaver","LaunchSpreadsheet","LaunchWebBrowser","LaunchWebCam","LaunchWordProcessor","BrowserBack","BrowserFavorites","BrowserForward","BrowserHome","BrowserRefresh","BrowserSearch","BrowserStop","AppSwitch","Call","Camera","CameraFocus","EndCall","GoBack","GoHome","HeadsetHook","LastNumberRedial","Notification","MannerMode","VoiceDial","TV","TV3DMode","TVAntennaCable","TVAudioDescription","TVAudioDescriptionMixDown","TVAudioDescriptionMixUp","TVContentsMenu","TVDataService","TVInput","TVInputComponent1","TVInputComponent2","TVInputComposite1","TVInputComposite2","TVInputHDMI1","TVInputHDMI2","TVInputHDMI3","TVInputHDMI4","TVInputVGA1","TVMediaContext","TVNetwork","TVNumberEntry","TVPower","TVRadioService","TVSatellite","TVSatelliteBS","TVSatelliteCS","TVSatelliteToggle","TVTerrestrialAnalog","TVTerrestrialDigital","TVTimer","AVRInput","AVRPower","ColorF0Red","ColorF1Green","ColorF2Yellow","ColorF3Blue","ColorF4Grey","ColorF5Brown","ClosedCaptionToggle","Dimmer","DisplaySwap","DVR","Exit","FavoriteClear0","FavoriteClear1","FavoriteClear2","FavoriteClear3","FavoriteRecall0","FavoriteRecall1","FavoriteRecall2","FavoriteRecall3","FavoriteStore0","FavoriteStore1","FavoriteStore2","FavoriteStore3","Guide","GuideNextDay","GuidePreviousDay","Info","InstantReplay","Link","ListProgram","LiveContent","Lock","MediaApps","MediaAudioTrack","MediaLast","MediaSkipBackward","MediaSkipForward","MediaStepBackward","MediaStepForward","MediaTopMenu","NavigateIn","NavigateNext","NavigateOut","NavigatePrevious","NextFavoriteChannel","NextUserProfile","OnDemand","Pairing","PinPDown","PinPMove","PinPToggle","PinPUp","PlaySpeedDown","PlaySpeedReset","PlaySpeedUp","RandomToggle","RcLowBattery","RecordSpeedNext","RfBypass","ScanChannelsToggle","ScreenModeNext","Settings","SplitScreenToggle","STBInput","STBPower","Subtitle","Teletext","VideoModeNext","Wink","ZoomToggle"]);function Hr(e,t){const[r,n]=(0,i.useState)(""),a=(0,i.useRef)(r);a.current=r;const l=(0,i.useRef)(null);return(0,i.useEffect)((()=>{const r=e.current;if(!r||!t)return n(""),()=>{};const i=e=>{const t="Backspace"===e.key,r=" "===e.key,i=e.metaKey||e.ctrlKey,s=e.target instanceof HTMLElement&&e.target?.matches("input, textarea, [contenteditable]"),o=e.isComposing||229===e.keyCode,c=(d=e.key,_r.has(d)&&!t);var d;const u=r&&!a.current,p=t&&!a.current;if(i||s||o||c||u||p)return;(t&&a.current||r)&&(e.preventDefault(),e.stopPropagation()),n((r=>t?r.slice(0,-1):r+e.key)),l.current&&clearTimeout(l.current),l.current=setTimeout((()=>n("")),1e3)};return r.addEventListener("keydown",i,!0),()=>{r.removeEventListener("keydown",i,!0),l.current&&clearTimeout(l.current)}}),[e,t]),r}const zr=(0,i.createContext)({setTypeaheadResult:({uid:e,str:t})=>{if(e||t)throw new Error("setTypeaheadResult must be used within a TypeaheadProvider")},typeaheadResult:{uid:null,str:""}}),Wr=({children:e,containerRef:t,findMatchingTypeaheadUid:r,isEnabled:n=!0})=>{const[a,l]=(0,i.useState)({uid:null,str:""}),s=(0,i.useMemo)((()=>({typeaheadResult:a,setTypeaheadResult:l})),[a,l]),o=Hr(t,n),c=(0,i.useRef)(o);c.current=o;const d=(0,i.useRef)(r);return d.current=r,(0,i.useEffect)((()=>{o&&n?d.current(o).then((e=>{o===c.current&&l({uid:e,str:o})})):l({uid:null,str:""})}),[n,o,l]),(0,w.jsx)(zr.Provider,{value:s,children:e})};var Yr=r(18374);const Xr={state:{referrer:"your_library",preventMoveFocus:!0}};function Kr(e,t,r,n,a){const{filter:l}=(0,i.useContext)(Q.g),{isActive:s}=(0,Vr.l_)(e),o=function(e){const{typeaheadResult:{uid:t,str:r}}=(0,i.useContext)(zr);return t===e?r:null}(e),c=!!o,d=(0,Ur.W)({uri:e,type:"link"})?(0,Yr.hF)(t):t,u=(0,i.useRef)(null),p=(0,Fr.Zp)(),g=(0,i.useCallback)((e=>{e.preventDefault(),a?a():d&&p(d,Xr)}),[a,p,d]);(0,i.useLayoutEffect)((()=>{c&&u.current?.closest('[role="row"], [role="listitem"]')?.querySelector("button")?.focus({preventScroll:!0})}),[c]);const y=n?`${n} • ${r}`:r;return{isActive:s,onClick:g,contents:l||o?(0,w.jsx)("span",{ref:u,children:(0,w.jsx)(xr.M,{autoEscape:!0,searchWords:[l.trim(),...o?.split(" ")??""],textToHighlight:y})}):y}}const Gr=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:n,to:l=(0,or.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,contents:c}=Kr(t,l,r,i,s),d=`listrow-title-${e}`;return(0,w.jsx)(g.h,{menu:n,children:(0,w.jsx)(Mr.d,{id:d,lineClamp:1,className:a()(Lr.A.link,Lr.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",dir:"auto",children:c})})},Zr=({uri:e,playbackUri:t=e,title:r,titlePrefix:i,menu:n,to:l=(0,or.o_h)(e)?.toURLPath(!0)||"",handleNavigate:s})=>{const{isActive:o,onClick:c,contents:d}=Kr(t,l,r,i,s);return(0,w.jsx)(g.h,{menu:n,children:(0,w.jsx)(Br.Z,{lineClamp:1,className:a()(Lr.A.link,Lr.A.titleLink),semanticColor:o?"textBrightAccent":"textBase",href:l,onClick:c,role:"gridcell",dir:"auto",children:d})})},qr=[D.fl.ALBUMS,D.fl.ARTISTS,D.fl.AUTHORS,D.fl.PLAYLISTS_V2,D.fl.SHOWS,D.fl.FOLDERS,D.fl.PSEUDO_PLAYLISTS],Jr=[D.fl.PLAYLISTS_V2,D.fl.FOLDERS];var Qr=r(82220);const $r=({isConfirmationForPlaylist:e,onConfirm:t,onClose:r})=>{const i=e?x.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-playlist"):x.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.title-folder");return(0,w.jsx)(Qr.T,{"aria-label":i,titleText:i,descriptionText:e?x.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-playlist"):x.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.message-folder"),onConfirm:t,onClose:r,confirmText:x.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-text"),confirmLabel:e?x.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-playlist"):x.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.confirm-button-label-folder"),cancelText:x.Ru.get("web-player.your-library-x.unpin-confirmation-dialog.cancel-button-text"),allowHTML:!0})};var ei=r(98866);function ti({onApplyDrop:e,spec:t,isDropTargetPinned:r}){const n=(0,zt.f)(),{contains:a}=(0,ei.p)("ylpin"),[l,s]=(0,i.useState)(null),o=(0,i.useCallback)((async(t,i)=>{if(r)return void e(t,i);const{[D.fl.PLAYLISTS_V2]:n=[],[D.fl.FOLDERS]:l=[]}=t,o=[...n,...l];if(!!o.length&&(await a(...o)).some(Boolean)){if(o.length>1)throw new Error("Reordering multiple pinned items at once is not supported");s({dropData:t,dropPosition:i})}else e(t,i)}),[r,a,e]),c=(0,P.s)();return{applyDropWithUnpinConfirmation:o,unpinConfirmationDialog:l?(0,w.jsx)($r,{isConfirmationForPlaylist:!l.dropData[D.fl.FOLDERS]?.length,onClose:()=>s(null),onConfirm:async()=>{const{[D.fl.PLAYLISTS_V2]:r=[],[D.fl.FOLDERS]:i=[]}=l.dropData;await n.unpin([...r,...i][0]),t?.dragUnpinItem&&c.logInteraction(t.dragUnpinItem({itemToUnpin:[...r,...i][0]})),e(l.dropData,l.dropPosition),s(null)}}):null}}function ri(){const{dropOriginUri:e,sectionId:t}=(0,i.useContext)(k.O_);return{dropOriginIsYLX:e===R.gv,entityIsInFolder:t>0}}var ii=r(21171);function ni(){const e=(0,ii.g)(),{dropOriginIsYLX:t}=ri();return(0,i.useCallback)((async(r,i)=>{const n=await e.contains(r);if(1!==new Set(n).size)throw new Error("Dropping a mix of newly added and moved playlists is not supported");if(n[0]){if(r.length>1)throw new Error("Moving multiple playlists at once is not supported");t?await e.move({uri:r[0]},i):await e.move({uri:r[0]},i,!0)}else await e.add(r,i)}),[t,e])}var ai=r(14332);function li({dropTargetUri:e,spec:t,isDropTargetPinned:r}){const n=(0,ii.g)(),a=(0,zt.f)(),l=(0,P.s)(),s=ni(),o=(0,i.useCallback)((async(i,o)=>{const{[D.fl.PLAYLISTS_V2]:c=[],[D.fl.FOLDERS]:[d]=[]}=i,u=o===j.Nz.BEFORE?{before:{uri:e}}:{after:{uri:e}};if(r){const e=i[Object.keys(i)[0]][0];if((0,or.tbX)(e)||(0,or.fpb)(e)){const t=si((await n.getContents()).items,e);-1===t?await n.add([e],{before:"start"}):t>0&&((0,or.tbX)(e)?await n.move({uri:e},{before:"start"}):await n.moveFolder({uri:e},{before:"start"}))}else if(!(0,or.Z0m)(e)){const[t]=await a.contains(e);t||await a.add({uris:[e]})}await a.pin(e,u),l.logInteraction(t.dragPinItem({itemToPin:e}))}else d?await n.moveFolder({uri:d},u):c.length&&await s(c,u);l.logInteraction(t.dragSort())}),[e,r,a,l,t,n,s]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=ti(r?{onApplyDrop:o,spec:t,isDropTargetPinned:r}:{onApplyDrop:o});return{handleDropBeforeOrAfterRootlistItem:(0,i.useCallback)((async(e,t)=>{const{[D.fl.PLAYLISTS_V2]:r=[],[D.fl.FOLDERS]:i=[]}=e;if(r.length&&i.length)throw new Error("Dropping a mix of playlists and folders is not supported");if(i.length>1)throw new Error("Dropping multiple folders is not supported");d(e,t)}),[d]),unpinConfirmationDialog:c}}function si(e,t,r=0){for(const i of e)if((0,ai.Af)(i)||(0,ai.sA)(i)){if((0,or.B2u)(i.uri,t))return r;if((0,ai.sA)(i)){const e=si(i.items,t,r+1);if(-1!==e)return e}}return-1}var oi=r(53575);const ci={state:{referrer:"your_library",preventMoveFocus:!0}};function di({uri:e,to:t=(0,or.o_h)(e)?.toURLPath(!0)||"",type:r,handleNavigate:n,dragLabel:a,isPinned:l,canReorder:s,allowedDropTargetDropOnMimeTypes:o=[],onDropTargetDropOn:c,onLongDragOver:d,openDeleteDialog:u,togglePlay:p,triggerPlay:g,isItemInGrid:y,playInsteadOfNavigating:m=!1,isPlaying:f,spec:x,folderDepth:h}){const b=(0,Ur.W)({uri:e,type:"link"})?(0,Yr.hF)(t):t,v=(0,Fr.Zp)(),S=(0,Fr.zy)(),w=(0,i.useCallback)((()=>{v(b,ci)}),[v,b]),T=(0,P.s)(),C=(0,i.useRef)(0),A=(0,i.useRef)(null),I=(0,i.useCallback)((({target:e})=>e instanceof HTMLElement&&!A.current?.contains(e)),[]),E=(0,i.useCallback)((t=>{if(!I(t)){if(t.preventDefault(),t.currentTarget.scrollIntoView({block:"nearest"}),m){if(C.current>Date.now())return;return C.current=Date.now()+300,void(f||(p?.(),T.logInteraction(x.yourLibraryItemFactory().hitPlay({itemToBePlayed:e}))))}n?n():b&&v(b,{...ci,replace:b===S.pathname}),T.logInteraction(x.yourLibraryItemFactory().hitUiNavigate({destination:e}))}}),[I,m,n,b,T,x,e,p,f,v,S.pathname]),L=(0,i.useCallback)((t=>{m||I(t)||g&&(T.logInteraction(x.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:e})),g?.())}),[m,I,g,T,x,e]),k=(0,i.useCallback)((()=>{T.logInteraction(x.yourLibraryItemFactory().secondaryHitUiReveal())}),[T,x]),{draggable:N,onDragStart:F}=(0,oi.P)({itemUris:[e],itemMimeTypes:[(0,D.j3)(r)],dragLabelText:a,sectionId:h??0,dropOriginUri:R.gv});let M=[];l?M=qr:s&&(M=Jr);const B={[j.Nz.ON]:o,[j.Nz.BEFORE]:M,[j.Nz.AFTER]:M},{handleDropBeforeOrAfterRootlistItem:U,unpinConfirmationDialog:V}=li({dropTargetUri:e,spec:x,isDropTargetPinned:l}),_=(0,i.useCallback)(((e,t)=>{t===j.Nz.ON?c?.(e,t):t!==j.Nz.BEFORE&&t!==j.Nz.AFTER||U(e,t)}),[c,U]),{dropPosition:H,className:z,...W}=(0,O.A)({uri:e,allowedMimeTypesByDropPosition:B,onDrop:_,onLongDragOver:d??w,reorderDirection:y?"horizontal":"vertical"}),Y=(0,i.useCallback)((t=>{t.repeat||I(t)||("Backspace"!==t.key&&"Delete"!==t.key||!u||u(),"Enter"===t.key&&t.shiftKey&&p&&(t.preventDefault(),p()),"Enter"===t.key&&T.logInteraction(x.yourLibraryItemFactory().keyStrokeUiNavigate({destination:e})))}),[I,T,u,x,p,e]),X=(0,or.o_h)(S.pathname,{parseUnknown:!0})?.toURI();return{onClick:E,onDoubleClick:L,draggable:N&&!!a,onDragStart:F,onKeyDown:Y,unpinConfirmationDialog:V,dropPosition:H,dropTargetClassName:z,logRightClick:k,isViewActive:!!X&&(0,or.B2u)(e,X),itemRef:A,...W}}var ui=r(24810);const pi=i.createContext(!1),gi=({children:e,isCompact:t})=>(0,w.jsx)(pi.Provider,{value:t,children:e}),yi=()=>(0,i.useContext)(pi),mi="wJTUKAyYI219kJtclJLa",fi="q0_cpEyu_8EC7he96qT_",xi="L8ET6xwMh_wMEqCpmunH",hi="D_1eJKOJ3wTCKO93GX06",bi="_7kcfiJ2UNEh3CDR9Wau",vi="N8wAJha8ApfxgOfqv4UM",Si="iJMxV9zMXSfrjJPyB3Fw",Pi=({uri:e,to:t=(0,or.o_h)(e)?.toURLPath(!0)||"",handleNavigate:r,dragLabel:n,name:l,namePrefix:s,subtitle:o,cover:c,type:d,specialType:u,downloadButton:p,canReorder:y,allowedDropTargetDropOnMimeTypes:m,onDropTargetDropOn:f,onLongDragOver:x,menu:h,leading:b,openDeleteDialog:v,togglePlay:S,triggerPlay:P,isPinned:T,shouldShowType:C,playbackUri:R,isPlaying:A,isActive:I,playInsteadOfNavigating:D,spec:O,index:E,animateClassName:L="",animateState:k,preReleaseIcon:N,lockedIcon:F})=>{const{onClick:M,onDoubleClick:B,draggable:U,onDragStart:V,onKeyDown:_,dropPosition:H,dropTargetClassName:z,unpinConfirmationDialog:W,logRightClick:Y,isViewActive:X,itemRef:K,...G}=di({uri:e,to:t,handleNavigate:r,dragLabel:n,isPinned:T,canReorder:y,allowedDropTargetDropOnMimeTypes:m,onDropTargetDropOn:f,openDeleteDialog:v,onLongDragOver:x,togglePlay:S,triggerPlay:P,isItemInGrid:!0,isPlaying:A,isActive:I,spec:O,playInsteadOfNavigating:D}),Z=(0,w.jsx)(Zr,{uri:e,title:l,titlePrefix:s,menu:h,handleNavigate:r,playbackUri:R}),q=(0,w.jsx)(Nr,{leading:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ui.g,{pinned:T}),F,N,p]}),subtitle:(0,w.jsx)(Ar,{shouldShowType:C,type:d,subtitle:o,specialType:u}),uri:e}),J=(0,i.useRef)(null),Q=yi();let $=(0,w.jsx)(g.h,{menu:h,onShow:Y,children:(0,w.jsx)(Sr.E,{uri:e,trigger:Sr.l.OnMouseDown,children:(0,w.jsx)(hr.Z,{id:e,title:Z,subtitle:q,media:c,size:"sm",leading:b,className:a()(mi,{[L]:k}),variant:X?"tinted":void 0,onClick:M,onDoubleClick:B,padding:br.CJ,...G})})});return Q&&($=(0,w.jsx)(jr,{title:Z,subtitleSlot:q,uri:e,isPlaying:A,parentRef:J,children:(0,w.jsx)("div",{children:(0,w.jsx)(g.h,{menu:h,onShow:Y,children:(0,w.jsx)(Sr.E,{uri:e,trigger:Sr.l.OnMouseDown,children:(0,w.jsx)(hr.Z,{id:e,title:void 0,media:c,size:"sm",className:a()(mi,fi,{[L]:k}),variant:X?"tinted":void 0,onClick:M,onDoubleClick:B,padding:br.vw,ref:J,...G})})})})})),(0,w.jsxs)(w.Fragment,{children:[W,(0,w.jsx)(vr.W,{draggable:U,onDragStart:V,onKeyDown:_,className:a()(z,{[Wt]:H===j.Nz.ON,[Xt]:H===j.Nz.BEFORE,[Kt]:H===j.Nz.AFTER}),"aria-selected":I,innerRef:K,"aria-posinset":E,children:$})]})};var wi=r(30848),Ti=r(37926);const Ci=({name:e,uri:t,togglePlay:r,spec:n,isActive:l,isPlaying:s,size:o})=>{const c=(0,P.s)(),d=(0,i.useCallback)((()=>{l?s?c.logInteraction(n.yourLibraryItemFactory().doubleHitPause({itemToBePaused:t})):c.logInteraction(n.yourLibraryItemFactory().doubleHitResume({itemToBeResumed:t})):c.logInteraction(n.yourLibraryItemFactory().doubleHitPlay({itemToBePlayed:t})),r()}),[l,s,c,n,r,t]);return(0,w.jsx)("div",{className:a()(bi,{[Si]:s,[vi]:"small"===o}),role:"gridcell",children:(0,w.jsx)(Ti.R,{isPlaying:s,onClick:d,ariaPlayLabel:x.Ru.get("playlist.a11y.play",e),ariaPauseLabel:x.Ru.get("playlist.a11y.pause",e),size:o})})};var Ri=r(46106);const Ai=({name:e,uri:t,togglePlay:r,spec:n,isActive:a,isPlaying:l,size:s})=>{const o=(0,P.s)(),c=(0,i.useCallback)((()=>{const e=(0,Ri.$I)({spec:n,logger:o,uri:t,isActive:a,isPlaying:l});r({loggingParams:e})}),[a,l,o,n,r,t]);return(0,w.jsx)(Ti.R,{isPlaying:l,onClick:c,ariaPlayLabel:x.Ru.get("playlist.a11y.play",e),ariaPauseLabel:x.Ru.get("playlist.a11y.pause",e),size:s,version:Ti.H.transparent})};var Ii=r(13317),Di=r(75189),ji=r(58487),Oi=r(29844),Ei=r(94258);const Li=(0,i.memo)((function({title:e,type:t,images:r,isCircular:i,color:n,animateState:l,animateClassName:s="",isPlaying:o,togglePlay:c,spec:d,uri:u,overlayElement:p}){const g=(0,Ei._)(),{isCollapsed:y}=(0,Me.$)(),m=c&&!y;return(0,w.jsxs)("div",{className:a()({[Lr.A.imageContainer]:m||!!p}),children:[(0,w.jsx)(Ii.b,{fadeIn:!0,images:g(r,48),shape:i?Ii.u.CIRCLE:Ii.u.ROUNDED_CORNERS,size:Di.Qe.SIZE_48,iconSize:"medium",type:t,title:e,className:a()(Lr.A.entityImage,{[s]:l}),color:n,loadingMode:"eager"}),m&&(0,w.jsx)("div",{className:a()(Lt,{[kt]:i,[Nt]:!i}),children:(0,w.jsx)(Ai,{spec:d.yourLibraryItemFactory().playButtonFactory(),name:e,uri:u,togglePlay:c,isPlaying:o,isActive:!0,size:"medium"})}),p]})})),ki=(0,i.memo)((function({title:e,type:t,uri:r,images:n,isCircular:a,togglePlay:l,color:s,spec:o,isActive:c,isPlaying:d,overlayElement:u}){const p=yi(),g=(0,Ei._)(),[y,m]=(0,i.useState)("medium"),f=(0,i.useRef)(null);return(0,Oi.w)({onResize:({width:e})=>{m(e<90?"small":"medium")},refOrElement:f}),(0,w.jsx)("div",{className:hi,ref:f,children:(0,w.jsxs)(wi.M,{images:g(n,250),FallbackComponent:e=>(0,w.jsx)(ji.s,{semanticColor:"textSubdued",type:t,size:"xxlarge",className:xi,...e}),isCircular:a,color:s,loadingMode:"eager",children:[l&&!p&&(0,w.jsx)(Ci,{name:e,uri:r,togglePlay:l,spec:o,isActive:c,isPlaying:d,size:y}),u]})})}));var Ni=r(48405);const Fi="_ymJNIfklFmogab9uWY1",Mi=({folderDepth:e=0})=>(0,w.jsx)("li",{className:Fi,style:{"--ylx-folder-depth":e}}),Bi=e=>{const{RowVariantComponent:t,uri:r,to:n=(0,or.o_h)(r)?.toURLPath(!0)||"",handleNavigate:l,folderDepth:s,className:o,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:y,style:m,openDeleteDialog:f,togglePlay:x,triggerPlay:h,isPlaying:b,isActive:v,type:S,menu:P,name:T,namePrefix:C,subtitle:R,downloadButton:A,expandFolderButton:I,cover:D,alt:O,addedAt:E,lastPlayedAt:L,shouldShowType:k,playbackUri:N,playInsteadOfNavigating:F,spec:M,nrValidItems:B,index:U,lockedIcon:V,onKeyDown:_,preReleaseIcon:H,specialType:z,...W}=e,{onClick:Y,onDoubleClick:X,onDragStart:K,onKeyDown:G,dropPosition:Z,dropTargetClassName:q,draggable:J,unpinConfirmationDialog:Q,logRightClick:$,isViewActive:ee,itemRef:te,...re}=di({uri:r,to:n,type:S,handleNavigate:l,dragLabel:c,isPinned:d,canReorder:u,allowedDropTargetDropOnMimeTypes:p,onDropTargetDropOn:g,onLongDragOver:y,openDeleteDialog:f,togglePlay:x,triggerPlay:h,isPlaying:b,isActive:v,playInsteadOfNavigating:F,spec:M,folderDepth:s}),ie=(0,i.useCallback)((e=>{G(e),_?.(e)}),[G,_]);return(0,w.jsxs)(w.Fragment,{children:[Q,Z===j.Nz.BEFORE&&(0,w.jsx)(Mi,{folderDepth:s}),(0,w.jsx)(Ni.c,{style:{"--ylx-folder-depth":s,...m},draggable:J,onDragStart:K,onDoubleClick:X,className:a()(o,q,Et,{[Wt]:Z===j.Nz.ON}),...W,...re,onKeyDown:ie,innerRef:te,"aria-setsize":B,"aria-posinset":U+1,children:(0,w.jsx)(t,{...e,to:n,isActive:v,isViewActive:ee,onClick:Y,logRightClick:$,playInsteadOfNavigating:F,parentRef:te})}),Z===j.Nz.AFTER&&(0,w.jsx)(Mi,{folderDepth:s})]})};var Ui=r(78218);const Vi=({locked:e})=>e?(0,w.jsx)(Ui.u,{semanticColor:"textSubdued",title:x.Ru.get("mwp.header.content.unavailable"),className:Lr.A.icon,size:"xsmall"}):null;var _i=r(46307);function Hi(e){const{uri:t,artists:r,isPremiumOnly:n}=e,{filter:a}=(0,i.useContext)(Q.g),{isPlaying:l,isActive:o}=(0,Vr.l_)(t),c=(0,s.wA)(),d=(0,i.useCallback)((()=>{c((0,yr.aw)(t))}),[c,t]),{togglePlay:u,triggerPlay:p}=(0,_i.P)({uri:t},{featureIdentifier:"album",referrerIdentifier:"your_library"});return{isPlaying:l,isActive:o,openDeleteDialog:d,togglePlay:n?void 0:u,triggerPlay:n?void 0:p,menu:(0,w.jsx)(mr.h,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,w.jsx)(xr.M,{searchWords:[a.trim()],textToHighlight:r.at(0)?.name??""}),downloadButton:(0,w.jsx)(fr.M,{uri:t,size:"xsmall",className:Lr.A.icon,as:"span"})}}const zi=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{uri:l,images:s,name:o,pinned:c,type:d,albumType:u,addedAt:p,lastPlayedAt:g,color:y,isPremiumOnly:m}=e,{isPlaying:f,isActive:x,openDeleteDialog:h,togglePlay:b,triggerPlay:v,menu:S,subtitleText:P,downloadButton:T}=Hi(e),C=(0,w.jsx)(Li,{title:o,type:d,images:s,color:y,uri:l,isPlaying:f,spec:i,togglePlay:b}),R=(0,w.jsx)(Vi,{locked:m});return(0,w.jsx)(Bi,{RowVariantComponent:r,uri:l,cover:C,name:o,subtitle:P,downloadButton:T,alt:o,type:d,specialType:u,dragLabel:o,menu:S,togglePlay:b,triggerPlay:v,openDeleteDialog:h,addedAt:p,lastPlayedAt:g,isPinned:c,isPlaying:f,isActive:x,shouldShowType:t,spec:i,nrValidItems:n,index:a,lockedIcon:R})},Wi=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:n,images:a,name:l,pinned:s,type:o,albumType:c,color:d,isPremiumOnly:u}=e,{togglePlay:p,triggerPlay:g,menu:y,subtitleText:m,downloadButton:f,openDeleteDialog:x,isPlaying:h,isActive:b}=Hi(e),v=(0,w.jsx)(ki,{title:l,type:o,images:a,uri:n,togglePlay:p,color:d,spec:r,isActive:b,isPlaying:h}),S=(0,w.jsx)(Vi,{locked:u});return(0,w.jsx)(Pi,{uri:n,name:l,subtitle:m,menu:y,dragLabel:l,cover:v,downloadButton:f,type:o,specialType:c,togglePlay:p,triggerPlay:g,isPinned:s,shouldShowType:t,openDeleteDialog:x,isPlaying:h,isActive:b,spec:r,index:i,lockedIcon:S})};var Yi=r(96691);function Xi(e){const{uri:t}=e,r=(0,s.wA)(),{togglePlay:n,triggerPlay:a}=(0,_i.P)({uri:t},{featureIdentifier:"artist",referrerIdentifier:"your_library"}),{isPlaying:l,isActive:o}=(0,Vr.l_)(t);return{togglePlay:n,triggerPlay:a,isPlaying:l,isActive:o,openDeleteDialog:(0,i.useCallback)((()=>{r((0,yr.aw)(t))}),[r,t]),menu:(0,w.jsx)(Yi.t,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0})}}const Ki=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{togglePlay:y,triggerPlay:m,isPlaying:f,isActive:x,openDeleteDialog:h,menu:b}=Xi(e),v=(0,w.jsx)(Li,{title:o,type:c,images:s,isCircular:!0,color:g,uri:l,isPlaying:f,spec:i,togglePlay:y});return(0,w.jsx)(Bi,{RowVariantComponent:r,uri:l,cover:v,name:o,type:c,alt:o,dragLabel:o,menu:b,togglePlay:y,triggerPlay:m,openDeleteDialog:h,addedAt:d,lastPlayedAt:u,isPlaying:f,isActive:x,isPinned:p,shouldShowType:t,spec:i,nrValidItems:n,index:a})},Gi=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:n,images:a,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,openDeleteDialog:g,isPlaying:y,isActive:m}=Xi(e),f=(0,w.jsx)(ki,{title:l,type:s,images:a,uri:n,togglePlay:d,isCircular:!0,color:c,spec:r,isActive:m,isPlaying:y});return(0,w.jsx)(Pi,{uri:n,name:l,menu:p,dragLabel:l,cover:f,type:s,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,openDeleteDialog:g,isPlaying:y,isActive:m,spec:r,index:i})};var Zi=r(5928),qi=r(43953);function Ji(e){const{uri:t,authorName:r}=e,{filter:n}=(0,i.useContext)(Q.g),a=(0,qi.T)(),l=(0,s.wA)(),o=!!e.consumptionCapExplanation,c=(0,d.NC)(X.HJU),{togglePlay:u,triggerPlay:p}=(0,_i.P)({uri:t},{featureIdentifier:"audiobook",referrerIdentifier:"your_library"}),g=(0,i.useCallback)((async()=>{a.getAccessInfo(e.uri).then((e=>{e?.consumptionCapped&&l((0,yr._3)(e.consumptionCapped))}))}),[e.uri,a,l]),y=(0,i.useCallback)((()=>{e.consumptionCapExplanation&&l((0,yr._3)(e.consumptionCapExplanation))}),[l,e.consumptionCapExplanation]);let m,f;c&&(o?(m=y,f=y):e.isCappedWithoutExplanation?(f=g,m=g):e.isPlayable&&(m=p,f=u));const{isPlaying:x,isActive:h}=(0,Vr.l_)(t);return{isPlaying:x,isActive:h,openDeleteDialog:(0,i.useCallback)((()=>{l((0,yr.aw)(t))}),[l,t]),menu:(0,w.jsx)(Zi.p,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),subtitleText:(0,w.jsx)(xr.M,{searchWords:[n.trim()],textToHighlight:r}),downloadButton:(0,w.jsx)(fr.M,{uri:t,size:"xsmall",className:Lr.A.icon,as:"span"}),togglePlay:f,triggerPlay:m}}const Qi=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{uri:l,images:s,name:o,type:c,pinned:d,addedAt:u,lastPlayedAt:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:f,menu:x,subtitleText:h,downloadButton:b,togglePlay:v,triggerPlay:S}=Ji(e),P=(0,w.jsx)(Li,{title:o,type:c,images:s,color:g,uri:l,isPlaying:y,spec:i,togglePlay:v}),T=(0,w.jsx)(Vi,{locked:e.isLocked});return(0,w.jsx)(Bi,{RowVariantComponent:r,uri:l,cover:P,name:o,subtitle:h,alt:o,dragLabel:o,menu:x,openDeleteDialog:f,addedAt:u,lastPlayedAt:p,isPlaying:y,isActive:m,isPinned:d,shouldShowType:t,type:c,spec:i,nrValidItems:n,lockedIcon:T,index:a,downloadButton:b,togglePlay:v,triggerPlay:S})},$i=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:n,images:a,name:l,type:s,pinned:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p,isPlaying:g,isActive:y,downloadButton:m,togglePlay:f,triggerPlay:x}=Ji(e),h=(0,w.jsx)(ki,{title:l,type:s,images:a,uri:n,color:c,spec:r,isActive:y,isPlaying:g,togglePlay:f});return(0,w.jsx)(Pi,{uri:n,name:l,subtitle:u,menu:d,dragLabel:l,cover:h,isPinned:o,shouldShowType:t,type:s,openDeleteDialog:p,isPlaying:g,isActive:y,spec:r,index:i,downloadButton:m,triggerPlay:x,togglePlay:f})};var en=r(37849);function tn(e){const{uri:t}=e,r=(0,s.wA)();return{openDeleteDialog:(0,i.useCallback)((()=>{r((0,yr.aw)(t))}),[r,t]),menu:(0,w.jsx)(en.L,{uri:t,canPin:e.canPin,isPinned:e.pinned})}}const rn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{openDeleteDialog:y,menu:m}=tn(e),f=(0,w.jsx)(Li,{title:o,type:c,images:s,isCircular:!0,color:g,uri:l,isPlaying:!1,spec:i});return(0,w.jsx)(Bi,{RowVariantComponent:r,uri:l,cover:f,name:o,type:c,alt:o,dragLabel:o,menu:m,openDeleteDialog:y,addedAt:d,lastPlayedAt:u,isPlaying:!1,isActive:!1,isPinned:p,shouldShowType:t,spec:i,nrValidItems:n,index:a})},nn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:n,images:a,name:l,type:s,pinned:o,color:c}=e,{menu:d,openDeleteDialog:u}=tn(e),p=(0,w.jsx)(ki,{title:l,type:s,images:a,uri:n,isCircular:!0,color:c,spec:r,isPlaying:!1,isActive:!1});return(0,w.jsx)(Pi,{uri:n,name:l,menu:d,dragLabel:l,cover:p,type:s,isPinned:o,shouldShowType:t,openDeleteDialog:u,isPlaying:!1,isActive:!1,spec:r,index:i})};var an=r(67507);function ln(e,t){const{uri:r,cityName:n,locationName:a}=e,{filter:l}=(0,i.useContext)(Q.g),s=(0,w.jsx)(an.u,{uri:r,canPin:e.canPin,isPinned:e.pinned}),o=e.startTime?(0,w.jsxs)("div",{className:Lr.A.eventDateOverlay,children:[(0,w.jsx)(we.E,{variant:t?"bodySmall":"marginal",children:x.Ru.formatDate(new Date(e.startTime),{month:"short"})}),(0,w.jsx)(we.E,{variant:t?"titleSmall":"bodyMediumBold",children:x.Ru.formatDate(new Date(e.startTime),{day:"numeric"})}),t&&(0,w.jsx)(we.E,{variant:"bodySmall",children:x.Ru.formatDate(new Date(e.startTime),{year:"numeric"})})]}):null,c=x.Ru.get("web-player.your-library-x.event-item.subtitle",{locationName:a,cityName:n});return{menu:s,subtitleText:(0,w.jsx)(xr.M,{searchWords:[l.trim()],textToHighlight:c}),imageOverlay:o}}const sn=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:g}=e,{menu:y,subtitleText:m,imageOverlay:f}=ln(e,!1),x=(0,w.jsx)(Li,{title:o,type:d,images:s,color:g,uri:l,isPlaying:!1,spec:i,overlayElement:f});return(0,w.jsx)(Bi,{RowVariantComponent:r,uri:l,cover:x,name:o,subtitle:m,alt:o,type:d,dragLabel:o,menu:y,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:n,index:a})},on=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:n,images:a,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u,imageOverlay:p}=ln(e,!0),g=(0,w.jsx)(ki,{title:l,type:o,images:a,uri:n,color:c,spec:r,isActive:!1,isPlaying:!1,overlayElement:p});return(0,w.jsx)(Pi,{uri:n,name:l,subtitle:u,menu:d,dragLabel:l,cover:g,type:o,isPinned:s,shouldShowType:t,isPlaying:!1,isActive:!1,spec:r,index:i})};var cn=r(18376),dn=r(78943);const un=({uri:e,divider:t,onDeleteCallback:r})=>{const n=(0,b.W)(),a=(0,s.wA)(),l=(0,i.useCallback)((()=>{n({intent:"playlisting",type:"click"}),a((0,yr.OB)(e,r))}),[a,r,n,e]);return(0,w.jsx)(h.D,{role:"menuitem",divider:t,onClick:l,leadingIcon:(0,w.jsx)(dn.P,{semanticColor:"textSubdued",size:"small"}),children:x.Ru.get("contextmenu.delete")})},pn=i.memo((function(e){return(0,w.jsx)(S.pZ,{value:"delete-folder",children:(0,w.jsx)(un,{...e})})}));var gn=r(61890),yn=r(54422),mn=r(83596);const fn=({uri:e,spec:t})=>{const{togglePlay:r,isPlaying:n,isActive:a}=(0,_i.P)({uri:e},{featureIdentifier:"folder"}),l=(0,P.s)(),s=(0,i.useCallback)((()=>{r(),t&&l&&(n?l.logInteraction(t.playButtonFactory({uri:e}).hitPause({itemToBePaused:e})):a?l.logInteraction(t.playButtonFactory({uri:e}).hitResume({itemToBeResumed:e})):l.logInteraction(t.playButtonFactory({uri:e}).hitPlay({itemToBePlayed:e})))}),[a,n,l,t,r,e]);return(0,w.jsx)(h.D,{role:"menuitem",onClick:s,leadingIcon:n?(0,w.jsx)(yn._,{semanticColor:"textSubdued",size:"small"}):(0,w.jsx)(mn.A,{semanticColor:"textSubdued",size:"small"}),children:n?x.Ru.get("pause"):x.Ru.get("play")})},xn=i.memo((function(e){return(0,w.jsx)(S.pZ,{value:"create-folder",children:(0,w.jsx)(fn,{...e})})}));var hn=r(33650);const bn=({uri:e,name:t,divider:r,spec:n,handleRename:a})=>{const l=(0,P.s)(),o=(0,s.wA)(),c=(0,i.useCallback)((()=>{n&&l.logInteraction(n.editButtonFactory({uri:e}).hitUiReveal()),o((0,yr.O2)(t,a))}),[o,l,t,a,n,e]);return(0,w.jsx)(h.D,{role:"menuitem",divider:r,onClick:c,leadingIcon:(0,w.jsx)(hn.G,{semanticColor:"textSubdued",size:"small"}),children:x.Ru.get("contextmenu.rename")})},vn=i.memo((function(e){return(0,w.jsx)(S.pZ,{value:"rename",children:(0,w.jsx)(bn,{...e})})}));var Sn=r(10052),Pn=r(35806);const wn=i.memo((function({reference:e,name:t="",onRename:r,onCreateCallback:i=()=>{},onDeleteCallback:n,canPin:a=R.oT.NO,isPinned:l=!1,isPlayable:s=!0}){const{spec:o}=(0,A.o)(e.uri),c=(0,Pn.Ek)()&&s;return(0,w.jsx)(S.pZ,{value:"folder",children:(0,w.jsxs)(y.W,{children:[(0,w.jsx)(vn,{spec:o,uri:e.uri,name:t,handleRename:r}),(0,w.jsx)(pn,{uri:e.uri,divider:"after",onDeleteCallback:n}),(a!==R.oT.NO||l)&&(0,w.jsx)(gn.k,{uri:e.uri,canPin:a,isPinned:l,type:Pr.c.FOLDER,spec:o}),(0,w.jsx)(C,{position:{after:e},onCreateCallback:i,spec:o}),(0,w.jsx)(m.j,{position:{after:e},onCreateCallback:i,spec:o}),(0,w.jsx)(Sn.y,{uriToBeAdded:e.uri,isInLibrary:!0,spec:o}),c&&(0,w.jsx)(xn,{uri:e.uri,spec:o})]})})}));function Tn(e,t){const{createPlaylistFromAlbum:r,createPlaylistFromTracks:n}=(0,v.A)(),a=(0,P.s)(),l=(0,ii.g)(),s=ni(),o=(0,i.useCallback)((r=>{if(!t)return;const{[D.fl.PLAYLISTS_V2]:i=[],[D.fl.FOLDERS]:n=[]}=r,o={after:{uri:t}};i.length&&(s(i,o),a.logInteraction(e.dragSort())),n.length&&(l.moveFolder({uri:n[0]},o),a.logInteraction(e.dragSort()))}),[s,a,l,e,t]),{unpinConfirmationDialog:c,applyDropWithUnpinConfirmation:d}=ti({onApplyDrop:o});return{unpinConfirmationDialog:c,handleDropOnFolder:(0,i.useCallback)((async i=>{if(!t)return;const{[D.fl.TRACKS]:l=[],[D.fl.LOCAL_TRACKS]:s=[],[D.fl.ALBUMS]:o=[],[D.fl.EPISODES]:c=[],[D.fl.PLAYLISTS_V2]:u=[],[D.fl.FOLDERS]:p=[]}=i,g={after:{uri:t}};u.length||p.length?d(i,j.Nz.ON):o.length?(r(o[0],g),a.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist())):(l.length||s.length||c.length)&&(n([...l,...s,...c],g),a.logInteraction(e.yourLibraryItemFactory().dragCreatePlaylist()))}),[t,d,r,a,e,n])}}var Cn=r(88281),Rn=r(9875),An=r(26239),In=r(90829),Dn=r(99013),jn=r(52712),On=r(79219);const En=({uri:e})=>{const[t,r]=(0,i.useState)(!1),n=(0,Cn.x)(),a=(0,i.useCallback)((()=>{r(!0),setTimeout((()=>{r(!1)}),500)}),[]);return(0,An.l)(Rn.UV.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===n.getDefaultCurationContextUri(t.data.uris[0])&&a()})),(0,Dn.e)(In.Lj.OPERATION_COMPLETE,(t=>{"add"===t.data.operation&&e===t.data.uri&&a()})),(0,jn.b)(On.tD.OPERATION_COMPLETE,(t=>{"remove"!==t.data.operation&&"end"!==t.data.position?.after&&t.data.position.after?.uri===e&&(0,or.fpb)(e)&&a()})),{animateState:t,animateClassName:Lr.A.pulse}};var Ln=r(89706),kn=r(98628);function Nn(e,t){const{uri:r,name:n,numberOfFolders:a,numberOfPlaylists:l,pinned:o}=e,{isPlaying:c,isActive:d}=(0,Vr.l_)(r),{pushFolder:u}=(0,i.useContext)(dr),p=(0,s.wA)(),{togglePlay:g,triggerPlay:y}=(0,_i.P)({uri:r},{featureIdentifier:"folder",referrerIdentifier:"your_library"}),m=(0,s.d4)((e=>e.platform.isDesktop)),{handleDropOnFolder:f,unpinConfirmationDialog:h}=Tn(t,r),{renameFolder:b}=(0,Ln.Z)(),v=f,S=[l>0||!a?x.Ru.get("web-player.your-library-x.rows.folder.number-of-playlists",l):null,a>0?x.Ru.get("web-player.your-library-x.rows.folder.number-of-folders",a):null].filter(kn.P).join(x.Ru.getSeparator()),P=(0,i.useCallback)(((t="")=>{b(e,t)}),[e,b]),T=(0,i.useCallback)((()=>{u(e.uri)}),[e.uri,u]);return{openDeleteDialog:(0,i.useCallback)((()=>{p((0,yr.OB)(r))}),[p,r]),togglePlay:m?g:void 0,triggerPlay:m?y:void 0,menu:(0,w.jsx)(wn,{reference:{uri:r},name:n,canPin:e.canPin,isPinned:o,onRename:P,isPlayable:!e.isEmpty}),subtitleText:S,onDropTargetDropOn:v,handleNavigate:T,dropOnFolderUnpinConfirmationDialog:h,isPlaying:c,isActive:d}}const Fn=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:n,index:l})=>{const{uri:s,folderDepth:o,name:c,type:d,isFlattened:u,pinned:p,canReorder:g}=e,{openDeleteDialog:y,togglePlay:m,triggerPlay:f,menu:h,subtitleText:b,onDropTargetDropOn:v,handleNavigate:S,dropOnFolderUnpinConfirmationDialog:T,isPlaying:C,isActive:R}=Nn(e,r),[A,I]=function(e){const{getIsFolderExpanded:t,setIsFolderExpanded:r}=(0,i.useContext)(gt);return[(0,i.useMemo)((()=>t(e)),[t,e]),(0,i.useCallback)((t=>{r(e,t)}),[r,e])]}(s),D=(0,P.s)(),j=(0,i.useCallback)((()=>{I(!0),D.logInteraction(r.yourLibraryItemFactory().dragUiReveal())}),[D,I,r]),O=(0,i.useCallback)((e=>{e.stopPropagation()}),[]),E=(0,i.useCallback)((e=>{e.preventDefault(),e.stopPropagation(),I(!A),A?D.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiHide()):D.logInteraction(r.yourLibraryItemFactory().toggleFolderButtonFactory().hitUiReveal())}),[I,A,D,r]),L=(0,i.useCallback)((e=>{"ArrowLeft"===e.key?I(!1):"ArrowRight"===e.key&&I(!0)}),[I]),k=!u&&(0,w.jsx)(ke.H,{"data-skip-in-keyboard-nav":!0,"aria-label":A?x.Ru.get("web-player.your-library-x.collapse-folder"):x.Ru.get("web-player.your-library-x.expand-folder"),iconOnly:cn.y,size:"small",condensedAll:!0,onClick:E,onDoubleClick:O,tabIndex:-1,className:a()(bt,vt,{[Ot]:!A})}),{animateState:N,animateClassName:F}=En({uri:s}),M=(0,w.jsx)(Li,{title:c,type:d,animateState:N,animateClassName:F,uri:s,isPlaying:C,spec:r,togglePlay:m});return(0,w.jsxs)(w.Fragment,{children:[T,(0,w.jsx)(Bi,{onKeyDown:L,RowVariantComponent:t,uri:s,to:`/folder/${(0,or.o_h)(s)?.id??""}`,handleNavigate:S,folderDepth:o,cover:M,name:c,subtitle:b,alt:c,dragLabel:c,menu:h,canReorder:g,allowedDropTargetDropOnMimeTypes:rr,onDropTargetDropOn:v,onLongDragOver:j,togglePlay:m,triggerPlay:f,openDeleteDialog:y,addedAt:e.addedAt,lastPlayedAt:e.lastPlayedAt,isPinned:p,shouldShowType:!1,type:d,isPlaying:C,isActive:R,expandFolderButton:k,spec:r,nrValidItems:n,index:l})]})},Mn=({libraryItem:e,spec:t,index:r})=>{const{uri:i,name:n,type:a,pinned:l,canReorder:s}=e,{togglePlay:o,triggerPlay:c,menu:d,subtitleText:u,onDropTargetDropOn:p,handleNavigate:g,openDeleteDialog:y,isPlaying:m,isActive:f}=Nn(e,t),{animateState:x,animateClassName:h}=En({uri:i}),b=(0,w.jsx)(ki,{title:n,type:a,uri:i,togglePlay:o,spec:t,isActive:f,isPlaying:m});return(0,w.jsx)(Pi,{uri:i,to:`/folder/${(0,or.o_h)(i)?.id??""}`,handleNavigate:g,cover:b,name:n,subtitle:u,menu:d,dragLabel:n,canReorder:s,allowedDropTargetDropOnMimeTypes:rr,onLongDragOver:g,onDropTargetDropOn:p,togglePlay:o,triggerPlay:c,isPinned:l,shouldShowType:!1,type:a,openDeleteDialog:y,isPlaying:m,isActive:f,spec:t,index:r,animateState:x,animateClassName:h})};var Bn=r(68690);const Un=i.memo((function({uri:e,canPin:t,isPinned:r,downloadUri:i}){const{spec:n}=(0,A.o)(e);return(0,w.jsx)(S.pZ,{value:"generic",children:(0,w.jsxs)(y.W,{children:[i?(0,w.jsx)(Bn.dw,{spec:n,uri:i}):null,t!==R.oT.NO&&(0,w.jsx)(gn.k,{uri:e,canPin:t,isPinned:r,type:Pr.c.PLAYLIST,spec:n})]})})}));var Vn=r(98962);const _n=[D.fl.TRACKS,D.fl.LOCAL_TRACKS];function Hn(e){const{numberOfSongs:t}=e,r="spotify:collection:tracks",{user:n}=(0,s.d4)(Vn.Ht),a=(0,or.fHB)(n?.id).toURI(),l=a,o=a,{togglePlay:c,triggerPlay:d}=(0,_i.P)({uri:l},{featureIdentifier:"your_library",referrerIdentifier:"your_library"}),u=(0,zt.f)(),{isPlaying:p,isActive:g}=(0,Vr.l_)(l),y=(0,i.useCallback)((e=>{const{[D.fl.TRACKS]:t=[],[D.fl.LOCAL_TRACKS]:r=[]}=e,i=[...t,...r];i?.length&&u?.add({uris:i})}),[u]);return{isPlaying:p,isActive:g,togglePlay:c,triggerPlay:d,menu:(0,w.jsx)(Un,{uri:r,canPin:e.canPin,isPinned:e.pinned,downloadUri:o}),downloadButton:(0,w.jsx)(fr.M,{uri:o,size:"xsmall",className:Lr.A.icon,as:"span"}),subtitleText:(0,w.jsx)(w.Fragment,{children:x.Ru.get("web-player.your-library-x.rows.liked-songs.subtitle",t)}),onDropTargetDropOn:y,playbackUri:l,uri:r,...En({uri:r})}}const zn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{images:l,name:s,type:o,pinned:c,addedAt:d,lastPlayedAt:u,color:p}=e,{isPlaying:g,isActive:y,togglePlay:m,triggerPlay:f,menu:x,subtitleText:h,onDropTargetDropOn:b,playbackUri:v,uri:S,downloadButton:P,animateState:T,animateClassName:C}=Hn(e),R=(0,w.jsx)(Li,{title:s,type:o,images:l,color:p,animateState:T,animateClassName:C,uri:S,isPlaying:g,spec:i,togglePlay:m});return(0,w.jsx)(Bi,{RowVariantComponent:r,uri:S,cover:R,name:s,subtitle:h,alt:s,dragLabel:s,menu:x,allowedDropTargetDropOnMimeTypes:_n,onDropTargetDropOn:b,togglePlay:m,triggerPlay:f,addedAt:d,lastPlayedAt:u,isPlaying:g,isActive:y,isPinned:c,shouldShowType:t,type:o,playbackUri:v,downloadButton:P,spec:i,nrValidItems:n,index:a})},Wn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{images:n,name:a,type:l,pinned:s,color:o}=e,{togglePlay:c,triggerPlay:d,menu:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,downloadButton:f,isPlaying:x,isActive:h,animateState:b,animateClassName:v}=Hn(e),S=(0,w.jsx)(ki,{title:a,type:l,images:n,uri:y,togglePlay:c,color:o,spec:r,isActive:h,isPlaying:x});return(0,w.jsx)(Pi,{uri:m,name:a,subtitle:p,menu:u,dragLabel:a,allowedDropTargetDropOnMimeTypes:_n,onDropTargetDropOn:g,cover:S,togglePlay:c,triggerPlay:d,isPinned:s,shouldShowType:t,type:l,playbackUri:y,downloadButton:f,isPlaying:x,isActive:h,spec:r,index:i,animateState:b,animateClassName:v})};var Yn=r(11205),Xn=r(28784),Kn=r(52514),Gn=r(2793);function Zn(e){const{numberOfFiles:t}=e,r=Gn.bV,i=(0,Kn.Iu)().uri,{isPlaying:n,isActive:a}=(0,Vr.l_)(r);return{playbackUri:r,uri:i,isPlaying:n,isActive:a,menu:(0,w.jsx)(Un,{uri:i,canPin:e.canPin,isPinned:e.pinned}),downloadButton:(0,w.jsx)(Yn.F,{size:"xsmall",className:Lr.A.icon,semanticColor:"textBrightAccent"}),subtitleText:x.Ru.get("web-player.your-library-x.rows.local-files.subtitle",t)}}const qn=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{name:l,addedAt:s,lastPlayedAt:o,type:c,pinned:d}=e,{playbackUri:u,uri:p,isPlaying:g,menu:y,subtitleText:m,downloadButton:f,isActive:x}=Zn(e),h=(0,w.jsx)("div",{className:St,children:(0,w.jsx)(Xn.e,{iconSize:24,title:l})});return(0,w.jsx)(Bi,{RowVariantComponent:r,uri:p,name:l,subtitle:m,alt:l,dragLabel:l,menu:y,addedAt:s,lastPlayedAt:o,isPinned:d,isPlaying:g,isActive:x,shouldShowType:t,playbackUri:u,downloadButton:f,cover:h,type:c,spec:i,nrValidItems:n,index:a})},Jn=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{name:n,images:a,type:l,pinned:s}=e,{playbackUri:o,uri:c,menu:d,downloadButton:u,subtitleText:p,isPlaying:g,isActive:y}=Zn(e),m=(0,w.jsx)("div",{className:hi,children:(0,w.jsx)(wi.M,{images:a,FallbackComponent:e=>(0,w.jsx)(Xn.e,{size:"xxlarge",className:xi,...e})})});return(0,w.jsx)(Pi,{uri:c,name:n,subtitle:p,menu:d,cover:m,type:l,playbackUri:o,downloadButton:u,isPinned:s,shouldShowType:t,isPlaying:g,isActive:y,spec:r,index:i})};var Qn=r(66987);const $n=({index:e,type:t})=>{const r=yi();return(0,w.jsx)(Qn.T,{columnIndex:0,children:(0,w.jsx)(hr.Z,{className:a()(mi,{[fi]:r}),media:(0,w.jsx)(wi.M,{images:[],FallbackComponent:()=>(0,w.jsx)(ji.s,{type:t,size:"xxlarge",className:xi,semanticColor:"textSubdued"}),isCircular:t===Pr.c.ARTIST}),variant:"naked",id:e,title:"",padding:r?br.vw:br.CJ})})};var ea=r(36002),ta=r(25414),ra=r(19303),ia=r(42026),na=r(93282),aa=r(92730),la=r(97990),sa=r(56870),oa=r(8402),ca=r(81548),da=r(24370),ua=r(42752),pa=r(56032),ga=r(22436),ya=r(48785),ma=r(43530),fa=r(86848),xa=r(11258);const ha=i.memo((function({reference:e,isPublished:t,canPin:r=R.oT.NO,isPinned:i=!1,useDialogForUnfollow:n=!1,isInLibrary:a}){const{uri:l}=e,s=(0,fa.J)(l),o=!!s?.permissions?.isPrivate,c=(0,xa.v)(l)??s?.isPublished??t,{spec:d}=(0,A.o)(l),u=s?.hasSpotifyAudiobooks;return s&&(0,w.jsx)(S.pZ,{value:"playlist",children:(0,w.jsxs)(y.W,{children:[!u&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ra.K,{spec:d,uris:[l]}),(0,w.jsx)(ma._,{uri:l,spec:d})]}),!o&&(0,w.jsx)(ua._,{spec:d,divider:s.isOwnedBySelf?"after":"both",uri:l,isPublished:c}),s.isOwnedBySelf&&(0,w.jsx)(aa.T,{spec:d,uri:l,name:s.name,description:s.description,image:s.images[0]}),!s.isOwnedBySelf&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(pa.P,{spec:d,uri:l}),(0,w.jsx)(ta.ET,{uri:l,useDialog:n,initialState:a})]}),s.isOwnedBySelf&&(0,w.jsx)(na.u,{spec:d,uri:l}),!u&&(0,w.jsx)(Bn.dw,{spec:d,uri:l}),(0,w.jsx)(C,{position:{after:e},divider:"before",spec:d}),(0,w.jsx)(m.j,{position:{after:e},spec:d}),s.permissions?.canAdministratePermissions&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(da.U,{spec:d,divider:"before",uri:l,isPrivate:o}),!u&&(0,w.jsx)(sa.n,{uri:l,spec:d})]}),s.permissions?.canCancelMembership&&(0,w.jsx)(oa._,{spec:d,divider:"before",uri:l}),(0,w.jsx)(la.w,{spec:d,uri:l}),(0,w.jsx)(Sn.y,{uriToBeAdded:l,isInLibrary:!0,spec:d}),!u&&(0,w.jsx)(ga.o,{spec:d,uris:[l],isPlaylist:!0}),(r!==R.oT.NO||i)&&(0,w.jsx)(gn.k,{uri:l,canPin:r,isPinned:i,type:Pr.c.PLAYLIST,spec:d}),(s.isOwnedBySelf||!o)&&(0,w.jsxs)(ya.h,{divider:"before",children:[(0,w.jsx)(ia.m,{spec:d,uri:l,displayText:x.Ru.get("contextmenu.share.copy-playlist-link"),isPrivatePlaylist:o}),(0,w.jsx)(ca.x,{spec:d,uri:l,type:Pr.c.PLAYLIST})]})]})})})),ba=i.memo((function({reference:e,canPin:t=R.oT.NO,isPinned:r=!1}){const{uri:i}=e,{spec:n}=(0,A.o)(i);return(0,w.jsx)(S.pZ,{value:"playlist",children:(0,w.jsxs)(y.W,{children:[(0,w.jsx)(C,{position:{after:e},divider:"before",spec:n}),(0,w.jsx)(m.j,{position:{after:e},spec:n}),t!==R.oT.NO&&(0,w.jsx)(gn.k,{uri:i,canPin:t,isPinned:r,type:Pr.c.PLAYLIST,spec:n})]})})}));var va=r(27653);function Sa(e,t){const{uri:r,isLoading:n,owner:a,pinned:l,canView:o}=e,c=(0,va.m)(),{filter:d}=(0,i.useContext)(Q.g),u=[D.fl.TRACKS,D.fl.LOCAL_TRACKS,D.fl.ALBUMS,D.fl.EPISODES],p=[D.fl.AUDIOBOOKS];(0,i.useEffect)((()=>{n&&c.resync(r)}),[c,r,n]);const{togglePlay:g,triggerPlay:m}=(0,_i.P)({uri:r},{featureIdentifier:"playlist",referrerIdentifier:"your_library"}),{isPlaying:f,isActive:h}=(0,Vr.l_)(r),b=(0,s.wA)(),v=(0,P.s)();let S,T=[];const C=(0,i.useCallback)((async e=>{const{[D.fl.TRACKS]:i=[],[D.fl.LOCAL_TRACKS]:n=[],[D.fl.ALBUMS]:a=[],[D.fl.EPISODES]:l=[],[D.fl.AUDIOBOOKS]:s=[]}=e,o=[...i,...n,...a,...l,...s];b((0,ea.io)(r,o)),v.logInteraction(t.yourLibraryItemFactory().dragAddToPlaylist({itemToBeAdded:o.at(0)??"",playlist:r}))}),[b,v,t,r]);e.canAddTo&&(T=e.isEmpty?[...p,...u]:e.isBooklist?p:u,S=C);const R=(0,i.useCallback)((()=>{b((0,yr.O)(r))}),[b,r]),A=(0,gr.c0)(r),I=n&&!e.name;let j;j=A?(0,w.jsx)(ba,{reference:e,canPin:e.canPin,isPinned:l}):I?(0,w.jsx)(y.W,{children:(0,w.jsx)(ta.ET,{uri:r,initialState:!0})}):(0,w.jsx)(ha,{reference:e,canPin:e.canPin,isPinned:l,useDialogForUnfollow:!0,isInLibrary:!0});const O=(0,w.jsx)(fr.M,{uri:r,size:"xsmall",className:Lr.A.icon,as:"span"}),E=(0,gr.c0)(r)?x.Ru.get("ylx.clicktoplay"):o?(a.uri,(0,w.jsx)(xr.M,{searchWords:[d.trim()],textToHighlight:a.name})):x.Ru.get("web-player.your-library-x.playlist-unavailable"),L=!!(0,gr.c0)(r)||!e.isBooklist&&!e.isEmpty;return{openDeleteDialog:R,togglePlay:L?g:void 0,triggerPlay:L?m:void 0,isPlaying:f,isActive:h,menu:j,downloadButton:O,subtitleText:E,allowedDropTargetDropOnMimeTypes:T,onDropTargetDropOn:S,...En({uri:r})}}const Pa=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{uri:l,images:s,folderDepth:o,name:c,type:d,pinned:u,addedAt:p,lastPlayedAt:g,color:y,canReorder:m,namePrefix:f}=e,{openDeleteDialog:x,togglePlay:h,triggerPlay:b,isPlaying:v,isActive:S,menu:P,downloadButton:T,subtitleText:C,allowedDropTargetDropOnMimeTypes:R,onDropTargetDropOn:A,animateState:I,animateClassName:D}=Sa(e,i),j=(0,w.jsx)(Li,{title:c,type:d,images:s,color:y,animateState:I,animateClassName:D,uri:l,isPlaying:v,togglePlay:h,spec:i});return(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(Bi,{RowVariantComponent:r,uri:l,folderDepth:o,cover:j,name:c,namePrefix:f,subtitle:C,alt:c,dragLabel:c,menu:P,canReorder:m,allowedDropTargetDropOnMimeTypes:R,onDropTargetDropOn:A,togglePlay:h,triggerPlay:b,openDeleteDialog:x,addedAt:p,lastPlayedAt:g,isPlaying:v,isActive:S,isPinned:u,shouldShowType:t,type:d,downloadButton:T,spec:i,playInsteadOfNavigating:(0,gr.c0)(l),nrValidItems:n,index:a})})},wa=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:n,images:a,name:l,type:s,pinned:o,color:c,canReorder:d,namePrefix:u}=e,{togglePlay:p,triggerPlay:g,menu:y,downloadButton:m,subtitleText:f,onDropTargetDropOn:x,allowedDropTargetDropOnMimeTypes:h,openDeleteDialog:b,isPlaying:v,isActive:S,animateState:P,animateClassName:T}=Sa(e,r),C=(0,w.jsx)(ki,{title:l,type:s,images:a,uri:n,togglePlay:p,color:c,spec:r,isActive:S,isPlaying:v});return(0,w.jsx)(Pi,{uri:n,name:l,namePrefix:u,subtitle:f,menu:y,dragLabel:l,canReorder:d,allowedDropTargetDropOnMimeTypes:h,onDropTargetDropOn:x,cover:C,togglePlay:p,triggerPlay:g,isPinned:o,shouldShowType:t,type:s,downloadButton:m,openDeleteDialog:b,isPlaying:v,isActive:S,spec:r,playInsteadOfNavigating:(0,gr.c0)(n),index:i,animateState:P,animateClassName:T})};var Ta=r(31345),Ca=r(2103),Ra=r(2082),Aa=r(50532);const Ia=i.memo((function({uri:e,canPin:t=R.oT.NO,isPinned:r=!1,canRemove:i=!1}){const{spec:n}=(0,A.o)(e);return(0,w.jsx)(S.pZ,{value:"audiobook",children:(0,w.jsxs)(y.W,{children:[i&&(0,w.jsx)(Aa.p,{uri:e,removeLabel:x.Ru.get("contextmenu.remove-from-library")}),t!==R.oT.NO&&(0,w.jsx)(gn.k,{uri:e,canPin:t,isPinned:r,type:Pr.c.PRE_RELEASE_BOOK,spec:n}),(0,w.jsx)(ia.m,{uri:e,spec:n,displayText:x.Ru.get("context-menu.copy-book-link")}),(0,w.jsx)(Ra.q,{spec:n,divider:"before",uri:e})]})})}));function Da(e){const{uri:t,canPin:r,pinned:n,type:a}=e,{filter:l}=(0,i.useContext)(Q.g),o=(0,s.wA)(),c=(0,i.useCallback)((()=>{o((0,yr.aw)(t,!0))}),[o,t]);let d,u="";if(a===Pr.c.PRE_RELEASE_ALBUM){const i=e.artists?.at(0);u=i?.name??"",d=(0,w.jsx)(Ca.P,{uri:t,artistUri:i?.uri,canPin:r,isPinned:n,canRemove:!0})}else u=e.authorName,d=(0,w.jsx)(Ia,{uri:t,canPin:r,isPinned:n,canRemove:!0});return{openDeleteDialog:c,menu:d,subtitleText:(0,w.jsx)(xr.M,{searchWords:[l.trim()],textToHighlight:u})}}const ja=({libraryItem:e,shouldShowType:t=!1,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{uri:l,images:s,name:o,pinned:c,type:d,addedAt:u,lastPlayedAt:p,color:g}=e,{openDeleteDialog:y,menu:m,subtitleText:f}=Da(e),x=(0,w.jsx)(Li,{title:o,type:d,images:s,color:g,uri:l,isPlaying:!1,spec:i,togglePlay:void 0});return(0,w.jsx)(Bi,{RowVariantComponent:r,uri:l,cover:x,name:o,subtitle:f,alt:o,type:d,dragLabel:o,menu:m,openDeleteDialog:y,addedAt:u,lastPlayedAt:p,isPinned:c,isPlaying:!1,isActive:!1,shouldShowType:t,spec:i,nrValidItems:n,index:a,preReleaseIcon:(0,w.jsx)(Ta.t,{size:"xsmall",className:Lr.A.icon})})},Oa=({libraryItem:e,shouldShowType:t=!1,spec:r,index:i})=>{const{uri:n,images:a,name:l,pinned:s,type:o,color:c}=e,{menu:d,subtitleText:u,openDeleteDialog:p}=Da(e),g=(0,w.jsx)(ki,{title:l,type:o,images:a,uri:n,color:c,spec:r,isActive:!1,isPlaying:!1});return(0,w.jsx)(Pi,{uri:n,name:l,subtitle:u,menu:d,dragLabel:l,cover:g,type:o,isPinned:s,shouldShowType:t,openDeleteDialog:p,isPlaying:!1,isActive:!1,spec:r,index:i,preReleaseIcon:(0,w.jsx)(Ta.t,{size:"xsmall",className:Lr.A.icon})})};var Ea=r(39550);function La(e){const{uri:t,publisher:r}=e,{filter:n}=(0,i.useContext)(Q.g),a=(0,s.wA)(),{togglePlay:l,triggerPlay:o}=(0,_i.P)({uri:t},{featureIdentifier:"show",referrerIdentifier:"your_library"}),{isPlaying:c,isActive:d}=(0,Vr.l_)(t);return{isPlaying:c,isActive:d,openDeleteDialog:(0,i.useCallback)((()=>{a((0,yr.aw)(t))}),[a,t]),togglePlay:l,triggerPlay:o,menu:(0,w.jsx)(Ea.H,{uri:t,canPin:e.canPin,isPinned:e.pinned,useDialogForUnfollow:!0,isInLibrary:!0}),downloadButton:(0,w.jsx)(fr.M,{uri:t,size:"xsmall",className:Lr.A.icon,as:"span"}),subtitleText:(0,w.jsx)(xr.M,{autoEscape:!0,searchWords:[n.trim()],textToHighlight:r})}}const ka=({libraryItem:e,shouldShowType:t,RowVariantComponent:r,spec:i,nrValidItems:n,index:a})=>{const{uri:l,images:s,name:o,type:c,addedAt:d,lastPlayedAt:u,pinned:p,color:g}=e,{isPlaying:y,isActive:m,openDeleteDialog:f,togglePlay:x,triggerPlay:h,menu:b,downloadButton:v,subtitleText:S}=La(e),P=(0,w.jsx)(Li,{title:o,type:c,images:s,color:g,uri:l,isPlaying:y,spec:i,togglePlay:x});return(0,w.jsx)(Bi,{RowVariantComponent:r,uri:l,cover:P,name:o,subtitle:S,alt:o,dragLabel:o,menu:b,togglePlay:x,triggerPlay:h,openDeleteDialog:f,addedAt:d,lastPlayedAt:u,isPlaying:y,isActive:m,isPinned:p,shouldShowType:t,type:c,downloadButton:v,spec:i,nrValidItems:n,index:a})},Na=({libraryItem:e,shouldShowType:t,spec:r,index:i})=>{const{uri:n,images:a,name:l,type:s,pinned:o,color:c}=e,{togglePlay:d,triggerPlay:u,menu:p,downloadButton:g,subtitleText:y,openDeleteDialog:m,isPlaying:f,isActive:x}=La(e),h=(0,w.jsx)(ki,{title:l,type:s,images:a,uri:n,togglePlay:d,color:c,spec:r,isActive:x,isPlaying:f});return(0,w.jsx)(Pi,{uri:n,name:l,subtitle:y,menu:p,dragLabel:l,cover:h,togglePlay:d,triggerPlay:u,isPinned:o,shouldShowType:t,type:s,downloadButton:g,openDeleteDialog:m,isPlaying:f,isActive:x,spec:r,index:i})},Fa=[D.fl.EPISODES];function Ma(e){const{numberOfDownloadedEpisodes:t,uri:r}=e,n=(0,d.NC)(X.ucV,{loadingValue:!1}),{user:a}=(0,s.d4)(Vn.Ht),l=(0,or.fHB)(a?.id,"your-episodes").toURI(),o=n?r:l,c=R.Xn,{togglePlay:u,triggerPlay:p}=(0,_i.P)({uri:o},{featureIdentifier:"episode",referrerIdentifier:"your_library"}),{isPlaying:g,isActive:y}=(0,Vr.l_)(o),m=(0,zt.f)(),f=(0,i.useCallback)((e=>{const{[D.fl.EPISODES]:t=[]}=e;t?.length&&m?.add({uris:t})}),[m]);return{isPlaying:g,isActive:y,togglePlay:u,triggerPlay:p,menu:(0,w.jsx)(Un,{uri:c,canPin:e.canPin,isPinned:e.pinned}),downloadButton:t?(0,w.jsx)(Yn.F,{size:"xsmall",className:Lr.A.icon,semanticColor:"textBrightAccent"}):null,subtitleText:x.Ru.get("web-player.your-library-x.subtitle-your-episodes"),onDropTargetDropOn:f,playbackUri:o,uri:c,...En({uri:c})}}const Ba=({libraryItem:e,RowVariantComponent:t,spec:r,nrValidItems:i,index:n})=>{const{images:a,name:l,type:s,pinned:o,lastPlayedAt:c,addedAt:d,color:u}=e,{isPlaying:p,isActive:g,togglePlay:y,triggerPlay:m,menu:f,downloadButton:x,subtitleText:h,onDropTargetDropOn:b,playbackUri:v,uri:S,animateState:P,animateClassName:T}=Ma(e),C=(0,w.jsx)(Li,{title:l,type:s,images:a,color:u,animateState:P,animateClassName:T,uri:S,isPlaying:p,spec:r,togglePlay:y});return(0,w.jsx)(Bi,{RowVariantComponent:t,uri:S,cover:C,name:l,subtitle:h,alt:l,dragLabel:l,menu:f,allowedDropTargetDropOnMimeTypes:Fa,onDropTargetDropOn:b,togglePlay:y,triggerPlay:m,addedAt:d,lastPlayedAt:c,isPlaying:p,isActive:g,isPinned:o,shouldShowType:!1,type:s,downloadButton:x,playbackUri:v,spec:r,nrValidItems:i,index:n})},Ua=({libraryItem:e,spec:t,index:r})=>{const{images:i,name:n,type:a,pinned:l,color:s}=e,{togglePlay:o,triggerPlay:c,menu:d,downloadButton:u,subtitleText:p,onDropTargetDropOn:g,playbackUri:y,uri:m,isPlaying:f,isActive:x,animateState:h,animateClassName:b}=Ma(e),v=(0,w.jsx)(ki,{title:n,type:a,images:i,uri:m,togglePlay:o,color:s,spec:t,isActive:x,isPlaying:f});return(0,w.jsx)(Pi,{uri:m,name:n,subtitle:p,menu:d,dragLabel:n,allowedDropTargetDropOnMimeTypes:Fa,onDropTargetDropOn:g,cover:v,togglePlay:o,triggerPlay:c,playbackUri:y,downloadButton:u,isPinned:l,shouldShowType:!1,type:a,isPlaying:f,isActive:x,spec:t,index:r,animateState:h,animateClassName:b})};var Va=r(40806);function _a(){const e=(0,d.NC)(X.Gre),[t,r]=(0,be.x)("ylx-grid-scale",1);return e?{gridScale:1,setGridScale:()=>{}}:{gridScale:t,setGridScale:r}}var Ha=r(1112),za=r(58452),Wa=r(32829);const Ya=({span:e,onInView:t,marginBottom:r,marginTop:n})=>{const a=(0,i.useRef)(null);return(0,i.useEffect)((()=>{if(!window.IntersectionObserver)return()=>{};const e=new window.IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting&&t()}))}));return a.current&&e.observe(a.current),()=>{e.disconnect()}}),[t]),e<=0?null:(0,w.jsx)("div",{style:{gridColumn:"1/-1",gridRow:`span ${e}`,marginBottom:r,marginTop:n},ref:a,"data-type":"sentinel"},"topSentinel")},Xa=({renderItems:e,nrItems:t,estimatedItemMaxHeight:r,scrollNodeRef:n,nrRowsOverscan:a=5,initalNrRows:l=5,onGridResize:s})=>{const[o,c]=(0,i.useState)({firstRowToRender:0,nrRows:l+a}),d=(0,i.useRef)(0),u=(0,i.useRef)(null),p=(0,i.useRef)(r),g=(0,i.useCallback)((()=>{const e=u.current?.querySelector(':scope > *:not([data-type="sentinel"])');p.current=e?e.getBoundingClientRect().height:p.current}),[]),y=(0,i.useCallback)((()=>{const e=n.current;if(!e)return;g();const t=Math.floor((e.scrollTop-d.current)/p.current),r=Math.max(t-a,0),i=Math.ceil(e.offsetHeight/p.current)+2*a;r===o.firstRowToRender&&i===o.nrRows||c({firstRowToRender:r,nrRows:i})}),[a,o,n,g]),m=(0,i.useCallback)((({columnCount:r})=>{if(r<=0)return[null];s&&s(r,p.current);const i=Math.ceil(t/r),n=o.firstRowToRender*r,l=o.firstRowToRender+o.nrRows-1,c=Math.min(t-1,(l+1)*r-1),d=p.current*(a-2);return[(0,w.jsx)(Ya,{span:o.firstRowToRender,onInView:y,marginBottom:`-${d}px`},`topSentinel-${o.firstRowToRender}`),e(n,c,r),(0,w.jsx)(Ya,{span:i-l,onInView:y,marginTop:`-${d}px`},"bottomSentinel-"+(i-l))]}),[t,a,s,y,e,o]);return(0,i.useEffect)((()=>{const e=u.current,t=n.current;e&&t&&(d.current=e.getBoundingClientRect().top-t.getBoundingClientRect().top+t.scrollTop)}),[n]),(0,w.jsx)(Wa.E,{useUniformRowHeight:!0,ref:u,render:m,onLayoutChange:g})},Ka=(0,K.g)(Pr.c),Ga=(0,i.memo)((function({item:e,primaryFilter:t,spec:r,index:i}){const n={shouldShowType:!(0,gr.c0)(e.uri)&&(Rr(e.type)!==t||Cr(e)),spec:r,index:i},a=(0,d.NC)(X.lDH);switch(e.type){case Pr.c.FOLDER:return(0,w.jsx)(Mn,{libraryItem:e,...n});case Pr.c.ALBUM:return(0,w.jsx)(Wi,{libraryItem:e,...n});case Pr.c.ARTIST:return(0,w.jsx)(Gi,{libraryItem:e,...n});case Pr.c.AUDIOBOOK:return(0,w.jsx)($i,{libraryItem:e,...n});case Pr.c.AUTHOR:return(0,w.jsx)(nn,{libraryItem:e,...n});case Pr.c.SHOW:return(0,w.jsx)(Na,{libraryItem:e,...n});case Pr.c.PLAYLIST:return(0,w.jsx)(wa,{libraryItem:e,...n});case Pr.c.LIKED_SONGS:return(0,w.jsx)(Wn,{libraryItem:e,...n});case Pr.c.YOUR_EPISODES:return(0,w.jsx)(Ua,{libraryItem:e,...n});case Pr.c.LOCAL_FILES:return(0,w.jsx)(Jn,{libraryItem:e,...n});case Pr.c.PRE_RELEASE_ALBUM:return a?(0,w.jsx)(Oa,{libraryItem:e,...n}):null;case Pr.c.PRE_RELEASE_BOOK:return(0,w.jsx)(Oa,{libraryItem:e,...n});case Pr.c.CONCERT:return(0,w.jsx)(on,{libraryItem:e,...n});default:(0,wr.d)(e)}})),Za=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:n,spec:a})=>{const l=(0,d.NC)(X.Gre),{gridScale:s}=_a(),o=function(){const{gridScale:e}=_a(),[t]=(0,Va.j)();return(0,d.NC)(X.Gre)?t===Va.A.COMPACT:e<.8}(),c=(0,za.s1)(o&&l?za.yV.YLX_COMPACT:za.yV.YLX,s),u=(0,i.useRef)({}),p=(0,i.useCallback)((e=>(0,w.jsx)($n,{index:e,type:Ka(r)?r:void 0},e)),[r]),g=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>{const n=t+i;return e?(0,w.jsx)(Ga,{item:e,spec:a,primaryFilter:r,index:n},`${e.uri}-${n}`):p(`${n}`)}))),[e,r,p,a]),y=(0,i.useCallback)(((e,t)=>{u.current={numColumns:e,rowHeight:t}}),[]);return(0,w.jsx)(Ha.x,{config:c,children:(0,w.jsx)(gi,{isCompact:o,children:(0,w.jsx)(pr.R,{firstInteractiveIsWrapper:!0,"aria-label":x.Ru.get("web-player.your-library-x.your-library"),"aria-rowcount":Math.round(n/(u.current.numColumns??1)),"aria-colcount":u.current.numColumns,children:(0,w.jsx)(Xa,{renderItems:g,nrItems:n,estimatedItemMaxHeight:250,scrollNodeRef:t,onGridResize:y})})})})};var qa=r(56294),Ja=r(69184),Qa=r(51648),$a=r(83925);const el="bDHk5k9wfICYjDSC27zp",tl="oaVwShR89gQxLH2tco5G",rl="JBkqeL9U_4_hqstj_oa8",il="bRRTUCB99PsPsPVYchRh",nl="Gj4v3278oIywygaUyBbt",al="WHTLfjA4oq5AQak5E8CQ",ll="WJFlv_VJkA5oNs0XJMsQ",sl=({isCollapsed:e,toggleCollapsedState:t,dropTargetClassName:r,folderUri:i,...n})=>(0,w.jsx)("div",{className:a()(el,e&&al,!e&&il),...n,children:(0,w.jsxs)("button",{type:"button","aria-label":e?x.Ru.get("web-player.your-library-x.expand-your-library"):x.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:t,className:a()(tl,r),children:[(0,w.jsx)("span",{className:nl,children:e?(0,w.jsx)(qa.M,{}):(0,w.jsx)(Qa.C,{size:"small"})}),e&&(0,w.jsx)("span",{className:ll,children:(0,w.jsx)($a.t,{})}),!i&&!e&&(0,w.jsx)(we.E,{variant:"bodyMediumBold",semanticColor:"textBase",className:rl,children:x.Ru.get("web-player.your-library-x.your-library")})]})}),ol="HjPqU_UW2egr14mRSom9",cl="i_FRcsaqNCEJmoyObIP0",dl="BZh0f1vbOmruyp4_t9wy",ul="X4hWBYwbK0FnYvzkp6Z4",pl="tAfozCQs48q1JYdphYXi",gl="iYP0xuQiJCgi7gx1jUPJ",yl="FTiXRW7kAldHmLaxVQ2N",ml="cljOO1tpzixzXctKJucK",fl="af749NDLYTDK_8LinKWD",xl="nGWhztVvLY1BInXjcWYa",hl="oZT8iKL42zhLAm_zE5F5",bl="MdDY8fQ_j94mQZy7ZVXf",vl="uNReR011bI8ML42Pgveg",Sl="oRLkDAtmp80o6GaEYjSE",Pl="BG0k3lL7qfJ5h2cRpJzJ",wl=e=>{switch(e){case Me.fX.EXPANDED:return"expanded";case Me.fX.COLLAPSED:return"collapsed";case Me.fX.DEFAULT:return"default";default:throw(0,wr.k)(e)}},Tl=({folderUri:e,dropTargetClassName:t,spec:r})=>{const{isCollapsed:n,ylxSidebarState:l,setYlxSidebarState:s,lastUncollapsedYlxSidebarState:o}=(0,Me.$)(),c=(0,P.s)(),u=(0,d.NC)(X.qNB),p=(0,i.useCallback)((()=>{const e=l===Me.fX.COLLAPSED?o:Me.fX.COLLAPSED;s(e),c.logInteraction(r.hitToggleState({stateBeforeToggle:wl(l),stateAfterToggle:wl(e)}))}),[l,o,s,c,r]),g=n?qa.M:Ja.A;return(0,w.jsx)(Fe.Zp,{label:n?x.Ru.get("web-player.your-library-x.expand-your-library"):x.Ru.get("web-player.your-library-x.collapse-your-library"),placement:n?"right":void 0,children:u?(0,w.jsx)(sl,{isCollapsed:n,toggleCollapsedState:p,dropTargetClassName:t,folderUri:e}):(0,w.jsx)(ke.H,{"aria-label":n?x.Ru.get("web-player.your-library-x.expand-your-library"):x.Ru.get("web-player.your-library-x.collapse-your-library"),onClick:p,className:a()(cl,ml,t),condensed:!0,iconLeading:e||n?void 0:g,iconOnly:e||n?g:void 0,children:!e&&!n&&x.Ru.get("web-player.your-library-x.your-library")})})};var Cl=r(4673),Rl=r(21807);const Al=({dropTargetClassName:e,spec:t})=>{const{ylxSidebarState:r,setYlxSidebarState:i}=(0,Me.$)(),n=r===Me.fX.DEFAULT,l=(0,P.s)();return(0,w.jsx)(Fe.Zp,{label:n?x.Ru.get("web-player.your-library-x.show-more"):x.Ru.get("web-player.your-library-x.show-less"),children:(0,w.jsx)(ke.H,{className:a()(ml,xl,e),iconOnly:n?Cl.h:Rl.G,"aria-label":n?x.Ru.get("web-player.your-library-x.enlarge-your-library"):x.Ru.get("web-player.your-library-x.reduce-your-library"),onClick:()=>{i(n?Me.fX.EXPANDED:Me.fX.DEFAULT),l.logInteraction(t.hitToggleState({stateBeforeToggle:n?"default":"expanded",stateAfterToggle:n?"expanded":"default"}))},size:"small"})})};var Il=r(81878);const Dl=({handleNavigateBack:e,isCollapsed:t,parentFolderUri:r,spec:i})=>{const{handleDropBeforeOrAfterRootlistItem:n}=li({dropTargetUri:r,spec:i}),{dropPosition:l,className:s,...o}=(0,O.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:er},onDrop:async e=>{n(e,j.Nz.BEFORE)},onLongDragOver:e}),c=(0,d.NC)(X.qNB);return(0,w.jsx)(Fe.Zp,{label:x.Ru.get("web-player.your-library-x.navigate-back-folder"),children:(0,w.jsx)(ke.H,{className:a()(ml,fl,s,{[Yt]:l===j.Nz.ON,[Sl]:!t&&c}),"aria-label":x.Ru.get("web-player.your-library-x.navigate-back-folder"),onClick:e,iconOnly:Il.g,size:"small",...o})})};var jl=r(48613),Ol=r(585);const El=({folderMenu:e,folderName:t,dropTargetClassName:r})=>(0,w.jsx)(Ol.b,{menu:e,children:(0,w.jsx)("span",{children:(0,w.jsx)(Fe.Zp,{label:x.Ru.get("more.label.context",t),children:(0,w.jsx)(ke.H,{className:a()(ml,xl,r),iconOnly:jl.x,"aria-haspopup":"menu","aria-label":x.Ru.get("more.label.context",t),size:"small"})})})});var Ll=r(45994),kl=r(32835);const Nl="AIlmv6h8bR5NY5R0VceT",Fl="gPxvvwdrTY6FbTx3mvl1",Ml="Di4Z5tg2m68SN66AxRgI",Bl="l5V7KOO1aHJ4R7jYTQuV",Ul=({iconOnly:e=!1})=>(0,w.jsx)(Ol.b,{menu:(0,w.jsx)(kl.r,{}),children:(t,r,i)=>(0,w.jsx)(Fe.Zp,{label:x.Ru.get("web-player.global-nav-bar.create-button.tooltip"),children:(0,w.jsxs)("button",{type:"button",ref:i,onClick:r,className:a()(Nl,{[Ml]:t,[Bl]:e}),"aria-label":x.Ru.get("web-player.global-nav-bar.create-button.label"),children:[(0,w.jsx)(Ll.u,{className:Fl,size:"small"}),!e&&(0,w.jsx)(we.E,{variant:"bodySmallBold",semanticColor:"textBase",children:x.Ru.get("web-player.global-nav-bar.create-button.label")})]})})});var Vl=r(3128),_l=r(65146);const Hl=function({folderUri:e,spec:t}){const{createPlaylist:r}=(0,v.A)(),{createFolder:i}=(0,Ln.Z)(),n=(0,P.s)(),a=(0,Ce.V)(),l=e?{after:{uri:e}}:{before:"start"};return(0,w.jsxs)(y.W,{children:[(0,w.jsx)(h.D,{onClick:()=>{r(void 0,l),n.logInteraction(t.createPlaylistOptionFactory().hitCreatePlaylist())},role:"menuitem",leadingIcon:(0,w.jsx)(f.u,{size:"small"}),children:x.Ru.get("web-player.your-library-x.create.create-a-new-playlist")}),!a&&(0,w.jsx)(h.D,{onClick:()=>{i(x.Ru.get("web-player.your-library-x.default_folder_name"),l),n.logInteraction(t.createFolderOptionFactory().hitCreateFolder())},role:"menuitem",leadingIcon:(0,w.jsx)(_l.h,{size:"small"}),children:x.Ru.get("web-player.your-library-x.create.create-a-playlist-folder")})]})},zl=({className:e="",folderUri:t,tooltipPlacement:r,spec:n})=>{const l=x.Ru.get("web-player.your-library-x.create.button-label"),s=(0,P.s)(),{createPlaylistFromAlbum:o,createPlaylistFromTracks:c,createPlaylistFromPlaylist:d}=(0,v.A)(),{className:u,dropPosition:p,...g}=(0,O.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:[D.fl.TRACKS,D.fl.EPISODES,D.fl.ALBUMS,D.fl.PLAYLISTS_V2,D.fl.AUDIOBOOKS]},onDrop:(0,i.useCallback)((e=>{const{[D.fl.TRACKS]:r=[],[D.fl.LOCAL_TRACKS]:i=[],[D.fl.EPISODES]:n=[],[D.fl.AUDIOBOOKS]:a=[],[D.fl.ALBUMS]:l=[],[D.fl.PLAYLISTS_V2]:s=[]}=e,u=t?{after:{uri:t}}:{before:"start"},p=[...r,...i,...n];a.length>0?c(a,u):p.length?c(p,u):l.length>0?o(l[0],u):s.length>0&&d(s[0],u)}),[o,d,c,t])});return(0,w.jsx)(Vl.t,{renderInline:!0,menu:(0,w.jsx)(Hl,{folderUri:t,spec:n.createMenuFactory()}),preventScrollingWhileOpen:!1,children:(t,i,o)=>(0,w.jsx)(Fe.Zp,{label:l,placement:r,children:(0,w.jsx)(ke.H,{ref:o,iconOnly:Ll.u,className:a()(e,u,{[Yt]:p===j.Nz.ON}),"aria-label":l,onClick:e=>{i(e),s.logInteraction(n.hitUiReveal())},size:"small",...g})})})},Wl=(0,i.forwardRef)((function({folderUri:e,folderName:t,folderMenu:r,onRename:n,spec:l,className:o,isCollapsed:c},u){const{isActive:p}=(0,Vr.l_)(e??"not-a-folder"),y=(0,s.wA)(),m=(0,P.s)(),f=(0,i.useCallback)((()=>{y((0,yr.O2)(t,n)),m.logInteraction(l.hitRenameFolder({uri:e}))}),[y,t,e,m,n,l]),x=(0,d.NC)(X.qNB);return(0,w.jsx)(Fe.Zp,{label:t,showDelay:Fe.uF,children:(0,w.jsx)("div",{className:a()(bl,o,{[Pl]:!c&&x}),children:(0,w.jsx)(g.h,{menu:r,children:(0,w.jsx)(ke.H,{"aria-label":t,onClick:f,size:"small",condensed:!0,className:a()(ml),ref:u,children:(0,w.jsx)(we.E,{variant:"bodyMediumBold",semanticColor:p?"textBrightAccent":void 0,className:vl,children:t})})})})})}));var Yl=r(4766),Xl=r(94011),Kl=r(87647);const Gl="fJrnaZd0QWm65978IgD2",Zl="yCpl0fAaEYj7E8F_Oabw",ql=()=>{const{syncing:e,percentage:t,currentItem:r,totalItems:n}=function(){const[e,t]=(0,i.useState)({syncing:!1,percentage:0,totalItems:0,currentItem:0}),r=Xl.I.UPDATE_TOTAL_PROGRESS,n=(0,i.useCallback)((e=>t(e.data.progress)),[]);return(0,Kl.b)(r,n),e}();return e?(0,w.jsxs)("div",{className:Gl,children:[(0,w.jsxs)("div",{className:Zl,children:[(0,w.jsx)(we.E,{variant:"bodySmallBold",semanticColor:"textBase",children:x.Ru.get("web-player.your-library-x.download-progress-title")}),(0,w.jsx)(we.E,{variant:"bodySmallBold",semanticColor:"textBase",children:x.Ru.get("web-player.your-library-x.download-progress-count-out-of-total",r,n)})]}),(0,w.jsx)(Yl.z,{value:t})]}):null};var Jl=r(20951),Ql=r(98370);const $l=({parentDropTargetClassName:e,isLibraryCompletelyEmpty:t,folderUri:r,folderName:n,spec:l,openedFolderIsPlayable:s})=>{const{isCollapsed:o,ylxSidebarState:u,canExpand:p}=(0,Me.$)(),{renameFolder:g}=(0,Ln.Z)(),{popFolder:y}=(0,i.useContext)(dr),m=(0,i.useCallback)(((e="")=>{r&&g({uri:r},e)}),[r,g]),f=(0,i.useCallback)((()=>{y()}),[y]),x=r?(0,w.jsx)(wn,{reference:{uri:r},name:n,onRename:m,onDeleteCallback:f,isPlayable:s}):null,{dropOriginIsYLX:h}=ri(),b=!o&&r&&void 0!==n,v=(0,i.useRef)(null),S=(0,i.useRef)(null),P=(0,i.useRef)(null),T=(0,i.useRef)(null);!function(e,t,r,...n){const a=(0,c.U0)((()=>{if(e.current)if(t.current instanceof HTMLElement){e.current.style.display="block";const{scrollWidth:r,offsetWidth:i}=t.current,n=r>i;e.current.style.display=n?"none":"block"}else e.current.style.display="block"}),[n]);(0,i.useLayoutEffect)(a,[a]),(0,Oi.w)({refOrElement:r,observeOnly:"width",onResize:a})}(T,(0,i.useMemo)((()=>({get current(){return P.current?.firstElementChild instanceof HTMLElement?P.current?.firstElementChild:null}})),[]),v,n,b);const{breakpoint:C}=(0,Ql.x)({[Jl.E.SMALL]:0,[Jl.E.MEDIUM]:300},v),R=(0,d.NC)(X.s_6,{loadingValue:X.G2o.NONE}),A=R===X.G2o.YOUR_LIBRARY,I=!o||t&&o,D=R===X.G2o.GLOBAL_NAV;return(0,w.jsxs)("header",{className:a()(ol,{[hl]:o}),ref:v,children:[!o&&(0,w.jsx)(ql,{}),(0,w.jsxs)("div",{className:a()(pl,{[gl]:o}),children:[(0,w.jsxs)("div",{className:a()(yl,{[gl]:o}),ref:S,children:[(0,w.jsx)(Tl,{folderUri:r,dropTargetClassName:e,spec:l.toggleCollapsedModeButtonFactory({identifier:""})}),r&&(0,w.jsx)(Dl,{handleNavigateBack:f,parentFolderUri:r,spec:l.folderBackButtonFactory(),isCollapsed:o}),b&&(0,w.jsx)(Wl,{folderUri:r,folderName:n,folderMenu:x,onRename:m,spec:l.folderTitleFactory(),isCollapsed:o,className:h?e:void 0,ref:P},r)]}),(0,w.jsxs)("div",{className:a()(dl,{[ul]:D}),children:[!A&&I&&(0,w.jsx)("span",{ref:T,children:(0,w.jsx)(zl,{className:a()(ml,xl),folderUri:r,tooltipPlacement:o?"right":void 0,spec:l.createMenuButtonFactory()})}),A&&(0,w.jsx)(Ul,{iconOnly:o||Boolean(r)||C===Jl.E.SMALL}),r&&!o&&(0,w.jsx)(El,{folderName:n,folderMenu:x,dropTargetClassName:e}),(u===Me.fX.DEFAULT&&p||u===Me.fX.EXPANDED)&&(0,w.jsx)(Al,{dropTargetClassName:e,spec:l.toggleExpandedModeButtonFactory({identifier:""})})]})]})]})};var es=r(69156),ts=r(12431),rs=r(94934);const is=({date:e})=>(0,w.jsx)(we.E,{variant:"bodySmall",semanticColor:"textSubdued",className:At,children:e&&x.Ru.formatRelativeDate(new Date(e),{year:"numeric",month:"short",day:"numeric",timeZone:"UTC"})}),ns=(0,i.memo)((e=>{const t=e.handleNavigate,r=(0,w.jsx)(Gr,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=e.expandFolderButton??(e.isPlaying&&(0,w.jsx)(Dr,{})),n=(0,w.jsx)(kr,{leading:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ui.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(Ar,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType})}),uri:e.uri}),a=e.logRightClick;return(0,w.jsx)(g.h,{menu:e.menu,onShow:a,children:(0,w.jsx)(Sr.E,{uri:e.uri,trigger:Sr.l.OnMouseDown,children:(0,w.jsx)(ts.v,{className:mt,media:e.cover,title:r,subtitle:n,trailing:i,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:br.v4,onClick:e.onClick,hoverAnimationDuration:"0ms"})})})})),as=e=>{const t=e.handleNavigate,r=(0,w.jsx)(Gr,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),i=(0,w.jsx)(kr,{leading:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(ui.g,{pinned:e.isPinned}),e.preReleaseIcon,e.downloadButton,e.lockedIcon]}),subtitle:(0,w.jsx)(Ar,{shouldShowType:e.shouldShowType,type:e.type,subtitle:e.subtitle,specialType:e.specialType}),uri:e.uri}),n=e.logRightClick;return(0,w.jsx)(jr,{...e,title:r,subtitleSlot:i,parentRef:e.parentRef,children:(0,w.jsxs)("div",{children:[(0,w.jsx)(g.h,{menu:e.menu,onShow:n,children:(0,w.jsx)(Sr.E,{uri:e.uri,trigger:Sr.l.OnMouseDown,children:(0,w.jsx)(ts.v,{className:a()(mt,xt),media:e.cover,id:e.uri,padding:br.v4,onClick:e.onClick,variant:void 0,title:void 0,hoverAnimationDuration:"0ms"})})}),(0,w.jsxs)("span",{className:Ft,children:[r," ",i]})]})})},ls=e=>{const t=(0,i.useRef)(null),r=e.logRightClick;return(0,w.jsx)(g.h,{menu:e.menu,onShow:r,children:(0,w.jsxs)("div",{className:Rt,ref:t,children:[(0,w.jsx)(ns,{...e,parentRef:t}),(0,w.jsx)(is,{date:e.addedAt}),(0,w.jsx)(is,{date:e.lastPlayedAt})]})})},ss=e=>{const t=e.handleNavigate,r=(0,w.jsxs)("div",{className:jt,children:[(0,w.jsx)(Gr,{uri:e.uri,title:e.name,titlePrefix:e.namePrefix,menu:e.menu,handleNavigate:t,playbackUri:e.playbackUri}),e.shouldShowType&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(rs.v,{children:"•"}),(0,w.jsx)(rs.v,{lineClamp:1,children:Tr(e.type,e.specialType)})]}),(!e.shouldShowType&&e.type===Pr.c.ALBUM||(0,gr.c0)(e.uri))&&(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(rs.v,{children:"•"}),(0,w.jsx)(kr,{leading:null,uri:e.uri,subtitle:e.subtitle})]})]}),i=(0,w.jsx)(ui.g,{pinned:e.isPinned}),n=e.expandFolderButton??(e.isPlaying?(0,w.jsx)(Dr,{iconSize:"xsmall"}):(0,w.jsxs)(w.Fragment,{children:[e.downloadButton&&(0,w.jsx)("div",{className:bt,children:e.downloadButton}),e.preReleaseIcon&&(0,w.jsx)("div",{className:bt,children:e.preReleaseIcon}),e.lockedIcon&&(0,w.jsx)("div",{className:bt,children:e.lockedIcon})]})),l=e.logRightClick;return(0,w.jsx)(g.h,{menu:e.menu,onShow:l,children:(0,w.jsx)(Sr.E,{uri:e.uri,trigger:Sr.l.OnMouseDown,children:(0,w.jsx)(ts.v,{className:a()(mt,ft),title:r,leading:e.isPinned?i:void 0,trailing:n,id:e.uri,variant:e.isViewActive?"tinted":void 0,padding:`${br.vw} ${br.v4}`,onClick:e.onClick,size:"sm",hoverAnimationDuration:"0ms"})})})},os=e=>{const t=e.logRightClick;return(0,w.jsx)(g.h,{menu:e.menu,onShow:t,children:(0,w.jsxs)("div",{className:Rt,children:[(0,w.jsx)(ss,{...e}),(0,w.jsx)(is,{date:e.addedAt}),(0,w.jsx)(is,{date:e.lastPlayedAt})]})})},cs=({height:e,isCompact:t,primaryFilter:r})=>(0,w.jsx)(Ni.c,{className:a()({[Pt]:!t,[Tt]:t,[wt]:r===Pr.c.ARTIST}),style:{height:e}});let ds=function(e){return e[e.DEFAULT=0]="DEFAULT",e[e.COMPACT=1]="COMPACT",e}({});const us=()=>{const[e]=(0,Va.j)(),t=(0,Me.vW)();return e===ds.DEFAULT||t===Me.fX.COLLAPSED?64:32};var ps=r(97204);const gs=(0,i.memo)((function({item:e,primaryFilter:t,RowVariantComponent:r,spec:i,nrValidItems:n,index:a,ylxIsCompact:l}){const s={shouldShowType:!(0,gr.c0)(e.uri)&&(Rr(e.type)!==t||Cr(e)&&!l),RowVariantComponent:r,spec:i,nrValidItems:n,index:a},o=(0,d.NC)(X.lDH);switch(e.type){case Pr.c.FOLDER:return(0,w.jsx)(Fn,{libraryItem:e,...s});case Pr.c.ALBUM:return(0,w.jsx)(zi,{libraryItem:e,...s});case Pr.c.ARTIST:return(0,w.jsx)(Ki,{libraryItem:e,...s});case Pr.c.AUDIOBOOK:return(0,w.jsx)(Qi,{libraryItem:e,...s});case Pr.c.AUTHOR:return(0,w.jsx)(rn,{libraryItem:e,...s});case Pr.c.SHOW:return(0,w.jsx)(ka,{libraryItem:e,...s});case Pr.c.PLAYLIST:return(0,w.jsx)(Pa,{libraryItem:e,...s});case Pr.c.LIKED_SONGS:return(0,w.jsx)(zn,{libraryItem:e,...s});case Pr.c.YOUR_EPISODES:return(0,w.jsx)(Ba,{libraryItem:e,...s});case Pr.c.LOCAL_FILES:return(0,w.jsx)(qn,{libraryItem:e,...s});case Pr.c.PRE_RELEASE_ALBUM:return o?(0,w.jsx)(ja,{libraryItem:e,...s}):null;case Pr.c.PRE_RELEASE_BOOK:return(0,w.jsx)(ja,{libraryItem:e,...s});case Pr.c.CONCERT:return(0,w.jsx)(sn,{libraryItem:e,...s});default:(0,wr.d)(e)}})),ys=({getItems:e,scrollNodeRef:t,primaryFilter:r,nrValidItems:n,spec:a})=>{const l=(0,Me.vW)(),[s]=(0,Va.j)(),o=us(),c=s===Va.A.COMPACT,d=((e,t)=>{switch(e){case Me.fX.COLLAPSED:return as;case Me.fX.DEFAULT:return t?ss:ns;case Me.fX.EXPANDED:return t?os:ls;default:(0,wr.d)(e)}})(l,c),u=(0,i.useCallback)(((e,t)=>(0,w.jsx)(cs,{height:e,isCompact:c,primaryFilter:r},t)),[c,r]),p=(0,i.useCallback)(((t,i)=>e(t,i).map(((e,i)=>{const l=t+i;return e?(0,w.jsx)(gs,{item:e,spec:a,RowVariantComponent:d,primaryFilter:r,nrValidItems:n,index:l,ylxIsCompact:c},`${e.uri}-${l}`):u(`${o}px`,`${l}`)}))),[e,a,d,r,n,c,u,o]);return(0,w.jsx)(es.$,{circular:!1,allowsMultipleInteractiveChildrenInItem:!0,"aria-label":x.Ru.get("web-player.your-library-x.your-library"),children:(0,w.jsx)(ps.L,{renderRows:p,nrRows:n,rowHeight:o,scrollNodeRef:t,renderPlaceholder:u})})};var ms=r(75773),fs=r(7730),xs=r(27508);const hs="MRzne1iuLfbh7KEwhHOk";function bs({onClick:e}){return(0,w.jsx)(ke.H,{size:"small",onClick:e,iconOnly:xs.M,"aria-label":x.Ru.get("close"),className:hs})}const vs="dixACKl18S755OnSdpna",Ss="IPdLO850RGC7isV9QxWB",Ps="S7PfnpeKtq9MCSrMhifz",ws=(0,i.forwardRef)((({onClose:e=()=>{},children:t,shouldCloseOnEscapePress:r=!0,colorSet:n="encore-announcement-set",maxWidth:l=180,header:s},o)=>((0,i.useEffect)((()=>{const t=t=>{r&&"Escape"===t.key&&e()};return window.addEventListener("keydown",t,!0),()=>{window.removeEventListener("keydown",t,!0)}}),[r,e]),(0,w.jsxs)("div",{ref:o,className:a()(n,vs,{[Ss]:!!s}),style:{maxWidth:`${l}px`},children:[!!s&&(0,w.jsxs)("div",{className:Ps,children:[s," ",(0,w.jsx)(bs,{onClick:e})]}),t,s?null:(0,w.jsx)(bs,{onClick:e}),(0,w.jsx)(fs.i,{})]}))));var Ts=r(65897);var Cs=r(49559);function Rs(e,t,r){const n=t.isInterestedInBeingShown,a=()=>{},l=(0,Cs.J)(t.onVisibilityGranted??a),s=(0,Cs.J)(t.onVisibilityDenied??a),[o,c]=(0,i.useState)(!1),{notifyShowInterest:d,notifyHideInterest:u,events:p}=((e,t)=>{const{notifyShowInterest:r,notifyHideInterest:n,events:a}=(0,i.useContext)(ae);return{events:a,notifyShowInterest:(0,i.useCallback)((()=>{r(e,t)}),[e,r,t]),notifyHideInterest:(0,i.useCallback)((()=>{n(e,t)}),[e,n,t])}})(e,r);return(0,i.useEffect)((()=>{const t=p.addListener(ie.VISIBILITY_GRANTED,(t=>{t.data.key===e&&(l(),c(!0))})),r=p.addListener(ie.VISIBILITY_DENIED,(t=>{t.data.key===e&&(s(),c(!1))}));return()=>{t(),r()}}),[p,e,l,s]),(0,i.useEffect)((()=>{n?d():u()}),[u,d,n]),(0,i.useEffect)((()=>u),[u]),{isVisible:o}}function As({children:e,content:t,itemKey:r,priority:i,offset:n,placement:a,isInterestedInBeingShown:l,onVisibilityDenied:s,onVisibilityGranted:o}){const{isVisible:c}=Rs(r,{isInterestedInBeingShown:l,onVisibilityDenied:s,onVisibilityGranted:o},i);return(0,w.jsx)(Ts.E,{content:t,isVisible:c,offset:n,placement:a,children:e})}var Is=r(4317),Ds=r(18317),js=r(3987),Os=r(73545),Es=r(21374),Ls=r(85282);const ks=e=>e?.parentElement?.querySelector("ul"),Ns=()=>[{header:x.Ru.get("web-player.your-library-x.sort-and-view-picker.list"),options:[{itemsViewState:Ls.X.LIST,compactModeState:Va.A.DEFAULT,icon:Ds.N,fullName:x.Ru.get("web-player.your-library-x.sort-and-view-picker.default-list"),displayName:x.Ru.get("web-player.your-library-x.sort-and-view-picker.default")},{itemsViewState:Ls.X.LIST,compactModeState:Va.A.COMPACT,icon:js.d,fullName:x.Ru.get("web-player.your-library-x.sort-and-view-picker.compact-list"),displayName:x.Ru.get("web-player.your-library-x.sort-and-view-picker.compact")}]},{header:x.Ru.get("web-player.your-library-x.sort-and-view-picker.grid"),options:[{itemsViewState:Ls.X.GRID,compactModeState:Va.A.DEFAULT,icon:Os.D,fullName:x.Ru.get("web-player.your-library-x.sort-and-view-picker.default-grid"),displayName:x.Ru.get("web-player.your-library-x.sort-and-view-picker.default")},{itemsViewState:Ls.X.GRID,compactModeState:Va.A.COMPACT,icon:Es.E,fullName:x.Ru.get("web-player.your-library-x.sort-and-view-picker.compact-grid"),displayName:x.Ru.get("web-player.your-library-x.sort-and-view-picker.compact")}]}];var Fs=r(2164);const Ms=(e,t,r)=>{const i=t.closest('li[role="presentation"]'),n=e.parentElement?.querySelectorAll('ul[role="menu"]');if(r===Fs.O.UP){const r=n?.[n.length-1],a=e.previousElementSibling,l=i?.previousElementSibling?.previousElementSibling;if(t instanceof HTMLUListElement||!l){if(a&&a instanceof HTMLUListElement)return a;if(r&&r instanceof HTMLUListElement)return r}}else{const t=i?.nextElementSibling;if(!t){const t=e.nextElementSibling;return t&&t instanceof HTMLUListElement?t:n?.[0]}}},Bs="pX2zJeKsLoBmQFN4xY4Q",Us=({selectedView:e,onViewSelect:t})=>(0,w.jsxs)(y.W,{"aria-label":x.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:Ms,getInitialFocusElement:ks,children:[(0,w.jsx)(Is.y,{children:x.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),Ns().map((r=>(0,w.jsxs)(i.Fragment,{children:[(0,w.jsx)(Is.y,{condensedBlock:!0,children:(0,w.jsx)(we.E,{variant:"bodySmallBold",className:Bs,children:r.header})},r.header),r.options.map((r=>{const i=r.itemsViewState===e.itemsViewState&&r.compactModeState===e.compactModeState;return(0,w.jsx)(h.D,{role:"menuitemradio","aria-checked":i,onClick:()=>{t(r)},leadingIcon:r.icon({size:"small"}),"aria-label":r.fullName,children:r.displayName},r.fullName)}))]},r.header)))]});var Vs=r(59929);const _s="UsP6uSRooAI9fdTmoQ7C",Hs="ktFXPl3NAYBjLv6hsC6Y",zs="hjCFCSfuAdwhiVs2Rfs7",Ws=[{itemsViewState:Ls.X.LIST,compactModeState:Va.A.COMPACT},{itemsViewState:Ls.X.LIST,compactModeState:Va.A.DEFAULT},{itemsViewState:Ls.X.GRID,compactModeState:Va.A.DEFAULT}],Ys=e=>e.itemsViewState===Ls.X.GRID?(0,w.jsx)(Os.D,{size:"small"}):e.compactModeState===Va.A.COMPACT?(0,w.jsx)(js.d,{size:"small"}):(0,w.jsx)(Ds.N,{size:"small"}),Xs=({selectedView:e,onViewSelect:t,spec:r})=>{const n=(0,P.s)(),{gridScale:a,setGridScale:l}=_a(),s=(0,i.useCallback)((e=>{const t=e+.5;l(t),n.logInteraction(r.gridDensitySliderFactory().dragSetSliderPosition({position:t}))}),[n,l,r]);return(0,w.jsxs)(y.W,{"aria-label":x.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as"),onFocusVerticalItem:Ms,getInitialFocusElement:ks,children:[(0,w.jsx)(Is.y,{children:x.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),Ws.map((r=>{const i=(e=>e.itemsViewState===Ls.X.GRID?x.Ru.get("web-player.your-library-x.sort-and-view-picker.grid"):e.compactModeState===Va.A.COMPACT?x.Ru.get("web-player.your-library-x.sort-and-view-picker.compact"):x.Ru.get("web-player.your-library-x.sort-and-view-picker.list"))(r),n=r.itemsViewState===e.itemsViewState&&r.compactModeState===e.compactModeState;return(0,w.jsx)(h.D,{role:"menuitemradio","aria-checked":n,onClick:()=>t(r),leadingIcon:Ys(r),autoClose:!1,children:i},i)})),Ls.X.GRID===e.itemsViewState&&(0,w.jsx)("li",{role:"presentation",children:(0,w.jsx)("div",{role:"menuitem",className:zs,children:(0,w.jsx)(Vs.z2,{labelText:x.Ru.get("web-player.your-library-x.sort-and-view-picker.grid-density-label"),value:a-.5,max:1,step:.1,onDragStart:s,onDragMove:s,onDragEnd:s,forceActiveStyles:!0,"data-roving-interactive":"1"})})})]})},Ks=({selectedSort:e,selectedView:t,onSortSelect:r,onViewSelect:n,sortOptions:a,spec:l,id:s})=>{const o=(0,d.NC)(X.Gre),c=(0,i.useRef)(null);return(0,w.jsxs)("div",{id:s,className:_s,ref:c,children:[(0,w.jsxs)(y.W,{"aria-label":x.Ru.get("web-player.your-library-x.sort_by"),onFocusVerticalItem:Ms,getInitialFocusElement:ks,children:[(0,w.jsx)(Is.y,{children:x.Ru.get("web-player.your-library-x.sort_by")}),a.map((({key:t,value:i},n)=>(0,w.jsx)(h.D,{role:"menuitemradio","aria-checked":t===e.key,onClick:()=>r(t,n),divider:n===a.length-1?"after":void 0,autoClose:!1,children:i},t)))]}),o?(0,w.jsx)(Us,{onViewSelect:n,selectedView:t}):(0,w.jsx)(Xs,{onViewSelect:n,selectedView:t,spec:l})]})},Gs=({sortOrders:e,activeSortOrderId:t,setActiveSortOrderId:r,showReorderingOnboarding:n,headerSpec:a,scrollNodeRef:l})=>{const s=(0,d.NC)(X.Gre),o=(0,zt.f)(),c=(0,i.useMemo)((()=>a.sortbyViewasMenuButtonFactory()),[a]),u=(0,P.s)(),p=(0,i.useCallback)((()=>{u.logInteraction(c.hitUiReveal())}),[u,c]),{inView:g,ref:y}=(0,ms.Wx)({initialInView:!0,root:l?.current,threshold:.75}),{show:m,onHide:f}=((e,t=!0)=>{const[r,n]=(0,be.x)("onboarding-dismissed:ylx-playlist-ordering",!1),[a,l]=(0,be.x)("onboarding-dismissed-amount:ylx-playlist-ordering",0),[s,o]=(0,i.useState)(!1),{dropOriginIsYLX:c}=ri(),{draggingIsInProgress:d}=(0,i.useContext)(k.O_);(0,i.useEffect)((()=>{d&&c&&o(!0)}),[d,c]);const u=(0,i.useCallback)((()=>{n(!0),o(!1),l(a+1)}),[a,l,n]);return{show:e&&a<3&&(!r||s)&&(t||s),onHide:u}})(n,g),h=e.find((e=>e.id===t))??e?.at(0),b={key:h?.id??"",value:h?.name??""},v=(0,i.useCallback)(((e,t)=>{r(e);const i=o.getSortOrderLabel(e);u.logInteraction(c.sortOptionFactory({identifier:i,position:t}).hitSort())}),[o,u,r,c]),{itemsView:S,setItemsView:T}=(0,Ls.t)(),[C,R]=(0,Va.j)(),A=(0,i.useMemo)((()=>((e,t,r)=>r||e!==Ls.X.GRID?Ns().flatMap((e=>e.options)).find((r=>r.itemsViewState===e&&r.compactModeState===t))??Ns()[0].options[0]:Ns()[1].options[0])(S,C,s)),[s,S,C]),I=(0,i.useCallback)((e=>{let t="",r=0;e.itemsViewState===Ls.X.LIST&&(T(Ls.X.LIST),e.compactModeState===Va.A.DEFAULT&&(t="list-default",r=s?1:2,R(Va.A.DEFAULT)),e.compactModeState===Va.A.COMPACT&&(t="list-compact",r=s?2:1,R(Va.A.COMPACT))),e.itemsViewState===Ls.X.GRID&&(T(Ls.X.GRID),e.compactModeState===Va.A.DEFAULT&&(t="grid-default",r=3,R(Va.A.DEFAULT)),e.compactModeState===Va.A.COMPACT&&(t="grid-compact",r=4,R(Va.A.COMPACT))),u.logInteraction(c.viewAsOptionFactory({identifier:t,position:r}).hitUiElementToggle())}),[s,u,T,R,c]);return(0,w.jsx)(As,{isInterestedInBeingShown:m,itemKey:$.YLX_CUSTOM_ORDERING,priority:ee.CONTEXTUAL,placement:"right",content:(0,w.jsx)(ws,{onClose:f,children:(0,w.jsx)(we.E,{as:"p",dangerouslySetInnerHTML:{__html:x.Ru.get("web-player.your-library-x.custom-ordering-onboarding-text")}})}),children:(0,w.jsx)(Ol.b,{menu:(0,w.jsx)(Ks,{selectedSort:b,selectedView:{itemsViewState:A.itemsViewState,compactModeState:A.compactModeState},sortOptions:e.map((({id:e,name:t})=>({key:e,value:t}))),onSortSelect:v,onViewSelect:I,spec:c,id:"sort-and-view-picker"}),placement:"bottom-end",children:(0,w.jsx)(ke.H,{"aria-label":x.Ru.get("web-player.your-library-x.sort-and-view-picker.button-aria-label",b.value,A.fullName),onClick:p,size:"small",iconTrailing:A.icon,ref:y,role:"combobox","aria-controls":"sort-and-view-picker",children:(0,w.jsx)(we.E,{variant:"bodySmall",className:Hs,"data-sortbox-label":!0,children:b.value})})})})};var Zs=r(13706),qs=r(48403),Js=r(60765),Qs=r(17013);const $s=({clearOnEscapeInElementRef:e,primaryFilter:t,spec:r})=>{const n=(0,zt.f)(),a=(0,P.s)(),l=function(e){switch(e){case Pr.c.ALBUM:return x.Ru.get("web-player.your-library-x.text-filter.albums-placeholder");case Pr.c.ARTIST:return x.Ru.get("web-player.your-library-x.text-filter.artists-placeholder");case Pr.c.AUTHOR:return x.Ru.get("web-player.your-library-x.text-filter.authors-placeholder");case Pr.c.PLAYLIST:return x.Ru.get("web-player.your-library-x.text-filter.playlists-placeholder");case Pr.c.SHOW:return x.Ru.get("web-player.your-library-x.text-filter.shows-placeholder");case Pr.c.AUDIOBOOK:return x.Ru.get("web-player.your-library-x.text-filter.audiobooks-placeholder");case"downloaded":return x.Ru.get("web-player.your-library-x.text-filter.downloaded-placeholder");case Pr.c.CONCERT:return x.Ru.get("web-player.your-library-x.text-filter.events-placeholder");case void 0:return x.Ru.get("web-player.your-library-x.text-filter.generic-placeholder");default:return void(0,wr.k)(e)}}(t),s=(0,i.useCallback)((()=>(a.logInteraction(r.searchButtonFactory().hitUiReveal()),!0)),[a,r]),o=(0,i.useCallback)((()=>(a.logInteraction(r.textFilterFactory().keyStrokeClearFilter()),!0)),[a,r]);return(0,w.jsx)(Zs.S,{placeholder:l,clearOnEscapeInElementRef:e,debounceFilterChangeTimeout:n?.getCapabilities().canTextFilterContentsInRealtime?0:void 0,expandDirection:"right",onActivate:s,onClear:o,useExpandCallback:e=>{(0,Qs.f)((0,Js.p)(qs.r.FOCUS_YLX_TEXT_FILTER),e)}})};var eo=r(48975);var to=r(13112);var ro=r(7027);function io(){const[e,t]=(0,i.useState)(null);if((0,An.l)(Rn.UV.UPDATE_PIN_ERROR,(e=>{t(e.data)})),void 0===e?.reason)return null;switch(e.reason){case Rn.uL.TOO_MANY_PINS:return(0,w.jsx)(ro.x,{animated:!0,headingMessage:x.Ru.get("web-player.your-library-x.pin-error.title"),message:x.Ru.get("web-player.your-library-x.pin-error.message",e.maximumPinnedItems),buttonLabel:x.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});case Rn.uL.NO_PIN_IN_FOLDER:return(0,w.jsx)(ro.x,{animated:!0,headingMessage:x.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.title"),message:x.Ru.get("web-player.your-library-x.pin-error.no-pin-in-folder.message"),buttonLabel:x.Ru.get("web-player.your-library-x.pin-error.ok"),isOpen:!0,onDismissDialog:()=>t(null)});default:return(0,wr.k)(e),null}}var no=r(46636),ao=r(13867);var lo=r(10521),so=r(21218),oo=r(50992),co=r(23076),uo=r(48989);var po=r(20196),go=r(27775);const yo={[Rn.Ir.ALBUMS]:Pr.c.ALBUM,[Rn.Ir.ARTISTS]:Pr.c.ARTIST,[Rn.Ir.AUTHORS]:Pr.c.AUTHOR,[Rn.Ir.BOOKS]:Pr.c.AUDIOBOOK,[Rn.Ir.EPISODES]:Pr.c.EPISODE,[Rn.Ir.SHOWS]:Pr.c.SHOW,[Rn.Ir.TRACKS]:Pr.c.TRACK,[Rn.Ir.EVENTS]:Pr.c.CONCERT};function mo(e,t,r){const n=(0,i.useCallback)((({data:{list:t}})=>{fo(e,yo[t])&&r()}),[e,r]);(0,An.l)(Rn.UV.UPDATE,n),(0,An.l)(Rn.UV.UPDATE_PIN,r);const a=(0,i.useCallback)((()=>{fo(e,Pr.c.PLAYLIST)&&r()}),[e,r]);(0,jn.L)(a),function(e){((e,t,r,n,a)=>{const l=(0,uo.x)(),s=(0,i.useRef)(r),o=(0,i.useRef)(),c=(0,i.useRef)();o.current=n,c.current=a,(0,i.useEffect)((()=>{const r={ident:e,isPrefix:t,onMessage:e=>s.current(e),onSubscribe:async e=>await(o.current?.(e)),onCancel:async e=>await(c.current?.(e))},i=l.subscribe(r);return()=>{i.cancel()}}),[e,t,l])})("hm://collection/ylpin/",!0,e)}(r),function(e){const t=(0,co.A)(),r=t.getEvents();(0,i.useEffect)((()=>r.addListener(oo.T.UPDATE,e)),[t,r,e])}(r),function(e){const t=(0,so.l)().getEvents();(0,i.useEffect)((()=>{const r=({data:{set:t}})=>{"prerelease"===t&&e()};return t.addListener(lo.ar.ADDED,r),t.addListener(lo.ar.REMOVED,r),()=>{t.removeListener(lo.ar.ADDED,r),t.removeListener(lo.ar.REMOVED,r)}}),[e,t])}(r),function(e,t){const r=(0,zt.f)(),n=(0,po.j)();(0,i.useEffect)((()=>e===r.getRecentsSortOrderId()?n.getEvents().addListener(go.m5.UPDATE,(()=>{t()})):()=>{}),[t,r,e,n])}(t,r)}function fo(e,t){switch(e){case Pr.c.ALBUM:case Pr.c.ARTIST:case Pr.c.AUDIOBOOK:case Pr.c.SHOW:case Pr.c.AUTHOR:return e===t;case Pr.c.PLAYLIST:switch(t){case Pr.c.TRACK:case Pr.c.PLAYLIST:case Pr.c.EPISODE:return!0;default:return!1}default:return!0}}var xo=r(8903),ho=r(49011),bo=r(77907),vo=r(16026),So=r(1245),Po=r(32824);const wo="Vf3ww2_My5QuwUnbpzhu";var To=r(88729);const Co=()=>{const{typeaheadResult:{str:e}}=(0,i.useContext)(zr);return e?(0,w.jsx)(To.qb,{className:wo,children:e}):null};var Ro=r(39876);const Ao="hgJel0bLlS_1Uf0EIfSA",Io="uBqliBvyhxGsiql8_OJv",Do="iwhVJuPipY1lrQIjaA1k",jo="WxM1eb7qnneSkMiT4dvw",Oo="_W_0W9Uld1vxrRfsgdQR",Eo="sikBfynL1Y6I25nVpbAg",Lo="KwShd3RdVrsX6dGLJNxT",ko="qOtD4rsRpIMhQLCjJ4K3",No="oEDH8yMQOKQNoX7LWjwt",Fo="RHRitk6QC3rvuG24RAdj",Mo="paiZmlAHHhmZonuGJRAr",Bo={items:[],totalLength:0},Uo=()=>{const{isAnonymous:e}=(0,s.d4)((e=>e.session)),{filter:t}=(0,i.useContext)(Q.g),[r,n]=(0,i.useState)(null),{refinersPickedByUserRef:y,selectedRefinerIds:m,resetRefinerIds:f,resetAndToggleRootRefiner:x,toggleRefinerId:h}=function(e){const{openedFolderUri:t=cr,change:r,resetFolder:n}=(0,i.useContext)(dr),a=(0,i.useRef)(t),[l,s]=(0,be.x)("ylx-active-filter-ids",{[t]:[]}),o=(0,i.useRef)(!0),d=(0,c.U0)(((r,i=!0)=>{const n=new Set(e);n.has(r)?n.delete(r):n.add(r),o.current=i,s({...l,[t]:Array.from(n)})}),[e,s,t]),u=(0,i.useCallback)((()=>s({...l,[t]:[]})),[t,l,s]),p=(0,i.useCallback)((e=>{t&&n(),s({...l,[cr]:e?[e]:[]})}),[t,n,l,s]);return(0,i.useLayoutEffect)((()=>{t!==a.current&&t!==cr&&"PUSH"===r&&s({...l,[t]:l[a.current]}),a.current=t}),[r,t,l,s]),{refinersPickedByUserRef:o,selectedRefinerIds:l[t],resetRefinerIds:u,resetAndToggleRootRefiner:p,toggleRefinerId:d}}(r?.selectedFilters?.map((e=>e.id))??[]),b=m?.[0],{selectedSortOrderId:v,setSelectedSortOrderId:S}=function(e){const t=(0,zt.f)().getContentsPrimaryFilterId(Pr.c.PLAYLIST),{openedFolderUri:r=""}=(0,i.useContext)(dr),[n,a]=(0,be.x)("ylx-active-sort-order-by-filter-id",{}),l=`${r&&t?t:e}`;return{selectedSortOrderId:n[l],setSelectedSortOrderId:(0,i.useCallback)((e=>{a({...n,[l]:e})}),[l,n,a])}}(b),T=(0,i.useRef)(null),C=(0,i.useRef)(null),A=(0,i.useRef)(null),{expandedFolders:E}=function(){const e=(0,i.useContext)(gt);if(!e)throw new Error("useExpandedFolders must be used within a ExpandedFoldersProvider");return e}(),{openedFolderUri:F,resetFolder:M}=(0,i.useContext)(dr),B=(0,xo.p)(),U=(0,So.P)(),V=(0,zt.f)(),_=(0,ii.g)(),H=(0,bo.I)(),z=Se(),W=ni(),[Y,K]=(0,i.useState)(!1),{isCollapsed:G,isExpanded:Z,setYlxSidebarState:q}=(0,Me.$)();(e=>{const t=(0,zt.f)(),{isCollapsed:r,setYlxSidebarState:n,lastUncollapsedYlxSidebarState:a}=(0,Me.$)(),l=(0,ao.W)(),s=(0,i.useCallback)((()=>{const e=r?a:Me.fX.COLLAPSED;n(e)}),[r,a,n]),o=(0,i.useCallback)((()=>{e(null),r&&n(a)}),[r,a,e,n]),c=(0,i.useCallback)((i=>()=>{e(t.getContentsPrimaryFilterId(i)),r&&n(a)}),[r,a,t,e,n]),d=c(Pr.c.PLAYLIST),u=c(Pr.c.SHOW),p=c(Pr.c.ARTIST),g=c(Pr.c.ALBUM),y=c(Pr.c.AUDIOBOOK);(0,no.N)(l?(0,Js.p)(qs.r.TOGGLE_NPV_SIDEBAR):(0,Js.p)(qs.r.TOGGLE_YLX_SIDEBAR),s),(0,no.N)((0,Js.p)(qs.r.GO_TO_LIBRARY),o),(0,no.N)((0,Js.p)(qs.r.GO_TO_PLAYLISTS),d),(0,no.N)((0,Js.p)(qs.r.GO_TO_PODCASTS),u),(0,no.N)((0,Js.p)(qs.r.GO_TO_ARTISTS),p),(0,no.N)((0,Js.p)(qs.r.GO_TO_ALBUMS),g),(0,no.N)((0,Js.p)(qs.r.GO_TO_AUDIOBOOKS),y)})(x);const{isGridView:$}=(0,Ls.t)(),[ee]=(0,Va.j)(),te=ee===Va.A.COMPACT,{spec:re,UBIFragment:ie}=(0,Ue.r)(u.j,{data:{identifier:"yourlibraryx"}});let ne;G?ne="collapsed":$?(te&&(ne=Z?"expanded_compact_grid":"compact_grid"),ne=Z?"expanded_default_grid":"default_grid"):ne=te?Z?"expanded_compact_list":"compact_list":Z?"expanded_default_list":"default_list";const ae=(0,i.useMemo)((()=>re.sidebarFactory({uri:F??cr,identifier:ne})),[re,F,ne]),le=(0,Ro.t)(ae),se=(0,i.useMemo)((()=>ae.headerFactory()),[ae]),oe=(0,i.useMemo)((()=>se.filtersFactory()),[se]),ce=(0,i.useMemo)((()=>se.searchBarFactory()),[se]),ue=(0,i.useMemo)((()=>ae.listFactory()),[ae]),me=(0,P.s)();!function(e=[],t=[],r){const n=(0,eo.n)(),a=(0,zt.f)().getContentsPrimaryFilterId("downloaded"),l=(0,i.useRef)(e);l.current=e;const s=(0,i.useRef)(t);s.current=t;const o=(0,i.useRef)(r);o.current=r;const d=(0,i.useRef)(!1);(0,i.useEffect)((()=>{if(!a)return;const e=s.current.includes(a),t=l.current.includes(a),r=s.current.length>1,i=!n&&!r&&!e&&t,c=n&&e&&d.current;(i||c)&&(i&&(d.current=!0),o.current(a,!1))}),[a,n]);const u=(0,i.useRef)(t);(0,c.Ij)((()=>{a&&(t.includes(a)&&!u.current.includes(a)&&d.current||(d.current=!1),u.current=t)}),[a,t])}(r?.availableFilters?.map((e=>e.id)),r?.selectedFilters?.map((e=>e.id)),h);const{handleDropOnFolder:fe,unpinConfirmationDialog:xe}=Tn(ue,F),{dropOriginIsYLX:he,entityIsInFolder:Pe}=ri(),{setDraggingIsInProgress:we}=(0,i.useContext)(k.O_);(0,N.g)(T);const Te=F?tr:er,Ce=Pe&&!r?.reorderAllowed?[D.fl.PLAYLISTS_V2,D.fl.FOLDERS]:[],{dropPosition:Re,className:Ae,...Ie}=(0,O.A)({allowedMimeTypesByDropPosition:{[j.Nz.ON]:he?Ce:Te},onDrop:(0,i.useCallback)((async e=>{if(F)fe(e);else{const{[D.fl.TRACKS]:t=[],[D.fl.LOCAL_TRACKS]:r=[],[D.fl.ALBUMS]:i,[D.fl.ARTISTS]:n,[D.fl.AUTHORS]:a,[D.fl.EPISODES]:l,[D.fl.SHOWS]:s,[D.fl.PLAYLISTS_V2]:o=[],[D.fl.FOLDERS]:c,[D.fl.AUDIOBOOKS]:d}=e,u=[...t,...r];u.length&&(V?.add({uris:u}),me.logInteraction(ue.dragCreatePlaylist())),i?.length&&(V?.add({uris:i}),me.logInteraction(ue.dragLike({itemToBeLiked:i.at(0)??""}))),n?.length&&(V?.add({uris:n}),me.logInteraction(ue.dragLike({itemToBeLiked:n.at(0)??""}))),a?.length&&(V?.add({uris:a}),me.logInteraction(ue.dragLike({itemToBeLiked:a.at(0)??""}))),l?.length&&(V?.add({uris:l}),me.logInteraction(ue.dragLike({itemToBeLiked:l.at(0)??""}))),s?.length&&(V?.add({uris:s}),me.logInteraction(ue.dragLike({itemToBeLiked:s.at(0)??""}))),d?.length&&(V?.add({uris:d}),me.logInteraction(ue.dragLike({itemToBeLiked:d.at(0)??""}))),o.length&&(W(o,{before:"start"}),he?me.logInteraction(ue.dragSort()):me.logInteraction(ue.dragLike({itemToBeLiked:o.at(0)??""}))),c?.length&&(_.moveFolder({uri:c[0]},{before:"start"}),me.logInteraction(ue.dragSort()))}}),[F,fe,V,me,ue,W,he,_]),onLongDragOver:(0,i.useCallback)((()=>{G&&q(Me.fX.DEFAULT)}),[G,q])}),De=(0,d.NC)(X.lDH),je=(0,i.useMemo)((()=>({filters:m,sortOrder:v,textFilter:t,includeLocalFiles:U,includeYourEpisodes:!0,includeLikedSongs:!0,includePreReleases:De,expandedFolders:G||$?[]:E,filtersPickedByUser:y.current,folderUri:F})),[m,v,t,U,De,G,$,E,y,F]),Oe=(0,i.useCallback)((async(e,t)=>{try{const r=await V.getContents({offset:e,limit:t,...je}),{offset:i,limit:a,items:s,...o}=r;return K(!1),{fetchedId:je.folderUri,onCacheSuccess:()=>{n((e=>(0,l.j)(o,e)?e:o))},...r}}catch(e){return e instanceof R.c_?(f(),Bo):e instanceof R.IU?(S(void 0),Bo):e instanceof R.db?(M(),Bo):((0,Po.UD)(e),K(!0),Bo)}}),[V,je,f,S,M]),Ee=!1===r?.hasUnfilteredItems,Le=r?.hasTextFilter&&0===r.totalLength&&""!==t,{setFilter:ke}=(0,i.useContext)(Q.g);(0,i.useEffect)((()=>{Le&&G&&ke("")}),[Le,G,ke]);const Ne=0===r?.totalLength&&r.selectedFilters.length>0&&!r.passedFolderUri&&!r.hasTextFilter;(0,c.Ij)((()=>{const e=r?.selectedFilters.at(-1);Ne&&e&&h(e.id,!1)}),[Ne,r?.selectedFilters]);const Fe=V?.getCapabilities().canFetchAllItems,{fetchedId:Be,getItems:Ve,nrValidItems:_e,invalidateCache:He}=(0,vo.E)({nrItems:50,fetch:Oe,limit:50,cacheAllOnInvalidation:Fe,cacheAllLimit:5e4}),We=(0,o.YQ)(He,200,{leading:!0,trailing:!0,maxWait:1e3});mo(r?.primaryFilter,r?.selectedSortOrder.id,We);const Ye=!F&&!Be||F===Be;((e,t="")=>{const r=(0,i.useRef)({});(0,i.useLayoutEffect)((()=>{if(!e.current)return()=>{};const i=e.current,n=r.current[t];i.scrollTop=n??0;const a=()=>{r.current[t]=i.scrollTop};return i?.addEventListener("scroll",a),()=>{i?.removeEventListener("scroll",a)}}),[e,t])})(T,Be);const Ke=(0,i.useCallback)((()=>{He(),K(!1)}),[He]),Ge=(0,ho.y)(T),Ze=!!r?.openedFolderName,qe=(0,d.NC)(X._p8,{loadingValue:!1})&&Fe,Je=function(e,t,r){const{isGridView:n}=(0,Ls.t)(),a=us();return(0,i.useCallback)((async i=>{let l=a,s=1;if(n){const t=e.current?.querySelector('li[role="row"]');l=t?.getBoundingClientRect().height??0,t?.parentElement&&(s=getComputedStyle(t.parentElement).getPropertyValue("grid-template-columns").split(" ").length)}if(!l)return null;const o=r(0,5e4,{cachedOnly:!0}),c=o.find((e=>e?.name&&(0,to.u)(i,e.name))),d=c?o.indexOf(c):-1;return-1!==d&&t.current&&function(e,t,r,i){if(!e)return;const{scrollTop:n,offsetHeight:a}=e,l=t&&e?t.getBoundingClientRect().top+n-e.getBoundingClientRect().top:0;if(l+r<n||l+r+i>n+a){const t=r-a/2+l+i/2;e.scrollTop=t}}(t.current,e.current,Math.floor(d/s)*l,l),c?.uri??null}),[e,t,a,r,n])}(A,T,Ve),Qe=Y?(0,w.jsx)(pt,{onClick:Ke}):null;let $e;(0,i.useEffect)((()=>{Y&&G&&q(Me.fX.DEFAULT)}),[Y,G,q]),(Ee&&!G||e)&&($e=Ze?(0,w.jsx)(Xe,{className:Ae}):(0,w.jsx)(it,{className:Ae}));const et=Le?(0,w.jsx)(ot,{query:t,className:Ae}):null,tt=!G&&!$e&&(0,w.jsxs)("div",{className:a()(Io,Ae,Do),children:[(0,w.jsx)($s,{clearOnEscapeInElementRef:C,primaryFilter:r?.primaryFilter,spec:ce},F),(0,w.jsx)(Gs,{sortOrders:r?.availableSortOrders??[],activeSortOrderId:r?.selectedSortOrder?.id,setActiveSortOrderId:S,showReorderingOnboarding:r?.primaryFilter===Pr.c.PLAYLIST&&!r?.reorderAllowed,headerSpec:se,scrollNodeRef:T})]}),rt=Y&&!r,nt=Z&&!$&&!Qe&&!$e,at=(r?.selectedFilters??[]).length>0,lt=z&&!at&&!F&&!Ee,{cheetaraOnboardingIsActive:st,setCheetaraOnboardingIsActive:ct,cheetaraOnboardingDismissed:dt,setCheetaraOnboardingDismissed:ut,handleCloseCheetaraOnboarding:yt}=ve(),mt=!G&&z&&!Y&&!dt&&!r?.passedFolderUri&&!!r?.availableFilters?.length&&!r?.selectedFilters?.length;return(0,w.jsx)(Wr,{containerRef:C,findMatchingTypeaheadUid:Je,isEnabled:qe,children:(0,w.jsxs)(ie,{spec:re,children:[(0,w.jsx)(J,{}),st&&(0,w.jsx)(ge,{onClose:yt}),(0,w.jsx)(g.h,{menu:(0,w.jsx)(I,{folderUri:F}),children:(0,w.jsxs)("div",{className:a()(Ao,"YourLibraryX",{[Wt]:Re===j.Nz.ON,[Eo]:G,[No]:st}),style:{"--placeholder-image":`url(${(0,p.b)(H?"images/ylx-row-placeholder.webp":"images/ylx-row-placeholder.png")})`,"--placeholder-artist-image":`url(${(0,p.b)(H?"images/ylx-artist-row-placeholder.webp":"images/ylx-artist-row-placeholder.png")})`,"--placeholder-compact-image":`url(${(0,p.b)(H?"images/ylx-compact-row-placeholder.webp":"images/ylx-compact-row-placeholder.png")})`},ref:e=>{C.current=e,le(e)},...Ie,tabIndex:-1,onDragStart:()=>we(!0),onDragEnd:()=>we(!1),children:[xe,(0,w.jsxs)("div",{className:a()({[Fo]:Ge}),children:[(0,w.jsx)($l,{parentDropTargetClassName:Ae,isLibraryCompletelyEmpty:Ee,folderUri:r?.passedFolderUri,folderName:r?.openedFolderName,spec:se.titleRowFactory(),openedFolderIsPlayable:r?.openedFolderIsPlayable}),!B&&(0,w.jsx)(ie,{spec:se,children:(0,w.jsx)(ze,{})}),!G&&!rt&&(0,w.jsxs)("div",{className:Mo,children:[lt&&(0,w.jsx)(i.Suspense,{fallback:null,children:(0,w.jsx)(ye,{})}),(0,w.jsx)(sr,{selectedFilters:r?.selectedFilters,availableFilters:r?.availableFilters,toggleFilterId:h,resetFilterIds:f,className:a()({[ko]:!Ye}),scrollNodeRef:T,spec:oe,inFolderView:!!r?.passedFolderUri},Be),Z&&tt]}),mt&&Z&&(0,w.jsx)(i.Suspense,{fallback:null,children:(0,w.jsx)(pe,{ylxIsExpanded:Z,setCheetaraOnboardingIsActive:ct,onHide:()=>ut(!0)})}),nt&&(0,w.jsx)(Mt,{isScrolled:Ge})]}),(0,w.jsx)(L.a,{className:jo,scrollNodeRef:T,children:(0,w.jsxs)("div",{className:a()(Oo,{[ko]:!Y&&!Ye,[Eo]:G,[Lo]:nt}),children:[mt&&!Z&&(0,w.jsx)(i.Suspense,{fallback:null,children:(0,w.jsx)(pe,{ylxIsExpanded:Z,setCheetaraOnboardingIsActive:ct,onHide:()=>ut(!0)})}),!Z&&tt,!G&&r?.tagPlaylist&&(0,w.jsx)(i.Suspense,{fallback:null,children:(0,w.jsx)(de,{playlist:r.tagPlaylist})}),Qe||$e||et,(0,w.jsx)("div",{ref:A,children:$?(0,w.jsx)(Za,{getItems:Ve,scrollNodeRef:T,primaryFilter:r?.primaryFilter,nrValidItems:_e,spec:ue}):(0,w.jsx)(ys,{getItems:Ve,scrollNodeRef:T,primaryFilter:r?.primaryFilter,nrValidItems:_e,spec:ue})})]})}),io(),(0,w.jsx)(Co,{})]})})]})})},Vo=()=>{const{isAnonymous:e}=(0,s.d4)((e=>e.session)),t=(0,s.d4)((e=>e.ui.editRefinersModal)),r=Se();return(0,w.jsx)(E.s,{onError:e=>{(0,Po.Jy)(e,"YourLibraryX")},children:(0,w.jsx)(Q.s,{uri:R.gv,children:(0,w.jsx)(yt,{children:(0,w.jsxs)(ur,{children:[(0,w.jsx)(ce,{children:(0,w.jsx)(he,{children:(0,w.jsxs)(le,{children:[(0,w.jsx)(Uo,{}),r&&t.isOpen&&(0,w.jsx)(i.Suspense,{fallback:null,children:(0,w.jsx)(ue,{})})]})})}),(0,w.jsx)(Ee,{isAnonymous:e})]})})})})}},49011:(e,t,r)=>{r.d(t,{y:()=>a});var i=r(30758);function n(e){return!!e.current?.scrollTop}function a(e){const[t,r]=(0,i.useState)((()=>n(e)));return(0,i.useEffect)((()=>{const t=e.current;if(!t)return()=>{};const i=()=>{r(n(e))};return t.addEventListener("scroll",i,{passive:!0}),()=>{t.removeEventListener("scroll",i)}}),[e]),t}},77907:(e,t,r)=>{r.d(t,{I:()=>n});var i=r(26906);function n(){const{isWebPSupported:e}=(0,i.mv)();return e}},17013:(e,t,r)=>{r.d(t,{f:()=>s});var i=r(30758),n=r(73075),a=r.n(n);const l=new Map;function s(e,t){const r=function(e){const t=l.get(e.toString());if(t)return t;const r=[];return a().bind(e,(()=>r.forEach((e=>e())))),l.set(e.toString(),r),r}(e);(0,i.useEffect)((()=>(r.push(t),()=>{r.splice(r.indexOf(t),1)})),[r,t])}},16026:(e,t,r)=>{r.d(t,{E:()=>s});var i=r(30758);const n=(e,t=0,r={items:[],invalid:!0,id:0})=>({fetchedId:e.fetchedId,items:Array.from({length:e.totalLength}).map(((i,n)=>{const a=r.invalid?void 0:r.items[n]?.value;return{value:n-t in e.items?e.items[n-t]:a,index:n}})),invalid:!1,id:r.id}),a=e=>e.filter((e=>null!==e.value)),l=e=>{e.invalid=!0,e.id++};function s({initialItems:e,nrItems:t,fetch:r,limit:s=0,cacheAllOnInvalidation:o=!1,cacheAllLimit:c=t}){const d=(0,i.useRef)(!1),u=(0,i.useRef)(n({totalLength:t,items:e??[]})),p=(0,i.useRef)(!0),[,g]=(0,i.useState)(0);(0,i.useMemo)((()=>{p.current||l(u.current)}),[r,t]),(0,i.useMemo)((()=>{0===e?.length||p.current||l(u.current)}),[e]);const y=(0,i.useCallback)((async(i,a=s,l=!0,o=!1)=>{if(d.current&&!o&&!u.current.invalid)return;const c=u.current.id;if(r){const e=u.current.invalid;u.current.invalid=!1,d.current=!0;const t=await r(i,a);if(d.current=!1,c!==u.current.id)return;if(0===t.items.length&&0!==t.totalLength&&t.totalLength===u.current.items.length)return;u.current=n(t,i,{...u.current,invalid:e}),t.onCacheSuccess?.(),l&&g((e=>e+1))}else u.current=n({totalLength:t,items:e??[]}),l&&t<=(e?.length??0)&&setTimeout((()=>g((e=>e+1))),0)}),[r,e,s,t]),m=(0,i.useCallback)(((e,t,r)=>{const i=a(u.current.items).slice(e,t+1),n=i.filter((e=>u.current.invalid||void 0===e.value)),l=n.at(0)?.index??(u.current.invalid?e:void 0),o=n.at(-1)?.index??(u.current.invalid?t:void 0);return void 0===l||void 0===o||r?.cachedOnly||y(o===t?l:l===e?Math.max(o-s+1,0):l),i.map((e=>e.value))}),[y,s]),f=(0,i.useCallback)(((e,t)=>{const r=a(u.current.items),i=!u.current.invalid&&void 0!==r.at(e)?.value,n=!u.current.invalid&&void 0!==r.at(e+1)?.value;return i||t?.cachedOnly||y(n?Math.max(e-s+1,0):e),r.at(e)?.value}),[y,s]),x=(0,i.useRef)(!1),h=(0,i.useRef)(!1),b=(0,i.useCallback)((async(e=!1)=>{h.current||(x.current?h.current=!0:(x.current=!0,await y(0,c,e,!0),h.current&&await y(0,c,e,!0),h.current=!1,x.current=!1))}),[c,y]);(0,i.useEffect)((()=>{let e;return o&&(e=setTimeout(b,1e3)),()=>{clearTimeout(e)}}),[b,o]);const v=(0,i.useCallback)((()=>{o?b(!0):(l(u.current),g((e=>e+1)))}),[b,o]);p.current=!1;let S=a(u.current.items).length;return u.current.invalid&&0===S&&(S=t>0?1:0),{fetchedId:u.current.fetchedId,getItems:m,getItem:f,invalidateCache:v,hasItems:a(u.current.items).some((e=>!!e.value)),nrValidItems:S,cacheAll:b}}},43365:(e,t,r)=>{r.d(t,{N:()=>n});var i=r(30758);function n(e){const t=(0,i.useRef)(null);return(0,i.useEffect)((()=>{e&&("function"==typeof e?e(t.current):e.current=t.current)})),t}},88281:(e,t,r)=>{r.d(t,{x:()=>a});var i=r(1468),n=r(18308);function a(){return(0,n.N)(i.p)}},26239:(e,t,r)=>{r.d(t,{l:()=>a});var i=r(30758),n=r(36663);function a(e,t){const r=(0,n.f)(),a=(0,i.useRef)(t);(0,i.useLayoutEffect)((()=>{a.current=t})),(0,i.useEffect)((()=>r.getEvents().addListener(e,(e=>a.current(e)))),[e,r])}},1245:(e,t,r)=>{r.d(t,{P:()=>n});var i=r(2360);function n(){return(0,i.y)()[0]}},2360:(e,t,r)=>{r.d(t,{y:()=>a});var i=r(30758),n=r(23076);function a(){const e=(0,n.A)(),[t,r]=(0,i.useState)(e.getIsEnabled());(0,i.useEffect)((()=>{const t=e.subscribeIsEnabled(r);return()=>t()}),[e]);return[t,(0,i.useCallback)((t=>e.setIsEnabled(t)),[e])]}},48989:(e,t,r)=>{r.d(t,{x:()=>a});var i=r(48060),n=r(18308);function a(){return(0,n.N)(i.b)}},20196:(e,t,r)=>{r.d(t,{j:()=>a});var i=r(27775),n=r(18308);function a(){return(0,n.N)(i.X6)}},65349:(e,t,r)=>{r.d(t,{A:()=>i});const i={imageContainer:"rV3vzuPrOk04pq0xRjLV",entityImage:"GSgVaqJa8VEp5mKoIN0b",pulse:"jf7uliBDj0R3ZjKTPEg_",link:"oaKRK4WllExdXORQIlFZ",subtitleText:"NVHSG1CguVgjg5bJ64_Z",subtitle:"iKNK2nAjtbavMKjPPJtJ",titleLink:"UZYGjsTEkEen6hFQe194",icon:"cSWBDsMjkH62GXIXo6mQ",subtitleLeadingWrapper:"Gxl7UDkumVYX3WtQEnb8",eventDateOverlay:"R3l7tFFb5qhvUgVFG4W4"}}}]);